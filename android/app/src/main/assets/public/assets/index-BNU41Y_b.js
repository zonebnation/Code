const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BdSDjQ3g.js","assets/monaco-editor-Czt65t21.js","assets/monaco-editor-1GvMen2r.css"])))=>i.map(i=>d[i]);
var Vy=Object.defineProperty;var Ky=(e,t,n)=>t in e?Vy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Se=(e,t,n)=>Ky(e,typeof t!="symbol"?t+"":t,n);import{g as Ad,_ as Yr,a as Gy,c as lt,R as Jy,S as xc,b as Zy,e as po,K as Ei,d as Bl,l as Kt}from"./monaco-editor-Czt65t21.js";import{c as ma,u as Yy,a as ga,D as Qy,W as Xy}from"./yjs-editor-BTk7rBuk.js";import{registerPlugin as Vf,Capacitor as ex}from"@capacitor/core";function tx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Kf={exports:{}},Qa={},Gf={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pi=Symbol.for("react.element"),nx=Symbol.for("react.portal"),rx=Symbol.for("react.fragment"),sx=Symbol.for("react.strict_mode"),ox=Symbol.for("react.profiler"),ix=Symbol.for("react.provider"),ax=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),cx=Symbol.for("react.suspense"),dx=Symbol.for("react.memo"),ux=Symbol.for("react.lazy"),Ju=Symbol.iterator;function hx(e){return e===null||typeof e!="object"?null:(e=Ju&&e[Ju]||e["@@iterator"],typeof e=="function"?e:null)}var Jf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zf=Object.assign,Yf={};function Xs(e,t,n){this.props=e,this.context=t,this.refs=Yf,this.updater=n||Jf}Xs.prototype.isReactComponent={};Xs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Xs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qf(){}Qf.prototype=Xs.prototype;function Pd(e,t,n){this.props=e,this.context=t,this.refs=Yf,this.updater=n||Jf}var Rd=Pd.prototype=new Qf;Rd.constructor=Pd;Zf(Rd,Xs.prototype);Rd.isPureReactComponent=!0;var Zu=Array.isArray,Xf=Object.prototype.hasOwnProperty,Fd={current:null},ep={key:!0,ref:!0,__self:!0,__source:!0};function tp(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Xf.call(t,r)&&!ep.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:pi,type:e,key:i,ref:a,props:s,_owner:Fd.current}}function fx(e,t){return{$$typeof:pi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bd(e){return typeof e=="object"&&e!==null&&e.$$typeof===pi}function px(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Yu=/\/+/g;function Ol(e,t){return typeof e=="object"&&e!==null&&e.key!=null?px(""+e.key):t.toString(36)}function na(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case pi:case nx:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Ol(a,0):r,Zu(s)?(n="",e!=null&&(n=e.replace(Yu,"$&/")+"/"),na(s,t,n,"",function(d){return d})):s!=null&&(Bd(s)&&(s=fx(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Yu,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Zu(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ol(i,l);a+=na(i,t,n,c,s)}else if(c=hx(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ol(i,l++),a+=na(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Ni(e,t,n){if(e==null)return e;var r=[],s=0;return na(e,r,"","",function(i){return t.call(n,i,s++)}),r}function mx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Rt={current:null},ra={transition:null},gx={ReactCurrentDispatcher:Rt,ReactCurrentBatchConfig:ra,ReactCurrentOwner:Fd};function np(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Ni,forEach:function(e,t,n){Ni(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ni(e,function(){t++}),t},toArray:function(e){return Ni(e,function(t){return t})||[]},only:function(e){if(!Bd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Xs;Ie.Fragment=rx;Ie.Profiler=ox;Ie.PureComponent=Pd;Ie.StrictMode=sx;Ie.Suspense=cx;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gx;Ie.act=np;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Zf({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Fd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Xf.call(t,c)&&!ep.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:pi,type:e.type,key:s,ref:i,props:r,_owner:a}};Ie.createContext=function(e){return e={$$typeof:ax,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ix,_context:e},e.Consumer=e};Ie.createElement=tp;Ie.createFactory=function(e){var t=tp.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:lx,render:e}};Ie.isValidElement=Bd;Ie.lazy=function(e){return{$$typeof:ux,_payload:{_status:-1,_result:e},_init:mx}};Ie.memo=function(e,t){return{$$typeof:dx,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=ra.transition;ra.transition={};try{e()}finally{ra.transition=t}};Ie.unstable_act=np;Ie.useCallback=function(e,t){return Rt.current.useCallback(e,t)};Ie.useContext=function(e){return Rt.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return Rt.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return Rt.current.useEffect(e,t)};Ie.useId=function(){return Rt.current.useId()};Ie.useImperativeHandle=function(e,t,n){return Rt.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return Rt.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return Rt.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return Rt.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return Rt.current.useReducer(e,t,n)};Ie.useRef=function(e){return Rt.current.useRef(e)};Ie.useState=function(e){return Rt.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return Rt.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return Rt.current.useTransition()};Ie.version="18.3.1";Gf.exports=Ie;var _=Gf.exports;const Xa=Ad(_),yx=tx({__proto__:null,default:Xa},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx=_,vx=Symbol.for("react.element"),bx=Symbol.for("react.fragment"),_x=Object.prototype.hasOwnProperty,wx=xx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kx={key:!0,ref:!0,__self:!0,__source:!0};function rp(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)_x.call(t,r)&&!kx.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:vx,type:e,key:i,ref:a,props:s,_owner:wx.current}}Qa.Fragment=bx;Qa.jsx=rp;Qa.jsxs=rp;Kf.exports=Qa;var o=Kf.exports,vc={},sp={exports:{}},en={},op={exports:{}},ip={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,q){var re=z.length;z.push(q);e:for(;0<re;){var H=re-1>>>1,O=z[H];if(0<s(O,q))z[H]=q,z[re]=O,re=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],re=z.pop();if(re!==q){z[0]=re;e:for(var H=0,O=z.length,ie=O>>>1;H<ie;){var M=2*(H+1)-1,Y=z[M],$=M+1,fe=z[$];if(0>s(Y,re))$<O&&0>s(fe,Y)?(z[H]=fe,z[$]=re,H=$):(z[H]=Y,z[M]=re,H=M);else if($<O&&0>s(fe,re))z[H]=fe,z[$]=re,H=$;else break e}}return q}function s(z,q){var re=z.sortIndex-q.sortIndex;return re!==0?re:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=z)r(d),q.sortIndex=q.expirationTime,t(c,q);else break;q=n(d)}}function E(z){if(y=!1,x(z),!v)if(n(c)!==null)v=!0,W(k);else{var q=n(d);q!==null&&U(E,q.startTime-z)}}function k(z,q){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var re=f;try{for(x(q),h=n(c);h!==null&&(!(h.expirationTime>q)||z&&!K());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var O=H(h.expirationTime<=q);q=e.unstable_now(),typeof O=="function"?h.callback=O:h===n(c)&&r(c),x(q)}else r(c);h=n(c)}if(h!==null)var ie=!0;else{var M=n(d);M!==null&&U(E,M.startTime-q),ie=!1}return ie}finally{h=null,f=re,p=!1}}var I=!1,R=null,T=-1,B=5,P=-1;function K(){return!(e.unstable_now()-P<B)}function F(){if(R!==null){var z=e.unstable_now();P=z;var q=!0;try{q=R(!0,z)}finally{q?L():(I=!1,R=null)}}else I=!1}var L;if(typeof m=="function")L=function(){m(F)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Z=C.port2;C.port1.onmessage=F,L=function(){Z.postMessage(null)}}else L=function(){b(F,0)};function W(z){R=z,I||(I=!0,L())}function U(z,q){T=b(function(){z(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){v||p||(v=!0,W(k))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var re=f;f=q;try{return z()}finally{f=re}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var re=f;f=z;try{return q()}finally{f=re}},e.unstable_scheduleCallback=function(z,q,re){var H=e.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?H+re:H):re=H,z){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=re+O,z={id:u++,callback:q,priorityLevel:z,startTime:re,expirationTime:O,sortIndex:-1},re>H?(z.sortIndex=re,t(d,z),n(c)===null&&z===n(d)&&(y?(g(T),T=-1):y=!0,U(E,re-H))):(z.sortIndex=O,t(c,z),v||p||(v=!0,W(k))),z},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(z){var q=f;return function(){var re=f;f=q;try{return z.apply(this,arguments)}finally{f=re}}}})(ip);op.exports=ip;var Sx=op.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jx=_,Xt=Sx;function ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ap=new Set,Wo={};function os(e,t){$s(e,t),$s(e+"Capture",t)}function $s(e,t){for(Wo[e]=t,e=0;e<t.length;e++)ap.add(t[e])}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bc=Object.prototype.hasOwnProperty,Cx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qu={},Xu={};function Ex(e){return bc.call(Xu,e)?!0:bc.call(Qu,e)?!1:Cx.test(e)?Xu[e]=!0:(Qu[e]=!0,!1)}function Nx(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Tx(e,t,n,r){if(t===null||typeof t>"u"||Nx(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ft(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new Ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new Ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new Ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kt[e]=new Ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new Ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new Ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kt[e]=new Ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kt[e]=new Ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kt[e]=new Ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var Od=/[\-:]([a-z])/g;function Ld(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Od,Ld);kt[t]=new Ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Od,Ld);kt[t]=new Ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Od,Ld);kt[t]=new Ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kt[e]=new Ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function zd(e,t,n,r){var s=kt.hasOwnProperty(t)?kt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Tx(t,n,s,r)&&(n=null),r||s===null?Ex(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yn=jx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ti=Symbol.for("react.element"),xs=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),_c=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),cp=Symbol.for("react.context"),Dd=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),kc=Symbol.for("react.suspense_list"),Md=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),dp=Symbol.for("react.offscreen"),eh=Symbol.iterator;function mo(e){return e===null||typeof e!="object"?null:(e=eh&&e[eh]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,Ll;function Eo(e){if(Ll===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ll=t&&t[1]||""}return`
`+Ll+e}var zl=!1;function $l(e,t){if(!e||zl)return"";zl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{zl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Eo(e):""}function Ix(e){switch(e.tag){case 5:return Eo(e.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return e=$l(e.type,!1),e;case 11:return e=$l(e.type.render,!1),e;case 1:return e=$l(e.type,!0),e;default:return""}}function Sc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vs:return"Fragment";case xs:return"Portal";case _c:return"Profiler";case $d:return"StrictMode";case wc:return"Suspense";case kc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cp:return(e.displayName||"Context")+".Consumer";case lp:return(e._context.displayName||"Context")+".Provider";case Dd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Md:return t=e.displayName||null,t!==null?t:Sc(e.type)||"Memo";case ir:t=e._payload,e=e._init;try{return Sc(e(t))}catch{}}return null}function Ax(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sc(t);case 8:return t===$d?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function up(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Px(e){var t=up(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ii(e){e._valueTracker||(e._valueTracker=Px(e))}function hp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=up(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ya(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jc(e,t){var n=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function th(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Cr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fp(e,t){t=t.checked,t!=null&&zd(e,"checked",t,!1)}function Cc(e,t){fp(e,t);var n=Cr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ec(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ec(e,t.type,Cr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function nh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ec(e,t,n){(t!=="number"||ya(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var No=Array.isArray;function As(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Cr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Nc(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ue(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ue(92));if(No(n)){if(1<n.length)throw Error(ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Cr(n)}}function pp(e,t){var n=Cr(t.value),r=Cr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function sh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ai,gp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ai=Ai||document.createElement("div"),Ai.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ai.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rx=["Webkit","ms","Moz","O"];Object.keys(Po).forEach(function(e){Rx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Po[t]=Po[e]})});function yp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Po.hasOwnProperty(e)&&Po[e]?(""+t).trim():t+"px"}function xp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=yp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Fx=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ic(e,t){if(t){if(Fx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ue(62))}}function Ac(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=null;function Ud(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rc=null,Ps=null,Rs=null;function oh(e){if(e=yi(e)){if(typeof Rc!="function")throw Error(ue(280));var t=e.stateNode;t&&(t=sl(t),Rc(e.stateNode,e.type,t))}}function vp(e){Ps?Rs?Rs.push(e):Rs=[e]:Ps=e}function bp(){if(Ps){var e=Ps,t=Rs;if(Rs=Ps=null,oh(e),t)for(e=0;e<t.length;e++)oh(t[e])}}function _p(e,t){return e(t)}function wp(){}var Dl=!1;function kp(e,t,n){if(Dl)return e(t,n);Dl=!0;try{return _p(e,t,n)}finally{Dl=!1,(Ps!==null||Rs!==null)&&(wp(),bp())}}function Vo(e,t){var n=e.stateNode;if(n===null)return null;var r=sl(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ue(231,t,typeof n));return n}var Fc=!1;if(Vn)try{var go={};Object.defineProperty(go,"passive",{get:function(){Fc=!0}}),window.addEventListener("test",go,go),window.removeEventListener("test",go,go)}catch{Fc=!1}function Bx(e,t,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Ro=!1,xa=null,va=!1,Bc=null,Ox={onError:function(e){Ro=!0,xa=e}};function Lx(e,t,n,r,s,i,a,l,c){Ro=!1,xa=null,Bx.apply(Ox,arguments)}function zx(e,t,n,r,s,i,a,l,c){if(Lx.apply(this,arguments),Ro){if(Ro){var d=xa;Ro=!1,xa=null}else throw Error(ue(198));va||(va=!0,Bc=d)}}function is(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Sp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ih(e){if(is(e)!==e)throw Error(ue(188))}function $x(e){var t=e.alternate;if(!t){if(t=is(e),t===null)throw Error(ue(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ih(s),e;if(i===r)return ih(s),t;i=i.sibling}throw Error(ue(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(ue(189))}}if(n.alternate!==r)throw Error(ue(190))}if(n.tag!==3)throw Error(ue(188));return n.stateNode.current===n?e:t}function jp(e){return e=$x(e),e!==null?Cp(e):null}function Cp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cp(e);if(t!==null)return t;e=e.sibling}return null}var Ep=Xt.unstable_scheduleCallback,ah=Xt.unstable_cancelCallback,Dx=Xt.unstable_shouldYield,Mx=Xt.unstable_requestPaint,ct=Xt.unstable_now,Ux=Xt.unstable_getCurrentPriorityLevel,Hd=Xt.unstable_ImmediatePriority,Np=Xt.unstable_UserBlockingPriority,ba=Xt.unstable_NormalPriority,Hx=Xt.unstable_LowPriority,Tp=Xt.unstable_IdlePriority,el=null,Rn=null;function Wx(e){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(el,e,void 0,(e.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:Kx,qx=Math.log,Vx=Math.LN2;function Kx(e){return e>>>=0,e===0?32:31-(qx(e)/Vx|0)|0}var Pi=64,Ri=4194304;function To(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _a(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=To(l):(i&=a,i!==0&&(r=To(i)))}else a=n&~s,a!==0?r=To(a):i!==0&&(r=To(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bn(t),s=1<<n,r|=e[n],t&=~s;return r}function Gx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jx(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-bn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Gx(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Oc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ip(){var e=Pi;return Pi<<=1,!(Pi&4194240)&&(Pi=64),e}function Ml(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bn(t),e[t]=n}function Zx(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-bn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Wd(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Be=0;function Ap(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Pp,qd,Rp,Fp,Bp,Lc=!1,Fi=[],yr=null,xr=null,vr=null,Ko=new Map,Go=new Map,dr=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lh(e,t){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(t.pointerId)}}function yo(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=yi(t),t!==null&&qd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Qx(e,t,n,r,s){switch(t){case"focusin":return yr=yo(yr,e,t,n,r,s),!0;case"dragenter":return xr=yo(xr,e,t,n,r,s),!0;case"mouseover":return vr=yo(vr,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ko.set(i,yo(Ko.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Go.set(i,yo(Go.get(i)||null,e,t,n,r,s)),!0}return!1}function Op(e){var t=qr(e.target);if(t!==null){var n=is(t);if(n!==null){if(t=n.tag,t===13){if(t=Sp(n),t!==null){e.blockedOn=t,Bp(e.priority,function(){Rp(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pc=r,n.target.dispatchEvent(r),Pc=null}else return t=yi(n),t!==null&&qd(t),e.blockedOn=n,!1;t.shift()}return!0}function ch(e,t,n){sa(e)&&n.delete(t)}function Xx(){Lc=!1,yr!==null&&sa(yr)&&(yr=null),xr!==null&&sa(xr)&&(xr=null),vr!==null&&sa(vr)&&(vr=null),Ko.forEach(ch),Go.forEach(ch)}function xo(e,t){e.blockedOn===t&&(e.blockedOn=null,Lc||(Lc=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,Xx)))}function Jo(e){function t(s){return xo(s,e)}if(0<Fi.length){xo(Fi[0],e);for(var n=1;n<Fi.length;n++){var r=Fi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(yr!==null&&xo(yr,e),xr!==null&&xo(xr,e),vr!==null&&xo(vr,e),Ko.forEach(t),Go.forEach(t),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)Op(n),n.blockedOn===null&&dr.shift()}var Fs=Yn.ReactCurrentBatchConfig,wa=!0;function ev(e,t,n,r){var s=Be,i=Fs.transition;Fs.transition=null;try{Be=1,Vd(e,t,n,r)}finally{Be=s,Fs.transition=i}}function tv(e,t,n,r){var s=Be,i=Fs.transition;Fs.transition=null;try{Be=4,Vd(e,t,n,r)}finally{Be=s,Fs.transition=i}}function Vd(e,t,n,r){if(wa){var s=zc(e,t,n,r);if(s===null)Yl(e,t,r,ka,n),lh(e,r);else if(Qx(s,e,t,n,r))r.stopPropagation();else if(lh(e,r),t&4&&-1<Yx.indexOf(e)){for(;s!==null;){var i=yi(s);if(i!==null&&Pp(i),i=zc(e,t,n,r),i===null&&Yl(e,t,r,ka,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yl(e,t,r,null,n)}}var ka=null;function zc(e,t,n,r){if(ka=null,e=Ud(r),e=qr(e),e!==null)if(t=is(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Sp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ka=e,null}function Lp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ux()){case Hd:return 1;case Np:return 4;case ba:case Hx:return 16;case Tp:return 536870912;default:return 16}default:return 16}}var fr=null,Kd=null,oa=null;function zp(){if(oa)return oa;var e,t=Kd,n=t.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return oa=s.slice(e,1<r?1-r:void 0)}function ia(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bi(){return!0}function dh(){return!1}function tn(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bi:dh,this.isPropagationStopped=dh,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),t}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gd=tn(eo),gi=rt({},eo,{view:0,detail:0}),nv=tn(gi),Ul,Hl,vo,tl=rt({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vo&&(vo&&e.type==="mousemove"?(Ul=e.screenX-vo.screenX,Hl=e.screenY-vo.screenY):Hl=Ul=0,vo=e),Ul)},movementY:function(e){return"movementY"in e?e.movementY:Hl}}),uh=tn(tl),rv=rt({},tl,{dataTransfer:0}),sv=tn(rv),ov=rt({},gi,{relatedTarget:0}),Wl=tn(ov),iv=rt({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),av=tn(iv),lv=rt({},eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cv=tn(lv),dv=rt({},eo,{data:0}),hh=tn(dv),uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fv[e])?!!t[e]:!1}function Jd(){return pv}var mv=rt({},gi,{key:function(e){if(e.key){var t=uv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ia(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jd,charCode:function(e){return e.type==="keypress"?ia(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ia(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gv=tn(mv),yv=rt({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fh=tn(yv),xv=rt({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jd}),vv=tn(xv),bv=rt({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_v=tn(bv),wv=rt({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kv=tn(wv),Sv=[9,13,27,32],Zd=Vn&&"CompositionEvent"in window,Fo=null;Vn&&"documentMode"in document&&(Fo=document.documentMode);var jv=Vn&&"TextEvent"in window&&!Fo,$p=Vn&&(!Zd||Fo&&8<Fo&&11>=Fo),ph=" ",mh=!1;function Dp(e,t){switch(e){case"keyup":return Sv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function Cv(e,t){switch(e){case"compositionend":return Mp(t);case"keypress":return t.which!==32?null:(mh=!0,ph);case"textInput":return e=t.data,e===ph&&mh?null:e;default:return null}}function Ev(e,t){if(bs)return e==="compositionend"||!Zd&&Dp(e,t)?(e=zp(),oa=Kd=fr=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $p&&t.locale!=="ko"?null:t.data;default:return null}}var Nv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nv[e.type]:t==="textarea"}function Up(e,t,n,r){vp(r),t=Sa(t,"onChange"),0<t.length&&(n=new Gd("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bo=null,Zo=null;function Tv(e){Xp(e,0)}function nl(e){var t=ks(e);if(hp(t))return e}function Iv(e,t){if(e==="change")return t}var Hp=!1;if(Vn){var ql;if(Vn){var Vl="oninput"in document;if(!Vl){var yh=document.createElement("div");yh.setAttribute("oninput","return;"),Vl=typeof yh.oninput=="function"}ql=Vl}else ql=!1;Hp=ql&&(!document.documentMode||9<document.documentMode)}function xh(){Bo&&(Bo.detachEvent("onpropertychange",Wp),Zo=Bo=null)}function Wp(e){if(e.propertyName==="value"&&nl(Zo)){var t=[];Up(t,Zo,e,Ud(e)),kp(Tv,t)}}function Av(e,t,n){e==="focusin"?(xh(),Bo=t,Zo=n,Bo.attachEvent("onpropertychange",Wp)):e==="focusout"&&xh()}function Pv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl(Zo)}function Rv(e,t){if(e==="click")return nl(t)}function Fv(e,t){if(e==="input"||e==="change")return nl(t)}function Bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:Bv;function Yo(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bc.call(t,s)||!wn(e[s],t[s]))return!1}return!0}function vh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bh(e,t){var n=vh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vh(n)}}function qp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?qp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vp(){for(var e=window,t=ya();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ya(e.document)}return t}function Yd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ov(e){var t=Vp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&qp(n.ownerDocument.documentElement,n)){if(r!==null&&Yd(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=bh(n,i);var a=bh(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Lv=Vn&&"documentMode"in document&&11>=document.documentMode,_s=null,$c=null,Oo=null,Dc=!1;function _h(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dc||_s==null||_s!==ya(r)||(r=_s,"selectionStart"in r&&Yd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&Yo(Oo,r)||(Oo=r,r=Sa($c,"onSelect"),0<r.length&&(t=new Gd("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_s)))}function Oi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ws={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionend:Oi("Transition","TransitionEnd")},Kl={},Kp={};Vn&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete ws.animationend.animation,delete ws.animationiteration.animation,delete ws.animationstart.animation),"TransitionEvent"in window||delete ws.transitionend.transition);function rl(e){if(Kl[e])return Kl[e];if(!ws[e])return e;var t=ws[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Kp)return Kl[e]=t[n];return e}var Gp=rl("animationend"),Jp=rl("animationiteration"),Zp=rl("animationstart"),Yp=rl("transitionend"),Qp=new Map,wh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Qp.set(e,t),os(t,[e])}for(var Gl=0;Gl<wh.length;Gl++){var Jl=wh[Gl],zv=Jl.toLowerCase(),$v=Jl[0].toUpperCase()+Jl.slice(1);Ar(zv,"on"+$v)}Ar(Gp,"onAnimationEnd");Ar(Jp,"onAnimationIteration");Ar(Zp,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Yp,"onTransitionEnd");$s("onMouseEnter",["mouseout","mouseover"]);$s("onMouseLeave",["mouseout","mouseover"]);$s("onPointerEnter",["pointerout","pointerover"]);$s("onPointerLeave",["pointerout","pointerover"]);os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));os("onBeforeInput",["compositionend","keypress","textInput","paste"]);os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dv=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function kh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zx(r,t,void 0,e),e.currentTarget=null}function Xp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;kh(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;kh(s,l,d),i=c}}}if(va)throw e=Bc,va=!1,Bc=null,e}function Ve(e,t){var n=t[qc];n===void 0&&(n=t[qc]=new Set);var r=e+"__bubble";n.has(r)||(em(t,e,2,!1),n.add(r))}function Zl(e,t,n){var r=0;t&&(r|=4),em(n,e,r,t)}var Li="_reactListening"+Math.random().toString(36).slice(2);function Qo(e){if(!e[Li]){e[Li]=!0,ap.forEach(function(n){n!=="selectionchange"&&(Dv.has(n)||Zl(n,!1,e),Zl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Li]||(t[Li]=!0,Zl("selectionchange",!1,t))}}function em(e,t,n,r){switch(Lp(t)){case 1:var s=ev;break;case 4:s=tv;break;default:s=Vd}n=s.bind(null,t,n,e),s=void 0,!Fc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=qr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}kp(function(){var d=i,u=Ud(n),h=[];e:{var f=Qp.get(e);if(f!==void 0){var p=Gd,v=e;switch(e){case"keypress":if(ia(n)===0)break e;case"keydown":case"keyup":p=gv;break;case"focusin":v="focus",p=Wl;break;case"focusout":v="blur",p=Wl;break;case"beforeblur":case"afterblur":p=Wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=uh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=sv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=vv;break;case Gp:case Jp:case Zp:p=av;break;case Yp:p=_v;break;case"scroll":p=nv;break;case"wheel":p=kv;break;case"copy":case"cut":case"paste":p=cv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fh}var y=(t&4)!==0,b=!y&&e==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var m=d,x;m!==null;){x=m;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,g!==null&&(E=Vo(m,g),E!=null&&y.push(Xo(m,E,x)))),b)break;m=m.return}0<y.length&&(f=new p(f,v,null,n,u),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Pc&&(v=n.relatedTarget||n.fromElement)&&(qr(v)||v[Kn]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=d,v=v?qr(v):null,v!==null&&(b=is(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=d),p!==v)){if(y=uh,E="onMouseLeave",g="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=fh,E="onPointerLeave",g="onPointerEnter",m="pointer"),b=p==null?f:ks(p),x=v==null?f:ks(v),f=new y(E,m+"leave",p,n,u),f.target=b,f.relatedTarget=x,E=null,qr(u)===d&&(y=new y(g,m+"enter",v,n,u),y.target=x,y.relatedTarget=b,E=y),b=E,p&&v)t:{for(y=p,g=v,m=0,x=y;x;x=cs(x))m++;for(x=0,E=g;E;E=cs(E))x++;for(;0<m-x;)y=cs(y),m--;for(;0<x-m;)g=cs(g),x--;for(;m--;){if(y===g||g!==null&&y===g.alternate)break t;y=cs(y),g=cs(g)}y=null}else y=null;p!==null&&Sh(h,f,p,y,!1),v!==null&&b!==null&&Sh(h,b,v,y,!0)}}e:{if(f=d?ks(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=Iv;else if(gh(f))if(Hp)k=Fv;else{k=Pv;var I=Av}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Rv);if(k&&(k=k(e,d))){Up(h,k,n,u);break e}I&&I(e,f,d),e==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&Ec(f,"number",f.value)}switch(I=d?ks(d):window,e){case"focusin":(gh(I)||I.contentEditable==="true")&&(_s=I,$c=d,Oo=null);break;case"focusout":Oo=$c=_s=null;break;case"mousedown":Dc=!0;break;case"contextmenu":case"mouseup":case"dragend":Dc=!1,_h(h,n,u);break;case"selectionchange":if(Lv)break;case"keydown":case"keyup":_h(h,n,u)}var R;if(Zd)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else bs?Dp(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&($p&&n.locale!=="ko"&&(bs||T!=="onCompositionStart"?T==="onCompositionEnd"&&bs&&(R=zp()):(fr=u,Kd="value"in fr?fr.value:fr.textContent,bs=!0)),I=Sa(d,T),0<I.length&&(T=new hh(T,e,null,n,u),h.push({event:T,listeners:I}),R?T.data=R:(R=Mp(n),R!==null&&(T.data=R)))),(R=jv?Cv(e,n):Ev(e,n))&&(d=Sa(d,"onBeforeInput"),0<d.length&&(u=new hh("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=R))}Xp(h,t)})}function Xo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Sa(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Vo(e,n),i!=null&&r.unshift(Xo(e,i,s)),i=Vo(e,t),i!=null&&r.push(Xo(e,i,s))),e=e.return}return r}function cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sh(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Vo(n,i),c!=null&&a.unshift(Xo(n,c,l))):s||(c=Vo(n,i),c!=null&&a.push(Xo(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Mv=/\r\n?/g,Uv=/\u0000|\uFFFD/g;function jh(e){return(typeof e=="string"?e:""+e).replace(Mv,`
`).replace(Uv,"")}function zi(e,t,n){if(t=jh(t),jh(e)!==t&&n)throw Error(ue(425))}function ja(){}var Mc=null,Uc=null;function Hc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wc=typeof setTimeout=="function"?setTimeout:void 0,Hv=typeof clearTimeout=="function"?clearTimeout:void 0,Ch=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof Ch<"u"?function(e){return Ch.resolve(null).then(e).catch(qv)}:Wc;function qv(e){setTimeout(function(){throw e})}function Ql(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Jo(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Jo(t)}function br(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var to=Math.random().toString(36).slice(2),An="__reactFiber$"+to,ei="__reactProps$"+to,Kn="__reactContainer$"+to,qc="__reactEvents$"+to,Vv="__reactListeners$"+to,Kv="__reactHandles$"+to;function qr(e){var t=e[An];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Kn]||n[An]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Eh(e);e!==null;){if(n=e[An])return n;e=Eh(e)}return t}e=n,n=e.parentNode}return null}function yi(e){return e=e[An]||e[Kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ks(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ue(33))}function sl(e){return e[ei]||null}var Vc=[],Ss=-1;function Pr(e){return{current:e}}function Ge(e){0>Ss||(e.current=Vc[Ss],Vc[Ss]=null,Ss--)}function He(e,t){Ss++,Vc[Ss]=e.current,e.current=t}var Er={},Tt=Pr(Er),Ht=Pr(!1),Qr=Er;function Ds(e,t){var n=e.type.contextTypes;if(!n)return Er;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Wt(e){return e=e.childContextTypes,e!=null}function Ca(){Ge(Ht),Ge(Tt)}function Nh(e,t,n){if(Tt.current!==Er)throw Error(ue(168));He(Tt,t),He(Ht,n)}function tm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(ue(108,Ax(e)||"Unknown",s));return rt({},n,r)}function Ea(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Er,Qr=Tt.current,He(Tt,e),He(Ht,Ht.current),!0}function Th(e,t,n){var r=e.stateNode;if(!r)throw Error(ue(169));n?(e=tm(e,t,Qr),r.__reactInternalMemoizedMergedChildContext=e,Ge(Ht),Ge(Tt),He(Tt,e)):Ge(Ht),He(Ht,n)}var Mn=null,ol=!1,Xl=!1;function nm(e){Mn===null?Mn=[e]:Mn.push(e)}function Gv(e){ol=!0,nm(e)}function Rr(){if(!Xl&&Mn!==null){Xl=!0;var e=0,t=Be;try{var n=Mn;for(Be=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Mn=null,ol=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(e+1)),Ep(Hd,Rr),s}finally{Be=t,Xl=!1}}return null}var js=[],Cs=0,Na=null,Ta=0,sn=[],on=0,Xr=null,Hn=1,Wn="";function Dr(e,t){js[Cs++]=Ta,js[Cs++]=Na,Na=e,Ta=t}function rm(e,t,n){sn[on++]=Hn,sn[on++]=Wn,sn[on++]=Xr,Xr=e;var r=Hn;e=Wn;var s=32-bn(r)-1;r&=~(1<<s),n+=1;var i=32-bn(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Hn=1<<32-bn(t)+s|n<<s|r,Wn=i+e}else Hn=1<<i|n<<s|r,Wn=e}function Qd(e){e.return!==null&&(Dr(e,1),rm(e,1,0))}function Xd(e){for(;e===Na;)Na=js[--Cs],js[Cs]=null,Ta=js[--Cs],js[Cs]=null;for(;e===Xr;)Xr=sn[--on],sn[on]=null,Wn=sn[--on],sn[on]=null,Hn=sn[--on],sn[on]=null}var Qt=null,Yt=null,Qe=!1,vn=null;function sm(e,t){var n=an(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ih(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Yt=br(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Xr!==null?{id:Hn,overflow:Wn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=an(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qt=e,Yt=null,!0):!1;default:return!1}}function Kc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gc(e){if(Qe){var t=Yt;if(t){var n=t;if(!Ih(e,t)){if(Kc(e))throw Error(ue(418));t=br(n.nextSibling);var r=Qt;t&&Ih(e,t)?sm(r,n):(e.flags=e.flags&-4097|2,Qe=!1,Qt=e)}}else{if(Kc(e))throw Error(ue(418));e.flags=e.flags&-4097|2,Qe=!1,Qt=e}}}function Ah(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function $i(e){if(e!==Qt)return!1;if(!Qe)return Ah(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hc(e.type,e.memoizedProps)),t&&(t=Yt)){if(Kc(e))throw om(),Error(ue(418));for(;t;)sm(e,t),t=br(t.nextSibling)}if(Ah(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Yt=br(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Yt=null}}else Yt=Qt?br(e.stateNode.nextSibling):null;return!0}function om(){for(var e=Yt;e;)e=br(e.nextSibling)}function Ms(){Yt=Qt=null,Qe=!1}function eu(e){vn===null?vn=[e]:vn.push(e)}var Jv=Yn.ReactCurrentBatchConfig;function bo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ue(309));var r=n.stateNode}if(!r)throw Error(ue(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(ue(284));if(!n._owner)throw Error(ue(290,e))}return e}function Di(e,t){throw e=Object.prototype.toString.call(t),Error(ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ph(e){var t=e._init;return t(e._payload)}function im(e){function t(g,m){if(e){var x=g.deletions;x===null?(g.deletions=[m],g.flags|=16):x.push(m)}}function n(g,m){if(!e)return null;for(;m!==null;)t(g,m),m=m.sibling;return null}function r(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function s(g,m){return g=Sr(g,m),g.index=0,g.sibling=null,g}function i(g,m,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<m?(g.flags|=2,m):x):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,m,x,E){return m===null||m.tag!==6?(m=ic(x,g.mode,E),m.return=g,m):(m=s(m,x),m.return=g,m)}function c(g,m,x,E){var k=x.type;return k===vs?u(g,m,x.props.children,E,x.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ir&&Ph(k)===m.type)?(E=s(m,x.props),E.ref=bo(g,m,x),E.return=g,E):(E=fa(x.type,x.key,x.props,null,g.mode,E),E.ref=bo(g,m,x),E.return=g,E)}function d(g,m,x,E){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=ac(x,g.mode,E),m.return=g,m):(m=s(m,x.children||[]),m.return=g,m)}function u(g,m,x,E,k){return m===null||m.tag!==7?(m=Jr(x,g.mode,E,k),m.return=g,m):(m=s(m,x),m.return=g,m)}function h(g,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ic(""+m,g.mode,x),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ti:return x=fa(m.type,m.key,m.props,null,g.mode,x),x.ref=bo(g,null,m),x.return=g,x;case xs:return m=ac(m,g.mode,x),m.return=g,m;case ir:var E=m._init;return h(g,E(m._payload),x)}if(No(m)||mo(m))return m=Jr(m,g.mode,x,null),m.return=g,m;Di(g,m)}return null}function f(g,m,x,E){var k=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return k!==null?null:l(g,m,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ti:return x.key===k?c(g,m,x,E):null;case xs:return x.key===k?d(g,m,x,E):null;case ir:return k=x._init,f(g,m,k(x._payload),E)}if(No(x)||mo(x))return k!==null?null:u(g,m,x,E,null);Di(g,x)}return null}function p(g,m,x,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(x)||null,l(m,g,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ti:return g=g.get(E.key===null?x:E.key)||null,c(m,g,E,k);case xs:return g=g.get(E.key===null?x:E.key)||null,d(m,g,E,k);case ir:var I=E._init;return p(g,m,x,I(E._payload),k)}if(No(E)||mo(E))return g=g.get(x)||null,u(m,g,E,k,null);Di(m,E)}return null}function v(g,m,x,E){for(var k=null,I=null,R=m,T=m=0,B=null;R!==null&&T<x.length;T++){R.index>T?(B=R,R=null):B=R.sibling;var P=f(g,R,x[T],E);if(P===null){R===null&&(R=B);break}e&&R&&P.alternate===null&&t(g,R),m=i(P,m,T),I===null?k=P:I.sibling=P,I=P,R=B}if(T===x.length)return n(g,R),Qe&&Dr(g,T),k;if(R===null){for(;T<x.length;T++)R=h(g,x[T],E),R!==null&&(m=i(R,m,T),I===null?k=R:I.sibling=R,I=R);return Qe&&Dr(g,T),k}for(R=r(g,R);T<x.length;T++)B=p(R,g,T,x[T],E),B!==null&&(e&&B.alternate!==null&&R.delete(B.key===null?T:B.key),m=i(B,m,T),I===null?k=B:I.sibling=B,I=B);return e&&R.forEach(function(K){return t(g,K)}),Qe&&Dr(g,T),k}function y(g,m,x,E){var k=mo(x);if(typeof k!="function")throw Error(ue(150));if(x=k.call(x),x==null)throw Error(ue(151));for(var I=k=null,R=m,T=m=0,B=null,P=x.next();R!==null&&!P.done;T++,P=x.next()){R.index>T?(B=R,R=null):B=R.sibling;var K=f(g,R,P.value,E);if(K===null){R===null&&(R=B);break}e&&R&&K.alternate===null&&t(g,R),m=i(K,m,T),I===null?k=K:I.sibling=K,I=K,R=B}if(P.done)return n(g,R),Qe&&Dr(g,T),k;if(R===null){for(;!P.done;T++,P=x.next())P=h(g,P.value,E),P!==null&&(m=i(P,m,T),I===null?k=P:I.sibling=P,I=P);return Qe&&Dr(g,T),k}for(R=r(g,R);!P.done;T++,P=x.next())P=p(R,g,T,P.value,E),P!==null&&(e&&P.alternate!==null&&R.delete(P.key===null?T:P.key),m=i(P,m,T),I===null?k=P:I.sibling=P,I=P);return e&&R.forEach(function(F){return t(g,F)}),Qe&&Dr(g,T),k}function b(g,m,x,E){if(typeof x=="object"&&x!==null&&x.type===vs&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ti:e:{for(var k=x.key,I=m;I!==null;){if(I.key===k){if(k=x.type,k===vs){if(I.tag===7){n(g,I.sibling),m=s(I,x.props.children),m.return=g,g=m;break e}}else if(I.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ir&&Ph(k)===I.type){n(g,I.sibling),m=s(I,x.props),m.ref=bo(g,I,x),m.return=g,g=m;break e}n(g,I);break}else t(g,I);I=I.sibling}x.type===vs?(m=Jr(x.props.children,g.mode,E,x.key),m.return=g,g=m):(E=fa(x.type,x.key,x.props,null,g.mode,E),E.ref=bo(g,m,x),E.return=g,g=E)}return a(g);case xs:e:{for(I=x.key;m!==null;){if(m.key===I)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){n(g,m.sibling),m=s(m,x.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else t(g,m);m=m.sibling}m=ac(x,g.mode,E),m.return=g,g=m}return a(g);case ir:return I=x._init,b(g,m,I(x._payload),E)}if(No(x))return v(g,m,x,E);if(mo(x))return y(g,m,x,E);Di(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(n(g,m.sibling),m=s(m,x),m.return=g,g=m):(n(g,m),m=ic(x,g.mode,E),m.return=g,g=m),a(g)):n(g,m)}return b}var Us=im(!0),am=im(!1),Ia=Pr(null),Aa=null,Es=null,tu=null;function nu(){tu=Es=Aa=null}function ru(e){var t=Ia.current;Ge(Ia),e._currentValue=t}function Jc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bs(e,t){Aa=e,tu=Es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function cn(e){var t=e._currentValue;if(tu!==e)if(e={context:e,memoizedValue:t,next:null},Es===null){if(Aa===null)throw Error(ue(308));Es=e,Aa.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Vr=null;function su(e){Vr===null?Vr=[e]:Vr.push(e)}function lm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,su(t)):(n.next=s.next,s.next=n),t.interleaved=n,Gn(e,r)}function Gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ar=!1;function ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _r(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Gn(e,n)}return s=r.interleaved,s===null?(t.next=t,su(r)):(t.next=s.next,s.next=t),r.interleaved=t,Gn(e,n)}function aa(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}function Rh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pa(e,t,n,r){var s=e.updateQueue;ar=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==a&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,u=d=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,y=l;switch(f=t,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(p,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(p,h,f):v,f==null)break e;h=rt({},h,f);break e;case 2:ar=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ts|=a,e.lanes=a,e.memoizedState=h}}function Fh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ue(191,s));s.call(r)}}}var xi={},Fn=Pr(xi),ti=Pr(xi),ni=Pr(xi);function Kr(e){if(e===xi)throw Error(ue(174));return e}function iu(e,t){switch(He(ni,t),He(ti,e),He(Fn,xi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Tc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Tc(t,e)}Ge(Fn),He(Fn,t)}function Hs(){Ge(Fn),Ge(ti),Ge(ni)}function dm(e){Kr(ni.current);var t=Kr(Fn.current),n=Tc(t,e.type);t!==n&&(He(ti,e),He(Fn,n))}function au(e){ti.current===e&&(Ge(Fn),Ge(ti))}var et=Pr(0);function Ra(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ec=[];function lu(){for(var e=0;e<ec.length;e++)ec[e]._workInProgressVersionPrimary=null;ec.length=0}var la=Yn.ReactCurrentDispatcher,tc=Yn.ReactCurrentBatchConfig,es=0,tt=null,ft=null,yt=null,Fa=!1,Lo=!1,ri=0,Zv=0;function St(){throw Error(ue(321))}function cu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wn(e[n],t[n]))return!1;return!0}function du(e,t,n,r,s,i){if(es=i,tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,la.current=e===null||e.memoizedState===null?e0:t0,e=n(r,s),Lo){i=0;do{if(Lo=!1,ri=0,25<=i)throw Error(ue(301));i+=1,yt=ft=null,t.updateQueue=null,la.current=n0,e=n(r,s)}while(Lo)}if(la.current=Ba,t=ft!==null&&ft.next!==null,es=0,yt=ft=tt=null,Fa=!1,t)throw Error(ue(300));return e}function uu(){var e=ri!==0;return ri=0,e}function In(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?tt.memoizedState=yt=e:yt=yt.next=e,yt}function dn(){if(ft===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=yt===null?tt.memoizedState:yt.next;if(t!==null)yt=t,ft=e;else{if(e===null)throw Error(ue(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},yt===null?tt.memoizedState=yt=e:yt=yt.next=e}return yt}function si(e,t){return typeof t=="function"?t(e):t}function nc(e){var t=dn(),n=t.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=e;var r=ft,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var u=d.lane;if((es&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,tt.lanes|=u,ts|=u}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,wn(r,t.memoizedState)||(Mt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,tt.lanes|=i,ts|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function rc(e){var t=dn(),n=t.queue;if(n===null)throw Error(ue(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);wn(i,t.memoizedState)||(Mt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function um(){}function hm(e,t){var n=tt,r=dn(),s=t(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Mt=!0),r=r.queue,hu(mm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,oi(9,pm.bind(null,n,r,s,t),void 0,null),vt===null)throw Error(ue(349));es&30||fm(n,t,s)}return s}function fm(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tt.updateQueue,t===null?(t={lastEffect:null,stores:null},tt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pm(e,t,n,r){t.value=n,t.getSnapshot=r,gm(t)&&ym(e)}function mm(e,t,n){return n(function(){gm(t)&&ym(e)})}function gm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wn(e,n)}catch{return!0}}function ym(e){var t=Gn(e,1);t!==null&&_n(t,e,1,-1)}function Bh(e){var t=In();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:e},t.queue=e,e=e.dispatch=Xv.bind(null,tt,e),[t.memoizedState,e]}function oi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=tt.updateQueue,t===null?(t={lastEffect:null,stores:null},tt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function xm(){return dn().memoizedState}function ca(e,t,n,r){var s=In();tt.flags|=e,s.memoizedState=oi(1|t,n,void 0,r===void 0?null:r)}function il(e,t,n,r){var s=dn();r=r===void 0?null:r;var i=void 0;if(ft!==null){var a=ft.memoizedState;if(i=a.destroy,r!==null&&cu(r,a.deps)){s.memoizedState=oi(t,n,i,r);return}}tt.flags|=e,s.memoizedState=oi(1|t,n,i,r)}function Oh(e,t){return ca(8390656,8,e,t)}function hu(e,t){return il(2048,8,e,t)}function vm(e,t){return il(4,2,e,t)}function bm(e,t){return il(4,4,e,t)}function _m(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wm(e,t,n){return n=n!=null?n.concat([e]):null,il(4,4,_m.bind(null,t,e),n)}function fu(){}function km(e,t){var n=dn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Sm(e,t){var n=dn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&cu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jm(e,t,n){return es&21?(wn(n,t)||(n=Ip(),tt.lanes|=n,ts|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=n)}function Yv(e,t){var n=Be;Be=n!==0&&4>n?n:4,e(!0);var r=tc.transition;tc.transition={};try{e(!1),t()}finally{Be=n,tc.transition=r}}function Cm(){return dn().memoizedState}function Qv(e,t,n){var r=kr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Em(e))Nm(t,n);else if(n=lm(e,t,n,r),n!==null){var s=Pt();_n(n,e,r,s),Tm(n,t,r)}}function Xv(e,t,n){var r=kr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Em(e))Nm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,wn(l,a)){var c=t.interleaved;c===null?(s.next=s,su(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=lm(e,t,s,r),n!==null&&(s=Pt(),_n(n,e,r,s),Tm(n,t,r))}}function Em(e){var t=e.alternate;return e===tt||t!==null&&t===tt}function Nm(e,t){Lo=Fa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Tm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Wd(e,n)}}var Ba={readContext:cn,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},e0={readContext:cn,useCallback:function(e,t){return In().memoizedState=[e,t===void 0?null:t],e},useContext:cn,useEffect:Oh,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ca(4194308,4,_m.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ca(4194308,4,e,t)},useInsertionEffect:function(e,t){return ca(4,2,e,t)},useMemo:function(e,t){var n=In();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=In();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qv.bind(null,tt,e),[r.memoizedState,e]},useRef:function(e){var t=In();return e={current:e},t.memoizedState=e},useState:Bh,useDebugValue:fu,useDeferredValue:function(e){return In().memoizedState=e},useTransition:function(){var e=Bh(!1),t=e[0];return e=Yv.bind(null,e[1]),In().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=tt,s=In();if(Qe){if(n===void 0)throw Error(ue(407));n=n()}else{if(n=t(),vt===null)throw Error(ue(349));es&30||fm(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Oh(mm.bind(null,r,i,e),[e]),r.flags|=2048,oi(9,pm.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=In(),t=vt.identifierPrefix;if(Qe){var n=Wn,r=Hn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ri++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},t0={readContext:cn,useCallback:km,useContext:cn,useEffect:hu,useImperativeHandle:wm,useInsertionEffect:vm,useLayoutEffect:bm,useMemo:Sm,useReducer:nc,useRef:xm,useState:function(){return nc(si)},useDebugValue:fu,useDeferredValue:function(e){var t=dn();return jm(t,ft.memoizedState,e)},useTransition:function(){var e=nc(si)[0],t=dn().memoizedState;return[e,t]},useMutableSource:um,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1},n0={readContext:cn,useCallback:km,useContext:cn,useEffect:hu,useImperativeHandle:wm,useInsertionEffect:vm,useLayoutEffect:bm,useMemo:Sm,useReducer:rc,useRef:xm,useState:function(){return rc(si)},useDebugValue:fu,useDeferredValue:function(e){var t=dn();return ft===null?t.memoizedState=e:jm(t,ft.memoizedState,e)},useTransition:function(){var e=rc(si)[0],t=dn().memoizedState;return[e,t]},useMutableSource:um,useSyncExternalStore:hm,useId:Cm,unstable_isNewReconciler:!1};function mn(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Zc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:rt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var al={isMounted:function(e){return(e=e._reactInternals)?is(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=kr(e),i=qn(r,s);i.payload=t,n!=null&&(i.callback=n),t=_r(e,i,s),t!==null&&(_n(t,e,s,r),aa(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pt(),s=kr(e),i=qn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=_r(e,i,s),t!==null&&(_n(t,e,s,r),aa(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pt(),r=kr(e),s=qn(n,r);s.tag=2,t!=null&&(s.callback=t),t=_r(e,s,r),t!==null&&(_n(t,e,r,n),aa(t,e,r))}};function Lh(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Yo(n,r)||!Yo(s,i):!0}function Im(e,t,n){var r=!1,s=Er,i=t.contextType;return typeof i=="object"&&i!==null?i=cn(i):(s=Wt(t)?Qr:Tt.current,r=t.contextTypes,i=(r=r!=null)?Ds(e,s):Er),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function zh(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function Yc(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ou(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=cn(i):(i=Wt(t)?Qr:Tt.current,s.context=Ds(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&al.enqueueReplaceState(s,s.state,null),Pa(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Ws(e,t){try{var n="",r=t;do n+=Ix(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function sc(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qc(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function Am(e,t,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){La||(La=!0,ld=r),Qc(e,t)},n}function Pm(e,t,n){n=qn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Qc(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Qc(e,t),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function $h(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new r0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=y0.bind(null,e,t,n),t.then(e,e))}function Dh(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mh(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qn(-1,1),t.tag=2,_r(n,t,1))),n.lanes|=1),e)}var s0=Yn.ReactCurrentOwner,Mt=!1;function At(e,t,n,r){t.child=e===null?am(t,null,n,r):Us(t,e.child,n,r)}function Uh(e,t,n,r,s){n=n.render;var i=t.ref;return Bs(t,s),r=du(e,t,n,r,i,s),n=uu(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jn(e,t,s)):(Qe&&n&&Qd(t),t.flags|=1,At(e,t,r,s),t.child)}function Hh(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!_u(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Rm(e,t,i,r,s)):(e=fa(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yo,n(a,r)&&e.ref===t.ref)return Jn(e,t,s)}return t.flags|=1,e=Sr(i,r),e.ref=t.ref,e.return=t,t.child=e}function Rm(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Yo(i,r)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Jn(e,t,s)}return Xc(e,t,n,r,s)}function Fm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Ts,Zt),Zt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(Ts,Zt),Zt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,He(Ts,Zt),Zt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,He(Ts,Zt),Zt|=r;return At(e,t,s,n),t.child}function Bm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Xc(e,t,n,r,s){var i=Wt(n)?Qr:Tt.current;return i=Ds(t,i),Bs(t,s),n=du(e,t,n,r,i,s),r=uu(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jn(e,t,s)):(Qe&&r&&Qd(t),t.flags|=1,At(e,t,n,s),t.child)}function Wh(e,t,n,r,s){if(Wt(n)){var i=!0;Ea(t)}else i=!1;if(Bs(t,s),t.stateNode===null)da(e,t),Im(t,n,r),Yc(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=cn(d):(d=Wt(n)?Qr:Tt.current,d=Ds(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&zh(t,a,r,d),ar=!1;var f=t.memoizedState;a.state=f,Pa(t,r,a,s),c=t.memoizedState,l!==r||f!==c||Ht.current||ar?(typeof u=="function"&&(Zc(t,n,u,r),c=t.memoizedState),(l=ar||Lh(t,n,l,r,f,c,d))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,cm(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:mn(t.type,l),a.props=d,h=t.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=cn(c):(c=Wt(n)?Qr:Tt.current,c=Ds(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&zh(t,a,r,c),ar=!1,f=t.memoizedState,a.state=f,Pa(t,r,a,s);var v=t.memoizedState;l!==h||f!==v||Ht.current||ar?(typeof p=="function"&&(Zc(t,n,p,r),v=t.memoizedState),(d=ar||Lh(t,n,d,r,f,v,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ed(e,t,n,r,i,s)}function ed(e,t,n,r,s,i){Bm(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Th(t,n,!1),Jn(e,t,i);r=t.stateNode,s0.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Us(t,e.child,null,i),t.child=Us(t,null,l,i)):At(e,t,l,i),t.memoizedState=r.state,s&&Th(t,n,!0),t.child}function Om(e){var t=e.stateNode;t.pendingContext?Nh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nh(e,t.context,!1),iu(e,t.containerInfo)}function qh(e,t,n,r,s){return Ms(),eu(s),t.flags|=256,At(e,t,n,r),t.child}var td={dehydrated:null,treeContext:null,retryLane:0};function nd(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lm(e,t,n){var r=t.pendingProps,s=et.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),He(et,s&1),e===null)return Gc(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=dl(a,r,0,null),e=Jr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=nd(n),t.memoizedState=td,e):pu(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return o0(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Sr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Sr(l,i):(i=Jr(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?nd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=td,r}return i=e.child,e=i.sibling,r=Sr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pu(e,t){return t=dl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mi(e,t,n,r){return r!==null&&eu(r),Us(t,e.child,null,n),e=pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function o0(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=sc(Error(ue(422))),Mi(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=dl({mode:"visible",children:r.children},s,0,null),i=Jr(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Us(t,e.child,null,a),t.child.memoizedState=nd(a),t.memoizedState=td,i);if(!(t.mode&1))return Mi(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ue(419)),r=sc(i,r,void 0),Mi(e,t,a,r)}if(l=(a&e.childLanes)!==0,Mt||l){if(r=vt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gn(e,s),_n(r,e,s,-1))}return bu(),r=sc(Error(ue(421))),Mi(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=x0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Yt=br(s.nextSibling),Qt=t,Qe=!0,vn=null,e!==null&&(sn[on++]=Hn,sn[on++]=Wn,sn[on++]=Xr,Hn=e.id,Wn=e.overflow,Xr=t),t=pu(t,r.children),t.flags|=4096,t)}function Vh(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jc(e.return,t,n)}function oc(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function zm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(At(e,t,r.children,n),r=et.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Vh(e,n,t);else if(e.tag===19)Vh(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(He(et,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ra(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),oc(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ra(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}oc(t,!0,n,null,i);break;case"together":oc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function da(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ts|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ue(153));if(t.child!==null){for(e=t.child,n=Sr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Sr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function i0(e,t,n){switch(t.tag){case 3:Om(t),Ms();break;case 5:dm(t);break;case 1:Wt(t.type)&&Ea(t);break;case 4:iu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;He(Ia,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(He(et,et.current&1),t.flags|=128,null):n&t.child.childLanes?Lm(e,t,n):(He(et,et.current&1),e=Jn(e,t,n),e!==null?e.sibling:null);He(et,et.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),He(et,et.current),r)break;return null;case 22:case 23:return t.lanes=0,Fm(e,t,n)}return Jn(e,t,n)}var $m,rd,Dm,Mm;$m=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rd=function(){};Dm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Kr(Fn.current);var i=null;switch(n){case"input":s=jc(e,s),r=jc(e,r),i=[];break;case"select":s=rt({},s,{value:void 0}),r=rt({},r,{value:void 0}),i=[];break;case"textarea":s=Nc(e,s),r=Nc(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ja)}Ic(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ve("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Mm=function(e,t,n,r){n!==r&&(t.flags|=4)};function _o(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function a0(e,t,n){var r=t.pendingProps;switch(Xd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(t),null;case 1:return Wt(t.type)&&Ca(),jt(t),null;case 3:return r=t.stateNode,Hs(),Ge(Ht),Ge(Tt),lu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($i(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vn!==null&&(ud(vn),vn=null))),rd(e,t),jt(t),null;case 5:au(t);var s=Kr(ni.current);if(n=t.type,e!==null&&t.stateNode!=null)Dm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ue(166));return jt(t),null}if(e=Kr(Fn.current),$i(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[An]=t,r[ei]=i,e=(t.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<Io.length;s++)Ve(Io[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":th(r,i),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",r);break;case"textarea":rh(r,i),Ve("invalid",r)}Ic(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&zi(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&zi(r.textContent,l,e),s=["children",""+l]):Wo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ve("scroll",r)}switch(n){case"input":Ii(r),nh(r,i,!0);break;case"textarea":Ii(r),sh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ja)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[An]=t,e[ei]=r,$m(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ac(n,r),n){case"dialog":Ve("cancel",e),Ve("close",e),s=r;break;case"iframe":case"object":case"embed":Ve("load",e),s=r;break;case"video":case"audio":for(s=0;s<Io.length;s++)Ve(Io[s],e);s=r;break;case"source":Ve("error",e),s=r;break;case"img":case"image":case"link":Ve("error",e),Ve("load",e),s=r;break;case"details":Ve("toggle",e),s=r;break;case"input":th(e,r),s=jc(e,r),Ve("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=rt({},r,{value:void 0}),Ve("invalid",e);break;case"textarea":rh(e,r),s=Nc(e,r),Ve("invalid",e);break;default:s=r}Ic(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?xp(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gp(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&qo(e,c):typeof c=="number"&&qo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ve("scroll",e):c!=null&&zd(e,i,c,a))}switch(n){case"input":Ii(e),nh(e,r,!1);break;case"textarea":Ii(e),sh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Cr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?As(e,!!r.multiple,i,!1):r.defaultValue!=null&&As(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ja)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jt(t),null;case 6:if(e&&t.stateNode!=null)Mm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ue(166));if(n=Kr(ni.current),Kr(Fn.current),$i(t)){if(r=t.stateNode,n=t.memoizedProps,r[An]=t,(i=r.nodeValue!==n)&&(e=Qt,e!==null))switch(e.tag){case 3:zi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[An]=t,t.stateNode=r}return jt(t),null;case 13:if(Ge(et),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&Yt!==null&&t.mode&1&&!(t.flags&128))om(),Ms(),t.flags|=98560,i=!1;else if(i=$i(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ue(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[An]=t}else Ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jt(t),i=!1}else vn!==null&&(ud(vn),vn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||et.current&1?pt===0&&(pt=3):bu())),t.updateQueue!==null&&(t.flags|=4),jt(t),null);case 4:return Hs(),rd(e,t),e===null&&Qo(t.stateNode.containerInfo),jt(t),null;case 10:return ru(t.type._context),jt(t),null;case 17:return Wt(t.type)&&Ca(),jt(t),null;case 19:if(Ge(et),i=t.memoizedState,i===null)return jt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)_o(i,!1);else{if(pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ra(e),a!==null){for(t.flags|=128,_o(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return He(et,et.current&1|2),t.child}e=e.sibling}i.tail!==null&&ct()>qs&&(t.flags|=128,r=!0,_o(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ra(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_o(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Qe)return jt(t),null}else 2*ct()-i.renderingStartTime>qs&&n!==1073741824&&(t.flags|=128,r=!0,_o(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ct(),t.sibling=null,n=et.current,He(et,r?n&1|2:n&1),t):(jt(t),null);case 22:case 23:return vu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Zt&1073741824&&(jt(t),t.subtreeFlags&6&&(t.flags|=8192)):jt(t),null;case 24:return null;case 25:return null}throw Error(ue(156,t.tag))}function l0(e,t){switch(Xd(t),t.tag){case 1:return Wt(t.type)&&Ca(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Hs(),Ge(Ht),Ge(Tt),lu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return au(t),null;case 13:if(Ge(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ue(340));Ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ge(et),null;case 4:return Hs(),null;case 10:return ru(t.type._context),null;case 22:case 23:return vu(),null;case 24:return null;default:return null}}var Ui=!1,Nt=!1,c0=typeof WeakSet=="function"?WeakSet:Set,be=null;function Ns(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(e,t,r)}else n.current=null}function sd(e,t,n){try{n()}catch(r){at(e,t,r)}}var Kh=!1;function d0(e,t){if(Mc=wa,e=Vp(),Yd(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==i||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===s&&(l=a),f===i&&++u===r&&(c=a),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uc={focusedElem:e,selectionRange:n},wa=!1,be=t;be!==null;)if(t=be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,be=e;else for(;be!==null;){t=be;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:mn(t.type,y),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(E){at(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,be=e;break}be=t.return}return v=Kh,Kh=!1,v}function zo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&sd(t,n,i)}s=s.next}while(s!==r)}}function ll(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function od(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[An],delete t[ei],delete t[qc],delete t[Vv],delete t[Kv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hm(e){return e.tag===5||e.tag===3||e.tag===4}function Gh(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function id(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ja));else if(r!==4&&(e=e.child,e!==null))for(id(e,t,n),e=e.sibling;e!==null;)id(e,t,n),e=e.sibling}function ad(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ad(e,t,n),e=e.sibling;e!==null;)ad(e,t,n),e=e.sibling}var _t=null,yn=!1;function er(e,t,n){for(n=n.child;n!==null;)Wm(e,t,n),n=n.sibling}function Wm(e,t,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(el,n)}catch{}switch(n.tag){case 5:Nt||Ns(n,t);case 6:var r=_t,s=yn;_t=null,er(e,t,n),_t=r,yn=s,_t!==null&&(yn?(e=_t,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(yn?(e=_t,n=n.stateNode,e.nodeType===8?Ql(e.parentNode,n):e.nodeType===1&&Ql(e,n),Jo(e)):Ql(_t,n.stateNode));break;case 4:r=_t,s=yn,_t=n.stateNode.containerInfo,yn=!0,er(e,t,n),_t=r,yn=s;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&sd(n,t,a),s=s.next}while(s!==r)}er(e,t,n);break;case 1:if(!Nt&&(Ns(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){at(n,t,l)}er(e,t,n);break;case 21:er(e,t,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,er(e,t,n),Nt=r):er(e,t,n);break;default:er(e,t,n)}}function Jh(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new c0),t.forEach(function(r){var s=v0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function un(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,yn=!1;break e;case 3:_t=l.stateNode.containerInfo,yn=!0;break e;case 4:_t=l.stateNode.containerInfo,yn=!0;break e}l=l.return}if(_t===null)throw Error(ue(160));Wm(i,a,s),_t=null,yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){at(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qm(t,e),t=t.sibling}function qm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(un(t,e),Sn(e),r&4){try{zo(3,e,e.return),ll(3,e)}catch(y){at(e,e.return,y)}try{zo(5,e,e.return)}catch(y){at(e,e.return,y)}}break;case 1:un(t,e),Sn(e),r&512&&n!==null&&Ns(n,n.return);break;case 5:if(un(t,e),Sn(e),r&512&&n!==null&&Ns(n,n.return),e.flags&32){var s=e.stateNode;try{qo(s,"")}catch(y){at(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&fp(s,i),Ac(l,a);var d=Ac(l,i);for(a=0;a<c.length;a+=2){var u=c[a],h=c[a+1];u==="style"?xp(s,h):u==="dangerouslySetInnerHTML"?gp(s,h):u==="children"?qo(s,h):zd(s,u,h,d)}switch(l){case"input":Cc(s,i);break;case"textarea":pp(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?As(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?As(s,!!i.multiple,i.defaultValue,!0):As(s,!!i.multiple,i.multiple?[]:"",!1))}s[ei]=i}catch(y){at(e,e.return,y)}}break;case 6:if(un(t,e),Sn(e),r&4){if(e.stateNode===null)throw Error(ue(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){at(e,e.return,y)}}break;case 3:if(un(t,e),Sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Jo(t.containerInfo)}catch(y){at(e,e.return,y)}break;case 4:un(t,e),Sn(e);break;case 13:un(t,e),Sn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yu=ct())),r&4&&Jh(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Nt=(d=Nt)||u,un(t,e),Nt=d):un(t,e),Sn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(be=e,u=e.child;u!==null;){for(h=be=u;be!==null;){switch(f=be,p=f.child,f.tag){case 0:case 11:case 14:case 15:zo(4,f,f.return);break;case 1:Ns(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){at(r,n,y)}}break;case 5:Ns(f,f.return);break;case 22:if(f.memoizedState!==null){Yh(h);continue}}p!==null?(p.return=f,be=p):Yh(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=yp("display",a))}catch(y){at(e,e.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){at(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:un(t,e),Sn(e),r&4&&Jh(e);break;case 21:break;default:un(t,e),Sn(e)}}function Sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hm(n)){var r=n;break e}n=n.return}throw Error(ue(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(qo(s,""),r.flags&=-33);var i=Gh(e);ad(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Gh(e);id(e,l,a);break;default:throw Error(ue(161))}}catch(c){at(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function u0(e,t,n){be=e,Vm(e)}function Vm(e,t,n){for(var r=(e.mode&1)!==0;be!==null;){var s=be,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ui;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=Ui;var d=Nt;if(Ui=a,(Nt=c)&&!d)for(be=s;be!==null;)a=be,c=a.child,a.tag===22&&a.memoizedState!==null?Qh(s):c!==null?(c.return=a,be=c):Qh(s);for(;i!==null;)be=i,Vm(i),i=i.sibling;be=s,Ui=l,Nt=d}Zh(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,be=i):Zh(e)}}function Zh(e){for(;be!==null;){var t=be;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Nt||ll(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:mn(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Fh(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fh(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Jo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Nt||t.flags&512&&od(t)}catch(f){at(t,t.return,f)}}if(t===e){be=null;break}if(n=t.sibling,n!==null){n.return=t.return,be=n;break}be=t.return}}function Yh(e){for(;be!==null;){var t=be;if(t===e){be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,be=n;break}be=t.return}}function Qh(e){for(;be!==null;){var t=be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(c){at(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){at(t,s,c)}}var i=t.return;try{od(t)}catch(c){at(t,i,c)}break;case 5:var a=t.return;try{od(t)}catch(c){at(t,a,c)}}}catch(c){at(t,t.return,c)}if(t===e){be=null;break}var l=t.sibling;if(l!==null){l.return=t.return,be=l;break}be=t.return}}var h0=Math.ceil,Oa=Yn.ReactCurrentDispatcher,mu=Yn.ReactCurrentOwner,ln=Yn.ReactCurrentBatchConfig,Re=0,vt=null,ut=null,wt=0,Zt=0,Ts=Pr(0),pt=0,ii=null,ts=0,cl=0,gu=0,$o=null,$t=null,yu=0,qs=1/0,$n=null,La=!1,ld=null,wr=null,Hi=!1,pr=null,za=0,Do=0,cd=null,ua=-1,ha=0;function Pt(){return Re&6?ct():ua!==-1?ua:ua=ct()}function kr(e){return e.mode&1?Re&2&&wt!==0?wt&-wt:Jv.transition!==null?(ha===0&&(ha=Ip()),ha):(e=Be,e!==0||(e=window.event,e=e===void 0?16:Lp(e.type)),e):1}function _n(e,t,n,r){if(50<Do)throw Do=0,cd=null,Error(ue(185));mi(e,n,r),(!(Re&2)||e!==vt)&&(e===vt&&(!(Re&2)&&(cl|=n),pt===4&&ur(e,wt)),qt(e,r),n===1&&Re===0&&!(t.mode&1)&&(qs=ct()+500,ol&&Rr()))}function qt(e,t){var n=e.callbackNode;Jx(e,t);var r=_a(e,e===vt?wt:0);if(r===0)n!==null&&ah(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&ah(n),t===1)e.tag===0?Gv(Xh.bind(null,e)):nm(Xh.bind(null,e)),Wv(function(){!(Re&6)&&Rr()}),n=null;else{switch(Ap(r)){case 1:n=Hd;break;case 4:n=Np;break;case 16:n=ba;break;case 536870912:n=Tp;break;default:n=ba}n=eg(n,Km.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Km(e,t){if(ua=-1,ha=0,Re&6)throw Error(ue(327));var n=e.callbackNode;if(Os()&&e.callbackNode!==n)return null;var r=_a(e,e===vt?wt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=$a(e,r);else{t=r;var s=Re;Re|=2;var i=Jm();(vt!==e||wt!==t)&&($n=null,qs=ct()+500,Gr(e,t));do try{m0();break}catch(l){Gm(e,l)}while(!0);nu(),Oa.current=i,Re=s,ut!==null?t=0:(vt=null,wt=0,t=pt)}if(t!==0){if(t===2&&(s=Oc(e),s!==0&&(r=s,t=dd(e,s))),t===1)throw n=ii,Gr(e,0),ur(e,r),qt(e,ct()),n;if(t===6)ur(e,r);else{if(s=e.current.alternate,!(r&30)&&!f0(s)&&(t=$a(e,r),t===2&&(i=Oc(e),i!==0&&(r=i,t=dd(e,i))),t===1))throw n=ii,Gr(e,0),ur(e,r),qt(e,ct()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(ue(345));case 2:Mr(e,$t,$n);break;case 3:if(ur(e,r),(r&130023424)===r&&(t=yu+500-ct(),10<t)){if(_a(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Pt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Wc(Mr.bind(null,e,$t,$n),t);break}Mr(e,$t,$n);break;case 4:if(ur(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-bn(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*h0(r/1960))-r,10<r){e.timeoutHandle=Wc(Mr.bind(null,e,$t,$n),r);break}Mr(e,$t,$n);break;case 5:Mr(e,$t,$n);break;default:throw Error(ue(329))}}}return qt(e,ct()),e.callbackNode===n?Km.bind(null,e):null}function dd(e,t){var n=$o;return e.current.memoizedState.isDehydrated&&(Gr(e,t).flags|=256),e=$a(e,t),e!==2&&(t=$t,$t=n,t!==null&&ud(t)),e}function ud(e){$t===null?$t=e:$t.push.apply($t,e)}function f0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ur(e,t){for(t&=~gu,t&=~cl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bn(t),r=1<<n;e[n]=-1,t&=~r}}function Xh(e){if(Re&6)throw Error(ue(327));Os();var t=_a(e,0);if(!(t&1))return qt(e,ct()),null;var n=$a(e,t);if(e.tag!==0&&n===2){var r=Oc(e);r!==0&&(t=r,n=dd(e,r))}if(n===1)throw n=ii,Gr(e,0),ur(e,t),qt(e,ct()),n;if(n===6)throw Error(ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mr(e,$t,$n),qt(e,ct()),null}function xu(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(qs=ct()+500,ol&&Rr())}}function ns(e){pr!==null&&pr.tag===0&&!(Re&6)&&Os();var t=Re;Re|=1;var n=ln.transition,r=Be;try{if(ln.transition=null,Be=1,e)return e()}finally{Be=r,ln.transition=n,Re=t,!(Re&6)&&Rr()}}function vu(){Zt=Ts.current,Ge(Ts)}function Gr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Hv(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(Xd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ca();break;case 3:Hs(),Ge(Ht),Ge(Tt),lu();break;case 5:au(r);break;case 4:Hs();break;case 13:Ge(et);break;case 19:Ge(et);break;case 10:ru(r.type._context);break;case 22:case 23:vu()}n=n.return}if(vt=e,ut=e=Sr(e.current,null),wt=Zt=t,pt=0,ii=null,gu=cl=ts=0,$t=$o=null,Vr!==null){for(t=0;t<Vr.length;t++)if(n=Vr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Vr=null}return e}function Gm(e,t){do{var n=ut;try{if(nu(),la.current=Ba,Fa){for(var r=tt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fa=!1}if(es=0,yt=ft=tt=null,Lo=!1,ri=0,mu.current=null,n===null||n.return===null){pt=1,ii=t,ut=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=wt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Dh(a);if(p!==null){p.flags&=-257,Mh(p,a,l,i,t),p.mode&1&&$h(i,d,t),t=p,c=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}else{if(!(t&1)){$h(i,d,t),bu();break e}c=Error(ue(426))}}else if(Qe&&l.mode&1){var b=Dh(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Mh(b,a,l,i,t),eu(Ws(c,l));break e}}i=c=Ws(c,l),pt!==4&&(pt=2),$o===null?$o=[i]:$o.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Am(i,c,t);Rh(i,g);break e;case 1:l=c;var m=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(wr===null||!wr.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=Pm(i,l,t);Rh(i,E);break e}}i=i.return}while(i!==null)}Ym(n)}catch(k){t=k,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function Jm(){var e=Oa.current;return Oa.current=Ba,e===null?Ba:e}function bu(){(pt===0||pt===3||pt===2)&&(pt=4),vt===null||!(ts&268435455)&&!(cl&268435455)||ur(vt,wt)}function $a(e,t){var n=Re;Re|=2;var r=Jm();(vt!==e||wt!==t)&&($n=null,Gr(e,t));do try{p0();break}catch(s){Gm(e,s)}while(!0);if(nu(),Re=n,Oa.current=r,ut!==null)throw Error(ue(261));return vt=null,wt=0,pt}function p0(){for(;ut!==null;)Zm(ut)}function m0(){for(;ut!==null&&!Dx();)Zm(ut)}function Zm(e){var t=Xm(e.alternate,e,Zt);e.memoizedProps=e.pendingProps,t===null?Ym(e):ut=t,mu.current=null}function Ym(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=l0(n,t),n!==null){n.flags&=32767,ut=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pt=6,ut=null;return}}else if(n=a0(n,t,Zt),n!==null){ut=n;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);pt===0&&(pt=5)}function Mr(e,t,n){var r=Be,s=ln.transition;try{ln.transition=null,Be=1,g0(e,t,n,r)}finally{ln.transition=s,Be=r}return null}function g0(e,t,n,r){do Os();while(pr!==null);if(Re&6)throw Error(ue(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ue(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Zx(e,i),e===vt&&(ut=vt=null,wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hi||(Hi=!0,eg(ba,function(){return Os(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ln.transition,ln.transition=null;var a=Be;Be=1;var l=Re;Re|=4,mu.current=null,d0(e,n),qm(n,e),Ov(Uc),wa=!!Mc,Uc=Mc=null,e.current=n,u0(n),Mx(),Re=l,Be=a,ln.transition=i}else e.current=n;if(Hi&&(Hi=!1,pr=e,za=s),i=e.pendingLanes,i===0&&(wr=null),Wx(n.stateNode),qt(e,ct()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(La)throw La=!1,e=ld,ld=null,e;return za&1&&e.tag!==0&&Os(),i=e.pendingLanes,i&1?e===cd?Do++:(Do=0,cd=e):Do=0,Rr(),null}function Os(){if(pr!==null){var e=Ap(za),t=ln.transition,n=Be;try{if(ln.transition=null,Be=16>e?16:e,pr===null)var r=!1;else{if(e=pr,pr=null,za=0,Re&6)throw Error(ue(331));var s=Re;for(Re|=4,be=e.current;be!==null;){var i=be,a=i.child;if(be.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(be=d;be!==null;){var u=be;switch(u.tag){case 0:case 11:case 15:zo(8,u,i)}var h=u.child;if(h!==null)h.return=u,be=h;else for(;be!==null;){u=be;var f=u.sibling,p=u.return;if(Um(u),u===d){be=null;break}if(f!==null){f.return=p,be=f;break}be=p}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}be=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,be=a;else e:for(;be!==null;){if(i=be,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zo(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,be=g;break e}be=i.return}}var m=e.current;for(be=m;be!==null;){a=be;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,be=x;else e:for(a=m;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(k){at(l,l.return,k)}if(l===a){be=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,be=E;break e}be=l.return}}if(Re=s,Rr(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(el,e)}catch{}r=!0}return r}finally{Be=n,ln.transition=t}}return!1}function ef(e,t,n){t=Ws(n,t),t=Am(e,t,1),e=_r(e,t,1),t=Pt(),e!==null&&(mi(e,1,t),qt(e,t))}function at(e,t,n){if(e.tag===3)ef(e,e,n);else for(;t!==null;){if(t.tag===3){ef(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){e=Ws(n,e),e=Pm(t,e,1),t=_r(t,e,1),e=Pt(),t!==null&&(mi(t,1,e),qt(t,e));break}}t=t.return}}function y0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Pt(),e.pingedLanes|=e.suspendedLanes&n,vt===e&&(wt&n)===n&&(pt===4||pt===3&&(wt&130023424)===wt&&500>ct()-yu?Gr(e,0):gu|=n),qt(e,t)}function Qm(e,t){t===0&&(e.mode&1?(t=Ri,Ri<<=1,!(Ri&130023424)&&(Ri=4194304)):t=1);var n=Pt();e=Gn(e,t),e!==null&&(mi(e,t,n),qt(e,n))}function x0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qm(e,n)}function v0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ue(314))}r!==null&&r.delete(t),Qm(e,n)}var Xm;Xm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Mt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mt=!1,i0(e,t,n);Mt=!!(e.flags&131072)}else Mt=!1,Qe&&t.flags&1048576&&rm(t,Ta,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;da(e,t),e=t.pendingProps;var s=Ds(t,Tt.current);Bs(t,n),s=du(null,t,r,e,s,n);var i=uu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wt(r)?(i=!0,Ea(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ou(t),s.updater=al,t.stateNode=s,s._reactInternals=t,Yc(t,r,e,n),t=ed(null,t,r,!0,i,n)):(t.tag=0,Qe&&i&&Qd(t),At(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(da(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=_0(r),e=mn(r,e),s){case 0:t=Xc(null,t,r,e,n);break e;case 1:t=Wh(null,t,r,e,n);break e;case 11:t=Uh(null,t,r,e,n);break e;case 14:t=Hh(null,t,r,mn(r.type,e),n);break e}throw Error(ue(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),Xc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),Wh(e,t,r,s,n);case 3:e:{if(Om(t),e===null)throw Error(ue(387));r=t.pendingProps,i=t.memoizedState,s=i.element,cm(e,t),Pa(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Ws(Error(ue(423)),t),t=qh(e,t,r,n,s);break e}else if(r!==s){s=Ws(Error(ue(424)),t),t=qh(e,t,r,n,s);break e}else for(Yt=br(t.stateNode.containerInfo.firstChild),Qt=t,Qe=!0,vn=null,n=am(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ms(),r===s){t=Jn(e,t,n);break e}At(e,t,r,n)}t=t.child}return t;case 5:return dm(t),e===null&&Gc(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Hc(r,s)?a=null:i!==null&&Hc(r,i)&&(t.flags|=32),Bm(e,t),At(e,t,a,n),t.child;case 6:return e===null&&Gc(t),null;case 13:return Lm(e,t,n);case 4:return iu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Us(t,null,r,n):At(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),Uh(e,t,r,s,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,He(Ia,r._currentValue),r._currentValue=a,i!==null)if(wn(i.value,a)){if(i.children===s.children&&!Ht.current){t=Jn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Jc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ue(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Jc(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}At(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Bs(t,n),s=cn(s),r=r(s),t.flags|=1,At(e,t,r,n),t.child;case 14:return r=t.type,s=mn(r,t.pendingProps),s=mn(r.type,s),Hh(e,t,r,s,n);case 15:return Rm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:mn(r,s),da(e,t),t.tag=1,Wt(r)?(e=!0,Ea(t)):e=!1,Bs(t,n),Im(t,r,s),Yc(t,r,s,n),ed(null,t,r,!0,e,n);case 19:return zm(e,t,n);case 22:return Fm(e,t,n)}throw Error(ue(156,t.tag))};function eg(e,t){return Ep(e,t)}function b0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(e,t,n,r){return new b0(e,t,n,r)}function _u(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _0(e){if(typeof e=="function")return _u(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dd)return 11;if(e===Md)return 14}return 2}function Sr(e,t){var n=e.alternate;return n===null?(n=an(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fa(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")_u(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case vs:return Jr(n.children,s,i,t);case $d:a=8,s|=8;break;case _c:return e=an(12,n,t,s|2),e.elementType=_c,e.lanes=i,e;case wc:return e=an(13,n,t,s),e.elementType=wc,e.lanes=i,e;case kc:return e=an(19,n,t,s),e.elementType=kc,e.lanes=i,e;case dp:return dl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lp:a=10;break e;case cp:a=9;break e;case Dd:a=11;break e;case Md:a=14;break e;case ir:a=16,r=null;break e}throw Error(ue(130,e==null?e:typeof e,""))}return t=an(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Jr(e,t,n,r){return e=an(7,e,r,t),e.lanes=n,e}function dl(e,t,n,r){return e=an(22,e,r,t),e.elementType=dp,e.lanes=n,e.stateNode={isHidden:!1},e}function ic(e,t,n){return e=an(6,e,null,t),e.lanes=n,e}function ac(e,t,n){return t=an(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function w0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ml(0),this.expirationTimes=Ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function wu(e,t,n,r,s,i,a,l,c){return e=new w0(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=an(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ou(i),e}function k0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function tg(e){if(!e)return Er;e=e._reactInternals;e:{if(is(e)!==e||e.tag!==1)throw Error(ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ue(171))}if(e.tag===1){var n=e.type;if(Wt(n))return tm(e,n,t)}return t}function ng(e,t,n,r,s,i,a,l,c){return e=wu(n,r,!0,e,s,i,a,l,c),e.context=tg(null),n=e.current,r=Pt(),s=kr(n),i=qn(r,s),i.callback=t??null,_r(n,i,s),e.current.lanes=s,mi(e,s,r),qt(e,r),e}function ul(e,t,n,r){var s=t.current,i=Pt(),a=kr(s);return n=tg(n),t.context===null?t.context=n:t.pendingContext=n,t=qn(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_r(s,t,a),e!==null&&(_n(e,s,a,i),aa(e,s,a)),a}function Da(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ku(e,t){tf(e,t),(e=e.alternate)&&tf(e,t)}function S0(){return null}var rg=typeof reportError=="function"?reportError:function(e){console.error(e)};function Su(e){this._internalRoot=e}hl.prototype.render=Su.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ue(409));ul(e,t,null,null)};hl.prototype.unmount=Su.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ns(function(){ul(null,e,null,null)}),t[Kn]=null}};function hl(e){this._internalRoot=e}hl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fp();e={blockedOn:null,target:e,priority:t};for(var n=0;n<dr.length&&t!==0&&t<dr[n].priority;n++);dr.splice(n,0,e),n===0&&Op(e)}};function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nf(){}function j0(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Da(a);i.call(d)}}var a=ng(t,r,e,0,null,!1,!1,"",nf);return e._reactRootContainer=a,e[Kn]=a.current,Qo(e.nodeType===8?e.parentNode:e),ns(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Da(c);l.call(d)}}var c=wu(e,0,!1,null,null,!1,!1,"",nf);return e._reactRootContainer=c,e[Kn]=c.current,Qo(e.nodeType===8?e.parentNode:e),ns(function(){ul(t,c,n,r)}),c}function pl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Da(a);l.call(c)}}ul(t,a,e,s)}else a=j0(n,t,e,s,r);return Da(a)}Pp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=To(t.pendingLanes);n!==0&&(Wd(t,n|1),qt(t,ct()),!(Re&6)&&(qs=ct()+500,Rr()))}break;case 13:ns(function(){var r=Gn(e,1);if(r!==null){var s=Pt();_n(r,e,1,s)}}),ku(e,1)}};qd=function(e){if(e.tag===13){var t=Gn(e,134217728);if(t!==null){var n=Pt();_n(t,e,134217728,n)}ku(e,134217728)}};Rp=function(e){if(e.tag===13){var t=kr(e),n=Gn(e,t);if(n!==null){var r=Pt();_n(n,e,t,r)}ku(e,t)}};Fp=function(){return Be};Bp=function(e,t){var n=Be;try{return Be=e,t()}finally{Be=n}};Rc=function(e,t,n){switch(t){case"input":if(Cc(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=sl(r);if(!s)throw Error(ue(90));hp(r),Cc(r,s)}}}break;case"textarea":pp(e,n);break;case"select":t=n.value,t!=null&&As(e,!!n.multiple,t,!1)}};_p=xu;wp=ns;var C0={usingClientEntryPoint:!1,Events:[yi,ks,sl,vp,bp,xu]},wo={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E0={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jp(e),e===null?null:e.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||S0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wi.isDisabled&&Wi.supportsFiber)try{el=Wi.inject(E0),Rn=Wi}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C0;en.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ju(t))throw Error(ue(200));return k0(e,t,null,n)};en.createRoot=function(e,t){if(!ju(e))throw Error(ue(299));var n=!1,r="",s=rg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=wu(e,1,!1,null,null,n,!1,r,s),e[Kn]=t.current,Qo(e.nodeType===8?e.parentNode:e),new Su(t)};en.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ue(188)):(e=Object.keys(e).join(","),Error(ue(268,e)));return e=jp(t),e=e===null?null:e.stateNode,e};en.flushSync=function(e){return ns(e)};en.hydrate=function(e,t,n){if(!fl(t))throw Error(ue(200));return pl(null,e,t,!0,n)};en.hydrateRoot=function(e,t,n){if(!ju(e))throw Error(ue(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=rg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ng(t,null,e,1,n??null,s,!1,i,a),e[Kn]=t.current,Qo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new hl(t)};en.render=function(e,t,n){if(!fl(t))throw Error(ue(200));return pl(null,e,t,!1,n)};en.unmountComponentAtNode=function(e){if(!fl(e))throw Error(ue(40));return e._reactRootContainer?(ns(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[Kn]=null})}),!0):!1};en.unstable_batchedUpdates=xu;en.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!fl(n))throw Error(ue(200));if(e==null||e._reactInternals===void 0)throw Error(ue(38));return pl(e,t,n,!1,r)};en.version="18.3.1-next-f1338f8080-20240426";function sg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sg)}catch(e){console.error(e)}}sg(),sp.exports=en;var N0=sp.exports,rf=N0;vc.createRoot=rf.createRoot,vc.hydrateRoot=rf.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ai.apply(this,arguments)}var mr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(mr||(mr={}));const sf="popstate";function T0(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return hd("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ma(s)}return A0(t,n,null,e)}function nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function og(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function I0(){return Math.random().toString(36).substr(2,8)}function of(e,t){return{usr:e.state,key:e.key,idx:t}}function hd(e,t,n,r){return n===void 0&&(n=null),ai({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?no(t):t,{state:n,key:t&&t.key||r||I0()})}function Ma(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function no(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function A0(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=mr.Pop,c=null,d=u();d==null&&(d=0,a.replaceState(ai({},a.state,{idx:d}),""));function u(){return(a.state||{idx:null}).idx}function h(){l=mr.Pop;let b=u(),g=b==null?null:b-d;d=b,c&&c({action:l,location:y.location,delta:g})}function f(b,g){l=mr.Push;let m=hd(y.location,b,g);d=u()+1;let x=of(m,d),E=y.createHref(m);try{a.pushState(x,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(E)}i&&c&&c({action:l,location:y.location,delta:1})}function p(b,g){l=mr.Replace;let m=hd(y.location,b,g);d=u();let x=of(m,d),E=y.createHref(m);a.replaceState(x,"",E),i&&c&&c({action:l,location:y.location,delta:0})}function v(b){let g=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof b=="string"?b:Ma(b);return m=m.replace(/ $/,"%20"),nt(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let y={get action(){return l},get location(){return e(s,a)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(sf,h),c=b,()=>{s.removeEventListener(sf,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let g=v(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(b){return a.go(b)}};return y}var af;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(af||(af={}));function P0(e,t,n){return n===void 0&&(n="/"),R0(e,t,n)}function R0(e,t,n,r){let s=typeof t=="string"?no(t):t,i=Vs(s.pathname||"/",n);if(i==null)return null;let a=ig(e);F0(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let d=q0(i);l=H0(a[c],d)}return l}function ig(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(nt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=jr([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ig(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:M0(d,i.index),routesMeta:u})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of ag(i.path))s(i,a,c)}),t}function ag(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=ag(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function F0(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:U0(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const B0=/^:[\w-]+$/,O0=3,L0=2,z0=1,$0=10,D0=-2,lf=e=>e==="*";function M0(e,t){let n=e.split("/"),r=n.length;return n.some(lf)&&(r+=D0),t&&(r+=L0),n.filter(s=>!lf(s)).reduce((s,i)=>s+(B0.test(i)?O0:i===""?z0:$0),r)}function U0(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function H0(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=fd({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:jr([i,h.pathname]),pathnameBase:J0(jr([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=jr([i,h.pathnameBase]))}return a}function fd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=W0(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let y=l[h]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=l[h];return p&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:e}}function W0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),og(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function q0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return og(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Vs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function V0(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?no(e):e;return{pathname:n?n.startsWith("/")?n:K0(n,t):t,search:Z0(r),hash:Y0(s)}}function K0(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function lc(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G0(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Cu(e,t){let n=G0(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Eu(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=no(e):(s=ai({},e),nt(!s.pathname||!s.pathname.includes("?"),lc("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),lc("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),lc("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let h=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=V0(s,l),d=a&&a!=="/"&&a.endsWith("/"),u=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const jr=e=>e.join("/").replace(/\/\/+/g,"/"),J0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Z0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Y0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Q0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lg=["post","put","patch","delete"];new Set(lg);const X0=["get",...lg];new Set(X0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function li(){return li=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},li.apply(this,arguments)}const ml=_.createContext(null),cg=_.createContext(null),Qn=_.createContext(null),gl=_.createContext(null),On=_.createContext({outlet:null,matches:[],isDataRoute:!1}),dg=_.createContext(null);function e1(e,t){let{relative:n}=t===void 0?{}:t;ro()||nt(!1);let{basename:r,navigator:s}=_.useContext(Qn),{hash:i,pathname:a,search:l}=yl(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:jr([r,a])),s.createHref({pathname:c,search:l,hash:i})}function ro(){return _.useContext(gl)!=null}function Fr(){return ro()||nt(!1),_.useContext(gl).location}function ug(e){_.useContext(Qn).static||_.useLayoutEffect(e)}function ot(){let{isDataRoute:e}=_.useContext(On);return e?g1():t1()}function t1(){ro()||nt(!1);let e=_.useContext(ml),{basename:t,future:n,navigator:r}=_.useContext(Qn),{matches:s}=_.useContext(On),{pathname:i}=Fr(),a=JSON.stringify(Cu(s,n.v7_relativeSplatPath)),l=_.useRef(!1);return ug(()=>{l.current=!0}),_.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let h=Eu(d,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:jr([t,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[t,r,a,i,e])}const n1=_.createContext(null);function r1(e){let t=_.useContext(On).outlet;return t&&_.createElement(n1.Provider,{value:e},t)}function s1(){let{matches:e}=_.useContext(On),t=e[e.length-1];return t?t.params:{}}function yl(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=_.useContext(Qn),{matches:s}=_.useContext(On),{pathname:i}=Fr(),a=JSON.stringify(Cu(s,r.v7_relativeSplatPath));return _.useMemo(()=>Eu(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function o1(e,t){return i1(e,t)}function i1(e,t,n,r){ro()||nt(!1);let{navigator:s}=_.useContext(Qn),{matches:i}=_.useContext(On),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=Fr(),u;if(t){var h;let b=typeof t=="string"?no(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||nt(!1),u=b}else u=d;let f=u.pathname||"/",p=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=P0(e,{pathname:p}),y=u1(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:jr([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:jr([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return t&&y?_.createElement(gl.Provider,{value:{location:li({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mr.Pop}},y):y}function a1(){let e=m1(),t=Q0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),n?_.createElement("pre",{style:s},n):null,null)}const l1=_.createElement(a1,null);class c1 extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?_.createElement(On.Provider,{value:this.props.routeContext},_.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d1(e){let{routeContext:t,match:n,children:r}=e,s=_.useContext(ml);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),_.createElement(On.Provider,{value:t},r)}function u1(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let u=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||nt(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let h=a[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:p}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||v){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((u,h,f)=>{let p,v=!1,y=null,b=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,y=h.route.errorElement||l1,c&&(d<0&&f===0?(y1("route-fallback"),v=!0,b=null):d===f&&(v=!0,b=h.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,f+1)),m=()=>{let x;return p?x=y:v?x=b:h.route.Component?x=_.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=u,_.createElement(d1,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(c1,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var hg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hg||{}),fg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fg||{});function h1(e){let t=_.useContext(ml);return t||nt(!1),t}function f1(e){let t=_.useContext(cg);return t||nt(!1),t}function p1(e){let t=_.useContext(On);return t||nt(!1),t}function pg(e){let t=p1(),n=t.matches[t.matches.length-1];return n.route.id||nt(!1),n.route.id}function m1(){var e;let t=_.useContext(dg),n=f1(),r=pg();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function g1(){let{router:e}=h1(hg.UseNavigateStable),t=pg(fg.UseNavigateStable),n=_.useRef(!1);return ug(()=>{n.current=!0}),_.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,li({fromRouteId:t},i)))},[e,t])}const cf={};function y1(e,t,n){cf[e]||(cf[e]=!0)}function x1(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Nu(e){let{to:t,replace:n,state:r,relative:s}=e;ro()||nt(!1);let{future:i,static:a}=_.useContext(Qn),{matches:l}=_.useContext(On),{pathname:c}=Fr(),d=ot(),u=Eu(t,Cu(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(u);return _.useEffect(()=>d(JSON.parse(h),{replace:n,state:r,relative:s}),[d,h,s,n,r]),null}function v1(e){return r1(e.context)}function Ke(e){nt(!1)}function b1(e){let{basename:t="/",children:n=null,location:r,navigationType:s=mr.Pop,navigator:i,static:a=!1,future:l}=e;ro()&&nt(!1);let c=t.replace(/^\/*/,"/"),d=_.useMemo(()=>({basename:c,navigator:i,static:a,future:li({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=no(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:v="default"}=r,y=_.useMemo(()=>{let b=Vs(u,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:v},navigationType:s}},[c,u,h,f,p,v,s]);return y==null?null:_.createElement(Qn.Provider,{value:d},_.createElement(gl.Provider,{children:n,value:y}))}function mg(e){let{children:t,location:n}=e;return o1(pd(t),n)}new Promise(()=>{});function pd(e,t){t===void 0&&(t=[]);let n=[];return _.Children.forEach(e,(r,s)=>{if(!_.isValidElement(r))return;let i=[...t,s];if(r.type===_.Fragment){n.push.apply(n,pd(r.props.children,i));return}r.type!==Ke&&nt(!1),!r.props.index||!r.props.children||nt(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=pd(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ua.apply(this,arguments)}function gg(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function _1(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function w1(e,t){return e.button===0&&(!t||t==="_self")&&!_1(e)}const k1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],S1=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],j1="6";try{window.__reactRouterVersion=j1}catch{}const C1=_.createContext({isTransitioning:!1}),E1="startTransition",df=yx[E1];function N1(e){let{basename:t,children:n,future:r,window:s}=e,i=_.useRef();i.current==null&&(i.current=T0({window:s,v5Compat:!0}));let a=i.current,[l,c]=_.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},u=_.useCallback(h=>{d&&df?df(()=>c(h)):c(h)},[c,d]);return _.useLayoutEffect(()=>a.listen(u),[a,u]),_.useEffect(()=>x1(r),[r]),_.createElement(b1,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const T1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",I1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tu=_.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,f=gg(t,k1),{basename:p}=_.useContext(Qn),v,y=!1;if(typeof d=="string"&&I1.test(d)&&(v=d,T1))try{let x=new URL(window.location.href),E=d.startsWith("//")?new URL(x.protocol+d):new URL(d),k=Vs(E.pathname,p);E.origin===x.origin&&k!=null?d=k+E.search+E.hash:y=!0}catch{}let b=e1(d,{relative:s}),g=P1(d,{replace:a,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function m(x){r&&r(x),x.defaultPrevented||g(x)}return _.createElement("a",Ua({},f,{href:v||b,onClick:y||i?r:m,ref:n,target:c}))}),ko=_.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:u}=t,h=gg(t,S1),f=yl(c,{relative:h.relative}),p=Fr(),v=_.useContext(cg),{navigator:y,basename:b}=_.useContext(Qn),g=v!=null&&R1(f)&&d===!0,m=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,x=p.pathname,E=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(x=x.toLowerCase(),E=E?E.toLowerCase():null,m=m.toLowerCase()),E&&b&&(E=Vs(E,b)||E);const k=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let I=x===m||!a&&x.startsWith(m)&&x.charAt(k)==="/",R=E!=null&&(E===m||!a&&E.startsWith(m)&&E.charAt(m.length)==="/"),T={isActive:I,isPending:R,isTransitioning:g},B=I?r:void 0,P;typeof i=="function"?P=i(T):P=[i,I?"active":null,R?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let K=typeof l=="function"?l(T):l;return _.createElement(Tu,Ua({},h,{"aria-current":B,className:P,ref:n,style:K,to:c,viewTransition:d}),typeof u=="function"?u(T):u)});var md;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(md||(md={}));var uf;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(uf||(uf={}));function A1(e){let t=_.useContext(ml);return t||nt(!1),t}function P1(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=ot(),d=Fr(),u=yl(e,{relative:a});return _.useCallback(h=>{if(w1(h,n)){h.preventDefault();let f=r!==void 0?r:Ma(d)===Ma(u);c(e,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,u,r,s,n,e,i,a,l])}function R1(e,t){t===void 0&&(t={});let n=_.useContext(C1);n==null&&nt(!1);let{basename:r}=A1(md.useViewTransitionState),s=yl(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=Vs(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=Vs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return fd(s.pathname,a)!=null||fd(s.pathname,i)!=null}const gd={primary:"#0078D7",secondary:"#3F9142",accent:"#9C27B0",success:"#22C55E",warning:"#F59E0B",error:"#EF4444",background:"#F5F5F5",surface:"#FFFFFF",border:"#E2E2E2",text:"#171717",textSecondary:"#737373",textHighlight:"#0078D7",selectedItem:"rgba(0, 120, 215, 0.1)",tabBarActive:"#0078D7",tabBarInactive:"#737373",codeBackground:"#F8F8F8",codeSyntax:{keyword:"#0000FF",string:"#A31515",comment:"#008000",function:"#795E26",variable:"#1F377F",number:"#098658",operator:"#000000",property:"#0070C1"}},hf={primary:"#3794FF",secondary:"#4EC9B0",accent:"#C586C0",success:"#4ADE80",warning:"#FBBF24",error:"#F87171",background:"#1E1E1E",surface:"#252526",border:"#3E3E42",text:"#CCCCCC",textSecondary:"#9D9D9D",textHighlight:"#3794FF",selectedItem:"rgba(55, 148, 255, 0.2)",tabBarActive:"#3794FF",tabBarInactive:"#9D9D9D",codeBackground:"#1E1E1E",codeSyntax:{keyword:"#569CD6",string:"#CE9178",comment:"#6A9955",function:"#DCDCAA",variable:"#9CDCFE",number:"#B5CEA8",operator:"#D4D4D4",property:"#4EC9B0"}},F1={primary:"#4AEAFF",secondary:"#5AF5CA",accent:"#FF9CD6",success:"#7EFF5A",warning:"#FFF04A",error:"#FF7E7E",background:"#000000",surface:"#1A1A1A",border:"#444444",text:"#FFFFFF",textSecondary:"#CCCCCC",textHighlight:"#4AEAFF",selectedItem:"rgba(74, 234, 255, 0.3)",tabBarActive:"#4AEAFF",tabBarInactive:"#CCCCCC",codeBackground:"#000000",codeSyntax:{keyword:"#78D7FF",string:"#FFA0A0",comment:"#7CD47C",function:"#FFFF7C",variable:"#C4E7FF",number:"#D4FFAA",operator:"#FFFFFF",property:"#78FFFF"}},B1={primary:"#8B5A2B",secondary:"#7D5C3C",accent:"#A45A52",success:"#4D724D",warning:"#B2852F",error:"#A95151",background:"#F4ECD8",surface:"#FBF6E9",border:"#D8C9AB",text:"#52443B",textSecondary:"#7A6A56",textHighlight:"#8B5A2B",selectedItem:"rgba(139, 90, 43, 0.15)",tabBarActive:"#8B5A2B",tabBarInactive:"#7A6A56",codeBackground:"#F2ECDA",codeSyntax:{keyword:"#7C552B",string:"#A04D3C",comment:"#6F7741",function:"#6A563D",variable:"#7B5C3D",number:"#7D6A42",operator:"#52443B",property:"#7C562C"}},O1={primary:"#5B8BF6",secondary:"#50B5CF",accent:"#A45DE6",success:"#5CCF7A",warning:"#E6BE30",error:"#E65A5A",background:"#0F172A",surface:"#1E293B",border:"#334155",text:"#E2E8F0",textSecondary:"#94A3B8",textHighlight:"#5B8BF6",selectedItem:"rgba(91, 139, 246, 0.2)",tabBarActive:"#5B8BF6",tabBarInactive:"#94A3B8",codeBackground:"#0F172A",codeSyntax:{keyword:"#5B8BF6",string:"#E6BE30",comment:"#64748B",function:"#50B5CF",variable:"#A45DE6",number:"#5CCF7A",operator:"#E2E8F0",property:"#50B5CF"}},L1={primary:"#BB86FC",secondary:"#03DAC6",accent:"#CF6679",success:"#4CAF50",warning:"#FB8C00",error:"#CF6679",background:"#121212",surface:"#1E1E1E",border:"#2C2C2C",text:"#E1E1E1",textSecondary:"#B0B0B0",textHighlight:"#BB86FC",selectedItem:"rgba(187, 134, 252, 0.2)",tabBarActive:"#BB86FC",tabBarInactive:"#B0B0B0",codeBackground:"#121212",codeSyntax:{keyword:"#BB86FC",string:"#03DAC6",comment:"#6A737D",function:"#82AAFF",variable:"#F78C6C",number:"#F78C6C",operator:"#E1E1E1",property:"#03DAC6"}},yg=_.createContext({isDark:!1,toggleTheme:()=>{},colors:gd,themeName:"light",setTheme:()=>{},availableThemes:[]}),ve=()=>_.useContext(yg),z1=({children:e})=>{var f;const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=localStorage.getItem("codeCanvas_themeName")||(t?"dark":"light"),[s,i]=_.useState(r),a=[{id:"light",name:"Light",isDark:!1},{id:"dark",name:"Dark",isDark:!0},{id:"highContrastDark",name:"High Contrast Dark",isDark:!0},{id:"sepia",name:"Sepia",isDark:!1},{id:"midnightBlue",name:"Midnight Blue",isDark:!0},{id:"materialDark",name:"Material Dark",isDark:!0}],l=((f=a.find(p=>p.id===s))==null?void 0:f.isDark)||!1,d=(()=>{switch(s){case"light":return gd;case"dark":return hf;case"highContrastDark":return F1;case"sepia":return B1;case"midnightBlue":return O1;case"materialDark":return L1;default:return l?hf:gd}})();_.useEffect(()=>{switch(localStorage.setItem("codeCanvas_themeName",s),document.body.classList.remove("light-theme","dark-theme","high-contrast-theme","sepia-theme","midnight-theme","material-theme"),s){case"light":document.body.classList.add("light-theme");break;case"dark":document.body.classList.add("dark-theme");break;case"highContrastDark":document.body.classList.add("high-contrast-theme"),document.body.classList.add("dark-theme");break;case"sepia":document.body.classList.add("sepia-theme");break;case"midnightBlue":document.body.classList.add("midnight-theme"),document.body.classList.add("dark-theme");break;case"materialDark":document.body.classList.add("material-theme"),document.body.classList.add("dark-theme");break}Object.entries(d).forEach(([v,y])=>{typeof y=="string"&&document.documentElement.style.setProperty(`--color-${v}`,y)});const p=document.querySelector('meta[name="theme-color"]');p&&p.setAttribute("content",d.background)},[s,d]),_.useEffect(()=>{const p=window.matchMedia("(prefers-color-scheme: dark)"),v=y=>{localStorage.getItem("codeCanvas_themeName")||i(y.matches?"dark":"light")};try{p.addEventListener("change",v)}catch{p.addListener(v)}return()=>{try{p.removeEventListener("change",v)}catch{p.removeListener(v)}}},[]);const u=()=>{i(l?"light":"dark")},h=p=>{i(p)};return o.jsx(yg.Provider,{value:{isDark:l,toggleTheme:u,colors:d,themeName:s,setTheme:h,availableThemes:a},children:e})},yd={fontSize:14,tabSize:2,useTabs:!1,wordWrap:!0,autoSave:!0,minimapEnabled:!0},xg=_.createContext({editorSettings:yd,colorTheme:"default",isDark:!1,themeName:"dark",updateFontSize:()=>{},updateTabSize:()=>{},updateUseTabs:()=>{},updateWordWrap:()=>{},updateAutoSave:()=>{},updateMinimapEnabled:()=>{},updateColorTheme:()=>{},updateThemeName:()=>{},syncStatus:"idle",lastSyncTime:null,syncSettings:async()=>{}}),xl=()=>_.useContext(xg),$1=({children:e})=>{const[t,n]=_.useState(yd),[r,s]=_.useState("default"),[i,a]=_.useState(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),[l,c]=_.useState("dark"),[d,u]=_.useState("idle"),[h,f]=_.useState(null),[p,v]=_.useState(!1);_.useEffect(()=>{(async()=>{try{const B=localStorage.getItem("codeCanvas_editorSettings"),P=localStorage.getItem("codeCanvas_colorTheme"),K=localStorage.getItem("codeCanvas_darkMode"),F=localStorage.getItem("codeCanvas_themeName");if(B){const L=JSON.parse(B);L.minimapEnabled===void 0&&(L.minimapEnabled=yd.minimapEnabled),n(L)}P&&s(P),K!==null&&a(K==="true"),F&&c(F)}catch(B){console.error("Failed to load settings",B)}})()},[]),_.useEffect(()=>{(async()=>{try{localStorage.setItem("codeCanvas_editorSettings",JSON.stringify(t))}catch(B){console.error("Failed to save settings",B)}})()},[t]),_.useEffect(()=>{(async()=>{try{localStorage.setItem("codeCanvas_colorTheme",r)}catch(B){console.error("Failed to save theme",B)}})()},[r]),_.useEffect(()=>{(async()=>{try{localStorage.setItem("codeCanvas_darkMode",String(i))}catch(B){console.error("Failed to save dark mode preference",B)}})()},[i]),_.useEffect(()=>{(async()=>{try{localStorage.setItem("codeCanvas_themeName",l)}catch(B){console.error("Failed to save theme name",B)}})()},[l]);const y=T=>{n(B=>({...B,fontSize:T}))},b=T=>{n(B=>({...B,tabSize:T}))},g=T=>{n(B=>({...B,useTabs:T}))},m=T=>{n(B=>({...B,wordWrap:T}))},x=T=>{n(B=>({...B,autoSave:T}))},E=T=>{n(B=>({...B,minimapEnabled:T}))},k=T=>{s(T)},I=T=>{c(T);const B=["dark","highContrastDark","midnightBlue","materialDark"].includes(T);a(B)},R=async()=>{try{u("syncing"),await new Promise(B=>setTimeout(B,1e3));const T={editorSettings:t,colorTheme:r,isDark:i,themeName:l,lastSyncTime:Date.now()};console.log("Syncing settings:",T),f(Date.now()),u("success"),setTimeout(()=>{u("idle")},3e3)}catch(T){console.error("Error syncing settings:",T),u("error"),setTimeout(()=>{u("idle")},3e3)}};return o.jsx(xg.Provider,{value:{editorSettings:t,colorTheme:r,isDark:i,themeName:l,updateFontSize:y,updateTabSize:b,updateUseTabs:g,updateWordWrap:m,updateAutoSave:x,updateMinimapEnabled:E,updateColorTheme:k,updateThemeName:I,syncStatus:d,lastSyncTime:h,syncSettings:R},children:e})},vg=e=>{var n;switch(((n=e.split(".").pop())==null?void 0:n.toLowerCase())||""){case"js":return"javascript";case"jsx":return"jsx";case"ts":return"typescript";case"tsx":return"tsx";case"html":return"html";case"css":return"css";case"json":return"json";case"md":return"markdown";case"py":return"python";case"java":return"java";case"c":return"c";case"cpp":case"cc":return"cpp";case"php":return"php";case"rb":return"ruby";case"go":return"go";case"rs":return"rust";case"swift":return"swift";case"kt":return"kotlin";default:return"plaintext"}},cc=[{id:"project-1",name:"JavaScript Demo",path:"/projects/javascript-demo",files:[{id:"file-1",name:"index.js",type:"file",path:"/index.js",content:`// Welcome to Code Canvas!

const greeting = "Hello, world!";
console.log(greeting);

// Demo function
function calculateSum(a, b) {
  return a + b;
}

const result = calculateSum(5, 7);
console.log(\`The sum is \${result}\`);`},{id:"file-2",name:"style.css",type:"file",path:"/style.css",content:`/* Main styles */
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  line-height: 1.6;
  color: #333;
  margin: 0;
  padding: 20px;
  background-color: #f5f5f5;
}

.container {
  max-width: 800px;
  margin: 0 auto;
  background-color: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}`},{id:"folder-1",name:"src",type:"directory",path:"/src",children:["file-3","file-4"]},{id:"file-3",name:"app.js",type:"file",path:"/src/app.js",content:`// Application logic
class App {
  constructor() {
    this.name = "Code Canvas App";
    this.version = "1.0.0";
  }

  initialize() {
    console.log(\`\${this.name} v\${this.version} initialized\`);
  }

  run() {
    this.initialize();
    console.log("App is running...");
  }
}

const app = new App();
app.run();`},{id:"file-4",name:"utils.js",type:"file",path:"/src/utils.js",content:`// Utility functions

/**
 * Formats a date to a readable string
 * @param {Date} date - The date to format
 * @return {string} Formatted date string
 */
export function formatDate(date) {
  return new Date(date).toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric"
  });
}

/**
 * Generates a random ID
 * @param {number} length - Length of the ID
 * @return {string} Random ID
 */
export function generateId(length = 8) {
  return Math.random().toString(36).substring(2, 2 + length);
}
`}],createdAt:"2023-09-15T12:00:00.000Z",user_id:"sample-user-1",is_public:!1},{id:"project-2",name:"React Sample",path:"/projects/react-sample",files:[{id:"react-file-1",name:"App.jsx",type:"file",path:"/App.jsx",content:`import React, { useState } from "react";
import "./styles.css";

function App() {
  const [count, setCount] = useState(0);

  return (
    <div className="app">
      <h1>React Counter</h1>
      <div className="card">
        <button onClick={() => setCount((count) => count + 1)}>
          count is {count}
        </button>
        <p>
          Edit <code>src/App.jsx</code> and save to test
        </p>
      </div>
    </div>
  );
}

export default App;`},{id:"react-file-2",name:"styles.css",type:"file",path:"/styles.css",content:`* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  margin: 0;
  padding: 0;
  display: flex;
  place-items: center;
  min-width: 320px;
  min-height: 100vh;
  background-color: #f5f5f5;
}

#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.app {
  padding: 2rem;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

h1 {
  font-size: 2.5em;
  line-height: 1.1;
  margin-bottom: 1rem;
  color: #213547;
}

.card {
  padding: 2em;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: #0078d7;
  color: white;
  cursor: pointer;
  transition: border-color 0.25s;
}

button:hover {
  border-color: #646cff;
}

button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}`},{id:"react-file-3",name:"main.jsx",type:"file",path:"/main.jsx",content:`import React from "react";
import ReactDOM from "react-dom/client";
import App from "./App";
import "./styles.css";

ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);`}],createdAt:"2023-10-05T15:30:00.000Z",user_id:"sample-user-1",is_public:!1}],D1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Yr(async()=>{const{default:r}=await Promise.resolve().then(()=>so);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Iu extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class M1 extends Iu{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class U1 extends Iu{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class H1 extends Iu{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xd||(xd={}));var W1=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class q1{constructor(t,{headers:n={},customFetch:r,region:s=xd.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=D1(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return W1(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=n;let l={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(v=>{throw new M1(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new U1(u);if(!u.ok)throw new H1(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Dt={},Au={},vl={},vi={},bl={},_l={},V1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ks=V1();const K1=Ks.fetch,bg=Ks.fetch.bind(Ks),_g=Ks.Headers,G1=Ks.Request,J1=Ks.Response,so=Object.freeze(Object.defineProperty({__proto__:null,Headers:_g,Request:G1,Response:J1,default:bg,fetch:K1},Symbol.toStringTag,{value:"Module"})),Z1=Gy(so);var wl={};Object.defineProperty(wl,"__esModule",{value:!0});let Y1=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};wl.default=Y1;var wg=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_l,"__esModule",{value:!0});const Q1=wg(Z1),X1=wg(wl);let eb=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Q1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let d=null,u=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const y=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await i.text();try{d=JSON.parse(y),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,p="OK")}catch{i.status===404&&y===""?(f=204,p="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,p="OK"),d&&this.shouldThrowOnError)throw new X1.default(d)}return{error:d,data:u,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,n)}returns(){return this}overrideTypes(){return this}};_l.default=eb;var tb=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bl,"__esModule",{value:!0});const nb=tb(_l);let rb=class extends nb.default{select(t){let n=!1;const r=(t??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};bl.default=rb;var sb=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vi,"__esModule",{value:!0});const ob=sb(bl);let ib=class extends ob.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${a}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};vi.default=ib;var ab=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vl,"__esModule",{value:!0});const So=ab(vi);let lb=class{constructor(t,{headers:n={},schema:r,fetch:s}){this.url=t,this.headers=n,this.schema=r,this.fetch=s}select(t,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new So.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new So.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new So.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new So.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new So.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vl.default=lb;var kl={},Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.version=void 0;Sl.version="0.0.0-automated";Object.defineProperty(kl,"__esModule",{value:!0});kl.DEFAULT_HEADERS=void 0;const cb=Sl;kl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${cb.version}`};var kg=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Au,"__esModule",{value:!0});const db=kg(vl),ub=kg(vi),hb=kl;let fb=class Sg{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},hb.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(t){const n=new URL(`${this.url}/${t}`);return new db.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Sg(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(a="POST",c=n);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new ub.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Au.default=fb;var oo=lt&&lt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.PostgrestError=Dt.PostgrestBuilder=Dt.PostgrestTransformBuilder=Dt.PostgrestFilterBuilder=Dt.PostgrestQueryBuilder=Dt.PostgrestClient=void 0;const jg=oo(Au);Dt.PostgrestClient=jg.default;const Cg=oo(vl);Dt.PostgrestQueryBuilder=Cg.default;const Eg=oo(vi);Dt.PostgrestFilterBuilder=Eg.default;const Ng=oo(bl);Dt.PostgrestTransformBuilder=Ng.default;const Tg=oo(_l);Dt.PostgrestBuilder=Tg.default;const Ig=oo(wl);Dt.PostgrestError=Ig.default;var pb=Dt.default={PostgrestClient:jg.default,PostgrestQueryBuilder:Cg.default,PostgrestFilterBuilder:Eg.default,PostgrestTransformBuilder:Ng.default,PostgrestBuilder:Tg.default,PostgrestError:Ig.default};const{PostgrestClient:mb,PostgrestQueryBuilder:z5,PostgrestFilterBuilder:$5,PostgrestTransformBuilder:D5,PostgrestBuilder:M5,PostgrestError:U5}=pb,gb="2.11.2",yb={"X-Client-Info":`realtime-js/${gb}`},xb="1.0.0",Ag=1e4,vb=1e3;var Ls;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ls||(Ls={}));var Jt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Jt||(Jt={}));var xn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xn||(xn={}));var vd;(function(e){e.websocket="websocket"})(vd||(vd={}));var Hr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hr||(Hr={}));class bb{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(t.slice(a,a+s));a=a+s;const c=r.decode(t.slice(a,a+i));a=a+i;const d=JSON.parse(r.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Pg{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ue;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ue||(Ue={}));const ff=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,a)=>(i[a]=_b(a,e,t,s),i),{})},_b=(e,t,n,r)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=n[e];return i&&!r.includes(i)?Rg(i,a):bd(a)},Rg=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return jb(t,n)}switch(e){case Ue.bool:return wb(t);case Ue.float4:case Ue.float8:case Ue.int2:case Ue.int4:case Ue.int8:case Ue.numeric:case Ue.oid:return kb(t);case Ue.json:case Ue.jsonb:return Sb(t);case Ue.timestamp:return Cb(t);case Ue.abstime:case Ue.date:case Ue.daterange:case Ue.int4range:case Ue.int8range:case Ue.money:case Ue.reltime:case Ue.text:case Ue.time:case Ue.timestamptz:case Ue.timetz:case Ue.tsrange:case Ue.tstzrange:return bd(t);default:return bd(t)}},bd=e=>e,wb=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},kb=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Sb=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},jb=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const a=e.slice(1,n);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Rg(t,l))}return e},Cb=e=>typeof e=="string"?e.replace(" ","T"):e,Fg=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class dc{constructor(t,n,r={},s=Ag){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var pf;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(pf||(pf={}));class Mo{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=Mo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Mo.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),a=this.transformState(n),l={},c={};return this.map(i,(d,u)=>{a[d]||(c[d]=u)}),this.map(a,(d,u)=>{const h=i[d];if(h){const f=u.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),v=u.filter(b=>p.indexOf(b.presence_ref)<0),y=h.filter(b=>f.indexOf(b.presence_ref)<0);v.length>0&&(l[d]=v),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),u.length>0){const h=t[l].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[l].unshift(...f)}r(l,u,c)}),this.map(a,(l,c)=>{let d=t[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[l]=d,s(l,d,c),d.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mf;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mf||(mf={}));var gf;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gf||(gf={}));var Dn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Dn||(Dn={}));class Pu{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Jt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new dc(this,xn.join,this.params,this.timeout),this.rejoinTimer=new Pg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Jt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Jt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Jt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xn.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Mo(this),this.broadcastEndpointURL=Fg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(u=>t==null?void 0:t(Dn.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(Dn.CLOSED));const c={},d={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(Dn.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let y=0;y<p;y++){const b=f[y],{filter:{event:g,schema:m,table:x,filter:E}}=b,k=u&&u[y];if(k&&k.event===g&&k.schema===m&&k.table===x&&k.filter===E)v.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),t==null||t(Dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Dn.SUBSCRIBED);return}}).receive("error",u=>{t==null||t(Dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Jt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xn.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new dc(this,xn.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),a}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dc(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=xn;if(r&&[l,c,d,u].indexOf(a)>=0&&r!==this._joinRef())return;let f=this._onMessage(a,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var v,y,b;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(y=p.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(f,r)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var v,y,b,g,m,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const E=p.id,k=(v=p.filter)===null||v===void 0?void 0:v.event;return E&&((y=n.ids)===null||y===void 0?void 0:y.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const E=(m=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return E==="*"||E===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:b,commit_timestamp:g,type:m,errors:x}=v;f=Object.assign(Object.assign({},{schema:y,table:b,commit_timestamp:g,eventType:m,new:{},old:{},errors:x}),this._getPayloadRecords(v))}p.callback(f,r)})}_isClosed(){return this.state===Jt.closed}_isJoined(){return this.state===Jt.joined}_isJoining(){return this.state===Jt.joining}_isLeaving(){return this.state===Jt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Pu.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xn.close,{},t)}_onError(t){this._on(xn.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Jt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ff(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ff(t.columns,t.old_record)),n}}const Eb=()=>{},Nb=typeof WebSocket<"u",Tb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ib{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=yb,this.params={},this.timeout=Ag,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Eb,this.conn=null,this.sendBuffer=[],this.serializer=new bb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Yr(async()=>{const{default:c}=await Promise.resolve().then(()=>so);return{default:c}},void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${vd.websocket}`,this.httpEndpoint=Fg(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,a)=>a(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Pg(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Nb){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Ab(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Yr(async()=>{const{default:t}=await import("./browser-BdSDjQ3g.js").then(n=>n.b);return{default:t}},__vite__mapDeps([0,1,2])).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xb}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ls.connecting:return Hr.Connecting;case Ls.open:return Hr.Open;case Ls.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}channel(t,n={config:{}}){const r=new Pu(`realtime:${t}`,n,this);return this.channels.push(r),r}push(t){const{topic:n,event:r,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(xn.access_token,{access_token:n})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(vb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:a}=n;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(xn.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([Tb],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Ab{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ls.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class Ru extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function gt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Pb extends Ru{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _d extends Ru{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var Rb=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Bg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Yr(async()=>{const{default:r}=await Promise.resolve().then(()=>so);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},Fb=()=>Rb(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Yr(()=>Promise.resolve().then(()=>so),void 0)).Response:Response}),wd=e=>{if(Array.isArray(e))return e.map(n=>wd(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=wd(r)}),t};var as=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const uc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Bb=(e,t,n)=>as(void 0,void 0,void 0,function*(){const r=yield Fb();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new Pb(uc(s),e.status||500))}).catch(s=>{t(new _d(uc(s),s))}):t(new _d(uc(e),e))}),Ob=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function bi(e,t,n,r,s,i){return as(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(n,Ob(t,r,s,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>Bb(c,l,r))})})}function Ha(e,t,n,r){return as(this,void 0,void 0,function*(){return bi(e,"GET",t,n,r)})}function lr(e,t,n,r,s){return as(this,void 0,void 0,function*(){return bi(e,"POST",t,r,s,n)})}function Lb(e,t,n,r,s){return as(this,void 0,void 0,function*(){return bi(e,"PUT",t,r,s,n)})}function zb(e,t,n,r){return as(this,void 0,void 0,function*(){return bi(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Og(e,t,n,r,s){return as(this,void 0,void 0,function*(){return bi(e,"DELETE",t,r,s,n)})}var Bt=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const $b={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Db{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Bg(s)}uploadOrUpdate(t,n,r,s){return Bt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},yf),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(n),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(gt(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Bt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:yf.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(gt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield lr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Ru("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}})}update(t,n,r){return Bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Bt(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(gt(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Bt(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(gt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Bt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield lr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(gt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Bt(this,void 0,void 0,function*(){try{const s=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(gt(s))return{data:null,error:s};throw s}})}download(t,n){return Bt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ha(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(gt(l))return{data:null,error:l};throw l}})}info(t){return Bt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ha(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wd(r),error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}})}exists(t){return Bt(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield zb(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(gt(r)&&r instanceof _d){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(t){return Bt(this,void 0,void 0,function*(){try{return{data:yield Og(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}})}list(t,n,r){return Bt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},$b),n),{prefix:t||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(gt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Mb="2.7.1",Ub={"X-Client-Info":`storage-js/${Mb}`};var ds=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class Hb{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},Ub),n),this.fetch=Bg(r)}listBuckets(){return ds(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(gt(t))return{data:null,error:t};throw t}})}getBucket(t){return ds(this,void 0,void 0,function*(){try{return{data:yield Ha(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return ds(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return ds(this,void 0,void 0,function*(){try{return{data:yield Lb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(gt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ds(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ds(this,void 0,void 0,function*(){try{return{data:yield Og(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(gt(n))return{data:null,error:n};throw n}})}}class Wb extends Hb{constructor(t,n={},r){super(t,n,r)}from(t){return new Db(this.url,this.headers,t,this.fetch)}}const qb="2.49.8";let Ao="";typeof Deno<"u"?Ao="deno":typeof document<"u"?Ao="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ao="react-native":Ao="node";const Vb={"X-Client-Info":`supabase-js-${Ao}/${qb}`},Kb={headers:Vb},Gb={schema:"public"},Jb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Zb={};var Yb=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};const Qb=e=>{let t;return e?t=e:typeof fetch>"u"?t=bg:t=fetch,(...n)=>t(...n)},Xb=()=>typeof Headers>"u"?_g:Headers,e_=(e,t,n)=>{const r=Qb(n),s=Xb();return(i,a)=>Yb(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let d=new s(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:d}))})};var t_=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};function n_(e){return e.endsWith("/")?e:e+"/"}function r_(e,t){var n,r;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:d,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>t_(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Lg="2.69.1",ys=30*1e3,kd=3,hc=kd*ys,s_="http://localhost:9999",o_="supabase.auth.token",i_={"X-Client-Info":`gotrue-js/${Lg}`},Sd="X-Supabase-Api-Version",zg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},a_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,l_=6e5;class Fu extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class c_ extends Fu{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function d_(e){return Ce(e)&&e.name==="AuthApiError"}class $g extends Fu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Br extends Fu{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class sr extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function u_(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class fc extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qi extends Br{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Vi extends Br{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function h_(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class xf extends Br{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jd extends Br{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function pc(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class vf extends Br{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Uo extends Br{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=` 	
\r=`.split(""),f_=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<_f.length;t+=1)e[_f[t].charCodeAt(0)]=-2;for(let t=0;t<bf.length;t+=1)e[bf[t].charCodeAt(0)]=t;return e})();function Dg(e,t,n){const r=f_[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function wf(e){const t=[],n=a=>{t.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{g_(a,r,n)};for(let a=0;a<e.length;a+=1)Dg(e.charCodeAt(a),s,i);return t.join("")}function p_(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function m_(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}p_(r,t)}}function g_(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function y_(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Dg(e.charCodeAt(s),n,r);return new Uint8Array(t)}function x_(e){const t=[];return m_(e,n=>t.push(n)),new Uint8Array(t)}function v_(e){return Math.round(Date.now()/1e3)+e}function b_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Tn=()=>typeof window<"u"&&typeof document<"u",Lr={tested:!1,writable:!1},Ho=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Lr.tested)return Lr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Lr.tested=!0,Lr.writable=!0}catch{Lr.tested=!0,Lr.writable=!1}return Lr.writable};function __(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Mg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Yr(async()=>{const{default:r}=await Promise.resolve().then(()=>so);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},w_=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ug=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ki=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Gi=async(e,t)=>{await e.removeItem(t)};class jl{constructor(){this.promise=new jl.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}jl.promiseConstructor=Promise;function mc(e){const t=e.split(".");if(t.length!==3)throw new Uo("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!a_.test(t[r]))throw new Uo("JWT not in base64url format");return{header:JSON.parse(wf(t[0])),payload:JSON.parse(wf(t[1])),signature:y_(t[2]),raw:{header:t[0],payload:t[1]}}}async function k_(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function S_(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){r(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function j_(e){return("0"+e.toString(16)).substr(-2)}function C_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,j_).join("")}async function E_(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function N_(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await E_(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function us(e,t,n=!1){const r=C_();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Ug(e,`${t}-code-verifier`,s);const i=await N_(r);return[i,r===i?"plain":"s256"]}const T_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I_(e){const t=e.headers.get(Sd);if(!t||!t.match(T_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function A_(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function P_(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var R_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Ur=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),F_=[502,503,504];async function kf(e){var t;if(!w_(e))throw new jd(Ur(e),0);if(F_.includes(e.status))throw new jd(Ur(e),e.status);let n;try{n=await e.json()}catch(i){throw new $g(Ur(i),i)}let r;const s=I_(e);if(s&&s.getTime()>=zg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vf(Ur(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new sr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new vf(Ur(n),e.status,n.weak_password.reasons);throw new c_(Ur(n),e.status||500,r)}const B_=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ae(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Sd]||(i[Sd]=zg["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await O_(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function O_(e,t,n,r,s,i){const a=B_(t,r,s,i);let l;try{l=await e(n,Object.assign({},a))}catch(c){throw console.error(c),new jd(Ur(c),0)}if(l.ok||await kf(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await kf(c)}}function or(e){var t;let n=null;D_(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=v_(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Sf(e){const t=or(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function hr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function L_(e){return{data:e,error:null}}function z_(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,a=R_(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function $_(e){return e}function D_(e){return e.access_token&&e.refresh_token&&e.expires_in}var M_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class U_{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Mg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n="global"){try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:hr})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=M_(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:z_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hr})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:$_});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);d[`${b}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ce(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hr})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:hr})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:hr})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){try{const{data:n,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(t){try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}const H_={getItem:e=>Ho()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ho()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ho()&&globalThis.localStorage.removeItem(e)}};function jf(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function W_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const hs={debug:!!(globalThis&&Ho()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Hg extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class q_ extends Hg{}async function V_(e,t,n){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new q_(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(hs.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}W_();const K_={url:s_,storageKey:o_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:i_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Cf(e,t,n){return await n()}class ci{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ci.nextInstanceID,ci.nextInstanceID+=1,this.instanceID>0&&Tn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},K_),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new U_({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Mg(s.fetch),this.lock=s.lock||Cf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Tn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=V_:this.lock=Cf,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ho()?this.storage=H_:(this.memoryStorage={},this.storage=jf(this.memoryStorage)):(this.memoryStorage={},this.storage=jf(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Lg}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=__(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Tn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),h_(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?{error:n}:{error:new $g("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:or}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await us(this.storage,this.storageKey)),i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:or})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:or})}else throw new qi("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:a,options:l}=t;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Sf})}else if("phone"in t){const{phone:i,password:a,options:l}=t;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Sf})}else throw new qi("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new fc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const n=await Ki(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:a}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:or});if(await Gi(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Ce(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:a}=t,l=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:or}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await us(this.storage,this.storageKey));const{error:h}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:u}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new qi("You must provide either an email or phone number.")}catch(l){if(Ce(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:or});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(Ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await us(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:L_})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new sr;const{error:s}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:a}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:a,error:l}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new qi("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<hc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hr}):await this._useSession(async n=>{var r,s,i;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sr}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:hr})})}catch(n){if(Ce(n))return u_(n)&&(await this._removeSession(),await Gi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new sr;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await us(this.storage,this.storageKey));const{data:d,error:u}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:hr});if(u)throw u;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new sr;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:a}=mc(t.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ce(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:a,error:l}=n;if(l)throw l;t=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new sr;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ce(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Tn())throw new Vi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Vi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new xf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vi("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new xf("No code detected.");const{data:m,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!a||!d)throw new Vi("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const p=f-u;p*1e3<=ys&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:y,error:b}=await this._getUser(i);if(b)throw b;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(r){if(Ce(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ki(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(d_(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Gi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=b_(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await us(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return Tn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ce(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)throw a;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await S_(async s=>(s>0&&await k_(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:or})),(s,i)=>{const a=200*Math.pow(2,s);return i&&pc(i)&&Date.now()+a-r<ys})}catch(r){if(this._debug(n,"error",r),Ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Ki(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<hc;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${hc}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),pc(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new sr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new jl;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new sr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ce(i)){const a={session:null,error:i};return pc(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ug(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Gi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ys);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/ys);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ys}ms, refresh threshold is ${kd} ticks`),s<=kd&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Hg)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await us(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:a,error:l}=await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=mc(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(a=>a.kid===t);if(r||(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+l_>Date.now()))return r;const{data:s,error:i}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Uo("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(a=>a.kid===t),!r)throw new Uo("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return{data:null,error:v};r=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=mc(r);if(A_(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const d=P_(s.alg),u=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,x_(`${l}.${c}`)))throw new Uo("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}ci.nextInstanceID=0;const G_=ci;class J_ extends G_{constructor(t){super(t)}}var Z_=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function l(u){try{d(r.next(u))}catch(h){a(h)}}function c(u){try{d(r.throw(u))}catch(h){a(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((r=r.apply(e,t||[])).next())})};class Y_{constructor(t,n,r){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=n_(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Gb,realtime:Zb,auth:Object.assign(Object.assign({},Jb),{storageKey:d}),global:Kb},h=r_(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=e_(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new mb(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new q1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Wb(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Z_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new J_({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Ib(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wg=(e,t,n)=>new Y_(e,t,n),qg="https://mjbhockriytxstmwffjy.supabase.co",Vg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qYmhvY2tyaXl0eHN0bXdmZmp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMzUxNTAsImV4cCI6MjA2MzYxMTE1MH0.DIwmXTjsGcS1I1-PDAewTHUMCJuRelEtso5tNRhwgzY",we=Wg(qg,Vg,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:localStorage}}),Q_=async()=>{try{console.log("Checking storage buckets");const{data:e,error:t}=await we.storage.listBuckets();if(t){console.error("Error listing storage buckets:",t);return}console.log("Available storage buckets:",e);const n=e==null?void 0:e.find(r=>r.name==="avatars");console.log(n?"Avatars bucket exists and is available for use":"Avatars bucket doesn't exist. This should be created in the Supabase dashboard.")}catch(e){console.error("Error initializing storage:",e)}};setTimeout(()=>{Q_().catch(e=>{console.error("Failed to initialize storage:",e)})},1e3);class X_{async getUserProjects(){const{data:t,error:n}=await we.from("projects").select("*").order("updated_at",{ascending:!1});if(n)throw n;return t.map(this.mapDatabaseProjectToModel)}async getProjectById(t){const{data:n,error:r}=await we.from("projects").select(`
        *,
        files:project_files(*)
      `).eq("id",t).single();if(r)throw r;return this.mapDatabaseProjectToModel(n)}async syncProject(t){try{const r=await fetch("https://mjbhockriytxstmwffjy.supabase.co/functions/v1/sync-project",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qYmhvY2tyaXl0eHN0bXdmZmp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMzUxNTAsImV4cCI6MjA2MzYxMTE1MH0.DIwmXTjsGcS1I1-PDAewTHUMCJuRelEtso5tNRhwgzY"},body:JSON.stringify({project:{id:t.id,name:t.name,description:t.description||"",is_public:t.is_public||!1},files:t.files.map(i=>({id:i.id,name:i.name,path:i.path,content:i.content||"",type:i.type,parent_id:this.getParentIdFromProject(i,t)}))})}),s=await r.json();if(!r.ok)throw new Error(s.message||"Failed to sync project");return this.mapDatabaseProjectToModel(s.project)}catch(n){throw console.error("Error syncing project:",n),n}}async createProject(t,n=!1){const{data:r,error:s}=await we.from("projects").insert({name:t,is_public:n}).select().single();if(s)throw s;return this.mapDatabaseProjectToModel(r)}async updateProject(t,n){const{error:r}=await we.from("projects").update(n).eq("id",t);if(r)throw r}async deleteProject(t){const{error:n}=await we.from("projects").delete().eq("id",t);if(n)throw n}async addCollaborator(t,n,r){const{error:s}=await we.from("project_collaborators").insert({project_id:t,user_id:n,permission:r});if(s)throw s}async removeCollaborator(t,n){const{error:r}=await we.from("project_collaborators").delete().eq("project_id",t).eq("user_id",n);if(r)throw r}async getProjectCollaborators(t){const{data:n,error:r}=await we.from("project_collaborators").select(`
        id,
        permission,
        profiles:user_id (id, username, avatar_url)
      `).eq("project_id",t);if(r)throw r;return n.map(s=>({id:s.profiles.id,username:s.profiles.username,avatar_url:s.profiles.avatar_url,permission:s.permission}))}async inviteCollaborator(t,n,r){var l;const{data:s,error:i}=await we.from("profiles").select("id").eq("email",n).single();if(i)throw new Error("User not found with that email");const{error:a}=await we.from("collaboration_invites").insert({project_id:t,invitee_id:s.id,inviter_id:(l=(await we.auth.getUser()).data.user)==null?void 0:l.id,permission:r});if(a)throw a}async respondToInvitation(t,n){const r=n?"accepted":"rejected",{error:s}=await we.from("collaboration_invites").update({status:r}).eq("id",t);if(s)throw s}async getPendingInvitations(){const{data:t,error:n}=await we.from("collaboration_invites").select(`
        id,
        project_id,
        permission,
        created_at,
        projects:project_id (name),
        profiles:inviter_id (id, username, avatar_url)
      `).eq("status","pending");if(n)throw n;return t.map(r=>({id:r.id,project_id:r.project_id,project_name:r.projects.name,inviter_name:r.profiles.username,permission:r.permission,created_at:r.created_at}))}mapDatabaseProjectToModel(t){let n=[];return t.files&&(n=t.files.map(r=>({id:r.id,name:r.name,type:r.type,path:r.path,content:r.content,children:this.getChildrenIds(r.id,t.files)}))),{id:t.id,name:t.name,description:t.description,path:`/projects/${t.id}`,files:n,createdAt:t.created_at,user_id:t.user_id,is_public:t.is_public}}getChildrenIds(t,n){return n.filter(r=>r.parent_id===t).map(r=>r.id)}getParentIdFromProject(t,n){if(!t.path||t.path==="/")return null;const r=t.path.split("/");r.pop();const s=r.join("/")||"/",i=n.files.find(a=>a.path===s);return(i==null?void 0:i.id)||null}}const Ji=new X_,Kg=_.createContext({user:null,session:null,profile:null,loading:!0,error:null,signUp:async()=>{},signIn:async()=>{},signOut:async()=>{},signInWithGithub:async()=>{},signInWithGoogle:async()=>{},updateProfile:async()=>{},refreshSession:async()=>{}}),ht=()=>_.useContext(Kg),ew=({children:e})=>{const[t,n]=_.useState(null),[r,s]=_.useState(null),[i,a]=_.useState(null),[l,c]=_.useState(!0),[d,u]=_.useState(null),[h,f]=_.useState(!1);_.useEffect(()=>{console.log("AuthProvider: Initializing auth state");let k=!0;(async()=>{try{c(!0);const{data:{session:T},error:B}=await we.auth.getSession();if(B)throw console.error("Session fetch error:",B),B;k&&(console.log("Initial session:",T?"exists":"null"),T&&(s(T),n(T.user),await p(T.user.id)),c(!1),f(!0))}catch(T){k&&(console.error("Error initializing auth:",T),c(!1),f(!0))}})();const{data:{subscription:R}}=we.auth.onAuthStateChange(async(T,B)=>{console.log("Auth state changed:",T,B?"Session exists":"No session"),k&&(B?(console.log("Setting new session and user"),s(B),n(B.user),await p(B.user.id)):(console.log("Clearing auth state"),s(null),n(null),a(null)),c(!1))});return()=>{k=!1,R==null||R.unsubscribe()}},[]);const p=async k=>{try{console.log("Fetching profile for user:",k);const{data:I,error:R}=await we.from("profiles").select("*").eq("id",k).single();if(R)throw console.error("Error fetching profile:",R),R;if(I)console.log("Profile data retrieved:",I),a(I);else{console.log("No profile found for user, creating one...");const{error:T}=await we.from("profiles").insert({id:k});if(T)console.error("Error creating profile:",T);else{const{data:B}=await we.from("profiles").select("*").eq("id",k).single();B&&a(B)}}}catch(I){console.error("Error fetching profile:",I)}},v=async(k,I,R)=>{try{u(null),c(!0),console.log("Signing up user with email:",k);const{data:T,error:B}=await we.auth.signUp({email:k,password:I,options:{data:{username:R}}});if(B)throw B;console.log("Sign up successful:",T),T.user&&(n(T.user),s(T.session),T.user.id&&R&&await we.from("profiles").upsert({id:T.user.id,username:R}))}catch(T){console.error("Error signing up:",T),u(T.message)}finally{c(!1)}},y=async(k,I)=>{try{u(null),c(!0),console.log("Signing in user with email:",k);const{data:R,error:T}=await we.auth.signInWithPassword({email:k,password:I});if(T)throw T;console.log("Sign in successful:",R),n(R.user),s(R.session),localStorage.getItem("hasSeenWelcome")||localStorage.setItem("hasSeenWelcome","false")}catch(R){console.error("Error signing in:",R),u(R.message)}finally{c(!1)}},b=async()=>{try{c(!0),console.log("Signing out user");const{error:k}=await we.auth.signOut();if(k)throw k;n(null),s(null),a(null),localStorage.removeItem("supabase.auth.token"),console.log("Sign out successful")}catch(k){console.error("Error signing out:",k),u(k.message)}finally{c(!1)}},g=async()=>{try{u(null),console.log("Starting GitHub sign in");const{data:k,error:I}=await we.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+"/auth/callback"}});if(I)throw I;console.log("GitHub auth initiated:",k)}catch(k){console.error("Error signing in with GitHub:",k),u(k.message)}},m=async()=>{try{u(null),console.log("Starting Google sign in");const{data:k,error:I}=await we.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/auth/callback"}});if(I)throw I;console.log("Google auth initiated:",k)}catch(k){console.error("Error signing in with Google:",k),u(k.message)}},x=async k=>{try{if(u(null),c(!0),!t)throw new Error("User not authenticated");console.log("Updating profile:",k);const{error:I}=await we.from("profiles").update(k).eq("id",t.id);if(I)throw I;console.log("Profile updated successfully"),await p(t.id)}catch(I){console.error("Error updating profile:",I),u(I.message)}finally{c(!1)}},E=async()=>{try{u(null),c(!0),console.log("Refreshing session");const{data:k,error:I}=await we.auth.refreshSession();if(I)throw I;k.session?(console.log("Session refreshed successfully"),s(k.session),n(k.session.user),k.session.user&&await p(k.session.user.id)):(console.log("No session after refresh"),s(null),n(null))}catch(k){console.error("Error refreshing session:",k),u(k.message)}finally{c(!1)}};return o.jsx(Kg.Provider,{value:{user:t,session:r,profile:i,loading:l&&!h,error:d,signUp:v,signIn:y,signOut:b,signInWithGithub:g,signInWithGoogle:m,updateProfile:x,refreshSession:E},children:e})},Gg=_.createContext({projects:[],currentProject:null,fileTree:[],openFiles:[],currentFile:null,unsavedFiles:new Set,loading:!1,error:null,isOffline:!1,isSyncing:!1,createNewProject:async()=>{},selectProject:()=>{},openProject:()=>{},openFile:()=>{},closeFile:()=>{},setCurrentFile:()=>{},saveFile:async()=>{},createNewFile:async()=>({id:"",name:"",type:"file",path:""}),createNewFolder:async()=>({id:"",name:"",type:"directory",path:""}),exportProject:async()=>"",deleteFile:async()=>{},renameFile:async()=>{},findFileById:()=>null,copyFile:()=>{},pasteFile:async()=>{},moveFile:async()=>{},clipboard:null,updateFileContent:()=>{},hasUnsavedChanges:()=>!1,syncWithServer:async()=>{},togglePublic:async()=>{},refreshProjects:async()=>{},reorderTabs:()=>{},duplicateFile:async()=>({id:"",name:"",type:"file",path:""}),toggleOfflineMode:()=>{},syncOfflineChanges:async()=>{}}),Xe=()=>_.useContext(Gg),tw=({children:e})=>{const{user:t}=ht(),[n,r]=_.useState(cc),[s,i]=_.useState(null),[a,l]=_.useState([]),[c,d]=_.useState([]),[u,h]=_.useState(null),[f,p]=_.useState([]),[v,y]=_.useState(null),[b,g]=_.useState(new Set),[m,x]=_.useState(!1),[E,k]=_.useState(null),[I,R]=_.useState(!1),[T,B]=_.useState(!1);_.useEffect(()=>{const N=Je.loadProjects();N.length>0&&r(w=>{const A=[...w];return N.forEach(G=>{A.some(X=>X.id===G.id)||A.push(G)}),A});const j=Je.loadRecentProjects();j.length>0&&p(j)},[]),_.useEffect(()=>()=>{},[]),_.useEffect(()=>{t?K():(r(cc),s&&!cc.find(N=>N.id===s.id)&&(i(null),d([]),h(null)))},[t]),_.useEffect(()=>{s?(l(s.files),P(s),Je.saveCurrentProjectId(s.id)):l([])},[s]),_.useEffect(()=>{s&&Je.saveOpenTabs(s.id,c)},[c,s]),_.useEffect(()=>{s&&u?Je.saveCurrentFileId(s.id,u.id):s&&Je.saveCurrentFileId(s.id,null)},[u,s]),_.useEffect(()=>{s&&Je.saveUnsavedFiles(s.id,Array.from(b))},[b,s]);const P=N=>{p(j=>{const w=j.filter(G=>G.id!==N.id);return[N,...w].slice(0,5)})},K=async()=>{try{if(x(!0),k(null),t&&!jn.isOffline()){const N=await Ji.getUserProjects();N.forEach(j=>{Je.saveProject(j)}),r(N)}}catch(N){console.error("Error loading projects:",N),k("Failed to load your projects. Using local copies instead.");const j=Je.loadProjects();r(j)}finally{x(!1)}},F=async(N="New Project",j)=>{try{x(!0),k(null);let w;if(t&&!jn.isOffline())w=await Ji.createProject(N);else{let A;j?A=nw.createFilesFromTemplate(j):A=[{id:"file-1",name:"index.js",type:"file",path:"/index.js",content:`// Welcome to Code Canvas!
console.log("Hello, world!");`},{id:"file-2",name:"style.css",type:"file",path:"/style.css",content:`/* Styles for your project */
body {
  font-family: sans-serif;
  margin: 0;
  padding: 20px;
}`},{id:"folder-1",name:"src",type:"directory",path:"/src",children:["file-3","file-4"]},{id:"file-3",name:"app.js",type:"file",path:"/src/app.js",content:`// App logic goes here
function init() {
  console.log("App initialized");
}

init();`},{id:"file-4",name:"utils.js",type:"file",path:"/src/utils.js",content:`// Utility functions
export function formatDate(date) {
  return new Date(date).toLocaleDateString();
}`}],w={id:Date.now().toString(),name:N,path:`/projects/${N.toLowerCase().replace(/\s+/g,"-")}`,files:A,createdAt:new Date().toISOString(),user_id:"mock-user-id",is_public:!1},Je.saveProject(w)}r(A=>[...A,w]),C(w)}catch(w){console.error("Error creating project:",w),k("Failed to create new project")}finally{x(!1)}},L=N=>{const j=n.find(w=>w.id===N)||f.find(w=>w.id===N)||null;j?C(j):(i(null),d([]),h(null),g(new Set))},C=N=>{r(w=>w.some(A=>A.id===N.id)?w:[...w,N]),i(N);const j=Je.loadOpenTabs(N.id);if(j.length>0){d(j),Je.getCurrentFileId(N.id),h(j[0]);const w=Je.loadUnsavedFiles(N.id);g(new Set(w))}else d([]),h(null),g(new Set);P(N),Je.saveCurrentProjectId(N.id)},Z=N=>s&&s.files.find(j=>j.id===N)||null,W=N=>{if(N.type==="directory")return;if(c.some(A=>A.id===N.id)){z(N.id);return}const j=vg(N.name),w={id:N.id,name:N.name,path:N.path,language:j,content:N.content||""};d(A=>[...A,w]),h(w)},U=N=>{const j=(u==null?void 0:u.id)===N;if(d(w=>{const A=w.filter(G=>G.id!==N);if(j&&A.length>0){const G=w.findIndex(V=>V.id===N),X=Math.min(G,A.length-1);h(A[X])}else j&&h(null);return s&&Je.saveOpenTabs(s.id,A),A}),b.has(N)){const w=new Set(b);w.delete(N),g(w)}},z=N=>{const j=c.find(w=>w.id===N)||null;h(j),s&&Je.saveCurrentFileId(s.id,N)},q=(N,j)=>{if(d(w=>w.map(A=>A.id===N?{...A,content:j}:A)),!b.has(N)){const w=new Set(b);w.add(N),g(w)}},re=N=>b.has(N),H=async(N,j)=>{try{if(x(!0),d(w=>w.map(A=>A.id===N?{...A,content:j}:A)),s){const w=s.files.find(A=>A.id===N);if(w&&w.type==="file"){if(r(A=>A.map(G=>G.id===s.id?{...G,files:G.files.map(X=>X.id===N&&X.type==="file"?{...X,content:j}:X)}:G)),i(A=>A&&{...A,files:A.files.map(G=>G.id===N&&G.type==="file"?{...G,content:j}:G)}),Je.saveProject(s),t&&!jn.isOffline())try{await O()}catch(A){console.error("Error syncing with server:",A)}if(b.has(N)){const A=new Set(b);A.delete(N),g(A)}}}}catch(w){console.error("Error saving file:",w),k("Failed to save file")}finally{x(!1)}},O=async()=>{try{if(!t||!s)return;x(!0),k(null);const N=await Ji.syncProject(s);r(j=>j.map(w=>w.id===N.id?N:w)),i(N)}catch(N){console.error("Error syncing with server:",N),k("Failed to sync project with server")}finally{x(!1)}},ie=async()=>{try{if(!t||!s)return;x(!0),k(null);const N=!s.is_public;await Ji.updateProject(s.id,{is_public:N});const j={...s,is_public:N};r(w=>w.map(A=>A.id===j.id?j:A)),i(j)}catch(N){console.error("Error toggling project visibility:",N),k("Failed to update project visibility")}finally{x(!1)}},M=async(N,j)=>{if(!s)throw new Error("No project is currently open");try{x(!0);const w=gc();let A;if(j){const ne=s.files.find(oe=>oe.id===j);if(!ne||ne.type!=="directory")throw new Error("Invalid parent directory");A=`${ne.path}/${N}`}else A=`/${N}`;if(s.files.some(ne=>ne.path===A))throw new Error(`A file at path ${A} already exists`);const X={id:w,name:N,type:"file",path:A,content:""};let V=[...s.files];j&&(V=V.map(ne=>ne.id===j&&ne.type==="directory"?{...ne,children:[...ne.children||[],w]}:ne)),V.push(X);const se={...s,files:V};if(i(se),l(V),r(ne=>ne.map(oe=>oe.id===s.id?se:oe)),Je.saveProject(se),t&&!jn.isOffline())try{await O()}catch(ne){console.error("Error syncing with server:",ne)}return W(X),X}catch(w){throw console.error("Error creating file:",w),w}finally{x(!1)}},Y=async(N,j)=>{if(!s)throw new Error("No project is currently open");try{x(!0);const w=gc();let A;if(j){const ne=s.files.find(oe=>oe.id===j);if(!ne||ne.type!=="directory")throw new Error("Invalid parent directory");A=`${ne.path}/${N}`}else A=`/${N}`;if(s.files.some(ne=>ne.path===A))throw new Error(`A folder at path ${A} already exists`);const X={id:w,name:N,type:"directory",path:A,children:[]};let V=[...s.files];j&&(V=V.map(ne=>ne.id===j&&ne.type==="directory"?{...ne,children:[...ne.children||[],w]}:ne)),V.push(X);const se={...s,files:V};if(i(se),l(V),r(ne=>ne.map(oe=>oe.id===s.id?se:oe)),Je.saveProject(se),t&&!jn.isOffline())try{await O()}catch(ne){console.error("Error syncing with server:",ne)}return X}catch(w){throw console.error("Error creating folder:",w),w}finally{x(!1)}},$=async()=>{if(!s)throw new Error("No project is currently open");try{const N=JSON.stringify(s,null,2),j=new Blob([N],{type:"application/json"}),w=URL.createObjectURL(j),A=document.createElement("a");return A.href=w,A.download=`${s.name.toLowerCase().replace(/\s+/g,"-")}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(w),A.download}catch(N){throw console.error("Error exporting project:",N),N}},fe=async N=>{if(!s)throw new Error("No project is open");try{x(!0);const j=Z(N);if(!j)throw new Error("File not found");const w=new Set([N]),A=se=>{const ne=Z(se);ne&&ne.type==="directory"&&ne.children&&ne.children.forEach(oe=>{w.add(oe),A(oe)})};j.type==="directory"&&A(N),c.forEach(se=>{w.has(se.id)&&U(se.id)});let G=[...s.files];const X=G.find(se=>{var ne;return se.type==="directory"&&((ne=se.children)==null?void 0:ne.includes(N))});X&&(G=G.map(se=>{var ne;return se.id===X.id?{...se,children:(ne=se.children)==null?void 0:ne.filter(oe=>oe!==N)}:se})),G=G.filter(se=>!w.has(se.id));const V={...s,files:G};if(i(V),l(G),r(se=>se.map(ne=>ne.id===s.id?V:ne)),Je.saveProject(V),t&&!jn.isOffline())try{await O()}catch(se){console.error("Error syncing with server:",se)}}catch(j){throw console.error("Error deleting file:",j),j}finally{x(!1)}},me=async(N,j)=>{if(!s)throw new Error("No project is open");try{x(!0);const w=Z(N);if(!w)throw new Error("File not found");const A=w.path.substring(0,w.path.lastIndexOf("/")),G=A===""?`/${j}`:`${A}/${j}`;if(s.files.some(D=>D.path===G&&D.id!==N))throw new Error(`A file with name ${j} already exists`);let V=[...s.files];((D,J,ee)=>{V=V.map(ae=>{if(ae.id===D)return{...ae,name:j,path:ee};if(ae.path.startsWith(J+"/")){const ke=ae.path.substring(J.length);return{...ae,path:ee+ke}}return ae})})(N,w.path,G);const ne=c.map(D=>D.id===N?{...D,name:j,path:G}:D),oe={...s,files:V};if(i(oe),l(V),d(ne),(u==null?void 0:u.id)===N&&h({...u,name:j,path:G}),r(D=>D.map(J=>J.id===s.id?oe:J)),Je.saveProject(oe),t&&!jn.isOffline())try{await O()}catch(D){console.error("Error syncing with server:",D)}}catch(w){throw console.error("Error renaming file:",w),w}finally{x(!1)}},te=N=>{const j=Z(N);j&&y(j)},de=async N=>{if(!(!s||!v))try{x(!0);const j=(J,ee)=>{if((v==null?void 0:v.type)==="file"){const ae=J.lastIndexOf("."),ke=ae>0?J.substring(ae):"",je=ae>0?J.substring(0,ae):J;let We=J,Pe=1;for(;ee.includes(We);)We=`${je} (${Pe})${ke}`,Pe++;return We}else{let ae=J,ke=1;for(;ee.includes(ae);)ae=`${J} (${ke})`,ke++;return ae}},w=(J,ee,ae)=>{const ke=[],je=gc(),We=ae||J.name,Pe=ee==="/"?`/${We}`:`${ee}/${We}`,zn={id:je,name:We,type:J.type,path:Pe};if(J.type==="file")zn.content=J.content;else if(zn.children=[],J.children&&J.children.length>0){const ho=J.children.map(Vt=>Z(Vt)).filter(Boolean);for(const Vt of ho)w(Vt,Pe).forEach(Si=>{var ji;(ji=zn.children)==null||ji.push(Si.id),ke.push(Si)})}return ke.push(zn),ke};let A=null,G="/";if(N){if(A=Z(N),!A||A.type!=="directory")throw new Error("Invalid target directory");G=A.path}const V=s.files.filter(J=>J.path.substring(0,J.path.lastIndexOf("/"))===G).map(J=>J.name),se=j(v.name,V),ne=w(v,G,se);let oe=[...s.files,...ne];A&&(oe=oe.map(J=>J.id===A.id?{...J,children:[...J.children||[],ne[ne.length-1].id]}:J));const D={...s,files:oe};if(i(D),l(oe),r(J=>J.map(ee=>ee.id===s.id?D:ee)),Je.saveProject(D),t&&!jn.isOffline())try{await O()}catch(J){console.error("Error syncing with server:",J)}}catch(j){throw console.error("Error pasting file:",j),j}finally{x(!1)}},ce=async(N,j)=>{if(s)try{x(!0);const w=Z(N),A=j==="root"?null:Z(j);if(!w)throw new Error("File not found");if(j!=="root"&&(!A||A.type!=="directory"))throw new Error("Invalid target directory");const G=s.files.find(ee=>{var ae;return ee.type==="directory"&&((ae=ee.children)==null?void 0:ae.includes(N))}),X=j==="root"?`/${w.name}`:`${A.path}/${w.name}`;if(s.files.some(ee=>ee.path===X&&ee.id!==N))throw new Error(`A file with name ${w.name} already exists in the destination directory`);const se=w.path;let ne=[...s.files];ne=((ee,ae,ke)=>ee.map(je=>{if(je.id===N)return{...je,path:X};if(je.path.startsWith(ae+"/")){const We=je.path.substring(ae.length);return{...je,path:ke+We}}return je}))(ne,se,X),G&&(ne=ne.map(ee=>{var ae;return ee.id===G.id?{...ee,children:(ae=ee.children)==null?void 0:ae.filter(ke=>ke!==N)}:ee})),A&&(ne=ne.map(ee=>ee.id===A.id?{...ee,children:[...ee.children||[],N]}:ee));const D={...s,files:ne};i(D),l(ne);const J=c.map(ee=>ee.id===N?{...ee,path:X}:ee);d(J),(u==null?void 0:u.id)===N&&h({...u,path:X}),r(ee=>ee.map(ae=>ae.id===s.id?D:ae)),Je.saveProject(D),t&&!jn.isOffline()&&await O()}catch(w){throw console.error("Error moving file:",w),w}finally{x(!1)}},ye=async N=>{if(!s)throw new Error("No project is open");try{x(!0);const j=Z(N);if(!j)throw new Error("File not found");te(N);const w=s.files.find(D=>{var J;return D.type==="directory"&&((J=D.children)==null?void 0:J.includes(N))});w?await de(w.id):await de();const A=j.name,G=A.lastIndexOf("."),X=G>0?A.substring(G):"",V=G>0?A.substring(0,G):A,se=j.type==="file"?new RegExp(`^${V} \\(\\d+\\)${X}$`):new RegExp(`^${A} \\(\\d+\\)$`);return s.files.filter(D=>se.test(D.name)&&D.type===j.type).sort((D,J)=>{const ee=D.name.match(/\((\d+)\)/),ae=J.name.match(/\((\d+)\)/),ke=ee?parseInt(ee[1],10):0;return(ae?parseInt(ae[1],10):0)-ke})[0]||j}catch(j){throw console.error("Error duplicating file:",j),j}finally{x(!1)}},ge=N=>{d(N),s&&Je.saveOpenTabs(s.id,N)},S=()=>{},Q=async()=>{try{x(!0),k(null),await jn.forceSyncNow(),await K()}catch(N){console.error("Error syncing offline changes:",N),k("Failed to sync offline changes")}finally{x(!1)}};return o.jsx(Gg.Provider,{value:{projects:n,currentProject:s,fileTree:a,openFiles:c,currentFile:u,unsavedFiles:b,loading:m,error:E,isOffline:I,isSyncing:T,createNewProject:F,selectProject:L,openProject:C,openFile:W,closeFile:U,setCurrentFile:z,saveFile:H,createNewFile:M,createNewFolder:Y,exportProject:$,deleteFile:fe,renameFile:me,findFileById:Z,copyFile:te,pasteFile:de,moveFile:ce,clipboard:v,updateFileContent:q,hasUnsavedChanges:re,syncWithServer:O,togglePublic:ie,refreshProjects:K,reorderTabs:ge,duplicateFile:ye,toggleOfflineMode:S,syncOfflineChanges:Q},children:e})};function gc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const jn={isOffline:()=>!1,setOfflineMode:e=>{},onOfflineStatusChange:e=>{},removeOfflineListener:e=>{},onSyncStatusChange:e=>{},removeSyncListener:e=>{},forceSyncNow:async()=>{}},Je={loadProjects:()=>[],saveProject:e=>{},loadRecentProjects:()=>[],saveRecentProjects:e=>{},getCurrentProjectId:()=>null,saveCurrentProjectId:e=>{},loadOpenTabs:e=>[],saveOpenTabs:(e,t)=>{},getCurrentFileId:e=>null,saveCurrentFileId:(e,t)=>{},loadUnsavedFiles:e=>[],saveUnsavedFiles:(e,t)=>{}},nw={createFilesFromTemplate:e=>[]};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(e,t)=>{const n=_.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},u)=>_.createElement("svg",{ref:u,...rw,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${sw(e)}`,l].join(" "),...d},[...t.map(([h,f])=>_.createElement(h,f)),...Array.isArray(c)?c:[c]]));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=le("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=le("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=le("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=le("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=le("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=le("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=le("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=le("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=le("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=le("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=le("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=le("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=le("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=le("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=le("CornerLeftDown",[["polyline",{points:"14 15 9 20 4 15",key:"nkc4i"}],["path",{d:"M20 4h-7a4 4 0 0 0-4 4v12",key:"nbpdq2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=le("CornerRightDown",[["polyline",{points:"10 15 15 20 20 15",key:"axus6l"}],["path",{d:"M4 4h7a4 4 0 0 1 4 4v12",key:"wcbgct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=le("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=le("FilePlus",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"12",x2:"12",y1:"18",y2:"12",key:"1tsf04"}],["line",{x1:"9",x2:"15",y1:"15",y2:"15",key:"110plj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=le("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=le("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=le("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=le("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=le("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=le("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ey=le("GitCommitHorizontal",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=le("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=le("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=le("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const If=le("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=le("Indent",[["polyline",{points:"3 8 7 12 3 16",key:"f3rxhf"}],["line",{x1:"21",x2:"11",y1:"12",y2:"12",key:"1fxxak"}],["line",{x1:"21",x2:"11",y1:"6",y2:"6",key:"asgu94"}],["line",{x1:"21",x2:"11",y1:"18",y2:"18",key:"13dsj7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=le("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=le("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=le("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=le("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=le("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=le("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=le("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=le("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=le("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=le("PackageOpen",[["path",{d:"M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z",key:"1vy178"}],["path",{d:"m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z",key:"s3bv25"}],["line",{x1:"12",x2:"12",y1:"22",y2:"13",key:"1o4xyi"}],["path",{d:"M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5",key:"1na2nq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=le("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=le("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=le("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=le("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=le("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=le("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=le("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=le("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ow=le("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=le("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=le("TerminalSquare",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=le("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=le("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=le("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=le("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=le("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=le("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=le("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=le("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=le("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class qw{constructor(){Se(this,"commands",new Map)}registerCommand(t){this.commands.set(t.id,t)}registerCommands(t){t.forEach(n=>this.registerCommand(n))}getCommand(t){return this.commands.get(t)}getAllCommands(){return Array.from(this.commands.values())}executeCommand(t){const n=this.commands.get(t);return n?(n.action(),!0):!1}searchCommands(t){if(!t)return this.getAllCommands();const n=t.toLowerCase();return this.getAllCommands().filter(r=>r.title.toLowerCase().includes(n)||r.category.toLowerCase().includes(n))}}const zs=new qw;class Vw{constructor(){Se(this,"bindings",new Map);Se(this,"handlers",new Map);Se(this,"activeScope","global");Se(this,"enabled",!0);Se(this,"handleKeyDown",t=>{var n,r;if(this.enabled&&!(["INPUT","TEXTAREA","SELECT"].includes((n=t.target)==null?void 0:n.tagName)&&!((r=t.target)!=null&&r.classList.contains("allow-keybindings")))){for(const[s,i]of this.bindings.entries())if(!(i.scope!=="global"&&i.scope!==this.activeScope)&&this.isKeyComboMatch(t,i.currentKeyCombo)){const a=this.handlers.get(s);if(a){t.preventDefault(),a();return}}}});this.setupDefaultBindings(),this.loadCustomBindings(),this.setupGlobalListeners()}setupDefaultBindings(){this.registerBinding({id:"editor.save",action:"Save",category:"Editor",description:"Save the current file",defaultKeyCombo:{key:"s",ctrl:!0},scope:"editor"}),this.registerBinding({id:"editor.format",action:"Format Document",category:"Editor",description:"Format the current document",defaultKeyCombo:{key:"f",alt:!0,shift:!0},scope:"editor"}),this.registerBinding({id:"editor.find",action:"Find",category:"Editor",description:"Find in current file",defaultKeyCombo:{key:"f",ctrl:!0},scope:"editor"}),this.registerBinding({id:"editor.replace",action:"Replace",category:"Editor",description:"Find and replace in current file",defaultKeyCombo:{key:"h",ctrl:!0},scope:"editor"}),this.registerBinding({id:"editor.toggleMinimap",action:"Toggle Minimap",category:"Editor",description:"Show or hide the code minimap",defaultKeyCombo:{key:"m",alt:!0},scope:"editor"}),this.registerBinding({id:"global.commandPalette",action:"Open Command Palette",category:"Global",description:"Open the command palette",defaultKeyCombo:{key:"p",ctrl:!0,shift:!0},scope:"global"}),this.registerBinding({id:"global.search",action:"Global Search",category:"Global",description:"Search across all files",defaultKeyCombo:{key:"f",ctrl:!0,shift:!0},scope:"global"}),this.registerBinding({id:"global.toggleTheme",action:"Toggle Dark Mode",category:"Global",description:"Switch between light and dark themes",defaultKeyCombo:{key:"t",alt:!0,shift:!0},scope:"global"}),this.registerBinding({id:"global.shortcuts",action:"Show Keyboard Shortcuts",category:"Global",description:"Show keyboard shortcuts reference",defaultKeyCombo:{key:"k",ctrl:!0,shift:!0},scope:"global"}),this.registerBinding({id:"terminal.clear",action:"Clear Terminal",category:"Terminal",description:"Clear the terminal output",defaultKeyCombo:{key:"l",ctrl:!0},scope:"terminal"}),this.registerBinding({id:"terminal.run",action:"Run Current File",category:"Terminal",description:"Run the currently active file",defaultKeyCombo:{key:"r",alt:!0,shift:!0},scope:"terminal"}),this.registerBinding({id:"explorer.newFile",action:"New File",category:"Explorer",description:"Create a new file",defaultKeyCombo:{key:"n",alt:!0},scope:"explorer"}),this.registerBinding({id:"explorer.newFolder",action:"New Folder",category:"Explorer",description:"Create a new folder",defaultKeyCombo:{key:"n",alt:!0,shift:!0},scope:"explorer"})}registerBinding(t){const n={...t,currentKeyCombo:{...t.defaultKeyCombo}};this.bindings.set(t.id,n)}registerHandler(t,n){return this.handlers.set(t,n),()=>this.handlers.delete(t)}setScope(t){this.activeScope=t}enableKeyBindings(){this.enabled=!0}disableKeyBindings(){this.enabled=!1}setupGlobalListeners(){window.addEventListener("keydown",this.handleKeyDown)}isKeyComboMatch(t,n){const r=t.key.toLowerCase()===n.key.toLowerCase(),s=!!n.ctrl===t.ctrlKey,i=!!n.alt===t.altKey,a=!!n.shift===t.shiftKey,l=!!n.meta===t.metaKey;return r&&s&&i&&a&&l}getAllBindings(){return Array.from(this.bindings.values())}getBindingsByScope(t){return Array.from(this.bindings.values()).filter(n=>n.scope===t||n.scope==="global")}getBinding(t){return this.bindings.get(t)}updateBinding(t,n){const r=this.bindings.get(t);return r?(r.currentKeyCombo={...n},this.bindings.set(t,r),this.saveCustomBindings(),!0):!1}resetBinding(t){const n=this.bindings.get(t);return n?(n.currentKeyCombo={...n.defaultKeyCombo},this.bindings.set(t,n),this.saveCustomBindings(),!0):!1}resetAllBindings(){for(const[t,n]of this.bindings.entries())n.currentKeyCombo={...n.defaultKeyCombo},this.bindings.set(t,n);this.saveCustomBindings()}loadCustomBindings(){try{const t=localStorage.getItem("keyBindings");if(!t)return;const n=JSON.parse(t);for(const[r,s]of Object.entries(n)){const i=this.bindings.get(r);i&&(i.currentKeyCombo=s,this.bindings.set(r,i))}}catch(t){console.error("Error loading custom key bindings:",t)}}saveCustomBindings(){try{const t={};for(const[n,r]of this.bindings.entries())JSON.stringify(r.currentKeyCombo)!==JSON.stringify(r.defaultKeyCombo)&&(t[n]=r.currentKeyCombo);localStorage.setItem("keyBindings",JSON.stringify(t))}catch(t){console.error("Error saving custom key bindings:",t)}}formatKeyCombo(t){const n=[];t.ctrl&&n.push("Ctrl"),t.alt&&n.push("Alt"),t.shift&&n.push("Shift"),t.meta&&n.push("Meta");let r=t.key;return r===" "&&(r="Space"),r.length===1&&(r=r.toUpperCase()),n.push(r),n.join("+")}parseKeyCombo(t){const n=t.split("+").map(s=>s.trim());if(n.length===0)return null;const r={key:n[n.length-1].toLowerCase()};return n.includes("Ctrl")&&(r.ctrl=!0),n.includes("Alt")&&(r.alt=!0),n.includes("Shift")&&(r.shift=!0),n.includes("Meta")&&(r.meta=!0),r.key==="space"&&(r.key=" "),r}cleanup(){window.removeEventListener("keydown",this.handleKeyDown)}}const Fe=new Vw,ly=({onClose:e})=>{const{colors:t}=ve(),[n,r]=_.useState(""),[s,i]=_.useState("all"),c=Fe.getAllBindings().filter(h=>{if(s!=="all"&&h.scope!==s)return!1;if(!n)return!0;const f=n.toLowerCase();return h.action.toLowerCase().includes(f)||h.category.toLowerCase().includes(f)||h.description.toLowerCase().includes(f)||Fe.formatKeyCombo(h.currentKeyCombo).toLowerCase().includes(f)}).reduce((h,f)=>(h[f.category]||(h[f.category]=[]),h[f.category].push(f),h),{}),d=Object.keys(c).sort(),u=[{id:"all",label:"All Shortcuts"},{id:"global",label:"Global"},{id:"editor",label:"Editor"},{id:"terminal",label:"Terminal"},{id:"explorer",label:"Explorer"}];return o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},children:o.jsxs("div",{style:{backgroundColor:t.surface,borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",width:"90%",maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[o.jsxs("div",{style:{padding:"16px",borderBottom:`1px solid ${t.border}`,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx(El,{size:20,color:t.primary}),o.jsx("h2",{style:{margin:0,fontSize:"18px",color:t.text},children:"Keyboard Shortcuts"})]}),o.jsx("button",{onClick:e,style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",padding:"4px"},"aria-label":"Close",children:o.jsx(st,{size:20,color:t.textSecondary})})]}),o.jsxs("div",{style:{padding:"16px",borderBottom:`1px solid ${t.border}`,display:"flex",flexDirection:"column",gap:"12px"},children:[o.jsxs("div",{style:{position:"relative"},children:[o.jsx(Ln,{size:16,color:t.textSecondary,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)"}}),o.jsx("input",{type:"text",placeholder:"Search shortcuts...",value:n,onChange:h=>r(h.target.value),style:{width:"100%",padding:"8px 12px 8px 36px",borderRadius:"4px",border:`1px solid ${t.border}`,backgroundColor:t.background,color:t.text,fontSize:"14px"}}),n&&o.jsx("button",{onClick:()=>r(""),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",display:"flex",padding:"0"},children:o.jsx(st,{size:16,color:t.textSecondary})})]}),o.jsx("div",{style:{display:"flex",borderBottom:`1px solid ${t.border}`,marginBottom:"8px",paddingBottom:"4px"},children:u.map(h=>o.jsx("button",{onClick:()=>i(h.id),style:{background:"none",border:"none",borderBottom:`2px solid ${s===h.id?t.primary:"transparent"}`,padding:"8px 16px",color:s===h.id?t.primary:t.text,cursor:"pointer",fontWeight:s===h.id?600:400,fontSize:"14px"},children:h.label},h.id))})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",padding:"16px"},children:d.length===0?o.jsx("div",{style:{padding:"32px",textAlign:"center",color:t.textSecondary},children:"No shortcuts found"}):d.map(h=>o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h3",{style:{fontSize:"16px",color:t.primary,marginBottom:"12px",paddingBottom:"4px",borderBottom:`1px solid ${t.border}`},children:h}),o.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:o.jsx("tbody",{children:c[h].map(f=>o.jsxs("tr",{style:{borderBottom:`1px solid ${t.border}80`},children:[o.jsx("td",{style:{padding:"8px 16px 8px 8px",color:t.text,width:"40%"},children:f.action}),o.jsx("td",{style:{padding:"8px",color:t.textSecondary,fontSize:"13px",width:"40%"},children:f.description}),o.jsx("td",{style:{padding:"8px 8px 8px 16px",textAlign:"right",width:"20%"},children:o.jsx("code",{style:{display:"inline-block",padding:"4px 8px",borderRadius:"4px",backgroundColor:`${t.primary}15`,color:t.primary,fontFamily:"monospace",fontSize:"12px"},children:Fe.formatKeyCombo(f.currentKeyCombo)})})]},f.id))})})]},h))}),o.jsx("div",{style:{padding:"12px 16px",borderTop:`1px solid ${t.border}`,textAlign:"center",color:t.textSecondary,fontSize:"13px"},children:"Keyboard shortcuts can be customized in Settings → Keyboard"})]})})},Kw="_overlay_gtvuv_1",Gw="_palette_gtvuv_16",Jw="_searchContainer_gtvuv_28",Zw="_searchIcon_gtvuv_37",Yw="_searchInput_gtvuv_42",Qw="_searchActions_gtvuv_53",Xw="_searchAction_gtvuv_53",ek="_closeButton_gtvuv_74",tk="_commandsContainer_gtvuv_84",nk="_noResults_gtvuv_89",rk="_commandItem_gtvuv_95",sk="_commandTitle_gtvuv_104",ok="_commandMeta_gtvuv_109",ik="_commandCategory_gtvuv_114",ak="_commandShortcut_gtvuv_118",lk="_selected_gtvuv_123",Ct={overlay:Kw,palette:Gw,searchContainer:Jw,searchIcon:Zw,searchInput:Yw,searchActions:Qw,searchAction:Xw,closeButton:ek,commandsContainer:tk,noResults:nk,commandItem:rk,commandTitle:sk,commandMeta:ok,commandCategory:ik,commandShortcut:ak,selected:lk},ck=({isOpen:e,onClose:t})=>{const{colors:n}=ve(),[r,s]=_.useState(""),[i,a]=_.useState([]),[l,c]=_.useState(0),[d,u]=_.useState(!1),h=_.useRef(null),f=_.useRef(null);_.useEffect(()=>{e&&(s(""),a(zs.getAllCommands()),c(0),setTimeout(()=>{h.current&&h.current.focus()},10))},[e]),_.useEffect(()=>{a(zs.searchCommands(r)),c(0)},[r]);const p=y=>{switch(y.key){case"ArrowDown":y.preventDefault(),c(b=>b<i.length-1?b+1:b);break;case"ArrowUp":y.preventDefault(),c(b=>b>0?b-1:b);break;case"Enter":y.preventDefault(),i[l]&&v(i[l]);break;case"Escape":y.preventDefault(),t();break;case"k":y.ctrlKey&&(y.preventDefault(),t(),u(!0));break}};_.useEffect(()=>{if(f.current&&i.length>0){const y=f.current.querySelector(`[data-index="${l}"]`);y&&y.scrollIntoView({block:"nearest"})}},[l]);const v=y=>{zs.executeCommand(y.id),t()};return e?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:Ct.overlay,onClick:t,children:o.jsxs("div",{className:Ct.palette,onClick:y=>y.stopPropagation(),style:{backgroundColor:n.surface,borderColor:n.border},children:[o.jsxs("div",{className:Ct.searchContainer,children:[o.jsx(Ln,{size:16,color:n.textSecondary,className:Ct.searchIcon}),o.jsx("input",{ref:h,className:Ct.searchInput,style:{color:n.text},value:r,onChange:y=>s(y.target.value),onKeyDown:p,placeholder:"Type to search commands..."}),o.jsxs("div",{className:Ct.searchActions,children:[o.jsx("button",{className:Ct.searchAction,onClick:()=>{t(),u(!0)},title:"Keyboard Shortcuts (Ctrl+K)",children:o.jsx(El,{size:16,color:n.textSecondary})}),o.jsx("button",{className:Ct.closeButton,onClick:t,children:o.jsx(st,{size:16,color:n.textSecondary})})]})]}),o.jsx("div",{ref:f,className:Ct.commandsContainer,children:i.length===0?o.jsx("div",{className:Ct.noResults,style:{color:n.textSecondary},children:"No commands found"}):i.map((y,b)=>o.jsxs("div",{className:`${Ct.commandItem} ${b===l?Ct.selected:""}`,style:{backgroundColor:b===l?n.selectedItem:"transparent"},onClick:()=>v(y),"data-index":b,children:[o.jsx("div",{className:Ct.commandTitle,style:{color:n.text},children:y.title}),o.jsxs("div",{className:Ct.commandMeta,children:[o.jsx("span",{className:Ct.commandCategory,style:{color:n.textSecondary},children:y.category}),y.shortcut&&o.jsx("span",{className:Ct.commandShortcut,style:{color:n.primary},children:y.shortcut})]})]},y.id))})]})}),d&&o.jsx(ly,{onClose:()=>u(!1)})]}):null};class dk{searchFiles(t,n,r){if(!t.trim())return[];const s=[],{projectId:i,fileTree:a}=r;let l;if(n.useRegex)try{l=new RegExp(t,n.matchCase?"g":"gi")}catch{l=this.createSearchPattern(t,n)}else l=this.createSearchPattern(t,n);return a.forEach(c=>{if(c.type==="file"&&c.content){const d=this.findMatches(c.content,l);d.length>0&&s.push({fileId:c.id,fileName:c.name,filePath:c.path,matches:d})}}),s}createSearchPattern(t,n){const r=n.useRegex?t:this.escapeRegExp(t),s=n.wholeWord?`\\b${r}\\b`:r,i=n.matchCase?"g":"gi";return new RegExp(s,i)}findMatches(t,n){const r=[];return t.split(`
`).forEach((i,a)=>{n.lastIndex=0;let l;for(;(l=n.exec(i))!==null;)r.push({lineNumber:a+1,lineContent:i,matchStartIndex:l.index,matchEndIndex:l.index+l[0].length,matchText:l[0]})}),r}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}const uk=new dk,hk="_container_tiebx_1",fk="_lineNumber_tiebx_14",pk="_lineContent_tiebx_23",mk="_codePart_tiebx_32",gk="_matchedText_tiebx_36",fs={container:hk,lineNumber:fk,lineContent:pk,codePart:mk,matchedText:gk},yk=({match:e,onClick:t})=>{const{colors:n}=ve(),{lineNumber:r,lineContent:s,matchStartIndex:i,matchEndIndex:a}=e,l=s.substring(0,i),c=s.substring(i,a),d=s.substring(a),u=100,h=(f,p)=>f.length<=u/2?f:p==="start"?"..."+f.substring(f.length-u/2):f.substring(0,u/2)+"...";return o.jsxs("div",{className:fs.container,onClick:t,style:{backgroundColor:n.surface},children:[o.jsx("div",{className:fs.lineNumber,style:{color:n.textSecondary},children:r}),o.jsxs("div",{className:fs.lineContent,children:[o.jsx("span",{className:fs.codePart,children:h(l,"start")}),o.jsx("span",{className:fs.matchedText,style:{backgroundColor:n.selectedItem,color:n.textHighlight},children:c}),o.jsx("span",{className:fs.codePart,children:h(d,"end")})]})]})},xk="_container_1oj4m_1",vk="_header_1oj4m_7",bk="_backButton_1oj4m_14",_k="_title_1oj4m_25",wk="_searchWrapper_1oj4m_31",kk="_searchBarContainer_1oj4m_36",Sk="_searchInputContainer_1oj4m_40",jk="_searchIcon_1oj4m_46",Ck="_searchInput_1oj4m_40",Ek="_clearButton_1oj4m_60",Nk="_searchOptions_1oj4m_72",Tk="_optionLabel_1oj4m_78",Ik="_resultsSummary_1oj4m_89",Ak="_resultsContainer_1oj4m_95",Pk="_noResults_1oj4m_101",Rk="_noProject_1oj4m_101",Fk="_fileResult_1oj4m_107",Bk="_fileHeader_1oj4m_111",Ok="_fileName_1oj4m_121",Lk="_matchCount_1oj4m_126",De={container:xk,header:vk,backButton:bk,title:_k,searchWrapper:wk,searchBarContainer:kk,searchInputContainer:Sk,searchIcon:jk,searchInput:Ck,clearButton:Ek,searchOptions:Nk,optionLabel:Tk,resultsSummary:Ik,resultsContainer:Ak,noResults:Pk,noProject:Rk,fileResult:Fk,fileHeader:Bk,fileName:Ok,matchCount:Lk},cy=({onClose:e,onFileSelect:t})=>{const{colors:n}=ve(),{currentProject:r,fileTree:s,openFile:i,setCurrentFile:a}=Xe(),[l,c]=_.useState(""),[d,u]=_.useState([]),[h,f]=_.useState(!1),[p,v]=_.useState(0),[y,b]=_.useState({matchCase:!1,wholeWord:!1,useRegex:!1});_.useEffect(()=>{if(!r||!l.trim()){u([]),v(0);return}const x=setTimeout(()=>{f(!0);try{const E=uk.searchFiles(l,y,{projectId:r.id,fileTree:s});u(E);const k=E.reduce((I,R)=>I+R.matches.length,0);v(k)}catch(E){console.error("Search error:",E)}finally{f(!1)}},300);return()=>clearTimeout(x)},[l,y,r,s]);const g=x=>{b(E=>({...E,[x]:!E[x]}))},m=(x,E)=>{const k=s.find(I=>I.id===x);k&&k.type==="file"&&(i(k),t==null||t(x,E||0),e())};return r?o.jsxs("div",{className:De.container,style:{backgroundColor:n.background},children:[o.jsxs("div",{className:De.header,style:{borderBottomColor:n.border},children:[o.jsx("button",{className:De.backButton,onClick:e,children:o.jsx(Nf,{size:20,color:n.primary})}),o.jsx("h2",{className:De.title,style:{color:n.text},children:"Search"})]}),o.jsxs("div",{className:De.searchWrapper,children:[o.jsx("div",{className:De.searchBarContainer,children:o.jsxs("div",{className:De.searchInputContainer,children:[o.jsx(Ln,{size:16,color:n.textSecondary,className:De.searchIcon}),o.jsx("input",{type:"text",className:De.searchInput,style:{color:n.text,backgroundColor:n.surface,borderColor:n.border},placeholder:"Search in files...",value:l,onChange:x=>c(x.target.value),autoFocus:!0}),l&&o.jsx("button",{className:De.clearButton,onClick:()=>c(""),children:o.jsx(st,{size:14,color:n.textSecondary})})]})}),o.jsxs("div",{className:De.searchOptions,children:[o.jsxs("label",{className:De.optionLabel,children:[o.jsx("input",{type:"checkbox",checked:y.matchCase,onChange:()=>g("matchCase")}),o.jsx("span",{style:{color:n.text},children:"Match Case"})]}),o.jsxs("label",{className:De.optionLabel,children:[o.jsx("input",{type:"checkbox",checked:y.wholeWord,onChange:()=>g("wholeWord")}),o.jsx("span",{style:{color:n.text},children:"Whole Word"})]}),o.jsxs("label",{className:De.optionLabel,children:[o.jsx("input",{type:"checkbox",checked:y.useRegex,onChange:()=>g("useRegex")}),o.jsx("span",{style:{color:n.text},children:"Use Regex"})]})]})]}),o.jsx("div",{className:De.resultsSummary,children:l&&o.jsx("p",{style:{color:n.textSecondary},children:h?"Searching...":`${p} results in ${d.length} files`})}),o.jsxs("div",{className:De.resultsContainer,children:[d.map(x=>o.jsxs("div",{className:De.fileResult,children:[o.jsxs("div",{className:De.fileHeader,style:{color:n.primary},onClick:()=>m(x.fileId),children:[o.jsx("span",{className:De.fileName,children:x.fileName}),o.jsxs("span",{className:De.matchCount,children:[x.matches.length," matches"]})]}),x.matches.map((E,k)=>o.jsx(yk,{match:E,onClick:()=>m(x.fileId,E.lineNumber)},`${x.fileId}-${E.lineNumber}-${k}`))]},x.fileId)),l&&!h&&d.length===0&&o.jsx("p",{className:De.noResults,style:{color:n.textSecondary},children:"No matches found"})]})]}):o.jsxs("div",{className:De.container,style:{backgroundColor:n.background},children:[o.jsxs("div",{className:De.header,style:{borderBottomColor:n.border},children:[o.jsx("button",{className:De.backButton,onClick:e,children:o.jsx(Nf,{size:20,color:n.primary})}),o.jsx("h2",{className:De.title,style:{color:n.text},children:"Search"})]}),o.jsx("div",{className:De.noProject,children:o.jsx("p",{style:{color:n.textSecondary},children:"Please open a project first"})})]})};var zk=e=>{if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype};const Ka=zk,{hasOwnProperty:dy}=Object.prototype,{propertyIsEnumerable:$k}=Object,Ys=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0}),Dk=lt,Rf={concatArrays:!1,ignoreUndefined:!1},Pl=e=>{const t=[];for(const n in e)dy.call(e,n)&&t.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(e);for(const r of n)$k.call(e,r)&&t.push(r)}return t};function uo(e){return Array.isArray(e)?Mk(e):Ka(e)?Uk(e):e}function Mk(e){const t=e.slice(0,0);return Pl(e).forEach(n=>{Ys(t,n,uo(e[n]))}),t}function Uk(e){const t=Object.getPrototypeOf(e)===null?Object.create(null):{};return Pl(e).forEach(n=>{Ys(t,n,uo(e[n]))}),t}const uy=(e,t,n,r)=>(n.forEach(s=>{typeof t[s]>"u"&&r.ignoreUndefined||(s in e&&e[s]!==Object.getPrototypeOf(e)?Ys(e,s,Ed(e[s],t[s],r)):Ys(e,s,uo(t[s])))}),e),Hk=(e,t,n)=>{let r=e.slice(0,0),s=0;return[e,t].forEach(i=>{const a=[];for(let l=0;l<i.length;l++)dy.call(i,l)&&(a.push(String(l)),i===e?Ys(r,s++,i[l]):Ys(r,s++,uo(i[l])));r=uy(r,i,Pl(i).filter(l=>!a.includes(l)),n)}),r};function Ed(e,t,n){return n.concatArrays&&Array.isArray(e)&&Array.isArray(t)?Hk(e,t,n):!Ka(t)||!Ka(e)?uo(t):uy(e,t,Pl(t),n)}var Wk=function(...e){const t=Ed(uo(Rf),this!==Dk&&this||{},Rf);let n={_:{}};for(const r of e)if(r!==void 0){if(!Ka(r))throw new TypeError("`"+r+"` is not an Option Object");n=Ed(n,{_:r},t)}return n._};const qk=Ad(Wk),Vk=qk.bind({concatArrays:!0,ignoreUndefined:!0});function Kk(e,t){const n=window.localStorage.getItem(e);if(n){const r=JSON.parse(n),s=JSON.parse(t),i=JSON.stringify(Vk(r,s));window.localStorage.setItem(e,i)}else window.localStorage.setItem(e,t)}function ps(e,t){return new Promise((n,r)=>{try{const s=e();t==null||t(null,s),n(s)}catch(s){t==null||t(s),r(s)}})}function Zi(e,t,n){return Promise.all(e).then(r=>{const s=(n==null?void 0:n(r))??null;return t==null||t(null,s),Promise.resolve(s)},r=>(t==null||t(r),Promise.reject(r)))}const it={getItem:(e,t)=>ps(()=>window.localStorage.getItem(e),t),setItem:(e,t,n)=>ps(()=>window.localStorage.setItem(e,t),n),removeItem:(e,t)=>ps(()=>window.localStorage.removeItem(e),t),mergeItem:(e,t,n)=>ps(()=>Kk(e,t),n),clear:e=>ps(()=>window.localStorage.clear(),e),getAllKeys:e=>ps(()=>{const t=window.localStorage.length,n=[];for(let r=0;r<t;r+=1){const s=window.localStorage.key(r)||"";n.push(s)}return n},e),flushGetRequests:()=>{},multiGet:(e,t)=>{const n=e.map(s=>it.getItem(s));return Zi(n,t,s=>s.map((i,a)=>[e[a],i]))},multiSet:(e,t)=>{const n=e.map(r=>it.setItem(r[0],r[1]));return Zi(n,t)},multiRemove:(e,t)=>{const n=e.map(r=>it.removeItem(r));return Zi(n,t)},multiMerge:(e,t)=>{const n=e.map(r=>it.mergeItem(r[0],r[1]));return Zi(n,t)}};class Gk{constructor(){Se(this,"isAsyncStorage",typeof it<"u")}async saveProject(t){try{const n=`project_${t.id}`,r=JSON.stringify(t);this.isAsyncStorage?await it.setItem(n,r):localStorage.setItem(n,r),await this.addProjectToList(t.id)}catch(n){console.error("Error saving project to storage:",n)}}async getProject(t){try{const n=`project_${t}`;let r;return this.isAsyncStorage?r=await it.getItem(n):r=localStorage.getItem(n),r?JSON.parse(r):null}catch(n){return console.error("Error getting project from storage:",n),null}}async deleteProject(t){try{const n=`project_${t}`;this.isAsyncStorage?await it.removeItem(n):localStorage.removeItem(n),await this.removeProjectFromList(t)}catch(n){console.error("Error deleting project from storage:",n)}}async addProjectToList(t){try{const n=await this.getProjectList();n.includes(t)||(n.push(t),await this.saveProjectList(n))}catch(n){console.error("Error adding project to list:",n)}}async removeProjectFromList(t){try{const r=(await this.getProjectList()).filter(s=>s!==t);await this.saveProjectList(r)}catch(n){console.error("Error removing project from list:",n)}}async getProjectList(){try{const t="project_list";let n;return this.isAsyncStorage?n=await it.getItem(t):n=localStorage.getItem(t),n?JSON.parse(n):[]}catch(t){return console.error("Error getting project list from storage:",t),[]}}async saveProjectList(t){try{const n="project_list",r=JSON.stringify(t);this.isAsyncStorage?await it.setItem(n,r):localStorage.setItem(n,r)}catch(n){console.error("Error saving project list to storage:",n)}}loadProjects(){try{if(this.isAsyncStorage)return console.warn("loadProjects sync method not supported with AsyncStorage"),[];const t=[],n=localStorage.getItem("project_list"),r=n?JSON.parse(n):[];for(const s of r){const i=localStorage.getItem(`project_${s}`);i&&t.push(JSON.parse(i))}return t}catch(t){return console.error("Error loading projects from storage:",t),[]}}saveCurrentProjectId(t){try{const n="current_project_id",r=t||"";this.isAsyncStorage?it.setItem(n,r).catch(s=>{console.error("Error saving current project ID:",s)}):localStorage.setItem(n,r)}catch(n){console.error("Error saving current project ID:",n)}}getCurrentProjectId(){try{if(this.isAsyncStorage)return console.warn("getCurrentProjectId sync method not supported with AsyncStorage"),null;const t=localStorage.getItem("current_project_id");return t&&t.length>0?t:null}catch(t){return console.error("Error getting current project ID:",t),null}}saveRecentProjects(t){try{const n="recent_projects",r=t.map(i=>({id:i.id,name:i.name,path:i.path,createdAt:i.createdAt,updatedAt:i.createdAt})),s=JSON.stringify(r);this.isAsyncStorage?it.setItem(n,s).catch(i=>{console.error("Error saving recent projects:",i)}):localStorage.setItem(n,s)}catch(n){console.error("Error saving recent projects:",n)}}loadRecentProjects(){try{if(this.isAsyncStorage)return console.warn("loadRecentProjects sync method not supported with AsyncStorage"),[];const t=localStorage.getItem("recent_projects");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading recent projects:",t),[]}}saveOpenTabs(t,n){try{const r=`open_tabs_${t}`,s=JSON.stringify(n);this.isAsyncStorage?it.setItem(r,s).catch(i=>{console.error("Error saving open tabs:",i)}):localStorage.setItem(r,s)}catch(r){console.error("Error saving open tabs:",r)}}loadOpenTabs(t){try{if(this.isAsyncStorage)return console.warn("loadOpenTabs sync method not supported with AsyncStorage"),[];const n=localStorage.getItem(`open_tabs_${t}`);return n?JSON.parse(n):[]}catch(n){return console.error("Error loading open tabs:",n),[]}}saveCurrentFileId(t,n){try{if(!t)return;const r=`current_file_${t}`,s=n||"";this.isAsyncStorage?it.setItem(r,s).catch(i=>{console.error("Error saving current file ID:",i)}):localStorage.setItem(r,s)}catch(r){console.error("Error saving current file ID:",r)}}getCurrentFileId(t){try{if(!t)return null;if(this.isAsyncStorage)return console.warn("getCurrentFileId sync method not supported with AsyncStorage"),null;const n=localStorage.getItem(`current_file_${t}`);return n&&n.length>0?n:null}catch(n){return console.error("Error getting current file ID:",n),null}}saveUnsavedFiles(t,n){try{if(!t)return;const r=`unsaved_files_${t}`,s=JSON.stringify(n);this.isAsyncStorage?it.setItem(r,s).catch(i=>{console.error("Error saving unsaved files:",i)}):localStorage.setItem(r,s)}catch(r){console.error("Error saving unsaved files:",r)}}loadUnsavedFiles(t){try{if(!t)return[];if(this.isAsyncStorage)return console.warn("loadUnsavedFiles sync method not supported with AsyncStorage"),[];const n=localStorage.getItem(`unsaved_files_${t}`);return n?JSON.parse(n):[]}catch(n){return console.error("Error loading unsaved files:",n),[]}}savePendingChange(t,n,r){try{if(!t||!n)return;const s=`pending_change_${t}_${n}`;this.isAsyncStorage?it.setItem(s,r).catch(i=>{console.error("Error saving pending change:",i)}):localStorage.setItem(s,r),this.addToPendingChangesList(t,n)}catch(s){console.error("Error saving pending change:",s)}}loadPendingChange(t,n){try{return!t||!n?null:this.isAsyncStorage?(console.warn("loadPendingChange sync method not supported with AsyncStorage"),null):localStorage.getItem(`pending_change_${t}_${n}`)}catch(r){return console.error("Error loading pending change:",r),null}}clearPendingChange(t,n){try{if(!t||!n)return;const r=`pending_change_${t}_${n}`;this.isAsyncStorage?it.removeItem(r).catch(s=>{console.error("Error clearing pending change:",s)}):localStorage.removeItem(r),this.removeFromPendingChangesList(t,n)}catch(r){console.error("Error clearing pending change:",r)}}async addToPendingChangesList(t,n){try{const r=await this.getPendingChangesList(),s=`${t}_${n}`;r.includes(s)||(r.push(s),await this.savePendingChangesList(r))}catch(r){console.error("Error adding to pending changes list:",r)}}async removeFromPendingChangesList(t,n){try{const r=await this.getPendingChangesList(),s=`${t}_${n}`,i=r.filter(a=>a!==s);await this.savePendingChangesList(i)}catch(r){console.error("Error removing from pending changes list:",r)}}async getPendingChangesList(){try{const t="pending_changes_list";let n;return this.isAsyncStorage?n=await it.getItem(t):n=localStorage.getItem(t),n?JSON.parse(n):[]}catch(t){return console.error("Error getting pending changes list:",t),[]}}async savePendingChangesList(t){try{const n="pending_changes_list",r=JSON.stringify(t);this.isAsyncStorage?await it.setItem(n,r):localStorage.setItem(n,r)}catch(n){console.error("Error saving pending changes list:",n)}}getAllPendingChanges(){try{if(this.isAsyncStorage)return console.warn("getAllPendingChanges sync method not supported with AsyncStorage"),[];const t=localStorage.getItem("pending_changes_list"),n=t?JSON.parse(t):[],r=[];for(const s of n){const[i,a]=s.split("_"),l=localStorage.getItem(`pending_change_${s}`);l&&r.push({projectId:i,fileId:a,content:l})}return r}catch(t){return console.error("Error getting all pending changes:",t),[]}}async clearAllStorage(){try{this.isAsyncStorage?await it.clear():localStorage.clear()}catch(t){console.error("Error clearing storage:",t)}}getLastSync(){try{if(this.isAsyncStorage)return console.warn("getLastSync sync method not supported with AsyncStorage"),0;const t=localStorage.getItem("last_sync_timestamp");return t?parseInt(t,10):0}catch(t){return console.error("Error getting last sync timestamp:",t),0}}saveLastSync(t=Date.now()){try{const n="last_sync_timestamp",r=t.toString();this.isAsyncStorage?it.setItem(n,r).catch(s=>{console.error("Error saving last sync timestamp:",s)}):localStorage.setItem(n,r)}catch(n){console.error("Error saving last sync timestamp:",n)}}getStorageUsed(){try{if(this.isAsyncStorage)return console.warn("getStorageUsed sync method not supported with AsyncStorage"),0;let t=0;for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);if(r){const s=localStorage.getItem(r)||"";t+=r.length+s.length}}return t*2}catch(t){return console.error("Error calculating storage used:",t),0}}getStorageCapacity(){try{return 5*1024*1024}catch(t){return console.error("Error getting storage capacity:",t),5*1024*1024}}loadPendingChanges(){try{if(this.isAsyncStorage)return console.warn("loadPendingChanges sync method not supported with AsyncStorage"),[];const t=localStorage.getItem("pending_changes_list"),n=t?JSON.parse(t):[],r=[];for(const s of n){const[i,a]=s.split("_"),l=localStorage.getItem(`pending_change_${s}`),d=(localStorage.getItem(`sync_status_${s}`)||"false")==="true";l&&r.push({projectId:i,fileId:a,content:l,synced:d})}return r}catch(t){return console.error("Error loading pending changes:",t),[]}}updateSyncStatus(t,n,r){try{if(!t||!n)return;const s=`sync_status_${t}_${n}`,i=r.toString();this.isAsyncStorage?it.setItem(s,i).catch(a=>{console.error("Error updating sync status:",a)}):localStorage.setItem(s,i)}catch(s){console.error("Error updating sync status:",s)}}}const Is=new Gk;class Jk{constructor(){Se(this,"offlineMode",!1);Se(this,"syncing",!1);Se(this,"syncInterval",null);Se(this,"offlineListeners",[]);Se(this,"syncListeners",[]);Se(this,"handleOnline",()=>{this.offlineMode&&(this.offlineMode=!1,this.notifyOfflineListeners(),this.syncPendingChanges())});Se(this,"handleOffline",()=>{this.offlineMode||(this.offlineMode=!0,this.notifyOfflineListeners())});this.offlineMode=!navigator.onLine,window.addEventListener("online",this.handleOnline),window.addEventListener("offline",this.handleOffline),this.setupAutoSync()}notifyOfflineListeners(){this.offlineListeners.forEach(t=>{t(this.offlineMode)})}notifySyncListeners(){this.syncListeners.forEach(t=>{t(this.syncing)})}setupAutoSync(){this.syncInterval&&clearInterval(this.syncInterval),this.syncInterval=setInterval(()=>{!this.offlineMode&&!this.syncing&&this.syncPendingChanges()},5*60*1e3)}isOffline(){return this.offlineMode}isSyncing(){return this.syncing}setOfflineMode(t){this.offlineMode!==t&&(this.offlineMode=t,this.notifyOfflineListeners(),t||this.syncPendingChanges())}onOfflineStatusChange(t){this.offlineListeners.push(t)}removeOfflineListener(t){this.offlineListeners=this.offlineListeners.filter(n=>n!==t)}onSyncStatusChange(t){this.syncListeners.push(t)}removeSyncListener(t){this.syncListeners=this.syncListeners.filter(n=>n!==t)}async forceSyncNow(){if(this.offlineMode)throw new Error("Cannot sync while in offline mode");if(this.syncing)throw new Error("Sync already in progress");await this.syncPendingChanges()}async syncPendingChanges(){if(!this.offlineMode)try{this.syncing=!0,this.notifySyncListeners();const t=Is.getAllPendingChanges();if(t.length===0)return;for(const n of t)try{Is.clearPendingChange(n.projectId,n.fileId)}catch(r){console.error(`Error syncing change for file ${n.fileId}:`,r)}}catch(t){console.error("Error during sync:",t)}finally{this.syncing=!1,this.notifySyncListeners()}}cleanup(){window.removeEventListener("online",this.handleOnline),window.removeEventListener("offline",this.handleOffline),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}}const cr=new Jk,Zk="_container_1rg7a_1",Yk="_indicator_1rg7a_11",Qk="_success_1rg7a_25",Xk="_syncingIcon_1rg7a_41",eS="_syncButton_1rg7a_50",tS="_toggleOptions_1rg7a_74",nS="_toggleOption_1rg7a_74",tr={container:Zk,indicator:Yk,success:Qk,syncingIcon:Xk,syncButton:eS,toggleOptions:tS,toggleOption:nS},rS=()=>{const{colors:e}=ve(),[t,n]=_.useState(!1),[r,s]=_.useState(!1),[i,a]=_.useState(!1),[l,c]=_.useState(!1);if(_.useEffect(()=>{const h=p=>{n(p)},f=p=>{if(s(p),!p){a(!0);const v=setTimeout(()=>{a(!1)},3e3);return()=>clearTimeout(v)}};return cr.onOfflineStatusChange(h),cr.onSyncStatusChange(f),()=>{cr.removeOfflineListener(h),cr.removeSyncListener(f)}},[]),!t&&!r&&!i)return null;const d=async()=>{await cr.forceSyncNow()},u=()=>{cr.setOfflineMode(!t),c(!1)};return o.jsxs("div",{className:tr.container,children:[l&&o.jsx("div",{className:tr.toggleOptions,style:{backgroundColor:e.surface,borderColor:e.border},children:o.jsx("button",{className:tr.toggleOption,onClick:u,children:o.jsx("span",{style:{color:e.text},children:t?"Switch to Online Mode":"Switch to Offline Mode"})})}),o.jsx("div",{className:`${tr.indicator} ${i?tr.success:""}`,style:{backgroundColor:i?e.success:t?e.warning:e.primary},onClick:()=>c(!l),children:i?o.jsxs(o.Fragment,{children:[o.jsx(kn,{size:14,color:"#FFFFFF"}),o.jsx("span",{children:"Synced"})]}):t?o.jsxs(o.Fragment,{children:[o.jsx(Uu,{size:14,color:"#FFFFFF"}),o.jsx("span",{children:"Offline"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Tf,{size:14,color:"#FFFFFF",className:tr.syncingIcon}),o.jsx("span",{children:"Syncing"})]})}),t&&!l&&o.jsxs("button",{className:tr.syncButton,onClick:d,disabled:r,style:{backgroundColor:e.primary,opacity:r?.7:1},children:[o.jsx(Tf,{size:14,color:"#FFFFFF",className:r?tr.syncingIcon:""}),o.jsx("span",{children:r?"Syncing...":"Sync Now"})]})]})},sS="https://mjbhockriytxstmwffjy.supabase.co",oS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1qYmhvY2tyaXl0eHN0bXdmZmp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgwMzUxNTAsImV4cCI6MjA2MzYxMTE1MH0.DIwmXTjsGcS1I1-PDAewTHUMCJuRelEtso5tNRhwgzY",It=Wg(sS,oS,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:localStorage}}),iS=async()=>{try{console.log("Checking storage buckets");const{data:e,error:t}=await It.storage.listBuckets();if(t){console.error("Error listing storage buckets:",t);return}(e==null?void 0:e.find(r=>r.name==="avatars"))?console.log("Avatars bucket exists and is available for use"):(console.log("Avatars bucket doesn't exist - please create it in the Supabase dashboard"),console.log("Note: Bucket creation requires admin privileges and should be done through the Supabase dashboard"))}catch(e){console.error("Error checking storage buckets:",e)}};setTimeout(()=>{iS().catch(e=>{console.error("Failed to initialize storage:",e)})},1e3);class aS{constructor(){Se(this,"syncStatus","idle");Se(this,"lastSyncTime",0);Se(this,"statusListeners",[])}async saveSetting(t,n){try{const{data:{session:r}}=await It.auth.getSession();if(!r)return console.error("Cannot save settings: User not authenticated"),!1;this.setSyncStatus("syncing");const{data:s,error:i}=await It.from("user_settings").select("id").eq("user_id",r.user.id).eq("key",t).maybeSingle();if(i)return console.error("Error checking existing setting:",i),this.setSyncStatus("error"),!1;let a;return s?a=await It.from("user_settings").update({value:n,updated_at:new Date().toISOString()}).eq("id",s.id):a=await It.from("user_settings").insert({user_id:r.user.id,key:t,value:n}),a.error?(console.error("Error saving setting:",a.error),this.setSyncStatus("error"),!1):(this.lastSyncTime=Date.now(),this.setSyncStatus("success"),!0)}catch(r){return console.error("Error in saveSetting:",r),this.setSyncStatus("error"),!1}}async loadSetting(t){try{const{data:{session:n}}=await It.auth.getSession();if(!n)return console.error("Cannot load settings: User not authenticated"),null;this.setSyncStatus("syncing");const{data:r,error:s}=await It.from("user_settings").select("value").eq("user_id",n.user.id).eq("key",t).maybeSingle();return s?(console.error("Error loading setting:",s),this.setSyncStatus("error"),null):r?(this.lastSyncTime=Date.now(),this.setSyncStatus("success"),r.value):(this.setSyncStatus("idle"),null)}catch(n){return console.error("Error in loadSetting:",n),this.setSyncStatus("error"),null}}async saveAllSettings(t){try{const{data:{session:n}}=await It.auth.getSession();if(!n)return{success:!1,error:"User not authenticated"};this.setSyncStatus("syncing");const r=Object.entries(t).map(([a,l])=>this.saveSetting(a,l)),i=(await Promise.all(r)).every(Boolean);return this.lastSyncTime=Date.now(),i?(await this.saveSetting("lastSyncTime",this.lastSyncTime),this.setSyncStatus("success"),{success:!0,timestamp:this.lastSyncTime}):(this.setSyncStatus("error"),{success:!1,error:"Failed to save some settings"})}catch(n){return console.error("Error in saveAllSettings:",n),this.setSyncStatus("error"),{success:!1,error:n instanceof Error?n.message:"Unknown error"}}}async loadAllSettings(){try{const{data:{session:t}}=await It.auth.getSession();if(!t)return console.error("Cannot load settings: User not authenticated"),null;this.setSyncStatus("syncing");const{data:n,error:r}=await It.from("user_settings").select("key, value").eq("user_id",t.user.id);if(r)return console.error("Error loading settings:",r),this.setSyncStatus("error"),null;if(!n||n.length===0)return this.setSyncStatus("idle"),{};const s={};for(const i of n)s[i.key]=i.value;return this.lastSyncTime=s.lastSyncTime||Date.now(),this.setSyncStatus("success"),s}catch(t){return console.error("Error in loadAllSettings:",t),this.setSyncStatus("error"),null}}async deleteAllSettings(){try{const{data:{session:t}}=await It.auth.getSession();if(!t)return console.error("Cannot delete settings: User not authenticated"),!1;this.setSyncStatus("syncing");const{error:n}=await It.from("user_settings").delete().eq("user_id",t.user.id);return n?(console.error("Error deleting settings:",n),this.setSyncStatus("error"),!1):(this.lastSyncTime=0,this.setSyncStatus("success"),!0)}catch(t){return console.error("Error in deleteAllSettings:",t),this.setSyncStatus("error"),!1}}mergeSettings(t,n,r="newest-wins"){const s={...t};for(const[i,a]of Object.entries(n)){const l=t[i];if(l===void 0){s[i]=a;continue}if(JSON.stringify(l)!==JSON.stringify(a))switch(r){case"remote-wins":s[i]=a;break;case"local-wins":break;case"newest-wins":s[i]=a;break}}return s}getSyncStatus(){return this.syncStatus}setSyncStatus(t){this.syncStatus=t,this.statusListeners.forEach(n=>n(t))}onSyncStatusChange(t){this.statusListeners.push(t)}offSyncStatusChange(t){this.statusListeners=this.statusListeners.filter(n=>n!==t)}getLastSyncTime(){return this.lastSyncTime}async isSyncEnabled(){return await this.loadSetting("syncEnabled")===!0}async setSyncEnabled(t){return await this.saveSetting("syncEnabled",t)}}const gn=new aS,lS=()=>{const{colors:e}=ve(),{user:t}=ht(),n=ot(),[r,s]=_.useState("idle"),[i,a]=_.useState(!1),[l,c]=_.useState(!1);return _.useEffect(()=>{(async()=>{if(!t){a(!1);return}try{const h=await gn.isSyncEnabled();a(h)}catch(h){console.error("Error checking sync enabled:",h)}})();const u=h=>{s(h)};return gn.onSyncStatusChange(u),()=>{gn.offSyncStatusChange(u)}},[t]),!t||!i&&r!=="syncing"?null:o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[o.jsxs("button",{onClick:()=>n("/settings/sync"),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{backgroundColor:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",borderRadius:"50%",position:"relative"},children:[r==="syncing"?o.jsx(Zn,{size:18,color:e.primary,style:{animation:"spin 1.2s linear infinite"}}):i?o.jsx(zu,{size:18,color:e.primary}):o.jsx(Yg,{size:18,color:e.textSecondary}),r==="error"&&o.jsx("div",{style:{position:"absolute",top:"5px",right:"5px",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:e.error,border:`2px solid ${e.surface}`}}),r==="success"&&o.jsx("div",{style:{position:"absolute",top:"5px",right:"5px",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:e.success,border:`2px solid ${e.surface}`,animation:"fadeOut 2s forwards"}})]}),l&&o.jsx("div",{style:{position:"absolute",bottom:"100%",left:"50%",transform:"translateX(-50%)",backgroundColor:e.surface,borderRadius:"4px",padding:"6px 12px",fontSize:"12px",color:e.text,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",whiteSpace:"nowrap",zIndex:100,marginBottom:"8px"},children:r==="syncing"?"Syncing settings...":r==="error"?"Sync error":r==="success"?"Settings synced":i?"Settings sync enabled":"Settings sync disabled"}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeOut {
          0% { opacity: 1; }
          80% { opacity: 1; }
          100% { opacity: 0; }
        }
      `}})]})},cS="_container_1v2ot_1",dS="_content_1v2ot_10",uS="_tabBar_1v2ot_16",hS="_tabItem_1v2ot_27",fS="_active_1v2ot_54",pS="_tabLabel_1v2ot_59",mS="_commandButtonContainer_1v2ot_71",gS="_commandButton_1v2ot_71",yS="_searchButtonContainer_1v2ot_98",xS="_searchButton_1v2ot_98",Ot={container:cS,content:dS,tabBar:uS,tabItem:hS,active:fS,tabLabel:pS,commandButtonContainer:mS,commandButton:gS,searchButtonContainer:yS,searchButton:xS},vS=()=>{const{colors:e,isDark:t,toggleTheme:n}=ve(),{createNewFile:r,createNewFolder:s,currentProject:i,selectProject:a,currentFile:l,saveFile:c,openFiles:d,setCurrentFile:u,isOffline:h,toggleOfflineMode:f,syncOfflineChanges:p,createNewProject:v}=Xe(),{user:y}=ht(),[b,g]=_.useState(!1),[m,x]=_.useState(!1),[E,k]=_.useState(window.innerWidth),[I,R]=_.useState(window.innerHeight),[T,B]=_.useState(!1),P=ot();_.useEffect(()=>{const z=()=>{k(window.innerWidth),R(window.innerHeight)};return window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[]),_.useEffect(()=>{const z=Fe.registerHandler("global.commandPalette",()=>g(!0)),q=Fe.registerHandler("global.search",()=>x(!0)),re=Fe.registerHandler("global.toggleTheme",n),H=Fe.registerHandler("global.shortcuts",()=>B(!0)),O=Fe.registerHandler("global.quickCreate",F);return Fe.setScope("global"),()=>{z(),q(),re(),H(),O()}},[n]),_.useEffect(()=>{zs.registerCommands([{id:"file.new",title:"File: New File",category:"File",action:()=>{i?r("untitled.js"):F()}},{id:"file.newFolder",title:"File: New Folder",category:"File",action:()=>{i?s("New Folder"):alert("Please open a project first")}},{id:"file.save",title:"File: Save",category:"File",shortcut:"Ctrl+S",action:()=>{l?(c(l.id,l.content),alert("File saved")):alert("No file is currently open")}},{id:"file.closeProject",title:"File: Close Project",category:"File",action:()=>{i&&a("")}},{id:"view.explorer",title:"View: Show Explorer",category:"View",action:()=>P("/explorer")},{id:"view.editor",title:"View: Show Editor",category:"View",action:()=>P("/editor")},{id:"view.videos",title:"View: Show Videos",category:"View",action:()=>P("/videos")},{id:"view.terminal",title:"View: Show Terminal",category:"View",action:()=>P("/terminal")},{id:"view.settings",title:"View: Show Settings",category:"View",action:()=>P("/settings")},{id:"view.toggleTheme",title:t?"View: Switch to Light Theme":"View: Switch to Dark Theme",category:"View",action:n},{id:"search.global",title:"Search: Search Across Files",category:"Search",shortcut:"Ctrl+Shift+F",action:()=>x(!0)},{id:"share.view",title:"Share: View My Shared Items",category:"Share",action:()=>P("/shared")},{id:"share.file",title:"Share: Share Current File",category:"Share",action:()=>{l?zs.executeCommand("file.share"):alert("No file is open to share")}},{id:"share.project",title:"Share: Share Current Project",category:"Share",action:()=>{i?zs.executeCommand("project.share"):alert("No project is open to share")}},{id:"git.commit",title:"Git: Commit Changes",category:"Git",action:()=>P("/editor")},{id:"git.push",title:"Git: Push to Remote",category:"Git",action:()=>P("/editor")},{id:"git.pull",title:"Git: Pull from Remote",category:"Git",action:()=>P("/editor")},{id:"git.createBranch",title:"Git: Create New Branch",category:"Git",action:()=>P("/editor")},{id:"git.switchBranch",title:"Git: Switch Branch",category:"Git",action:()=>P("/editor")},{id:"collaboration.shareProject",title:"Collaboration: Share Current Project",category:"Collaboration",action:()=>P("/collaboration")},{id:"collaboration.viewInvitations",title:"Collaboration: View Invitations",category:"Collaboration",action:()=>P("/collaboration")},{id:"collaboration.manageCollaborators",title:"Collaboration: Manage Collaborators",category:"Collaboration",action:()=>P("/collaboration")},{id:"sync.toggleOfflineMode",title:h?"Go Online":"Go Offline",category:"Sync",action:f},{id:"sync.syncNow",title:"Sync: Sync Changes Now",category:"Sync",action:p},{id:"help.keyboardShortcuts",title:"Help: Keyboard Shortcuts",category:"Help",action:()=>B(!0)},{id:"file.quickCreate",title:"File: Quick Create and Open File",category:"File",action:F}])},[i,t,l,d,h]);const K=(z,q)=>{d.find(H=>H.id===z)&&u(z),P("/editor")};function F(){try{const z=i?"newfile.js":"index.js";i||v("My Project"),r(z),P("/editor")}catch(z){console.error("Error creating file:",z),alert("Failed to create file. Please try again.")}}const L=E<=767,C=E<=374,Z=()=>C?20:L?22:24,W=E>320,U=({isActive:z})=>`${Ot.tabItem} ${z?Ot.active:""}`;return o.jsxs("div",{className:Ot.container,style:{backgroundColor:e.background},children:[o.jsx("div",{className:Ot.commandButtonContainer,children:o.jsx("button",{className:Ot.commandButton,onClick:()=>g(!0),title:"Command Palette (Ctrl+Shift+P)","aria-label":"Open command palette",children:o.jsx(uw,{size:L?18:20,color:e.textSecondary})})}),o.jsx("div",{className:Ot.searchButtonContainer,children:o.jsx("button",{className:Ot.searchButton,onClick:()=>x(!0),title:"Search in Files (Ctrl+Shift+F)","aria-label":"Search in files",children:o.jsx(Ln,{size:L?18:20,color:e.textSecondary})})}),o.jsx("div",{style:{position:"fixed",top:"max(12px, env(safe-area-inset-top, 12px))",right:"100px",zIndex:900},children:o.jsx(lS,{})}),o.jsx(rS,{}),o.jsx("main",{className:Ot.content,children:m?o.jsx(cy,{onClose:()=>x(!1),onFileSelect:K}):o.jsx(v1,{})}),o.jsx("div",{style:{position:"fixed",bottom:"max(80px, calc(80px + env(safe-area-inset-bottom, 0px)))",right:"max(16px, env(safe-area-inset-right, 16px))",zIndex:900},children:o.jsx("button",{onClick:F,style:{width:"56px",height:"56px",borderRadius:"50%",backgroundColor:e.primary,color:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.3)",border:"none",cursor:"pointer",touchAction:"manipulation"},"aria-label":"Create new file",title:"Create new file",children:o.jsx(Ir,{size:24,color:"white"})})}),o.jsxs("nav",{className:Ot.tabBar,style:{backgroundColor:e.surface,borderTopColor:e.border},role:"navigation",children:[o.jsxs(ko,{to:"/editor",className:U,style:({isActive:z})=>({color:z?e.primary:e.textSecondary}),children:[o.jsx(di,{size:Z()}),W&&o.jsx("span",{className:Ot.tabLabel,children:"Editor"})]}),o.jsxs(ko,{to:"/explorer",className:U,style:({isActive:z})=>({color:z?e.primary:e.textSecondary}),children:[o.jsx(Xg,{size:Z()}),W&&o.jsx("span",{className:Ot.tabLabel,children:"Explorer"})]}),o.jsxs(ko,{to:"/videos",className:U,style:({isActive:z})=>({color:z?e.primary:e.textSecondary}),children:[o.jsx(ay,{size:Z()}),W&&o.jsx("span",{className:Ot.tabLabel,children:"Videos"})]}),o.jsxs(ko,{to:"/collaboration",className:U,style:({isActive:z})=>({color:z?e.primary:e.textSecondary}),children:[o.jsx(Js,{size:Z()}),W&&o.jsx("span",{className:Ot.tabLabel,children:"Collab"})]}),o.jsxs(ko,{to:"/settings",className:U,style:({isActive:z})=>({color:z?e.primary:e.textSecondary}),children:[o.jsx(Pw,{size:Z()}),W&&o.jsx("span",{className:Ot.tabLabel,children:"Settings"})]})]}),o.jsx(ck,{isOpen:b,onClose:()=>g(!1)}),T&&o.jsx(ly,{onClose:()=>B(!1)})]})};function hy(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const n=e[t],r=typeof n;(r==="object"||r==="function")&&!Object.isFrozen(n)&&hy(n)}),e}let Ff=class{constructor(t){t.data===void 0&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}};function fy(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function gr(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach(function(r){for(const s in r)n[s]=r[s]}),n}const bS="</span>",Bf=e=>!!e.scope,_S=(e,{prefix:t})=>{if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const n=e.split(".");return[`${t}${n.shift()}`,...n.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${t}${e}`};class wS{constructor(t,n){this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}addText(t){this.buffer+=fy(t)}openNode(t){if(!Bf(t))return;const n=_S(t.scope,{prefix:this.classPrefix});this.span(n)}closeNode(t){Bf(t)&&(this.buffer+=bS)}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}const Of=(e={})=>{const t={children:[]};return Object.assign(t,e),t};class Hu{constructor(){this.rootNode=Of(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const n=Of({scope:t});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,n){return typeof n=="string"?t.addText(n):n.children&&(t.openNode(n),n.children.forEach(r=>this._walk(t,r)),t.closeNode(n)),t}static _collapse(t){typeof t!="string"&&t.children&&(t.children.every(n=>typeof n=="string")?t.children=[t.children.join("")]:t.children.forEach(n=>{Hu._collapse(n)}))}}class kS extends Hu{constructor(t){super(),this.options=t}addText(t){t!==""&&this.add(t)}startScope(t){this.openNode(t)}endScope(){this.closeNode()}__addSublanguage(t,n){const r=t.root;n&&(r.scope=`language:${n}`),this.add(r)}toHTML(){return new wS(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function hi(e){return e?typeof e=="string"?e:e.source:null}function py(e){return ls("(?=",e,")")}function SS(e){return ls("(?:",e,")*")}function jS(e){return ls("(?:",e,")?")}function ls(...e){return e.map(n=>hi(n)).join("")}function CS(e){const t=e[e.length-1];return typeof t=="object"&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}function Wu(...e){return"("+(CS(e).capture?"":"?:")+e.map(r=>hi(r)).join("|")+")"}function my(e){return new RegExp(e.toString()+"|").exec("").length-1}function ES(e,t){const n=e&&e.exec(t);return n&&n.index===0}const NS=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function qu(e,{joinWith:t}){let n=0;return e.map(r=>{n+=1;const s=n;let i=hi(r),a="";for(;i.length>0;){const l=NS.exec(i);if(!l){a+=i;break}a+=i.substring(0,l.index),i=i.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?a+="\\"+String(Number(l[1])+s):(a+=l[0],l[0]==="("&&n++)}return a}).map(r=>`(${r})`).join(t)}const TS=/\b\B/,gy="[a-zA-Z]\\w*",Vu="[a-zA-Z_]\\w*",yy="\\b\\d+(\\.\\d+)?",xy="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",vy="\\b(0b[01]+)",IS="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",AS=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=ls(t,/.*\b/,e.binary,/\b.*/)),gr({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},e)},fi={begin:"\\\\[\\s\\S]",relevance:0},PS={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[fi]},RS={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[fi]},FS={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Rl=function(e,t,n={}){const r=gr({scope:"comment",begin:e,end:t,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=Wu("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:ls(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},BS=Rl("//","$"),OS=Rl("/\\*","\\*/"),LS=Rl("#","$"),zS={scope:"number",begin:yy,relevance:0},$S={scope:"number",begin:xy,relevance:0},DS={scope:"number",begin:vy,relevance:0},MS={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[fi,{begin:/\[/,end:/\]/,relevance:0,contains:[fi]}]},US={scope:"title",begin:gy,relevance:0},HS={scope:"title",begin:Vu,relevance:0},WS={begin:"\\.\\s*"+Vu,relevance:0},qS=function(e){return Object.assign(e,{"on:begin":(t,n)=>{n.data._beginMatch=t[1]},"on:end":(t,n)=>{n.data._beginMatch!==t[1]&&n.ignoreMatch()}})};var Yi=Object.freeze({__proto__:null,APOS_STRING_MODE:PS,BACKSLASH_ESCAPE:fi,BINARY_NUMBER_MODE:DS,BINARY_NUMBER_RE:vy,COMMENT:Rl,C_BLOCK_COMMENT_MODE:OS,C_LINE_COMMENT_MODE:BS,C_NUMBER_MODE:$S,C_NUMBER_RE:xy,END_SAME_AS_BEGIN:qS,HASH_COMMENT_MODE:LS,IDENT_RE:gy,MATCH_NOTHING_RE:TS,METHOD_GUARD:WS,NUMBER_MODE:zS,NUMBER_RE:yy,PHRASAL_WORDS_MODE:FS,QUOTE_STRING_MODE:RS,REGEXP_MODE:MS,RE_STARTERS_RE:IS,SHEBANG:AS,TITLE_MODE:US,UNDERSCORE_IDENT_RE:Vu,UNDERSCORE_TITLE_MODE:HS});function VS(e,t){e.input[e.index-1]==="."&&t.ignoreMatch()}function KS(e,t){e.className!==void 0&&(e.scope=e.className,delete e.className)}function GS(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=VS,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,e.relevance===void 0&&(e.relevance=0))}function JS(e,t){Array.isArray(e.illegal)&&(e.illegal=Wu(...e.illegal))}function ZS(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function YS(e,t){e.relevance===void 0&&(e.relevance=1)}const QS=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach(r=>{delete e[r]}),e.keywords=n.keywords,e.begin=ls(n.beforeMatch,py(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},XS=["of","and","for","in","not","or","if","then","parent","list","value"],ej="keyword";function by(e,t,n=ej){const r=Object.create(null);return typeof e=="string"?s(n,e.split(" ")):Array.isArray(e)?s(n,e):Object.keys(e).forEach(function(i){Object.assign(r,by(e[i],t,i))}),r;function s(i,a){t&&(a=a.map(l=>l.toLowerCase())),a.forEach(function(l){const c=l.split("|");r[c[0]]=[i,tj(c[0],c[1])]})}}function tj(e,t){return t?Number(t):nj(e)?0:1}function nj(e){return XS.includes(e.toLowerCase())}const Lf={},Zr=e=>{console.error(e)},zf=(e,...t)=>{console.log(`WARN: ${e}`,...t)},ms=(e,t)=>{Lf[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),Lf[`${e}/${t}`]=!0)},Ga=new Error;function _y(e,t,{key:n}){let r=0;const s=e[n],i={},a={};for(let l=1;l<=t.length;l++)a[l+r]=s[l],i[l+r]=!0,r+=my(t[l-1]);e[n]=a,e[n]._emit=i,e[n]._multi=!0}function rj(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Zr("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ga;if(typeof e.beginScope!="object"||e.beginScope===null)throw Zr("beginScope must be object"),Ga;_y(e,e.begin,{key:"beginScope"}),e.begin=qu(e.begin,{joinWith:""})}}function sj(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Zr("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ga;if(typeof e.endScope!="object"||e.endScope===null)throw Zr("endScope must be object"),Ga;_y(e,e.end,{key:"endScope"}),e.end=qu(e.end,{joinWith:""})}}function oj(e){e.scope&&typeof e.scope=="object"&&e.scope!==null&&(e.beginScope=e.scope,delete e.scope)}function ij(e){oj(e),typeof e.beginScope=="string"&&(e.beginScope={_wrap:e.beginScope}),typeof e.endScope=="string"&&(e.endScope={_wrap:e.endScope}),rj(e),sj(e)}function aj(e){function t(a,l){return new RegExp(hi(a),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,c){c.position=this.position++,this.matchIndexes[this.matchAt]=c,this.regexes.push([c,l]),this.matchAt+=my(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(c=>c[1]);this.matcherRe=t(qu(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const c=this.matcherRe.exec(l);if(!c)return null;const d=c.findIndex((h,f)=>f>0&&h!==void 0),u=this.matchIndexes[d];return c.splice(0,d),Object.assign(c,u)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const c=new n;return this.rules.slice(l).forEach(([d,u])=>c.addRule(d,u)),c.compile(),this.multiRegexes[l]=c,c}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,c){this.rules.push([l,c]),c.type==="begin"&&this.count++}exec(l){const c=this.getMatcher(this.regexIndex);c.lastIndex=this.lastIndex;let d=c.exec(l);if(this.resumingScanAtSamePosition()&&!(d&&d.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,d=u.exec(l)}return d&&(this.regexIndex+=d.position+1,this.regexIndex===this.count&&this.considerAll()),d}}function s(a){const l=new r;return a.contains.forEach(c=>l.addRule(c.begin,{rule:c,type:"begin"})),a.terminatorEnd&&l.addRule(a.terminatorEnd,{type:"end"}),a.illegal&&l.addRule(a.illegal,{type:"illegal"}),l}function i(a,l){const c=a;if(a.isCompiled)return c;[KS,ZS,ij,QS].forEach(u=>u(a,l)),e.compilerExtensions.forEach(u=>u(a,l)),a.__beforeBegin=null,[GS,JS,YS].forEach(u=>u(a,l)),a.isCompiled=!0;let d=null;return typeof a.keywords=="object"&&a.keywords.$pattern&&(a.keywords=Object.assign({},a.keywords),d=a.keywords.$pattern,delete a.keywords.$pattern),d=d||/\w+/,a.keywords&&(a.keywords=by(a.keywords,e.case_insensitive)),c.keywordPatternRe=t(d,!0),l&&(a.begin||(a.begin=/\B|\b/),c.beginRe=t(c.begin),!a.end&&!a.endsWithParent&&(a.end=/\B|\b/),a.end&&(c.endRe=t(c.end)),c.terminatorEnd=hi(c.end)||"",a.endsWithParent&&l.terminatorEnd&&(c.terminatorEnd+=(a.end?"|":"")+l.terminatorEnd)),a.illegal&&(c.illegalRe=t(a.illegal)),a.contains||(a.contains=[]),a.contains=[].concat(...a.contains.map(function(u){return lj(u==="self"?a:u)})),a.contains.forEach(function(u){i(u,c)}),a.starts&&i(a.starts,l),c.matcher=s(c),c}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=gr(e.classNameAliases||{}),i(e)}function wy(e){return e?e.endsWithParent||wy(e.starts):!1}function lj(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map(function(t){return gr(e,{variants:null},t)})),e.cachedVariants?e.cachedVariants:wy(e)?gr(e,{starts:e.starts?gr(e.starts):null}):Object.isFrozen(e)?gr(e):e}var cj="11.11.1";class dj extends Error{constructor(t,n){super(t),this.name="HTMLInjectionError",this.html=n}}const yc=fy,$f=gr,Df=Symbol("nomatch"),uj=7,ky=function(e){const t=Object.create(null),n=Object.create(null),r=[];let s=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",a={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:kS};function c(W){return l.noHighlightRe.test(W)}function d(W){let U=W.className+" ";U+=W.parentNode?W.parentNode.className:"";const z=l.languageDetectRe.exec(U);if(z){const q=T(z[1]);return q||(zf(i.replace("{}",z[1])),zf("Falling back to no-highlight mode for this block.",W)),q?z[1]:"no-highlight"}return U.split(/\s+/).find(q=>c(q)||T(q))}function u(W,U,z){let q="",re="";typeof U=="object"?(q=W,z=U.ignoreIllegals,re=U.language):(ms("10.7.0","highlight(lang, code, ...args) has been deprecated."),ms("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),re=W,q=U),z===void 0&&(z=!0);const H={code:q,language:re};C("before:highlight",H);const O=H.result?H.result:h(H.language,H.code,z);return O.code=H.code,C("after:highlight",O),O}function h(W,U,z,q){const re=Object.create(null);function H(D,J){return D.keywords[J]}function O(){if(!w.keywords){G.addText(X);return}let D=0;w.keywordPatternRe.lastIndex=0;let J=w.keywordPatternRe.exec(X),ee="";for(;J;){ee+=X.substring(D,J.index);const ae=Q.case_insensitive?J[0].toLowerCase():J[0],ke=H(w,ae);if(ke){const[je,We]=ke;if(G.addText(ee),ee="",re[ae]=(re[ae]||0)+1,re[ae]<=uj&&(V+=We),je.startsWith("_"))ee+=J[0];else{const Pe=Q.classNameAliases[je]||je;Y(J[0],Pe)}}else ee+=J[0];D=w.keywordPatternRe.lastIndex,J=w.keywordPatternRe.exec(X)}ee+=X.substring(D),G.addText(ee)}function ie(){if(X==="")return;let D=null;if(typeof w.subLanguage=="string"){if(!t[w.subLanguage]){G.addText(X);return}D=h(w.subLanguage,X,!0,A[w.subLanguage]),A[w.subLanguage]=D._top}else D=p(X,w.subLanguage.length?w.subLanguage:null);w.relevance>0&&(V+=D.relevance),G.__addSublanguage(D._emitter,D.language)}function M(){w.subLanguage!=null?ie():O(),X=""}function Y(D,J){D!==""&&(G.startScope(J),G.addText(D),G.endScope())}function $(D,J){let ee=1;const ae=J.length-1;for(;ee<=ae;){if(!D._emit[ee]){ee++;continue}const ke=Q.classNameAliases[D[ee]]||D[ee],je=J[ee];ke?Y(je,ke):(X=je,O(),X=""),ee++}}function fe(D,J){return D.scope&&typeof D.scope=="string"&&G.openNode(Q.classNameAliases[D.scope]||D.scope),D.beginScope&&(D.beginScope._wrap?(Y(X,Q.classNameAliases[D.beginScope._wrap]||D.beginScope._wrap),X=""):D.beginScope._multi&&($(D.beginScope,J),X="")),w=Object.create(D,{parent:{value:w}}),w}function me(D,J,ee){let ae=ES(D.endRe,ee);if(ae){if(D["on:end"]){const ke=new Ff(D);D["on:end"](J,ke),ke.isMatchIgnored&&(ae=!1)}if(ae){for(;D.endsParent&&D.parent;)D=D.parent;return D}}if(D.endsWithParent)return me(D.parent,J,ee)}function te(D){return w.matcher.regexIndex===0?(X+=D[0],1):(oe=!0,0)}function de(D){const J=D[0],ee=D.rule,ae=new Ff(ee),ke=[ee.__beforeBegin,ee["on:begin"]];for(const je of ke)if(je&&(je(D,ae),ae.isMatchIgnored))return te(J);return ee.skip?X+=J:(ee.excludeBegin&&(X+=J),M(),!ee.returnBegin&&!ee.excludeBegin&&(X=J)),fe(ee,D),ee.returnBegin?0:J.length}function ce(D){const J=D[0],ee=U.substring(D.index),ae=me(w,D,ee);if(!ae)return Df;const ke=w;w.endScope&&w.endScope._wrap?(M(),Y(J,w.endScope._wrap)):w.endScope&&w.endScope._multi?(M(),$(w.endScope,D)):ke.skip?X+=J:(ke.returnEnd||ke.excludeEnd||(X+=J),M(),ke.excludeEnd&&(X=J));do w.scope&&G.closeNode(),!w.skip&&!w.subLanguage&&(V+=w.relevance),w=w.parent;while(w!==ae.parent);return ae.starts&&fe(ae.starts,D),ke.returnEnd?0:J.length}function ye(){const D=[];for(let J=w;J!==Q;J=J.parent)J.scope&&D.unshift(J.scope);D.forEach(J=>G.openNode(J))}let ge={};function S(D,J){const ee=J&&J[0];if(X+=D,ee==null)return M(),0;if(ge.type==="begin"&&J.type==="end"&&ge.index===J.index&&ee===""){if(X+=U.slice(J.index,J.index+1),!s){const ae=new Error(`0 width match regex (${W})`);throw ae.languageName=W,ae.badRule=ge.rule,ae}return 1}if(ge=J,J.type==="begin")return de(J);if(J.type==="illegal"&&!z){const ae=new Error('Illegal lexeme "'+ee+'" for mode "'+(w.scope||"<unnamed>")+'"');throw ae.mode=w,ae}else if(J.type==="end"){const ae=ce(J);if(ae!==Df)return ae}if(J.type==="illegal"&&ee==="")return X+=`
`,1;if(ne>1e5&&ne>J.index*3)throw new Error("potential infinite loop, way more iterations than matches");return X+=ee,ee.length}const Q=T(W);if(!Q)throw Zr(i.replace("{}",W)),new Error('Unknown language: "'+W+'"');const N=aj(Q);let j="",w=q||N;const A={},G=new l.__emitter(l);ye();let X="",V=0,se=0,ne=0,oe=!1;try{if(Q.__emitTokens)Q.__emitTokens(U,G);else{for(w.matcher.considerAll();;){ne++,oe?oe=!1:w.matcher.considerAll(),w.matcher.lastIndex=se;const D=w.matcher.exec(U);if(!D)break;const J=U.substring(se,D.index),ee=S(J,D);se=D.index+ee}S(U.substring(se))}return G.finalize(),j=G.toHTML(),{language:W,value:j,relevance:V,illegal:!1,_emitter:G,_top:w}}catch(D){if(D.message&&D.message.includes("Illegal"))return{language:W,value:yc(U),illegal:!0,relevance:0,_illegalBy:{message:D.message,index:se,context:U.slice(se-100,se+100),mode:D.mode,resultSoFar:j},_emitter:G};if(s)return{language:W,value:yc(U),illegal:!1,relevance:0,errorRaised:D,_emitter:G,_top:w};throw D}}function f(W){const U={value:yc(W),illegal:!1,relevance:0,_top:a,_emitter:new l.__emitter(l)};return U._emitter.addText(W),U}function p(W,U){U=U||l.languages||Object.keys(t);const z=f(W),q=U.filter(T).filter(P).map(M=>h(M,W,!1));q.unshift(z);const re=q.sort((M,Y)=>{if(M.relevance!==Y.relevance)return Y.relevance-M.relevance;if(M.language&&Y.language){if(T(M.language).supersetOf===Y.language)return 1;if(T(Y.language).supersetOf===M.language)return-1}return 0}),[H,O]=re,ie=H;return ie.secondBest=O,ie}function v(W,U,z){const q=U&&n[U]||z;W.classList.add("hljs"),W.classList.add(`language-${q}`)}function y(W){let U=null;const z=d(W);if(c(z))return;if(C("before:highlightElement",{el:W,language:z}),W.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",W);return}if(W.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(W)),l.throwUnescapedHTML))throw new dj("One of your code blocks includes unescaped HTML.",W.innerHTML);U=W;const q=U.textContent,re=z?u(q,{language:z,ignoreIllegals:!0}):p(q);W.innerHTML=re.value,W.dataset.highlighted="yes",v(W,z,re.language),W.result={language:re.language,re:re.relevance,relevance:re.relevance},re.secondBest&&(W.secondBest={language:re.secondBest.language,relevance:re.secondBest.relevance}),C("after:highlightElement",{el:W,result:re,text:q})}function b(W){l=$f(l,W)}const g=()=>{E(),ms("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function m(){E(),ms("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let x=!1;function E(){function W(){E()}if(document.readyState==="loading"){x||window.addEventListener("DOMContentLoaded",W,!1),x=!0;return}document.querySelectorAll(l.cssSelector).forEach(y)}function k(W,U){let z=null;try{z=U(e)}catch(q){if(Zr("Language definition for '{}' could not be registered.".replace("{}",W)),s)Zr(q);else throw q;z=a}z.name||(z.name=W),t[W]=z,z.rawDefinition=U.bind(null,e),z.aliases&&B(z.aliases,{languageName:W})}function I(W){delete t[W];for(const U of Object.keys(n))n[U]===W&&delete n[U]}function R(){return Object.keys(t)}function T(W){return W=(W||"").toLowerCase(),t[W]||t[n[W]]}function B(W,{languageName:U}){typeof W=="string"&&(W=[W]),W.forEach(z=>{n[z.toLowerCase()]=U})}function P(W){const U=T(W);return U&&!U.disableAutodetect}function K(W){W["before:highlightBlock"]&&!W["before:highlightElement"]&&(W["before:highlightElement"]=U=>{W["before:highlightBlock"](Object.assign({block:U.el},U))}),W["after:highlightBlock"]&&!W["after:highlightElement"]&&(W["after:highlightElement"]=U=>{W["after:highlightBlock"](Object.assign({block:U.el},U))})}function F(W){K(W),r.push(W)}function L(W){const U=r.indexOf(W);U!==-1&&r.splice(U,1)}function C(W,U){const z=W;r.forEach(function(q){q[z]&&q[z](U)})}function Z(W){return ms("10.7.0","highlightBlock will be removed entirely in v12.0"),ms("10.7.0","Please use highlightElement now."),y(W)}Object.assign(e,{highlight:u,highlightAuto:p,highlightAll:E,highlightElement:y,highlightBlock:Z,configure:b,initHighlighting:g,initHighlightingOnLoad:m,registerLanguage:k,unregisterLanguage:I,listLanguages:R,getLanguage:T,registerAliases:B,autoDetection:P,inherit:$f,addPlugin:F,removePlugin:L}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString=cj,e.regex={concat:ls,lookahead:py,either:Wu,optional:jS,anyNumberOfTimes:SS};for(const W in Yi)typeof Yi[W]=="object"&&hy(Yi[W]);return Object.assign(e,Yi),e},Qs=ky({});Qs.newInstance=()=>ky({});var hj=Qs;Qs.HighlightJS=Qs;Qs.default=Qs;const Xn=Ad(hj),Mf="[A-Za-z$_][0-9A-Za-z$_]*",fj=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],pj=["true","false","null","undefined","NaN","Infinity"],Sy=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],jy=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Cy=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],mj=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],gj=[].concat(Cy,Sy,jy);function Ey(e){const t=e.regex,n=(z,{after:q})=>{const re="</"+z[0].slice(1);return z.input.indexOf(re,q)!==-1},r=Mf,s={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(z,q)=>{const re=z[0].length+z.index,H=z.input[re];if(H==="<"||H===","){q.ignoreMatch();return}H===">"&&(n(z,{after:re})||q.ignoreMatch());let O;const ie=z.input.substring(re);if(O=ie.match(/^\s*=/)){q.ignoreMatch();return}if((O=ie.match(/^\s+extends\s+/))&&O.index===0){q.ignoreMatch();return}}},l={$pattern:Mf,keyword:fj,literal:pj,built_in:gj,"variable.language":mj},c="[0-9](_?[0-9])*",d=`\\.(${c})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",h={className:"number",variants:[{begin:`(\\b(${u})((${d})|\\.)?|(${d}))[eE][+-]?(${c})\\b`},{begin:`\\b(${u})\\b((${d})\\b|\\.)?|(${d})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},p={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},v={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,f],subLanguage:"css"}},y={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},b={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,f]},m={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},x=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,v,y,b,{match:/\$\d+/},h];f.contains=x.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(x)});const E=[].concat(m,f.contains),k=E.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(E)}]),I={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:k},R={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},T={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Sy,...jy]}},B={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[I],illegal:/%/},K={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(z){return t.concat("(?!",z.join("|"),")")}const L={match:t.concat(/\b/,F([...Cy,"super","import"].map(z=>`${z}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},C={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Z={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},I]},W="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",U={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(W)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[I]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:T},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),B,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,v,y,b,m,{match:/\$\d+/},h,T,{scope:"attr",match:r+t.lookahead(":"),relevance:0},U,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[m,e.REGEXP_MODE,{className:"function",begin:W,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:i},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[I,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},C,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[I]},L,K,R,Z,{match:/\$[(.]/}]}}const Ja="[A-Za-z$_][0-9A-Za-z$_]*",Ny=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends","using"],Ty=["true","false","null","undefined","NaN","Infinity"],Iy=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],Ay=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Py=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Ry=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Fy=[].concat(Py,Iy,Ay);function yj(e){const t=e.regex,n=(z,{after:q})=>{const re="</"+z[0].slice(1);return z.input.indexOf(re,q)!==-1},r=Ja,s={begin:"<>",end:"</>"},i=/<[A-Za-z0-9\\._:-]+\s*\/>/,a={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(z,q)=>{const re=z[0].length+z.index,H=z.input[re];if(H==="<"||H===","){q.ignoreMatch();return}H===">"&&(n(z,{after:re})||q.ignoreMatch());let O;const ie=z.input.substring(re);if(O=ie.match(/^\s*=/)){q.ignoreMatch();return}if((O=ie.match(/^\s+extends\s+/))&&O.index===0){q.ignoreMatch();return}}},l={$pattern:Ja,keyword:Ny,literal:Ty,built_in:Fy,"variable.language":Ry},c="[0-9](_?[0-9])*",d=`\\.(${c})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",h={className:"number",variants:[{begin:`(\\b(${u})((${d})|\\.)?|(${d}))[eE][+-]?(${c})\\b`},{begin:`\\b(${u})\\b((${d})\\b|\\.)?|(${d})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},f={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},p={begin:".?html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,f],subLanguage:"xml"}},v={begin:".?css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,f],subLanguage:"css"}},y={begin:".?gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,f],subLanguage:"graphql"}},b={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,f]},m={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:r+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},x=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,v,y,b,{match:/\$\d+/},h];f.contains=x.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(x)});const E=[].concat(m,f.contains),k=E.concat([{begin:/(\s*)\(/,end:/\)/,keywords:l,contains:["self"].concat(E)}]),I={className:"params",begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:k},R={variants:[{match:[/class/,/\s+/,r,/\s+/,/extends/,/\s+/,t.concat(r,"(",t.concat(/\./,r),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,r],scope:{1:"keyword",3:"title.class"}}]},T={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Iy,...Ay]}},B={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},P={variants:[{match:[/function/,/\s+/,r,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[I],illegal:/%/},K={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function F(z){return t.concat("(?!",z.join("|"),")")}const L={match:t.concat(/\b/,F([...Py,"super","import"].map(z=>`${z}\\s*\\(`)),r,t.lookahead(/\s*\(/)),className:"title.function",relevance:0},C={begin:t.concat(/\./,t.lookahead(t.concat(r,/(?![0-9A-Za-z$_(])/))),end:r,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},Z={match:[/get|set/,/\s+/,r,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},I]},W="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",U={match:[/const|var|let/,/\s+/,r,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(W)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[I]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:k,CLASS_REFERENCE:T},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),B,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,p,v,y,b,m,{match:/\$\d+/},h,T,{scope:"attr",match:r+t.lookahead(":"),relevance:0},U,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[m,e.REGEXP_MODE,{className:"function",begin:W,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/(\s*)\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:k}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:s.begin,end:s.end},{match:i},{begin:a.begin,"on:begin":a.isTrulyOpeningTag,end:a.end}],subLanguage:"xml",contains:[{begin:a.begin,end:a.end,skip:!0,contains:["self"]}]}]},P,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[I,e.inherit(e.TITLE_MODE,{begin:r,className:"title.function"})]},{match:/\.\.\./,relevance:0},C,{match:"\\$"+r,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[I]},L,K,R,Z,{match:/\$[(.]/}]}}function By(e){const t=e.regex,n=yj(e),r=Ja,s=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],i={begin:[/namespace/,/\s+/,e.IDENT_RE],beginScope:{1:"keyword",3:"title.class"}},a={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:s},contains:[n.exports.CLASS_REFERENCE]},l={className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/},c=["type","interface","public","private","protected","implements","declare","abstract","readonly","enum","override","satisfies"],d={$pattern:Ja,keyword:Ny.concat(c),literal:Ty,built_in:Fy.concat(s),"variable.language":Ry},u={className:"meta",begin:"@"+r},h=(y,b,g)=>{const m=y.contains.findIndex(x=>x.label===b);if(m===-1)throw new Error("can not find mode to replace");y.contains.splice(m,1,g)};Object.assign(n.keywords,d),n.exports.PARAMS_CONTAINS.push(u);const f=n.contains.find(y=>y.scope==="attr"),p=Object.assign({},f,{match:t.concat(r,t.lookahead(/\s*\?:/))});n.exports.PARAMS_CONTAINS.push([n.exports.CLASS_REFERENCE,f,p]),n.contains=n.contains.concat([u,i,a,p]),h(n,"shebang",e.SHEBANG()),h(n,"use_strict",l);const v=n.contains.find(y=>y.label==="func.def");return v.relevance=0,Object.assign(n,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),n}function xj(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),r=/[\p{L}0-9._:-]+/u,s={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},i={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},a=e.inherit(i,{begin:/\(/,end:/\)/}),l=e.inherit(e.APOS_STRING_MODE,{className:"string"}),c=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),d={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:r,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[s]},{begin:/'/,end:/'/,contains:[s]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[i,c,l,a,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[i,a,c,l]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},s,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[c]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[d],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[d],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:d}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const vj=e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}),bj=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","optgroup","option","p","picture","q","quote","samp","section","select","source","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],_j=["defs","g","marker","mask","pattern","svg","switch","symbol","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","linearGradient","radialGradient","stop","circle","ellipse","image","line","path","polygon","polyline","rect","text","use","textPath","tspan","foreignObject","clipPath"],wj=[...bj,..._j],kj=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"].sort().reverse(),Sj=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"].sort().reverse(),jj=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"].sort().reverse(),Cj=["accent-color","align-content","align-items","align-self","alignment-baseline","all","anchor-name","animation","animation-composition","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-range","animation-range-end","animation-range-start","animation-timeline","animation-timing-function","appearance","aspect-ratio","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-end-end-radius","border-end-start-radius","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-align","box-decoration-break","box-direction","box-flex","box-flex-group","box-lines","box-ordinal-group","box-orient","box-pack","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","color-scheme","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","contain-intrinsic-block-size","contain-intrinsic-height","contain-intrinsic-inline-size","contain-intrinsic-size","contain-intrinsic-width","container","container-name","container-type","content","content-visibility","counter-increment","counter-reset","counter-set","cue","cue-after","cue-before","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","enable-background","field-sizing","fill","fill-opacity","fill-rule","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-palette","font-size","font-size-adjust","font-smooth","font-smoothing","font-stretch","font-style","font-synthesis","font-synthesis-position","font-synthesis-small-caps","font-synthesis-style","font-synthesis-weight","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-emoji","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","forced-color-adjust","gap","glyph-orientation-horizontal","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphenate-character","hyphenate-limit-chars","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","initial-letter","initial-letter-align","inline-size","inset","inset-area","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","kerning","left","letter-spacing","lighting-color","line-break","line-height","line-height-step","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","margin-trim","marker","marker-end","marker-mid","marker-start","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","masonry-auto-flow","math-depth","math-shift","math-style","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-clip-margin","overflow-inline","overflow-wrap","overflow-x","overflow-y","overlay","overscroll-behavior","overscroll-behavior-block","overscroll-behavior-inline","overscroll-behavior-x","overscroll-behavior-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","paint-order","pause","pause-after","pause-before","perspective","perspective-origin","place-content","place-items","place-self","pointer-events","position","position-anchor","position-visibility","print-color-adjust","quotes","r","resize","rest","rest-after","rest-before","right","rotate","row-gap","ruby-align","ruby-position","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scroll-timeline","scroll-timeline-axis","scroll-timeline-name","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","speak","speak-as","src","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","tab-size","table-layout","text-align","text-align-all","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-size-adjust","text-transform","text-underline-offset","text-underline-position","text-wrap","text-wrap-mode","text-wrap-style","timeline-scope","top","touch-action","transform","transform-box","transform-origin","transform-style","transition","transition-behavior","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-modify","user-select","vector-effect","vertical-align","view-timeline","view-timeline-axis","view-timeline-inset","view-timeline-name","view-transition-name","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","white-space-collapse","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","x","y","z-index","zoom"].sort().reverse();function Ej(e){const t=e.regex,n=vj(e),r={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},s="and or not only",i=/@-?\w[\w]*(-\w+)*/,a="[a-zA-Z-][a-zA-Z0-9_-]*",l=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,r,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+a,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Sj.join("|")+")"},{begin:":(:)?("+jj.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Cj.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:i},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:s,attribute:kj.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+wj.join("|")+")\\b"}]}}function Nj(e){const t=e.regex,n=new RegExp("[\\p{XID_Start}_]\\p{XID_Continue}*","u"),r=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:r,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},c={className:"meta",begin:/^(>>>|\.\.\.) /},d={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},u={begin:/\{\{/,relevance:0},h={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,c],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,c,u,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,c,u,d]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,u,d]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,u,d]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},f="[0-9](_?[0-9])*",p=`(\\b(${f}))?\\.(${f})|\\b(${f})\\.`,v=`\\b|${r.join("|")}`,y={className:"number",relevance:0,variants:[{begin:`(\\b(${f})|(${p}))[eE][+-]?(${f})[jJ]?(?=${v})`},{begin:`(${p})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${v})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${v})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${v})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${v})`},{begin:`\\b(${f})[jJ](?=${v})`}]},b={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},g={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",c,y,h,e.HASH_COMMENT_MODE]}]};return d.contains=[h,y,c],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|\?)|=>/,contains:[c,y,{scope:"variable.language",match:/\bself\b/},{beginKeywords:"if",relevance:0},{match:/\bor\b/,scope:"keyword"},h,b,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[g]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[y,g,h]}]}}function Tj(e){const t=e.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},r={begin:"^[-\\*]{3,}",end:"$"},s={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},i={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},a={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,c={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:t.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},d={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},h=e.inherit(d,{contains:[]}),f=e.inherit(u,{contains:[]});d.contains.push(f),u.contains.push(h);let p=[n,c];return[d,u,h,f].forEach(g=>{g.contains=g.contains.concat(p)}),p=p.concat(d,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:p},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:p}]}]},n,i,d,u,{className:"quote",begin:"^>\\s+",contains:p,end:"$"},s,r,c,a,{scope:"literal",match:/&([a-zA-Z0-9]+|#[0-9]{1,7}|#[Xx][0-9a-fA-F]{1,6});/}]}}function Ij(e){const t={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",aliases:["jsonc"],keywords:{literal:r},contains:[t,n,e.QUOTE_STRING_MODE,s,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}const Aj="_container_nbaum_1",Pj="_historyButtons_nbaum_14",Rj="_historyButton_nbaum_14",Fj="_keysContainer_nbaum_40",Bj="_key_nbaum_40",Oj="_tabKey_nbaum_72",nr={container:Aj,historyButtons:Pj,historyButton:Rj,keysContainer:Fj,key:Bj,tabKey:Oj},Lj=({onKeyPress:e,onUndo:t,onRedo:n,onSave:r,canUndo:s,canRedo:i,tabSize:a=2,useTabs:l=!1})=>{const{colors:c}=ve(),d=["(",")","{","}","[","]","<",">","/","\\","|","&","!",".",",",";",":","'",'"',"_","-","+","=","*","%","$","#","@","~","`"],u=()=>{e(l?"	":" ".repeat(a))};return o.jsxs("div",{className:nr.container,style:{backgroundColor:c.surface,borderTopColor:c.border},children:[o.jsxs("div",{className:nr.historyButtons,children:[o.jsx("button",{className:nr.historyButton,style:{opacity:s?1:.5},onClick:t,disabled:!s,title:"Undo (Ctrl+Z)",children:o.jsx(Mw,{size:20,color:c.text})}),o.jsx("button",{className:nr.historyButton,style:{opacity:i?1:.5},onClick:n,disabled:!i,title:"Redo (Ctrl+Y)",children:o.jsx(Iw,{size:20,color:c.text})}),o.jsx("button",{className:nr.historyButton,onClick:r,title:"Save (Ctrl+S)",children:o.jsx(lo,{size:20,color:c.text})})]}),o.jsxs("div",{className:nr.keysContainer,children:[o.jsx("button",{className:nr.tabKey,style:{backgroundColor:c.primary,color:"#FFFFFF"},onClick:u,children:"Tab"}),d.map((h,f)=>o.jsx("button",{className:nr.key,style:{backgroundColor:c.background,color:c.text},onClick:()=>e(h),children:h},f))]})]})},zj="_container_3d1yb_1",$j="_findSection_3d1yb_11",Dj="_replaceSection_3d1yb_11",Mj="_inputGroup_3d1yb_19",Uj="_inputWrapper_3d1yb_24",Hj="_inputIcon_3d1yb_32",Wj="_input_3d1yb_19",qj="_matchInfo_3d1yb_50",Vj="_actions_3d1yb_56",Kj="_actionButton_3d1yb_61",Gj="_buttonText_3d1yb_82",Jj="_replaceAllButton_3d1yb_87",Zj="_options_3d1yb_91",Yj="_optionLabel_3d1yb_97",Me={container:zj,findSection:$j,replaceSection:Dj,inputGroup:Mj,inputWrapper:Uj,inputIcon:Hj,input:Wj,matchInfo:qj,actions:Vj,actionButton:Kj,buttonText:Gj,replaceAllButton:Jj,options:Zj,optionLabel:Yj},Oy=({value:e,onFind:t,onFindNext:n,onFindPrevious:r,onReplace:s,onReplaceAll:i,onClose:a,showReplace:l,toggleShowReplace:c})=>{const{colors:d}=ve(),[u,h]=_.useState(""),[f,p]=_.useState(""),[v,y]=_.useState(!1),[b,g]=_.useState(!1),[m,x]=_.useState(0),E=_.useRef(null);_.useEffect(()=>{E.current&&E.current.focus()},[]),_.useEffect(()=>{if(u){const T=t(u,{matchCase:v,wholeWord:b});x(T)}},[u,v,b]);const k=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),n()),T.key==="Enter"&&T.shiftKey&&(T.preventDefault(),r()),T.key==="Escape"&&(T.preventDefault(),a())},I=()=>{s(f)},R=()=>{const T=i(u,f,{matchCase:v,wholeWord:b});x(0),alert(`${T} occurrences replaced.`)};return o.jsxs("div",{className:Me.container,style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsxs("div",{className:Me.findSection,children:[o.jsxs("div",{className:Me.inputGroup,children:[o.jsxs("div",{className:Me.inputWrapper,children:[o.jsx(Ln,{size:16,color:d.textSecondary,className:Me.inputIcon}),o.jsx("input",{ref:E,className:Me.input,style:{color:d.text,backgroundColor:d.background},value:u,onChange:T=>h(T.target.value),onKeyDown:k,placeholder:"Find"})]}),o.jsx("div",{className:Me.matchInfo,style:{color:d.textSecondary},children:u&&`${m} matches`}),o.jsxs("div",{className:Me.actions,children:[o.jsx("button",{className:Me.actionButton,onClick:r,disabled:!u,title:"Previous match (Shift+Enter)",children:o.jsx(Cd,{size:16,color:d.textSecondary})}),o.jsx("button",{className:Me.actionButton,onClick:n,disabled:!u,title:"Next match (Enter)",children:o.jsx(Jg,{size:16,color:d.textSecondary})}),o.jsx("button",{className:Me.actionButton,onClick:c,title:l?"Hide replace":"Show replace",children:o.jsx(Af,{size:16,color:d.textSecondary})}),o.jsx("button",{className:Me.actionButton,onClick:a,title:"Close (Escape)",children:o.jsx(st,{size:16,color:d.textSecondary})})]})]}),o.jsxs("div",{className:Me.options,children:[o.jsxs("label",{className:Me.optionLabel,children:[o.jsx("input",{type:"checkbox",checked:v,onChange:()=>y(!v)}),o.jsx("span",{style:{color:d.text},children:"Match case"})]}),o.jsxs("label",{className:Me.optionLabel,children:[o.jsx("input",{type:"checkbox",checked:b,onChange:()=>g(!b)}),o.jsx("span",{style:{color:d.text},children:"Whole word"})]})]})]}),l&&o.jsx("div",{className:Me.replaceSection,children:o.jsxs("div",{className:Me.inputGroup,children:[o.jsxs("div",{className:Me.inputWrapper,children:[o.jsx(Af,{size:16,color:d.textSecondary,className:Me.inputIcon}),o.jsx("input",{className:Me.input,style:{color:d.text,backgroundColor:d.background},value:f,onChange:T=>p(T.target.value),onKeyDown:k,placeholder:"Replace"})]}),o.jsxs("div",{className:Me.actions,children:[o.jsxs("button",{className:Me.actionButton,onClick:I,disabled:!u,title:"Replace current match",children:[o.jsx(kn,{size:16,color:d.textSecondary}),o.jsx("span",{className:Me.buttonText,children:"Replace"})]}),o.jsx("button",{className:`${Me.actionButton} ${Me.replaceAllButton}`,onClick:R,disabled:!u,title:"Replace all matches",children:o.jsx("span",{className:Me.buttonText,children:"Replace All"})})]})]})})]})},Qj=(e,t)=>{try{const n=e.split(`
`),r=[];let s=0;for(let i=0;i<n.length;i++){let a=n[i].trim();a.includes("}")&&!a.includes("{")&&s>0&&s--,a.length>0&&(a="  ".repeat(s)+a),r.push(a),a.includes("{")&&!a.includes("}")&&s++}return r.join(`
`)}catch(n){return console.error("Error formatting code:",n),e}};class Xj{constructor(){Se(this,"patterns",{javascript:[{pattern:/console\.log/g,message:"Avoid using console.log in production code",severity:"warning"},{pattern:new RegExp("(?<!\\w)var\\s+","g"),message:"Use const or let instead of var",severity:"warning"},{pattern:/==[^=]/g,message:"Use === instead of == for equality comparisons",severity:"warning"},{pattern:/!=[^=]/g,message:"Use !== instead of != for equality comparisons",severity:"warning"},{pattern:/\/\/\s*TODO/g,message:"TODO comment found",severity:"info"},{pattern:/new\s+Array\(/g,message:"Use array literal notation [] instead of new Array()",severity:"warning"},{pattern:/new\s+Object\(/g,message:"Use object literal notation {} instead of new Object()",severity:"warning"},{pattern:/function\*[^(]*\(/g,message:"Generator functions require proper error handling",severity:"info"},{pattern:/\bcatch\s*\(\s*\)\s*\{/g,message:"Empty catch block may swallow exceptions",severity:"warning"},{pattern:/setInterval\s*\([^,]+\)/g,message:"setInterval missing second argument",severity:"error"}],css:[{pattern:/!important/g,message:"Avoid using !important",severity:"warning"},{pattern:/@import\s+url/g,message:"Prefer using bundler imports over CSS @import",severity:"info"},{pattern:/position:\s*absolute/g,message:"Absolute positioning can lead to layout issues",severity:"info"}],html:[{pattern:/<img[^>]+(?!alt=)[^>]*>/g,message:"Image missing alt attribute",severity:"warning"},{pattern:/<button[^>]*>(?!.*<\/button>)/g,message:"Unclosed button tag",severity:"error"},{pattern:/<a[^>]*>(?!.*<\/a>)/g,message:"Unclosed anchor tag",severity:"error"}]})}lintCode(t,n){let r;switch(n){case"javascript":case"typescript":case"jsx":case"tsx":r=this.patterns.javascript;break;case"css":case"scss":case"less":r=this.patterns.css;break;case"html":r=this.patterns.html;break;default:r=this.patterns.javascript}const s=[];r.forEach(({pattern:c,message:d,severity:u})=>{let h;for(;(h=c.exec(t))!==null;){const p=t.substring(0,h.index).split(`
`),v=p.length,y=p[p.length-1].length+1;s.push({line:v,column:y,message:d,severity:u,source:h[0]})}});try{["javascript","jsx","typescript","tsx"].includes(n)&&new Function(t)}catch(c){if(c instanceof SyntaxError){const d=c.message.match(/(?:line\s+(\d+)(?:\s+column\s+(\d+))?)/i),u=d&&d[1]?parseInt(d[1],10):1,h=d&&d[2]?parseInt(d[2],10):1;s.push({line:u,column:h,message:`Syntax error: ${c.message}`,severity:"error"})}}const i=s.filter(c=>c.severity==="error").length,a=s.filter(c=>c.severity==="warning").length,l=s.filter(c=>c.severity==="info").length;return{issues:s,errorCount:i,warningCount:a,infoCount:l}}useLinting(t,n){const[r,s]=_.useState({issues:[],errorCount:0,warningCount:0,infoCount:0});return _.useEffect(()=>{const i=setTimeout(()=>{const a=this.lintCode(t,n);s(a)},500);return()=>clearTimeout(i)},[t,n]),r}}const e2=new Xj,t2=({issues:e,onIssueClick:t})=>{const{colors:n}=ve(),r=a=>{switch(a){case"error":return o.jsx(Bn,{size:14,color:n.error});case"warning":return o.jsx(Wa,{size:14,color:n.warning});case"info":return o.jsx($u,{size:14,color:n.primary});default:return null}},s=a=>{switch(a){case"error":return n.error;case"warning":return n.warning;case"info":return n.primary;default:return n.text}},i={};return e.forEach(a=>{const l=`Line ${a.line}, Column ${a.column}`;i[l]||(i[l]=[]),i[l].push(a)}),o.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto",padding:"8px",backgroundColor:n.surface,borderRadius:"4px",border:`1px solid ${n.border}`},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",borderBottom:`1px solid ${n.border}`,paddingBottom:"8px"},children:[o.jsx("div",{style:{fontSize:"14px",fontWeight:"bold",color:n.text},children:"Problems"}),o.jsxs("div",{style:{display:"flex",gap:"10px"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:n.error},children:[o.jsx(Bn,{size:12}),e.filter(a=>a.severity==="error").length," Errors"]}),o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:n.warning},children:[o.jsx(Wa,{size:12}),e.filter(a=>a.severity==="warning").length," Warnings"]})]})]}),Object.keys(i).length===0?o.jsx("div",{style:{textAlign:"center",padding:"16px",color:n.textSecondary},children:"No problems found"}):Object.entries(i).map(([a,l])=>o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsx("div",{style:{fontSize:"12px",color:n.textSecondary,marginBottom:"4px",fontFamily:"monospace"},children:a}),l.map((c,d)=>o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"8px",padding:"4px 8px",borderRadius:"4px",backgroundColor:`${s(c.severity)}10`,marginBottom:"4px",cursor:"pointer"},onClick:()=>t==null?void 0:t(c),children:[r(c.severity),o.jsxs("div",{style:{color:n.text,fontSize:"13px"},children:[c.message,c.ruleId&&o.jsxs("span",{style:{color:n.textSecondary,fontSize:"11px",marginLeft:"4px"},children:["(",c.ruleId,")"]})]})]},d))]},a))]})};class n2{constructor(){Se(this,"keywords",{javascript:["async","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","yield"],typescript:["abstract","any","as","asserts","async","await","boolean","break","case","catch","class","const","continue","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","infer","instanceof","interface","is","keyof","let","module","namespace","never","new","null","number","object","of","package","private","protected","public","readonly","return","require","global","set","static","string","super","switch","symbol","this","throw","true","try","type","typeof","undefined","unique","unknown","var","void","while","with","yield"],css:["align-content","align-items","align-self","background","background-color","border","border-radius","box-shadow","color","display","flex","flex-direction","font-family","font-size","font-weight","grid","height","justify-content","margin","margin-top","margin-bottom","margin-left","margin-right","padding","padding-top","padding-bottom","padding-left","padding-right","position","width"],html:["div","span","p","h1","h2","h3","h4","h5","h6","a","img","button","form","input","label","select","option","textarea","ul","ol","li","table","tr","td","th","thead","tbody","section","article","header","footer","nav","main","aside"]});Se(this,"builtIns",{javascript:["Array","Boolean","Date","Error","Function","JSON","Math","Number","Object","Promise","RegExp","String","console","document","window","localStorage","sessionStorage","setTimeout","setInterval","fetch","Map","Set","WeakMap","WeakSet"],typescript:["Array","Boolean","Date","Error","Function","JSON","Math","Number","Object","Promise","RegExp","String","console","document","window","localStorage","sessionStorage","setTimeout","setInterval","fetch","Map","Set","WeakMap","WeakSet","any","boolean","number","string","void","undefined","null","never","object"]});Se(this,"snippets",{javascript:[{prefix:"cl",body:"console.log($1);",description:"console.log statement"},{prefix:"fn",body:`function $1($2) {
  $3
}`,description:"Function declaration"},{prefix:"afn",body:`($1) => {
  $2
}`,description:"Arrow function"},{prefix:"if",body:`if ($1) {
  $2
}`,description:"If statement"},{prefix:"ife",body:`if ($1) {
  $2
} else {
  $3
}`,description:"If-else statement"},{prefix:"for",body:`for (let i = 0; i < $1; i++) {
  $2
}`,description:"For loop"}],typescript:[{prefix:"cl",body:"console.log($1);",description:"console.log statement"},{prefix:"fn",body:`function $1($2): $3 {
  $4
}`,description:"Function declaration with type"},{prefix:"afn",body:`($1): $2 => {
  $3
}`,description:"Arrow function with type"},{prefix:"int",body:`interface $1 {
  $2
}`,description:"Interface declaration"},{prefix:"type",body:"type $1 = $2;",description:"Type alias"}],react:[{prefix:"rfc",body:`import React from 'react';

interface \${1:ComponentName}Props {
  $2
}

const \${1:ComponentName}: React.FC<\${1:ComponentName}Props> = ($3) => {
  return (
    <div>
      $4
    </div>
  );
};

export default \${1:ComponentName};`,description:"React Functional Component with TypeScript"},{prefix:"useState",body:"const [$1, set${1/(.*)/${1:/capitalize}/}] = useState<$2>($3);",description:"React useState hook"},{prefix:"useEffect",body:`useEffect(() => {
  $1
  
  return () => {
    $2
  };
}, [$3]);`,description:"React useEffect hook"}]})}extractContextualCompletions(t,n,r){const s=[],i=t.substring(0,n),a=/(var|let|const)\s+(\w+)(\s*=\s*([^;]+))?/g;let l;for(;(l=a.exec(i))!==null;){const u=l[2];s.push({label:u,kind:"variable",insertText:u})}const c=/function\s+(\w+)\s*\(([^)]*)\)/g;for(;(l=c.exec(i))!==null;){const u=l[1],h=l[2].split(",").map(f=>f.trim()).filter(Boolean);s.push({label:u,kind:"function",detail:`(${h.join(", ")}) => {...}`,insertText:`${u}(${h.map((f,p)=>`\${${p+1}}`).join(", ")})`})}const d=/class\s+(\w+)(\s+extends\s+(\w+))?/g;for(;(l=d.exec(i))!==null;){const u=l[1],h=l[3]||"";s.push({label:u,kind:"class",detail:h?`extends ${h}`:"",insertText:u})}return s}getKeywordCompletions(t){const n=this.normalizeLanguage(t);return this.keywords[n]?this.keywords[n].map(r=>({label:r,kind:"keyword",insertText:r})):[]}getBuiltInCompletions(t){const n=this.normalizeLanguage(t);return this.builtIns[n]?this.builtIns[n].map(r=>({label:r,kind:r[0]===r[0].toUpperCase()?"class":"property",insertText:r})):[]}getSnippetCompletions(t){const n=this.normalizeLanguage(t),r=[...this.snippets[n]||[],...t==="jsx"||t==="tsx"?this.snippets.react||[]:[]];return r.length?r.map(s=>({label:s.prefix,kind:"snippet",detail:s.description,documentation:s.body,insertText:s.body})):[]}normalizeLanguage(t){switch(t){case"jsx":return"javascript";case"tsx":return"typescript";default:return t}}getCompletions(t,n,r,s=""){const i=this.extractContextualCompletions(t,n,r),a=this.getKeywordCompletions(r),l=this.getBuiltInCompletions(r),c=this.getSnippetCompletions(r),d=[...i,...l,...a,...c];return s?d.filter(u=>u.label.toLowerCase().startsWith(s.toLowerCase())):d}getLintDiagnostics(t,n){const r=[];if(n==="javascript"||n==="jsx"||n==="typescript"||n==="tsx"){const s=t.split(`
`);s.forEach((l,c)=>{/[a-zA-Z0-9_)\]]['"]?$/.test(l)&&!l.trim().endsWith(";")&&!l.trim().endsWith("{")&&!l.trim().endsWith("}")&&!l.trim().startsWith("import")&&!l.trim().startsWith("export")&&r.push({message:"Missing semicolon",line:c+1,column:l.length,severity:"warning"}),l.includes("console.log")&&!l.startsWith("//")&&r.push({message:"console.log statement found",line:c+1,column:l.indexOf("console.log"),severity:"info"})});const i=[],a={"(":")","{":"}","[":"]"};for(let l=0;l<s.length;l++){const c=s[l];for(let d=0;d<c.length;d++){const u=c[d];if(u==="("||u==="{"||u==="[")i.push({char:u,line:l+1,column:d+1});else if(u===")"||u==="}"||u==="]")if(i.length===0)r.push({message:`Unexpected closing bracket '${u}'`,line:l+1,column:d+1,severity:"error"});else{const h=i.pop();a[h.char]!==u&&r.push({message:`Mismatched bracket: expected '${a[h.char]}', found '${u}'`,line:l+1,column:d+1,severity:"error"})}}}for(const l of i)r.push({message:`Unclosed bracket '${l.char}'`,line:l.line,column:l.column,severity:"error"})}return r}}const r2=new n2,Ya=class Ya{constructor(){Se(this,"cachedCompletions",new Map);Se(this,"isGenerating",!1);Se(this,"codePatterns",{react:[{pattern:"useState",completion:{label:"useState",kind:"snippet",insertText:"const [${1:state}, set${1/(.*)/${1:/capitalize}/}] = useState(${2:initialState})",documentation:"React useState hook for component state",detail:"React Hook"}},{pattern:"useEffect",completion:{label:"useEffect",kind:"snippet",insertText:`useEffect(() => {
	\${1}
	return () => {
		\${2}
	};
}, [\${3}])`,documentation:"React useEffect hook for side effects",detail:"React Hook"}},{pattern:"component",completion:{label:"React Functional Component",kind:"snippet",insertText:`const \${1:ComponentName} = (\${2:props}) => {
	return (
		<div>
			\${3}
		</div>
	);
};

export default \${1:ComponentName};`,documentation:"Create a functional React component",detail:"React Component"}}],typescript:[{pattern:"interface",completion:{label:"interface",kind:"snippet",insertText:"interface ${1:InterfaceName} {\n	${2:property}: ${3:type};\n}",documentation:"TypeScript interface declaration",detail:"TypeScript"}},{pattern:"type",completion:{label:"type",kind:"snippet",insertText:"type ${1:TypeName} = ${2:string};",documentation:"TypeScript type alias",detail:"TypeScript"}}],javascript:[{pattern:"function",completion:{label:"function",kind:"snippet",insertText:"function ${1:functionName}(${2:params}) {\n	${3}\n}",documentation:"Function declaration",detail:"JavaScript"}},{pattern:"arrow",completion:{label:"arrow function",kind:"snippet",insertText:"const ${1:functionName} = (${2:params}) => {\n	${3}\n}",documentation:"Arrow function expression",detail:"JavaScript"}},{pattern:"class",completion:{label:"class",kind:"snippet",insertText:`class \${1:ClassName} {
	constructor(\${2:params}) {
		\${3}
	}

	\${4:methodName}() {
		\${5}
	}
}`,documentation:"Class declaration",detail:"JavaScript"}}]})}static getInstance(){return this.instance||(this.instance=new Ya),this.instance}async getCompletions(t,n,r,s="",i=300){if(!t||!r)return{suggestions:[],isLoading:!1,error:null};let l=[...r2.getCompletions(t,n,r,s)];const c=`${r}:${s}:${n}`;if(this.cachedCompletions.has(c))return{suggestions:this.cachedCompletions.get(c)||[],isLoading:!1,error:null};if(this.isGenerating)return{suggestions:l,isLoading:!0,error:null};this.isGenerating=!0;try{l=this.addPatternBasedCompletions(l,r,t,n,s);const d=await this.generateContextAwareSuggestions(t,n,r,s),u=[...l,...d],h=this.removeDuplicates(u),f=this.sortByRelevance(h,s);return this.cachedCompletions.set(c,f),{suggestions:f,isLoading:!1,error:null}}catch(d){return console.error("Error generating AI completions:",d),{suggestions:l,isLoading:!1,error:d instanceof Error?d.message:"Unknown error"}}finally{this.isGenerating=!1}}addPatternBasedCompletions(t,n,r,s,i){const a=this.mapLanguageToPatternLanguage(n),l=this.codePatterns[a]||[];for(const c of l)c.pattern.toLowerCase().includes(i.toLowerCase())&&(t.some(u=>u.label===c.completion.label)||t.push(c.completion));return t}mapLanguageToPatternLanguage(t){return["jsx","tsx"].includes(t)?"react":t==="typescript"||t==="tsx"?"typescript":"javascript"}async generateContextAwareSuggestions(t,n,r,s){const i=this.extractContextLines(t,n);await new Promise(l=>setTimeout(l,Math.random()*300));const a=[];return(i.includes("function")||i.includes("const")||i.includes("let"))&&a.push({label:`${s}Function`,kind:"function",insertText:`${s}Function(${i.includes("async")?"async":""}) {
  // Implementation
}`,documentation:"AI-suggested function based on your code context",detail:"AI Suggestion"}),(i.includes("class")||i.includes("extends"))&&a.push({label:`${s}Method`,kind:"method",insertText:`${s}Method() {
  // Implementation
}`,documentation:"AI-suggested class method based on your code context",detail:"AI Suggestion"}),(i.includes("component")||i.includes("React")||i.includes("<div")||i.includes("props"))&&a.push({label:`${s}Component`,kind:"class",insertText:`function ${s}Component({ ${i.includes("props")?"props":""} }) {
  return (
    <div>
      {/* Content */}
    </div>
  );
}`,documentation:"AI-suggested React component based on your code context",detail:"AI Suggestion"}),a.push({label:`${s}Suggestion`,kind:"variable",insertText:s,documentation:"AI-suggested completion",detail:"AI Suggestion"}),a}extractContextLines(t,n,r=5){const s=t.split(`
`);let i=0,a=0;for(let d=0;d<s.length;d++)if(a+=s[d].length+1,a>n){i=d;break}const l=Math.max(0,i-r),c=Math.min(s.length-1,i+r);return s.slice(l,c+1).join(`
`)}removeDuplicates(t){const n=new Set;return t.filter(r=>{const s=r.label;return n.has(s)?!1:(n.add(s),!0)})}sortByRelevance(t,n){return t.sort((r,s)=>{var d,u;const i=r.label.toLowerCase().startsWith(n.toLowerCase()),a=s.label.toLowerCase().startsWith(n.toLowerCase());if(i&&!a)return-1;if(!i&&a)return 1;const l=(d=r.detail)==null?void 0:d.includes("AI"),c=(u=s.detail)==null?void 0:u.includes("AI");if(i&&a){if(l&&!c)return-1;if(!l&&c)return 1}return r.label.length-s.label.length})}clearCache(){this.cachedCompletions.clear()}};Se(Ya,"instance");let Nd=Ya;const Td=Nd.getInstance(),s2=({code:e,language:t,position:n,prefix:r,onSelect:s,visible:i})=>{const{colors:a}=ve(),[l,c]=_.useState([]),[d,u]=_.useState(!1),[h,f]=_.useState(null),[p,v]=_.useState(0),y=_.useRef(null);return _.useEffect(()=>{if(!i||!r){c([]);return}v(0);const b=setTimeout(async()=>{u(!0);try{const g=await Td.getCompletions(e,n,t,r);c(g.suggestions),u(!1),f(g.error)}catch(g){u(!1),f(g instanceof Error?g.message:"Unknown error"),console.error("Error fetching AI suggestions:",g)}},300);return()=>clearTimeout(b)},[e,n,t,r,i]),_.useEffect(()=>{if(!i||l.length===0)return;const b=g=>{switch(g.key){case"ArrowDown":g.preventDefault(),v(m=>m<l.length-1?m+1:m);break;case"ArrowUp":g.preventDefault(),v(m=>m>0?m-1:m);break;case"Enter":case"Tab":g.preventDefault(),l[p]&&s(l[p].insertText);break;case"Escape":g.preventDefault(),c([]);break}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[i,l,p,s]),_.useEffect(()=>{if(i&&y.current){const b=y.current.querySelector(`[data-index="${p}"]`);b&&b.scrollIntoView({block:"nearest"})}},[p,i]),!i||l.length===0?null:o.jsxs("div",{ref:y,style:{position:"absolute",maxHeight:"200px",maxWidth:"350px",width:"auto",overflowY:"auto",zIndex:50,borderRadius:"4px",border:`1px solid ${a.border}`,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)",backgroundColor:a.surface},children:[d&&o.jsxs("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",borderBottom:`1px solid ${a.border}`,color:a.textSecondary,fontSize:"13px"},children:[o.jsx(Zs,{size:14,color:a.primary}),o.jsx("span",{children:"Generating AI suggestions..."})]}),h&&o.jsxs("div",{style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",borderBottom:`1px solid ${a.border}`,color:a.error,fontSize:"13px"},children:[o.jsx(Bn,{size:14,color:a.error}),o.jsx("span",{children:h})]}),l.map((b,g)=>{var m,x;return o.jsxs("div",{"data-index":g,style:{display:"flex",alignItems:"flex-start",padding:"8px 10px",cursor:"pointer",borderBottom:`1px solid ${a.border}30`,backgroundColor:g===p?a.selectedItem:"transparent"},onClick:()=>s(b.insertText),children:[o.jsxs("div",{style:{marginRight:"8px",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",flexShrink:0},children:[((m=b.detail)==null?void 0:m.includes("AI"))&&o.jsx(Zs,{size:14,color:a.primary}),!((x=b.detail)!=null&&x.includes("AI"))&&o.jsx("div",{style:{fontSize:"14px",fontFamily:"monospace",color:a.primary},children:o2(b.kind)})]}),o.jsxs("div",{style:{flex:1,minWidth:0,overflow:"hidden"},children:[o.jsx("div",{style:{fontSize:"13px",fontFamily:"monospace",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:g===p?a.textHighlight:a.text,fontWeight:g===p?500:"normal"},children:b.label}),b.detail&&o.jsx("div",{style:{fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:a.textSecondary},children:b.detail})]})]},`${b.label}-${g}`)})]})};function o2(e){switch(e){case"function":return"ƒ";case"variable":return"α";case"class":return"C";case"interface":return"I";case"property":return"P";case"keyword":return"K";case"method":return"M";case"snippet":return"{}";default:return"•"}}Xn.registerLanguage("javascript",Ey);Xn.registerLanguage("typescript",By);Xn.registerLanguage("html",xj);Xn.registerLanguage("css",Ej);Xn.registerLanguage("python",Nj);Xn.registerLanguage("markdown",Tj);Xn.registerLanguage("json",Ij);Xn.registerLanguage("jsx",Ey);Xn.registerLanguage("tsx",By);const i2=100,Ly=({code:e,language:t,onChange:n,readOnly:r=!1})=>{const{colors:s,isDark:i}=ve(),{currentFile:a,updateFileContent:l,saveFile:c,hasUnsavedChanges:d}=Xe(),{editorSettings:u}=xl(),[h,f]=_.useState(e),[p,v]=_.useState(0),[y,b]=_.useState(0),[g,m]=_.useState([{value:e,selectionStart:0,selectionEnd:0}]),[x,E]=_.useState(0),[k,I]=_.useState(!1),[R,T]=_.useState(!1),[B,P]=_.useState(!1),[K,F]=_.useState([]),[L,C]=_.useState(-1),[Z,W]=_.useState(1),[U,z]=_.useState([]),[q,re]=_.useState(!1),[H,O]=_.useState(!0),[ie,M]=_.useState(""),Y=_.useRef(null),$=_.useRef(null);_.useEffect(()=>{!k&&e!==h&&(f(e),te(e,p,y),W(e.split(`
`).length),fe(e))},[e]),_.useEffect(()=>{Fe.setScope("editor");const D=Fe.registerHandler("editor.save",ye),J=Fe.registerHandler("editor.format",ge),ee=Fe.registerHandler("editor.find",()=>{T(!0),P(!1)}),ae=Fe.registerHandler("editor.replace",()=>{T(!0),P(!0)});return()=>{D(),J(),ee(),ae()}},[]);const fe=D=>{if(!D||!t)return;const J=e2.lintCode(D,t);z(J.issues)},me=D=>{f(D),I(!0),a&&l(a.id,D),n(D),W(D.split(`
`).length);let J=0,ee=0;if($.current){J=$.current.selectionStart||0,ee=$.current.selectionEnd||0;const ke=D.substring(0,J).match(/[a-zA-Z0-9_]+$/);M(ke?ke[0]:"")}te(D,J,ee),fe(D),I(!1)},te=(D,J,ee)=>{x<g.length-1&&m(ae=>ae.slice(0,x+1)),m(ae=>[...ae,{value:D,selectionStart:J,selectionEnd:ee}].slice(-100)),E(ae=>Math.min(ae+1,i2-1))},de=()=>{if(x>0){const D=x-1,J=g[D];f(J.value),I(!0),a&&l(a.id,J.value),n(J.value),I(!1),E(D),$.current&&$.current.setSelectionRange(J.selectionStart,J.selectionEnd),W(J.value.split(`
`).length),fe(J.value)}},ce=()=>{if(x<g.length-1){const D=x+1,J=g[D];f(J.value),I(!0),a&&l(a.id,J.value),n(J.value),I(!1),E(D),$.current&&$.current.setSelectionRange(J.selectionStart,J.selectionEnd),W(J.value.split(`
`).length),fe(J.value)}},ye=()=>{a&&c(a.id,h)},ge=async()=>{if(a)try{const D=await Qj(h,t);f(D),I(!0),a&&l(a.id,D),n(D),I(!1),W(D.split(`
`).length),te(D,0,0),fe(D)}catch(D){console.error("Error formatting code:",D)}},S=D=>{if(v(D.target.selectionStart),b(D.target.selectionEnd),D.target.selectionStart===D.target.selectionEnd){const ee=h.substring(0,D.target.selectionStart).match(/[a-zA-Z0-9_]+$/);M(ee?ee[0]:"")}else M("")},Q=D=>{const J=h.substring(0,p)+D+h.substring(y),ee=p+D.length;f(J),a&&l(a.id,J),n(J),$.current&&$.current.setSelectionRange(ee,ee),te(J,ee,ee),W(J.split(`
`).length),fe(J)},N=D=>{if(!ie){Q(D);return}const J=p-ie.length,ee=h.substring(0,J)+D+h.substring(p),ae=J+D.length;f(ee),a&&l(a.id,ee),n(ee),$.current&&$.current.setSelectionRange(ae,ae),te(ee,ae,ae),W(ee.split(`
`).length),fe(ee),M("")},j=()=>{const D=[];for(let J=1;J<=Z;J++)D.push(o.jsx("span",{style:{display:"block",color:s.textSecondary,textAlign:"right",paddingRight:"8px",fontSize:u.fontSize,lineHeight:`${u.fontSize*1.5}px`,fontFamily:"monospace",backgroundColor:U.some(ee=>ee.line===J)?"rgba(255, 0, 0, 0.05)":"transparent"},onClick:()=>w(J,1),children:J},J));return D},w=(D,J)=>{var We;if(!$.current)return;const ee=h.split(`
`);let ae=0;for(let Pe=0;Pe<D-1&&Pe<ee.length;Pe++)ae+=ee[Pe].length+1;ae+=Math.min(J-1,((We=ee[D-1])==null?void 0:We.length)||0),$.current.focus(),$.current.setSelectionRange(ae,ae);const ke=parseInt(getComputedStyle($.current).lineHeight),je=(D-1)*ke-$.current.clientHeight/2;$.current.scrollTop=Math.max(0,je)},A=(D,J)=>{if(!D)return 0;const ee=h,ae=[];let ke="g";J.matchCase||(ke+="i");let je;J.wholeWord?je=new RegExp(`\\b${oe(D)}\\b`,ke):je=new RegExp(oe(D),ke);let We;for(;(We=je.exec(ee))!==null;)ae.push(We.index);return F(ae),ae.length>0&&V(0),ae.length},G=()=>{if(K.length===0)return;const D=(L+1)%K.length;V(D)},X=()=>{if(K.length===0)return;const D=(L-1+K.length)%K.length;V(D)},V=D=>{var ae;if(!$.current||K.length===0)return;const J=K[D],ee=((ae=h.substring(J).match(/\S+/))==null?void 0:ae[0])||"";$.current.focus(),$.current.setSelectionRange(J,J+ee.length),v(J),b(J+ee.length),C(D)},se=D=>{var ke;if(K.length===0||!$.current)return;const J=K[L],ee=((ke=h.substring(J).match(/\S+/))==null?void 0:ke[0])||"",ae=h.substring(0,J)+D+h.substring(J+ee.length);f(ae),a&&l(a.id,ae),n(ae),W(ae.split(`
`).length),fe(ae),A(ee,{matchCase:!1,wholeWord:!1})},ne=(D,J,ee)=>{if(!D)return 0;let ae="g";ee.matchCase||(ae+="i");let ke;ee.wholeWord?ke=new RegExp(`\\b${oe(D)}\\b`,ae):ke=new RegExp(oe(D),ae);const je=h.replace(ke,J),We=(h.match(ke)||[]).length;return f(je),a&&l(a.id,je),n(je),W(je.split(`
`).length),fe(je),F([]),C(-1),We},oe=D=>D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",backgroundColor:s.codeBackground,position:"relative"},children:[R&&o.jsx(Oy,{value:h,onFind:A,onFindNext:G,onFindPrevious:X,onReplace:se,onReplaceAll:ne,onClose:()=>T(!1),showReplace:B,toggleShowReplace:()=>P(!B)}),o.jsxs("div",{style:{position:"absolute",top:"8px",right:"8px",zIndex:5,display:"flex",flexDirection:"row",gap:"4px"},children:[o.jsx("button",{style:{padding:"8px",borderRadius:"4px",marginLeft:"4px",backgroundColor:s.surface,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>{T(!0),P(!1)},title:"Find (Ctrl+F)",children:o.jsx(Ln,{size:20,color:s.textSecondary})}),o.jsx("button",{style:{padding:"8px",borderRadius:"4px",marginLeft:"4px",backgroundColor:s.surface,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:ge,title:"Format Document (Alt+Shift+F)",children:o.jsx(Bu,{size:20,color:s.textSecondary})}),o.jsxs("button",{style:{padding:"8px",borderRadius:"4px",marginLeft:"4px",backgroundColor:s.surface,border:q?`1px solid ${s.warning}`:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},onClick:()=>re(!q),title:q?"Hide Problems":"Show Problems",children:[o.jsx(Wa,{size:20,color:s.warning}),U.length>0&&o.jsx("div",{style:{position:"absolute",top:"-5px",right:"-5px",backgroundColor:s.warning,color:"white",borderRadius:"50%",width:"16px",height:"16px",fontSize:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:U.length})]}),o.jsx("button",{style:{padding:"8px",borderRadius:"4px",marginLeft:"4px",backgroundColor:s.surface,border:H?`1px solid ${s.primary}`:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>O(!H),title:H?"Disable AI Suggestions":"Enable AI Suggestions",children:o.jsx(Zs,{size:20,color:H?s.primary:s.textSecondary})}),o.jsx("button",{style:{padding:"8px",borderRadius:"4px",marginLeft:"4px",backgroundColor:s.surface,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:ye,title:"Save (Ctrl+S)",children:o.jsx(lo,{size:20,color:a&&d(a.id)?s.primary:s.textSecondary})})]}),q&&U.length>0&&o.jsx("div",{style:{borderBottom:`1px solid ${s.border}`,maxHeight:"150px",overflow:"auto",backgroundColor:s.surface,marginBottom:"10px"},children:o.jsx(t2,{issues:U,onIssueClick:D=>w(D.line,D.column)})}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"row"},children:[o.jsx("div",{style:{paddingTop:"16px",paddingRight:"8px",paddingLeft:"8px",display:"flex",flexDirection:"column",alignItems:"flex-end",backgroundColor:"rgba(0, 0, 0, 0.05)"},children:j()}),o.jsx("div",{style:{flex:1,overflowY:"auto",position:"relative"},children:o.jsxs("div",{ref:Y,children:[o.jsx("textarea",{ref:$,style:{fontFamily:"monospace",fontSize:u.fontSize,lineHeight:`${u.fontSize*1.5}px`,color:s.text,backgroundColor:s.codeBackground,padding:"16px",paddingLeft:"0",minHeight:"300px",width:"100%",border:"none",outline:"none",resize:"none"},value:h,onChange:D=>me(D.target.value),onSelect:S,spellCheck:!1,readOnly:r}),H&&!r&&o.jsx(s2,{code:h,language:t,position:p,prefix:ie,onSelect:N,visible:!!ie&&ie.length>1})]})})]}),!r&&o.jsx(Lj,{onKeyPress:Q,onUndo:de,onRedo:ce,onSave:ye,canUndo:x>0,canRedo:x<g.length-1,tabSize:u.tabSize,useTabs:u.useTabs})]})};class a2{constructor(){Se(this,"events",{})}on(t,n){return this.events[t]||(this.events[t]=[]),this.events[t].push(n),this}off(t,n){return this.events[t]?(this.events[t]=this.events[t].filter(r=>r!==n),this):this}emit(t,...n){const r=this.events[t];return r?(r.forEach(s=>{s(...n)}),!0):!1}}class l2 extends a2{constructor(){super();Se(this,"breakpoints",new Map);Se(this,"state",{isRunning:!1,isPaused:!1,currentLine:null,callStack:[],variables:[],error:null});Se(this,"console",[]);Se(this,"originalConsole",{log:console.log,error:console.error,warn:console.warn,info:console.info});Se(this,"sourceCode","");Se(this,"sourceLines",[])}initialize(n){this.resetState(),this.sourceCode=n,this.sourceLines=n.split(`
`),this.emit("stateChanged",this.state),this.clearConsole()}toggleBreakpoint(n){const r=this.breakpoints.get(n);return this.breakpoints.set(n,!r),this.emit("breakpointsChanged",this.getBreakpoints()),!r}getBreakpoints(){return Array.from(this.breakpoints.entries()).filter(([n,r])=>r).map(([n])=>({lineNumber:n}))}start(){this.state.isRunning||(this.resetState(),this.state.isRunning=!0,this.state.currentLine=1,this.emit("stateChanged",{...this.state}),this.breakpoints.get(1)&&(this.state.isPaused=!0,this.updateVariables(1)),this.emit("stateChanged",{...this.state}))}pause(){!this.state.isRunning||this.state.isPaused||(this.state.isPaused=!0,this.emit("stateChanged",{...this.state}))}resume(){!this.state.isRunning||!this.state.isPaused||(this.state.isPaused=!1,this.emit("stateChanged",{...this.state}),this.simulateContinueExecution())}stepOver(){if(!this.state.isRunning||!this.state.isPaused)return;const n=(this.state.currentLine||0)+1;n<=this.sourceLines.length?(this.state.currentLine=n,this.updateVariables(n),this.emit("stateChanged",{...this.state}),this.breakpoints.get(n)&&(this.state.isPaused=!0)):this.stop()}stepInto(){this.stepOver()}stepOut(){this.stepOver()}stop(){this.resetState(),this.emit("stateChanged",{...this.state})}getState(){return{...this.state}}getConsoleMessages(){return[...this.console]}clearConsole(){this.console=[],this.emit("consoleCleared")}addConsoleMessage(n,r){const s={id:Date.now().toString()+Math.random().toString(36).substring(2,9),type:n,content:r,timestamp:Date.now()};this.console.push(s),this.emit("consoleMessage",s)}resetState(){this.state={isRunning:!1,isPaused:!1,currentLine:null,callStack:[],variables:[],error:null}}updateVariables(n){const s=(this.sourceLines[n-1]||"").match(/(?:let|const|var)\s+(\w+)\s*=\s*(.+?);/);if(s){const[i,a,l]=s;let c,d;try{l.startsWith('"')||l.startsWith("'")?(c=l.slice(1,-1),d="string"):l==="true"||l==="false"?(c=l==="true",d="boolean"):isNaN(Number(l))?(c=l,d="unknown"):(c=Number(l),d="number"),this.state.variables.push({name:a,value:c,type:d})}catch{}}}simulateContinueExecution(){if(!this.state.isRunning)return;let n=this.state.currentLine||1;const r=this.sourceLines.length;let s=null;for(let i=n+1;i<=r;i++)if(this.breakpoints.get(i)){s=i;break}s?(this.state.currentLine=s,this.state.isPaused=!0,this.updateVariables(s)):this.stop(),this.emit("stateChanged",{...this.state})}}const $e=new l2,c2="_container_1mc8v_1",d2="_toolbar_1mc8v_10",u2="_controls_1mc8v_19",h2="_button_1mc8v_25",f2="_divider_1mc8v_44",p2="_status_1mc8v_50",m2="_actions_1mc8v_54",g2="_tabs_1mc8v_59",y2="_tab_1mc8v_59",x2="_activeTab_1mc8v_78",v2="_content_1mc8v_82",b2="_console_1mc8v_88",_2="_emptyState_1mc8v_96",w2="_message_1mc8v_106",k2="_messageContent_1mc8v_114",S2="_variables_1mc8v_121",j2="_variablesTable_1mc8v_125",C2="_variableRow_1mc8v_140",Oe={container:c2,toolbar:d2,controls:u2,button:h2,divider:f2,status:p2,actions:m2,tabs:g2,tab:y2,activeTab:x2,content:v2,console:b2,emptyState:_2,message:w2,messageContent:k2,variables:S2,variablesTable:j2,variableRow:C2},E2=({code:e,onLineHighlight:t})=>{const{colors:n}=ve(),[r,s]=_.useState($e.getState()),[i,a]=_.useState($e.getConsoleMessages()),[l,c]=_.useState("console");_.useEffect(()=>{$e.initialize(e);const x=I=>{s(I),t&&t(I.currentLine)},E=I=>{a(R=>[...R,I])},k=()=>{a([])};return $e.on("stateChanged",x),$e.on("consoleMessage",E),$e.on("consoleCleared",k),()=>{$e.off("stateChanged",x),$e.off("consoleMessage",E),$e.off("consoleCleared",k)}},[e,t]),_.useEffect(()=>{$e.initialize(e)},[e]);const d=x=>{if(x===null)return"null";if(x===void 0)return"undefined";try{return typeof x=="object"?JSON.stringify(x):String(x)}catch{return"<error displaying value>"}},u=x=>{switch(x){case"error":return{color:n.error};case"warn":return{color:n.warning};case"info":return{color:n.primary};default:return{color:n.text}}},h=()=>$e.start(),f=()=>$e.pause(),p=()=>$e.resume(),v=()=>$e.stop(),y=()=>$e.stepOver(),b=()=>$e.stepInto(),g=()=>$e.stepOut(),m=()=>$e.clearConsole();return o.jsxs("div",{className:Oe.container,style:{backgroundColor:n.surface,borderTopColor:n.border},children:[o.jsxs("div",{className:Oe.toolbar,children:[o.jsxs("div",{className:Oe.controls,children:[r.isRunning?r.isPaused?o.jsx("button",{className:Oe.button,onClick:p,title:"Resume",children:o.jsx(ui,{size:16,color:n.success})}):o.jsx("button",{className:Oe.button,onClick:f,title:"Pause",children:o.jsx(Du,{size:16,color:n.warning})}):o.jsx("button",{className:Oe.button,onClick:h,title:"Start debugging",children:o.jsx(ui,{size:16,color:n.success})}),o.jsx("button",{className:Oe.button,onClick:v,disabled:!r.isRunning,title:"Stop debugging",style:{opacity:r.isRunning?1:.5},children:o.jsx(Lw,{size:16,color:n.error})}),o.jsx("span",{className:Oe.divider,style:{backgroundColor:n.border}}),o.jsx("button",{className:Oe.button,onClick:y,disabled:!r.isRunning||!r.isPaused,title:"Step over",style:{opacity:r.isRunning&&r.isPaused?1:.5},children:o.jsx(Ow,{size:16,color:n.text})}),o.jsx("button",{className:Oe.button,onClick:b,disabled:!r.isRunning||!r.isPaused,title:"Step into",style:{opacity:r.isRunning&&r.isPaused?1:.5},children:o.jsx(fw,{size:16,color:n.text})}),o.jsx("button",{className:Oe.button,onClick:g,disabled:!r.isRunning||!r.isPaused,title:"Step out",style:{opacity:r.isRunning&&r.isPaused?1:.5},children:o.jsx(hw,{size:16,color:n.text})})]}),o.jsx("div",{className:Oe.status,children:r.isRunning?r.isPaused?o.jsxs("span",{style:{color:n.warning},children:["Paused at line ",r.currentLine]}):o.jsx("span",{style:{color:n.success},children:"Running..."}):r.error?o.jsxs("span",{style:{color:n.error},children:["Error: ",r.error]}):o.jsx("span",{style:{color:n.textSecondary},children:"Ready"})}),o.jsx("div",{className:Oe.actions,children:l==="console"&&o.jsx("button",{className:Oe.button,onClick:m,title:"Clear console",children:o.jsx(co,{size:16,color:n.textSecondary})})})]}),o.jsxs("div",{className:Oe.tabs,children:[o.jsxs("button",{className:`${Oe.tab} ${l==="console"?Oe.activeTab:""}`,onClick:()=>c("console"),style:{borderBottomColor:l==="console"?n.primary:"transparent",color:l==="console"?n.primary:n.textSecondary},children:[o.jsx(zw,{size:14}),o.jsx("span",{children:"Console"})]}),o.jsxs("button",{className:`${Oe.tab} ${l==="variables"?Oe.activeTab:""}`,onClick:()=>c("variables"),style:{borderBottomColor:l==="variables"?n.primary:"transparent",color:l==="variables"?n.primary:n.textSecondary},children:[o.jsx(Bn,{size:14}),o.jsx("span",{children:"Variables"})]})]}),o.jsxs("div",{className:Oe.content,children:[l==="console"&&o.jsx("div",{className:Oe.console,children:i.length===0?o.jsx("div",{className:Oe.emptyState,style:{color:n.textSecondary},children:"Console output will appear here"}):i.map(x=>o.jsx("div",{className:Oe.message,children:o.jsx("pre",{className:Oe.messageContent,style:u(x.type),children:x.content})},x.id))}),l==="variables"&&o.jsx("div",{className:Oe.variables,children:r.variables.length===0?o.jsx("div",{className:Oe.emptyState,style:{color:n.textSecondary},children:r.isRunning&&r.isPaused?"No variables in the current scope":"Variables will be shown when execution is paused"}):o.jsxs("table",{className:Oe.variablesTable,children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{style:{color:n.textSecondary},children:"Name"}),o.jsx("th",{style:{color:n.textSecondary},children:"Type"}),o.jsx("th",{style:{color:n.textSecondary},children:"Value"})]})}),o.jsx("tbody",{children:r.variables.map((x,E)=>o.jsxs("tr",{className:Oe.variableRow,children:[o.jsx("td",{style:{color:n.primary},children:x.name}),o.jsx("td",{style:{color:n.textSecondary},children:x.type}),o.jsx("td",{style:{color:n.text},children:d(x.value)})]},E))})]})})]})]})},N2="_cursorsContainer_1jgp9_1",T2="_cursorLabel_1jgp9_13",Uf={cursorsContainer:N2,cursorLabel:T2},I2=({cursors:e,editor:t})=>{const[n,r]=_.useState([]);return _.useEffect(()=>{var c;if(!t)return;const i=(((c=t.getModel())==null?void 0:c.getAllDecorations())||[]).filter(d=>{var u;return(u=d.options.className)==null?void 0:u.includes("remote-cursor")}).map(d=>d.id);i.length>0&&t.deltaDecorations(i,[]);const a=e.map(d=>{const u={range:{startLineNumber:d.line,startColumn:d.column,endLineNumber:d.line,endColumn:d.column+1},options:{className:`remote-cursor remote-cursor-${d.userId}`,hoverMessage:{value:d.username},stickiness:1}},h=d.selection?{range:{startLineNumber:d.selection.startLine,startColumn:d.selection.startColumn,endLineNumber:d.selection.endLine,endColumn:d.selection.endColumn},options:{className:`remote-selection remote-selection-${d.userId}`,hoverMessage:{value:d.username}}}:null,f=document.createElement("style");return f.innerHTML=`
        .remote-cursor-${d.userId} {
          position: relative;
          border-left: 2px solid ${d.color};
        }
        .remote-cursor-${d.userId}::after {
          content: '';
          position: absolute;
          top: 0;
          left: -2px;
          width: 4px;
          height: 100%;
          background-color: ${d.color};
          z-index: 1;
        }
        .remote-cursor-${d.userId}::before {
          content: '${d.username}';
          position: absolute;
          top: -20px;
          left: -2px;
          background-color: ${d.color};
          color: white;
          padding: 2px 6px;
          border-radius: 4px;
          font-size: 10px;
          white-space: nowrap;
          z-index: 2;
        }
        .remote-selection-${d.userId} {
          background-color: ${d.color}33;
        }
      `,document.head.appendChild(f),h?[u,h]:[u]}).flat().filter(Boolean);a.length>0&&t.deltaDecorations([],a);const l=e.map(d=>o.jsx("div",{className:Uf.cursorLabel,style:{backgroundColor:d.color,color:"#FFFFFF"},children:d.username},d.userId));return r(l),()=>{document.querySelectorAll("style").forEach(d=>{d.innerHTML.includes("remote-cursor-")&&d.remove()})}},[e,t]),o.jsx("div",{className:Uf.cursorsContainer,children:n})},A2=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}};class P2{constructor(t,n,r){this.start=t,this.end=n,this.direction=r}}const R2=(e,t,n)=>{const r=e.getSelection();if(r!==null){const s=r.getStartPosition(),i=r.getEndPosition(),a=ga(n,t.getOffsetAt(s)),l=ga(n,t.getOffsetAt(i));return new P2(a,l,r.getDirection())}return null},F2=(e,t,n,r)=>{const s=ma(n.start,r),i=ma(n.end,r);if(s!==null&&i!==null&&s.type===t&&i.type===t){const a=e.getModel(),l=a.getPositionAt(s.index),c=a.getPositionAt(i.index);return xc.createWithDirection(l.lineNumber,l.column,c.lineNumber,c.column,n.direction)}return null};class B2{constructor(t,n,r=new Set,s=null){this.doc=t.doc,this.ytext=t,this.monacoModel=n,this.editors=r,this.mux=A2(),this._savedSelections=new Map,this._beforeTransaction=()=>{this.mux(()=>{this._savedSelections=new Map,r.forEach(i=>{if(i.getModel()===n){const a=R2(i,n,t);a!==null&&this._savedSelections.set(i,a)}})})},this.doc.on("beforeAllTransactions",this._beforeTransaction),this._decorations=new Map,this._rerenderDecorations=()=>{r.forEach(i=>{if(s&&i.getModel()===n){const a=this._decorations.get(i)||[],l=[];s.getStates().forEach((c,d)=>{if(d!==this.doc.clientID&&c.selection!=null&&c.selection.anchor!=null&&c.selection.head!=null){const u=ma(c.selection.anchor,this.doc),h=ma(c.selection.head,this.doc);if(u!==null&&h!==null&&u.type===t&&h.type===t){let f,p,v,y;u.index<h.index?(f=n.getPositionAt(u.index),p=n.getPositionAt(h.index),v="yRemoteSelectionHead yRemoteSelectionHead-"+d,y=null):(f=n.getPositionAt(h.index),p=n.getPositionAt(u.index),v=null,y="yRemoteSelectionHead yRemoteSelectionHead-"+d),l.push({range:new Jy(f.lineNumber,f.column,p.lineNumber,p.column),options:{className:"yRemoteSelection yRemoteSelection-"+d,afterContentClassName:v,beforeContentClassName:y}})}}}),this._decorations.set(i,i.deltaDecorations(a,l))}else this._decorations.delete(i)})},this._ytextObserver=i=>{this.mux(()=>{let a=0;i.delta.forEach(l=>{if(l.retain!==void 0)a+=l.retain;else if(l.insert!==void 0){const c=n.getPositionAt(a),d=new xc(c.lineNumber,c.column,c.lineNumber,c.column),u=l.insert;n.applyEdits([{range:d,text:u}]),a+=u.length}else if(l.delete!==void 0){const c=n.getPositionAt(a),d=n.getPositionAt(a+l.delete),u=new xc(c.lineNumber,c.column,d.lineNumber,d.column);n.applyEdits([{range:u,text:""}])}else throw Yy()}),this._savedSelections.forEach((l,c)=>{const d=F2(c,t,l,this.doc);d!==null&&c.setSelection(d)})}),this._rerenderDecorations()},t.observe(this._ytextObserver);{const i=t.toString();n.getValue()!==i&&n.setValue(i)}this._monacoChangeHandler=n.onDidChangeContent(i=>{this.mux(()=>{this.doc.transact(()=>{i.changes.sort((a,l)=>l.rangeOffset-a.rangeOffset).forEach(a=>{t.delete(a.rangeOffset,a.rangeLength),t.insert(a.rangeOffset,a.text)})},this)})}),this._monacoDisposeHandler=n.onWillDispose(()=>{this.destroy()}),s&&(r.forEach(i=>{i.onDidChangeCursorSelection(()=>{if(i.getModel()===n){const a=i.getSelection();if(a===null)return;let l=n.getOffsetAt(a.getStartPosition()),c=n.getOffsetAt(a.getEndPosition());if(a.getDirection()===Zy.RTL){const d=l;l=c,c=d}s.setLocalStateField("selection",{anchor:ga(t,l),head:ga(t,c)})}}),s.on("change",this._rerenderDecorations)}),this.awareness=s)}destroy(){this._monacoChangeHandler.dispose(),this._monacoDisposeHandler.dispose(),this.ytext.unobserve(this._ytextObserver),this.doc.off("beforeAllTransactions",this._beforeTransaction),this.awareness&&this.awareness.off("change",this._rerenderDecorations)}}const O2=e=>{const t=["#FF5733","#33FF57","#3357FF","#FF33F5","#33FFF5","#F5FF33","#FF8333","#8333FF","#33FFAA","#FF33AA"];let n=0;for(let r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return n=Math.abs(n),t[n%t.length]};class L2{constructor(){Se(this,"presenceChannels",new Map);Se(this,"changeChannels",new Map);Se(this,"collaborators",new Map);Se(this,"cursors",new Map);Se(this,"onCollaboratorsChange",new Map);Se(this,"onContentChange",new Map);Se(this,"onCursorsChange",new Map);Se(this,"ydocs",new Map);Se(this,"providers",new Map);Se(this,"bindings",new Map)}async joinProject(t,n,r,s,i){const a=we.channel(`presence-${t}`);await a.subscribe(async l=>{l==="SUBSCRIBED"&&await a.track({user_id:n,username:r,avatar_url:s,online_at:new Date().toISOString()})}),a.on("presence",{event:"sync"},()=>{const l=a.presenceState(),c=[];Object.values(l).forEach(d=>{d.forEach(u=>{c.push({userId:u.user_id,username:u.username,avatarUrl:u.avatar_url,currentFileId:u.current_file,onlineAt:new Date(u.online_at)})})}),this.collaborators.set(t,c),i(c)}),this.presenceChannels.set(t,a),this.onCollaboratorsChange.set(t,i),console.log("Joined collaboration for project:",t)}async updateEditingFile(t,n,r){const s=this.presenceChannels.get(t);if(!s){console.warn("No presence channel for project:",t);return}await s.track({user_id:n,current_file:r,online_at:new Date().toISOString()})}async joinFile(t,n,r,s,i,a,l,c){const d=`${t}-${n}`;this.cursors.has(d)||this.cursors.set(d,new Map);const u=new Qy;this.ydocs.set(d,u);const h=u.getText("monaco"),f=new Xy("wss://demos.yjs.dev",`code-canvas-${t}-${n}`,u);f.awareness.setLocalStateField("user",{id:r,name:s,avatar:i,color:O2(r)}),this.providers.set(d,f);const p=new B2(h,a.getModel(),new Set([a]),f.awareness);this.bindings.set(d,p),f.awareness.on("change",()=>{const y=f.awareness.getStates(),b=[];y.forEach((g,m)=>{var x;if(g.user&&g.cursor){const E={userId:g.user.id,username:g.user.name,avatarUrl:g.user.avatar,color:g.user.color,line:g.cursor.head.line,column:g.cursor.head.character,selection:g.cursor.anchor?{startLine:g.cursor.anchor.line,startColumn:g.cursor.anchor.character,endLine:g.cursor.head.line,endColumn:g.cursor.head.character}:void 0};(x=this.cursors.get(d))==null||x.set(g.user.id,E),g.user.id!==r&&b.push(E)}}),c(b)});const v=we.channel(`file-${t}-${n}`);await v.subscribe(y=>{if(y!=="SUBSCRIBED"){console.warn(`Failed to subscribe to file changes: ${y}`);return}console.log(`Subscribed to changes for file ${n}`)}),v.on("broadcast",{event:"file_update"},y=>{const{fileId:b,content:g,user:m}=y.payload;m.userId!==r&&l(b,g,m)}),this.changeChannels.set(d,v),this.onContentChange.set(d,l),this.onCursorsChange.set(d,c),console.log("Joined file collaboration:",n)}updateCursor(t,n,r,s,i){const a=`${t}-${n}`,l=this.providers.get(a);if(!l){console.warn("No provider for file:",n);return}l.awareness.setLocalStateField("cursor",{head:{line:s.line,character:s.column},anchor:i?{line:i.startLine,character:i.startColumn}:void 0})}async broadcastFileChange(t,n,r,s){const i=`${t}-${n}`,a=this.changeChannels.get(i);if(!a){console.warn("No channel for file:",n);return}await a.send({type:"broadcast",event:"file_update",payload:{fileId:n,content:r,user:s}})}applyEditOperation(t,n,r){const s=`${t}-${n}`,i=this.ydocs.get(s);if(!i){console.warn("No YDoc for file:",n);return}const a=i.getText("monaco");i.transact(()=>{switch(r.type){case"insert":if(r.text){const l=this.positionToIndex(a.toString(),r.position);a.insert(l,r.text)}break;case"delete":if(r.length){const l=this.positionToIndex(a.toString(),r.position);a.delete(l,r.length)}break;case"replace":if(r.text&&r.length){const l=this.positionToIndex(a.toString(),r.position);a.delete(l,r.length),a.insert(l,r.text)}break}})}positionToIndex(t,n){var i,a;const r=t.split(`
`);let s=0;for(let l=0;l<n.line;l++)s+=(((i=r[l])==null?void 0:i.length)||0)+1;return s+=Math.min(n.column,((a=r[n.line])==null?void 0:a.length)||0),s}leaveFile(t,n){const r=`${t}-${n}`,s=this.providers.get(r);s&&(s.destroy(),this.providers.delete(r));const i=this.bindings.get(r);i&&(i.destroy(),this.bindings.delete(r));const a=this.ydocs.get(r);a&&(a.destroy(),this.ydocs.delete(r));const l=this.changeChannels.get(r);l&&(l.unsubscribe(),this.changeChannels.delete(r),this.onContentChange.delete(r),this.onCursorsChange.delete(r)),this.cursors.delete(r),console.log("Left file collaboration:",n)}leaveProject(t){const n=this.presenceChannels.get(t);n&&(n.untrack(),n.unsubscribe(),this.presenceChannels.delete(t),this.onCollaboratorsChange.delete(t),this.collaborators.delete(t),console.log("Left project collaboration:",t));for(const[r,s]of this.changeChannels.entries())r.startsWith(`${t}-`)&&(s.unsubscribe(),this.changeChannels.delete(r),this.onContentChange.delete(r),this.onCursorsChange.delete(r));for(const[r,s]of this.providers.entries())r.startsWith(`${t}-`)&&(s.destroy(),this.providers.delete(r));for(const[r,s]of this.bindings.entries())r.startsWith(`${t}-`)&&(s.destroy(),this.bindings.delete(r));for(const[r,s]of this.ydocs.entries())r.startsWith(`${t}-`)&&(s.destroy(),this.ydocs.delete(r));for(const[r]of this.cursors.entries())r.startsWith(`${t}-`)&&this.cursors.delete(r)}getCollaborators(t){return this.collaborators.get(t)||[]}getCursors(t,n){const r=`${t}-${n}`,s=this.cursors.get(r);return s?Array.from(s.values()):[]}async isCollaborativeProject(t){try{const{count:n,error:r}=await we.from("project_collaborators").select("*",{count:"exact",head:!0}).eq("project_id",t);if(r)throw r;return n?n>0:!1}catch(n){return console.error("Error checking if project is collaborative:",n),!1}}async getProjectCollaborators(t){try{const{data:n,error:r}=await we.from("project_collaborators").select(`
          id,
          permission,
          profiles:user_id (id, username, avatar_url)
        `).eq("project_id",t);if(r)throw r;return n.map(s=>({id:s.profiles.id,username:s.profiles.username,avatarUrl:s.profiles.avatar_url,permission:s.permission}))}catch(n){return console.error("Error fetching project collaborators:",n),[]}}async createSharedProject(t){try{const{data:n,error:r}=await we.from("projects").insert({name:t,is_public:!0,collaborators_can_invite:!0}).select().single();if(r)throw r;return{id:n.id,name:n.name,path:`/projects/${n.name}`,files:[],createdAt:n.created_at,user_id:n.user_id,is_public:n.is_public}}catch(n){return console.error("Error creating shared project:",n),null}}async getPendingInvitations(){try{const{data:t,error:n}=await we.from("collaboration_invites").select(`
          id,
          project_id,
          permission,
          created_at,
          projects:project_id (name),
          profiles:inviter_id (id, username, avatar_url)
        `).eq("status","pending");if(n)throw n;return t.map(r=>({id:r.id,projectId:r.project_id,projectName:r.projects.name,inviterId:r.profiles.id,inviterName:r.profiles.username,inviterUsername:r.profiles.username,inviterAvatar:r.profiles.avatar_url,permission:r.permission,createdAt:r.created_at}))}catch(t){return console.error("Error fetching pending invitations:",t),[]}}}const Un=new L2,z2="_container_1rmml_1",$2="_editorContainer_1rmml_8",D2="_toolbar_1rmml_15",M2="_toolbarButton_1rmml_24",Cn={container:z2,editorContainer:$2,toolbar:D2,toolbarButton:M2},zy=({code:e,language:t,onChange:n,isCollaborative:r=!1,readOnly:s=!1})=>{const{colors:i,isDark:a}=ve(),{currentFile:l,updateFileContent:c,saveFile:d,hasUnsavedChanges:u,currentProject:h}=Xe(),{user:f,profile:p}=ht(),{editorSettings:v}=xl(),[y,b]=_.useState(!1),[g,m]=_.useState(!1),[x,E]=_.useState(0),[k,I]=_.useState(null),[R,T]=_.useState(!1),[B,P]=_.useState([]),[K,F]=_.useState(!1),[L,C]=_.useState([]),[Z,W]=_.useState(!0),U=_.useRef(null),z=_.useRef(null);_.useEffect(()=>{if(U.current&&!k){po.defineTheme("code-canvas-light",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:i.codeSyntax.comment},{token:"keyword",foreground:i.codeSyntax.keyword},{token:"string",foreground:i.codeSyntax.string},{token:"number",foreground:i.codeSyntax.number},{token:"function",foreground:i.codeSyntax.function},{token:"variable",foreground:i.codeSyntax.variable}],colors:{"editor.foreground":i.text,"editor.background":i.codeBackground,"editorLineNumber.foreground":i.textSecondary,"editorCursor.foreground":i.text,"editor.selectionBackground":"#ADD6FF80","editor.inactiveSelectionBackground":"#E5EBF1"}}),po.defineTheme("code-canvas-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:i.codeSyntax.comment},{token:"keyword",foreground:i.codeSyntax.keyword},{token:"string",foreground:i.codeSyntax.string},{token:"number",foreground:i.codeSyntax.number},{token:"function",foreground:i.codeSyntax.function},{token:"variable",foreground:i.codeSyntax.variable}],colors:{"editor.foreground":i.text,"editor.background":i.codeBackground,"editorLineNumber.foreground":i.textSecondary,"editorCursor.foreground":i.text,"editor.selectionBackground":"#264F7880","editor.inactiveSelectionBackground":"#3A3D41"}});const N=po.create(U.current,{value:e,language:ce(t),theme:a?"code-canvas-dark":"code-canvas-light",automaticLayout:!0,minimap:{enabled:v.minimapEnabled},fontSize:v.fontSize,tabSize:v.tabSize,wordWrap:v.wordWrap?"on":"off",scrollBeyondLastLine:!1,lineNumbers:"on",glyphMargin:!0,folding:!1,renderWhitespace:"none",padding:{top:8,bottom:8},scrollbar:{vertical:"visible",horizontal:"visible",verticalScrollbarSize:10,horizontalScrollbarSize:10},readOnly:s});I(N),N.onDidChangeModelContent(()=>{const j=N.getValue();n(j),l&&c(l.id,j)}),N.addCommand(Ei.CtrlCmd|Bl.KeyS,()=>{l&&d(l.id,N.getValue())}),N.addCommand(Ei.CtrlCmd|Bl.KeyF,()=>{b(!0),m(!1)}),N.addCommand(Ei.CtrlCmd|Ei.Alt|Bl.KeyF,()=>{b(!0),m(!0)}),N.onMouseDown(j=>{var w;if(j.target.type===po.MouseTargetType.GUTTER_GLYPH_MARGIN){const A=(w=j.target.position)==null?void 0:w.lineNumber;A&&M(A)}}),r&&f&&h&&l&&N.onDidChangeCursorPosition(j=>{z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{const w=N.getPosition(),A=N.getSelection();w&&Un.updateCursor(h.id,l.id,f.id,{line:w.lineNumber,column:w.column},A?{startLine:A.startLineNumber,startColumn:A.startColumn,endLine:A.endLineNumber,endColumn:A.endColumn}:void 0)},100)}),Z&&!s&&q()}return()=>{k&&k.dispose(),z.current&&clearTimeout(z.current)}},[i,a,v.fontSize]);const q=N=>{Kt.registerCompletionItemProvider("javascript",{triggerCharacters:[".","(","{","[",'"',"'"," "],provideCompletionItems:async(j,w)=>{const A=j.getWordAtPosition(w),G=j.getLineContent(w.lineNumber),X=j.getOffsetAt(w);G.substring(0,w.column-1);const V=(A==null?void 0:A.word)||"";return{suggestions:(await Td.getCompletions(j.getValue(),X,t,V)).suggestions.map(ne=>({label:ne.label,kind:re(ne.kind),documentation:ne.documentation,detail:ne.detail,insertText:ne.insertText,range:{startLineNumber:w.lineNumber,endLineNumber:w.lineNumber,startColumn:A?w.column-V.length:w.column,endColumn:w.column},insertTextRules:Kt.CompletionItemInsertTextRule.InsertAsSnippet}))}}}),Kt.registerCompletionItemProvider("typescript",{triggerCharacters:[".","(","{","[",'"',"'"," "],provideCompletionItems:async(j,w)=>{const A=j.getWordAtPosition(w),G=j.getLineContent(w.lineNumber),X=j.getOffsetAt(w);G.substring(0,w.column-1);const V=(A==null?void 0:A.word)||"";return{suggestions:(await Td.getCompletions(j.getValue(),X,t,V)).suggestions.map(ne=>({label:ne.label,kind:re(ne.kind),documentation:ne.documentation,detail:ne.detail,insertText:ne.insertText,range:{startLineNumber:w.lineNumber,endLineNumber:w.lineNumber,startColumn:A?w.column-V.length:w.column,endColumn:w.column},insertTextRules:Kt.CompletionItemInsertTextRule.InsertAsSnippet}))}}})},re=N=>{switch(N){case"function":return Kt.CompletionItemKind.Function;case"variable":return Kt.CompletionItemKind.Variable;case"class":return Kt.CompletionItemKind.Class;case"interface":return Kt.CompletionItemKind.Interface;case"property":return Kt.CompletionItemKind.Property;case"keyword":return Kt.CompletionItemKind.Keyword;case"method":return Kt.CompletionItemKind.Method;case"snippet":return Kt.CompletionItemKind.Snippet;default:return Kt.CompletionItemKind.Text}};_.useEffect(()=>{k&&e!==k.getValue()&&k.setValue(e)},[e,k]),_.useEffect(()=>{k&&k.updateOptions({fontSize:v.fontSize,tabSize:v.tabSize,wordWrap:v.wordWrap?"on":"off",theme:a?"code-canvas-dark":"code-canvas-light",minimap:{enabled:v.minimapEnabled}})},[v,a,k]),_.useEffect(()=>{if(k){const N=k.getModel();N&&po.setModelLanguage(N,ce(t))}},[t,k]),_.useEffect(()=>{const N=j=>{P(j),ie(j)};return $e.on("breakpointsChanged",N),k&&ie($e.getBreakpoints()),()=>{$e.off("breakpointsChanged",N)}},[k]),_.useEffect(()=>{const N=j=>{var w;F(j.isRunning),j.currentLine&&k?Y(j.currentLine):k&&k.deltaDecorations(((w=k.getModel())==null?void 0:w.getAllDecorations().filter(A=>A.options.className==="currentLineHighlight").map(A=>A.id))||[],[])};return $e.on("stateChanged",N),()=>{$e.off("stateChanged",N)}},[k]),_.useEffect(()=>{var N;if(r&&k&&f&&p&&h&&l)return Un.joinFile(h.id,l.id,f.id,p.username||((N=f.email)==null?void 0:N.split("@")[0])||"Anonymous",p.avatar_url,k,H,O),()=>{h&&l&&Un.leaveFile(h.id,l.id)}},[r,k,f,p,h,l]);const H=(N,j,w)=>{console.log(`Received content change from ${w.username}`)},O=N=>{C(N)},ie=N=>{if(!k||!k.getModel())return;const w=N.map(A=>({range:{startLineNumber:A.lineNumber,endLineNumber:A.lineNumber,startColumn:1,endColumn:1},options:{isWholeLine:!1,glyphMarginClassName:"breakpointGutter",glyphMarginHoverMessage:{value:`Breakpoint at line ${A.lineNumber}`}}}));k.createDecorationsCollection(w)},M=N=>{$e.toggleBreakpoint(N)},Y=N=>{var w;if(!k)return;const j=k.getModel();j&&(k.deltaDecorations(((w=k.getModel())==null?void 0:w.getAllDecorations().filter(A=>A.options.className==="currentLineHighlight").map(A=>A.id))||[],[{range:{startLineNumber:N,endLineNumber:N,startColumn:1,endColumn:j.getLineContent(N).length+1},options:{isWholeLine:!0,className:"currentLineHighlight",inlineClassName:"currentLineInline"}}]),k.revealLineInCenter(N))},$=(N,j)=>{var A,G;if(!k||!N)return 0;(A=k.getAction("clearEditorFindState"))==null||A.run();const w=((G=k.getModel())==null?void 0:G.findMatches(N,!0,!j.wholeWord,j.matchCase,j.wholeWord?"whole":"none",!1,9999))||[];return w.length>0&&(k.setSelection(w[0].range),k.revealRangeInCenter(w[0].range)),E(w.length),w.length},fe=()=>{var N;(N=k==null?void 0:k.getAction("editor.action.nextMatchFindAction"))==null||N.run()},me=()=>{var N;(N=k==null?void 0:k.getAction("editor.action.previousMatchFindAction"))==null||N.run()},te=N=>{if(!k)return;const j=k.getSelection();j&&!j.isEmpty()&&k.executeEdits("",[{range:j,text:N,forceMoveMarkers:!0}])},de=(N,j,w)=>{if(!k||!N)return 0;const A=k.getModel();if(!A)return 0;const G=A.findMatches(N,!0,!w.wholeWord,w.matchCase,w.wholeWord?"whole":"none",!1,9999),X=G.length;if(X>0){k.pushUndoStop();const V=G.sort((se,ne)=>ne.range.startLineNumber-se.range.startLineNumber||ne.range.startColumn-se.range.startColumn).map(se=>({range:se.range,text:j,forceMoveMarkers:!0}));k.executeEdits("",V),k.pushUndoStop()}return X},ce=N=>({javascript:"javascript",jsx:"javascript",typescript:"typescript",tsx:"typescript",html:"html",css:"css",python:"python",markdown:"markdown",json:"json",plaintext:"plaintext"})[N]||"plaintext",ye=()=>{l&&k&&d(l.id,k.getValue())},ge=async()=>{if(k){k.getValue();try{const N=k.getAction("editor.action.formatDocument");N&&await N.run(),l&&c(l.id,k.getValue())}catch(N){console.error("Error formatting code:",N)}}},S=()=>{T(!R),R&&$e.stop()},Q=N=>{N&&Y(N)};return o.jsxs("div",{className:Cn.container,style:{backgroundColor:i.codeBackground},children:[o.jsx("style",{children:`
        .breakpointGutter {
          background-color: ${i.error};
          border-radius: 50%;
          margin-left: 5px;
          width: 8px !important;
          height: 8px !important;
          display: inline-block;
        }
        
        .currentLineHighlight {
          background-color: ${i.selectedItem};
          border-left: 2px solid ${i.primary};
        }
        
        .currentLineInline {
          font-weight: bold;
        }
      `}),y&&o.jsx(Oy,{value:(k==null?void 0:k.getValue())||"",onFind:$,onFindNext:fe,onFindPrevious:me,onReplace:te,onReplaceAll:de,onClose:()=>b(!1),showReplace:g,toggleShowReplace:()=>m(!g)}),o.jsxs("div",{className:Cn.toolbar,children:[o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface},onClick:()=>b(!0),title:"Find (Ctrl+F)",children:o.jsx(Ln,{size:16,color:i.textSecondary})}),o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface},onClick:ge,title:"Format Document (Alt+Shift+F)",children:o.jsx(Bu,{size:16,color:i.textSecondary})}),o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface,borderColor:Z?i.primary:"transparent",borderWidth:Z?"1px":"0",borderStyle:"solid"},onClick:()=>W(!Z),title:Z?"Disable AI Suggestions":"Enable AI Suggestions",children:o.jsx(Zs,{size:16,color:Z?i.primary:i.textSecondary})}),o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface,borderColor:R?i.primary:"transparent",borderWidth:R?"1px":"0",borderStyle:"solid"},onClick:S,title:"Toggle debugger",children:o.jsx(Ou,{size:16,color:R?i.primary:i.textSecondary})}),R&&!K&&o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface},onClick:()=>$e.start(),title:"Run code with debugger",children:o.jsx(ui,{size:16,color:i.success})}),R&&K&&o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface},onClick:()=>$e.stop(),title:"Stop debugging",children:o.jsx(Du,{size:16,color:i.warning})}),o.jsx("button",{className:Cn.toolbarButton,style:{backgroundColor:i.surface},onClick:ye,title:"Save (Ctrl+S)",children:o.jsx(lo,{size:16,color:l&&u(l.id)?i.primary:i.textSecondary})})]}),o.jsx("div",{ref:U,className:Cn.editorContainer}),r&&k&&o.jsx(I2,{cursors:L,editor:k}),R&&o.jsx(E2,{code:e,onLineHighlight:Q})]})},Ku=({isOpen:e,onClose:t,project:n,file:r})=>{const{colors:s}=ve(),{user:i}=ht(),[a,l]=_.useState("link"),[c,d]=_.useState(""),[u,h]=_.useState(!1),[f,p]=_.useState(7),[v,y]=_.useState(!1),[b,g]=_.useState(!0),[m,x]=_.useState(!0),[E,k]=_.useState(!1),[I,R]=_.useState(null),[T,B]=_.useState(null),[P,K]=_.useState(!1);_.useEffect(()=>{e&&(l("link"),d(""),h(!1),p(7),y(!1),g(!0),x(!0),R(null),B(null),K(!1))},[e]);const F=async()=>{k(!0),B(null);try{const W={type:a,allowDownload:b,allowCopy:m};if(u&&c&&(W.password=c),v&&f>0){const z=new Date;z.setDate(z.getDate()+f),W.expiresAt=z}let U;if(n&&!r)U={success:!0,url:`https://example.com/share/project/${n.id}`};else if(r)U={success:!0,url:`https://example.com/share/file/${r.id}`};else throw new Error("No project or file selected for sharing");U.success&&U.url?R(U.url):B(U.error||"Failed to generate share link")}catch(W){console.error("Error sharing:",W),B(W.message||"An unexpected error occurred")}finally{k(!1)}},L=async()=>{if(n){k(!0),B(null);try{const W={success:!0,url:`https://example.com/share/zip/${n.id}`};W.success&&(W.url?R(W.url):B("Project exported successfully"))}catch(W){console.error("Error sharing as ZIP:",W),B(W.message||"An unexpected error occurred")}finally{k(!1)}}},C=async()=>{if(n&&!r){const W=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),U=URL.createObjectURL(W),z=document.createElement("a");z.href=U,z.download=`${n.name}.json`,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(U),t()}else if(r){const W=new Blob([r.content||""],{type:"text/plain"}),U=URL.createObjectURL(W),z=document.createElement("a");z.href=U,z.download=r.name,document.body.appendChild(z),z.click(),document.body.removeChild(z),URL.revokeObjectURL(U),t()}},Z=async()=>{if(I)try{await navigator.clipboard.writeText(I),K(!0),setTimeout(()=>K(!1),2e3)}catch(W){console.error("Failed to copy URL:",W),B("Failed to copy URL to clipboard")}};return e?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",style:{backgroundColor:s.surface},children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:s.border},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[r?o.jsx(Gs,{size:20,color:s.primary}):o.jsx(ao,{size:20,color:s.primary}),o.jsx("h2",{className:"text-lg font-semibold",style:{color:s.text},children:I?"Share Link":`Share ${r?"File":"Project"}`})]}),o.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",onClick:t,"aria-label":"Close",children:o.jsx(st,{size:20,color:s.textSecondary})})]}),o.jsxs("div",{className:"p-4",children:[T&&o.jsx("div",{className:"mb-4 p-3 rounded-md",style:{backgroundColor:`${s.error}15`,color:s.error},children:T}),I?o.jsxs("div",{className:"pt-2",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.text},children:"Share Link"}),o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("input",{type:"text",value:I,readOnly:!0,className:"flex-1 p-2 border rounded-l-md",style:{backgroundColor:s.background,color:s.text,borderColor:s.border}}),o.jsx("button",{className:"p-2 border-t border-r border-b rounded-r-md",onClick:Z,style:{backgroundColor:P?s.success:s.primary,borderColor:P?s.success:s.primary,color:"white"},children:P?o.jsx(aw,{size:20}):o.jsx(Nr,{size:20})})]}),o.jsxs("div",{className:"p-3 rounded-md mb-4",style:{backgroundColor:`${s.primary}10`,color:s.text},children:[o.jsx("p",{className:"mb-2 text-sm",children:"Share Options:"}),o.jsxs("ul",{className:"text-sm space-y-1 ml-5 list-disc",style:{color:s.textSecondary},children:[o.jsxs("li",{children:["Share Type: ",o.jsx("span",{style:{color:s.text},children:a})]}),u&&o.jsx("li",{children:"Password Protected"}),v&&o.jsxs("li",{children:["Expires in ",f," days"]}),o.jsxs("li",{children:["Download: ",o.jsx("span",{style:{color:s.text},children:b?"Allowed":"Not allowed"})]}),o.jsxs("li",{children:["Copy code: ",o.jsx("span",{style:{color:s.text},children:m?"Allowed":"Not allowed"})]})]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("button",{className:"p-2 border rounded-md",onClick:()=>R(null),style:{borderColor:s.border,color:s.text},children:"Change Options"}),o.jsx("button",{className:"p-2 rounded-md",onClick:Z,style:{backgroundColor:P?s.success:s.primary,color:"white"},children:P?"Copied!":"Copy Link"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.text},children:"Share Type"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{className:`flex-1 p-2 rounded-md border flex items-center justify-center gap-2 ${a==="link"?"border-blue-500":"border-gray-300"}`,onClick:()=>l("link"),style:{borderColor:a==="link"?s.primary:s.border,backgroundColor:a==="link"?`${s.primary}10`:"transparent"},children:[o.jsx(ww,{size:16,color:a==="link"?s.primary:s.textSecondary}),o.jsx("span",{style:{color:a==="link"?s.primary:s.text},children:"Link"})]}),o.jsxs("button",{className:`flex-1 p-2 rounded-md border flex items-center justify-center gap-2 ${a==="public"?"border-blue-500":"border-gray-300"}`,onClick:()=>l("public"),style:{borderColor:a==="public"?s.primary:s.border,backgroundColor:a==="public"?`${s.primary}10`:"transparent"},children:[o.jsx(Va,{size:16,color:a==="public"?s.primary:s.textSecondary}),o.jsx("span",{style:{color:a==="public"?s.primary:s.text},children:"Public"})]}),o.jsxs("button",{className:`flex-1 p-2 rounded-md border flex items-center justify-center gap-2 ${a==="private"?"border-blue-500":"border-gray-300"}`,onClick:()=>l("private"),style:{borderColor:a==="private"?s.primary:s.border,backgroundColor:a==="private"?`${s.primary}10`:"transparent"},children:[o.jsx(ss,{size:16,color:a==="private"?s.primary:s.textSecondary}),o.jsx("span",{style:{color:a==="private"?s.primary:s.text},children:"Private"})]})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium",style:{color:s.text},children:"Password Protection"}),o.jsxs("label",{className:"inline-flex items-center",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox",checked:u,onChange:W=>h(W.target.checked)}),o.jsx("span",{className:"ml-2 text-sm",style:{color:s.textSecondary},children:"Enable"})]})]}),u&&o.jsx("input",{type:"password",value:c,onChange:W=>d(W.target.value),placeholder:"Enter password",className:"w-full p-2 border rounded-md",style:{backgroundColor:s.background,color:s.text,borderColor:s.border}})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("label",{className:"text-sm font-medium",style:{color:s.text},children:"Expiry Date"}),o.jsxs("label",{className:"inline-flex items-center",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox",checked:v,onChange:W=>y(W.target.checked)}),o.jsx("span",{className:"ml-2 text-sm",style:{color:s.textSecondary},children:"Enable"})]})]}),v&&o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"number",min:"1",max:"365",value:f,onChange:W=>p(parseInt(W.target.value)),className:"w-20 p-2 border rounded-md mr-2",style:{backgroundColor:s.background,color:s.text,borderColor:s.border}}),o.jsx("span",{style:{color:s.text},children:"days from now"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:s.text},children:"Permissions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox",checked:b,onChange:W=>g(W.target.checked)}),o.jsx("span",{className:"ml-2",style:{color:s.text},children:"Allow downloading"})]}),o.jsxs("label",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",className:"form-checkbox",checked:m,onChange:W=>x(W.target.checked)}),o.jsx("span",{className:"ml-2",style:{color:s.text},children:"Allow copying code"})]})]})]}),o.jsx("div",{className:"pt-4 border-t",style:{borderColor:s.border},children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[!i&&o.jsx("div",{className:"col-span-2 mb-3 p-2 rounded text-sm",style:{backgroundColor:`${s.warning}15`,color:s.warning},children:"Sign in to enable online sharing. You can still export files."}),o.jsxs("button",{className:"p-2 border rounded-md flex flex-col items-center justify-center gap-1",style:{borderColor:s.border,color:s.text},onClick:C,children:[o.jsx(io,{size:18,color:s.primary}),o.jsx("span",{children:"Export"}),o.jsx("span",{className:"text-xs",style:{color:s.textSecondary},children:"Save to device"})]}),o.jsxs("button",{className:"p-2 border rounded-md flex flex-col items-center justify-center gap-1",style:{borderColor:s.border,color:s.text,opacity:i?1:.5},onClick:n?L:F,disabled:!i||E,children:[o.jsx(cw,{size:18,color:s.primary}),o.jsx("span",{children:E?"Sharing...":"Share Online"}),o.jsx("span",{className:"text-xs",style:{color:s.textSecondary},children:"Generate link"})]})]})})]})]})]})}):null},U2=({project:e,file:t,size:n=18,label:r,className:s})=>{const{colors:i}=ve(),[a,l]=_.useState(!1);return!e&&!t?null:o.jsxs(o.Fragment,{children:[o.jsxs("button",{className:s||"flex items-center gap-2 p-2 rounded hover:bg-opacity-80 transition-colors",style:{backgroundColor:s?void 0:i.primary,color:s?i.text:"white"},onClick:()=>l(!0),title:"Share",children:[o.jsx(ki,{size:n}),r&&o.jsx("span",{children:r})]}),o.jsx(Ku,{isOpen:a,onClose:()=>l(!1),project:e,file:t})]})},H2="_container_1khkc_1",W2="_fileInfo_1khkc_12",q2="_filePath_1khkc_16",V2="_actions_1khkc_21",K2="_actionButton_1khkc_26",Lt={container:H2,fileInfo:W2,filePath:q2,actions:V2,actionButton:K2},G2=({onSave:e,onToggleEditor:t,onToggleDebugger:n,isDebuggerActive:r=!1,onToggleChat:s,isChatActive:i=!1,isCollaborative:a=!1,onFormat:l,onToggleAI:c,isAIActive:d=!0})=>{const{colors:u}=ve(),{currentProject:h,currentFile:f,hasUnsavedChanges:p,saveFile:v}=Xe(),y=f?p(f.id):!1,b=()=>{e?e():f&&v(f.id,f.content)},g=async()=>{if(!f)return;const m=new Blob([f.content],{type:"text/plain"}),x=URL.createObjectURL(m),E=document.createElement("a");E.href=x,E.download=f.name,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(x)};return o.jsxs("div",{className:Lt.container,style:{backgroundColor:u.surface,borderBottomColor:u.border},children:[o.jsx("div",{className:Lt.fileInfo,children:f&&o.jsxs("span",{className:Lt.filePath,style:{color:u.textSecondary},children:[f.path,y&&o.jsx("span",{style:{color:u.primary},children:" • unsaved"})]})}),o.jsxs("div",{className:Lt.actions,children:[o.jsx("button",{className:Lt.actionButton,title:"Font Settings",children:o.jsx(Dw,{size:18,color:u.textSecondary})}),c&&o.jsx("button",{className:Lt.actionButton,title:d?"Disable AI Suggestions":"Enable AI Suggestions",onClick:c,style:{backgroundColor:d?`${u.primary}20`:"transparent",borderColor:d?u.primary:"transparent",borderWidth:"1px",borderStyle:"solid"},children:o.jsx(Zs,{size:18,color:d?u.primary:u.textSecondary})}),o.jsx("button",{className:Lt.actionButton,title:"Format Document (Alt+Shift+F)",onClick:l,children:o.jsx(Bu,{size:18,color:u.textSecondary})}),o.jsx("button",{className:Lt.actionButton,title:"Toggle Debugger",onClick:n,style:{backgroundColor:r?`${u.primary}20`:"transparent",borderColor:r?u.primary:"transparent",borderWidth:"1px",borderStyle:"solid"},children:o.jsx(Ou,{size:18,color:r?u.primary:u.textSecondary})}),o.jsx("button",{className:Lt.actionButton,onClick:t,title:"Toggle Editor",children:o.jsx(Mu,{size:18,color:u.textSecondary})}),a&&s&&o.jsx("button",{className:Lt.actionButton,onClick:s,title:"Toggle Chat",style:{backgroundColor:i?`${u.primary}20`:"transparent",borderColor:i?u.primary:"transparent",borderWidth:"1px",borderStyle:"solid"},children:o.jsx(ry,{size:18,color:i?u.primary:u.textSecondary})}),o.jsx("button",{className:Lt.actionButton,onClick:b,title:"Save (Ctrl+S)",children:o.jsx(lo,{size:18,color:y?u.primary:u.textSecondary})}),o.jsx("button",{className:Lt.actionButton,onClick:g,title:"Export File",children:o.jsx(io,{size:18,color:u.textSecondary})}),f&&o.jsx(U2,{file:{id:f.id,name:f.name,path:f.path,type:"file",content:f.content},size:18,className:Lt.actionButton}),o.jsx("button",{className:Lt.actionButton,title:"More options",children:o.jsx(Tl,{size:18,color:u.textSecondary})})]})]})},J2="_container_1s250_1",Z2="_scrollContent_1s250_24",Y2="_tab_1s250_31",Q2="_tabText_1s250_52",X2="_closeButton_1s250_60",eC="_contextMenu_1s250_86",tC="_contextMenuItem_1s250_97",nC="_contextMenuIcon_1s250_113",mt={container:J2,scrollContent:Z2,tab:Y2,tabText:Q2,closeButton:X2,contextMenu:eC,contextMenuItem:tC,contextMenuIcon:nC},rC=()=>{const{colors:e}=ve(),{openFiles:t,currentFile:n,setCurrentFile:r,closeFile:s,hasUnsavedChanges:i,saveFile:a}=Xe(),[l,c]=_.useState(null),[d,u]=_.useState(null),[h,f]=_.useState(null),p=_.useRef({}),v=(P,K)=>{c(P);const F=new Image;F.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",K.dataTransfer.setDragImage(F,0,0),K.dataTransfer.setData("text/plain",P),p.current[P]&&(p.current[P].style.opacity="0.5")},y=P=>{P.preventDefault(),P.dataTransfer.dropEffect="move"},b=P=>{if(l&&l!==P){const K=t.findIndex(L=>L.id===l),F=t.findIndex(L=>L.id===P);K>=0&&F>=0&&[...t]}l&&p.current[l]&&(p.current[l].style.opacity="1"),c(null)},g=()=>{l&&p.current[l]&&(p.current[l].style.opacity="1"),c(null)},m=(P,K)=>{P.preventDefault(),u(K),f({x:P.clientX,y:P.clientY})},x=()=>{u(null),f(null)};_.useEffect(()=>{const P=K=>{h&&x()};return document.addEventListener("click",P),()=>document.removeEventListener("click",P)},[h]);const E=()=>{t.forEach(P=>s(P.id)),x()},k=()=>{d&&(t.forEach(P=>{P.id!==d&&s(P.id)}),x())},I=()=>{if(!d)return;const P=t.findIndex(K=>K.id===d);P>=0&&t.slice(P+1).forEach(K=>s(K.id)),x()},R=()=>{if(!d)return;const P=t.find(K=>K.id===d);P&&a(P.id,P.content),x()},T=()=>{console.log("Toggle maximize editor")},B=()=>{if(!d)return;const P=t.find(K=>K.id===d);P&&console.log("Duplicate file:",P.name),x()};return o.jsxs("div",{className:mt.container,style:{backgroundColor:e.surface,borderBottomColor:e.border},children:[o.jsx("div",{className:mt.scrollContent,children:t.map(P=>{const K=(n==null?void 0:n.id)===P.id,F=i(P.id);return o.jsxs("div",{ref:L=>p.current[P.id]=L,className:mt.tab,style:{backgroundColor:K?e.background:e.surface,borderBottomColor:K?e.primary:"transparent",cursor:"pointer"},onClick:()=>r(P.id),onContextMenu:L=>m(L,P.id),draggable:!0,onDragStart:L=>v(P.id,L),onDragOver:y,onDrop:()=>b(P.id),onDragEnd:g,onDoubleClick:T,"data-testid":`tab-${P.id}`,children:[o.jsxs("span",{className:mt.tabText,style:{color:K?e.text:e.textSecondary,fontFamily:K?"Inter-Medium":"Inter-Regular"},children:[P.name,F&&o.jsx("span",{style:{color:e.primary},children:" •"})]}),o.jsx("button",{className:mt.closeButton,onClick:L=>{L.stopPropagation(),s(P.id)},children:o.jsx(st,{size:14,color:K?e.text:e.textSecondary})})]},P.id)})}),h&&d&&o.jsxs("div",{className:mt.contextMenu,style:{top:h.y,left:h.x,backgroundColor:e.surface,borderColor:e.border},children:[o.jsxs("button",{className:mt.contextMenuItem,onClick:R,children:[o.jsx(lo,{size:14,color:e.text,className:mt.contextMenuIcon}),o.jsx("span",{style:{color:e.text},children:"Save"})]}),o.jsxs("button",{className:mt.contextMenuItem,onClick:B,children:[o.jsx(Nr,{size:14,color:e.text,className:mt.contextMenuIcon}),o.jsx("span",{style:{color:e.text},children:"Duplicate"})]}),o.jsxs("button",{className:mt.contextMenuItem,onClick:k,children:[o.jsx(rs,{size:14,color:e.text,className:mt.contextMenuIcon}),o.jsx("span",{style:{color:e.text},children:"Close Others"})]}),o.jsxs("button",{className:mt.contextMenuItem,onClick:I,children:[o.jsx(rs,{size:14,color:e.text,className:mt.contextMenuIcon}),o.jsx("span",{style:{color:e.text},children:"Close to Right"})]}),o.jsxs("button",{className:mt.contextMenuItem,onClick:E,children:[o.jsx(st,{size:14,color:e.text,className:mt.contextMenuIcon}),o.jsx("span",{style:{color:e.text},children:"Close All"})]}),o.jsxs("button",{className:mt.contextMenuItem,onClick:T,children:[o.jsx(Sw,{size:14,color:e.text,className:mt.contextMenuIcon}),o.jsx("span",{style:{color:e.text},children:"Maximize Editor"})]})]})]})},sC="_container_11g0t_1",oC="_content_11g0t_9",iC="_title_11g0t_18",aC="_message_11g0t_26",lC="_actionButton_11g0t_34",gs={container:sC,content:oC,title:iC,message:aC,actionButton:lC},Za=({icon:e,title:t,message:n,actionText:r,actionPath:s,onAction:i})=>{const{colors:a}=ve(),{openProject:l,createNewProject:c}=Xe(),[d,u]=_.useState(!1),h=()=>{switch(e){case"File":return o.jsx(Gs,{size:48,color:a.textSecondary});case"FileCode":return o.jsx(mw,{size:48,color:a.textSecondary});case"FolderPlus":return o.jsx(Pn,{size:48,color:a.textSecondary});case"Terminal":return o.jsx(Al,{size:48,color:a.textSecondary});default:return o.jsx(Gs,{size:48,color:a.textSecondary})}},f=async()=>{u(!0);try{await c()}catch(v){console.error("Error browsing files:",v),alert("Error accessing files. Creating a new project instead."),await c()}u(!1)},p=()=>{i?i():r!=null&&r.includes("Browse")||r!=null&&r.includes("Open")?f():r!=null&&r.includes("Create")&&c()};return o.jsx("div",{className:gs.container,style:{backgroundColor:a.background},children:o.jsxs("div",{className:gs.content,children:[o.jsx(h,{}),o.jsx("h2",{className:gs.title,style:{color:a.text},children:t}),o.jsx("p",{className:gs.message,style:{color:a.textSecondary},children:n}),r&&(s?o.jsx(Tu,{to:s,className:gs.actionButton,style:{backgroundColor:a.primary},children:r}):o.jsx("button",{className:gs.actionButton,style:{backgroundColor:a.primary},onClick:p,disabled:d,children:d?"Loading...":r}))]})})};class cC{constructor(){Se(this,"commits",new Map);Se(this,"branches",new Map);Se(this,"status",new Map);this.setupSampleData()}setupSampleData(){const t=[{hash:"abc123def456abc123def456abc123def456abcd",shortHash:"abc123d",message:"Initial commit",author:"John Doe <john@example.com>",date:new Date(Date.now()-6048e5),branch:"main"},{hash:"def456abc123def456abc123def456abc123defg",shortHash:"def456a",message:"Add basic project structure",author:"John Doe <john@example.com>",date:new Date(Date.now()-432e6),branch:"main"},{hash:"789abc123def456abc123def456abc123def456h",shortHash:"789abc1",message:"Implement core functionality",author:"Jane Smith <jane@example.com>",date:new Date(Date.now()-1728e5),branch:"main"}],n=[{name:"main",current:!0},{name:"feature/new-ui",current:!1},{name:"fix/bug-123",current:!1}],r={staged:[],unstaged:["index.js","src/app.js"],untracked:["newfile.txt"]};this.commits.set("sample-project-1",t),this.branches.set("sample-project-1",n),this.status.set("sample-project-1",r)}async initRepo(t){this.commits.has(t)||(this.commits.set(t,[{hash:this.generateRandomHash(),shortHash:this.generateRandomHash().substring(0,7),message:"Initial commit",author:"User <user@example.com>",date:new Date,branch:"main"}]),this.branches.set(t,[{name:"main",current:!0}]),this.status.set(t,{staged:[],unstaged:[],untracked:[]}))}generateRandomHash(){const t="abcdef0123456789";let n="";for(let r=0;r<40;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}async getStatus(t){return this.status.get(t)||{staged:[],unstaged:[],untracked:[]}}async stageFiles(t,n){const r=this.status.get(t);if(!r)return;const s=[...r.staged],i=[...r.unstaged],a=[...r.untracked];for(const l of n)r.unstaged.includes(l)?(i.splice(i.indexOf(l),1),s.includes(l)||s.push(l)):r.untracked.includes(l)&&(a.splice(a.indexOf(l),1),s.includes(l)||s.push(l));this.status.set(t,{staged:s,unstaged:i,untracked:a})}async unstageFiles(t,n){const r=this.status.get(t);if(!r)return;const s=[...r.staged],i=[...r.unstaged];for(const a of n)r.staged.includes(a)&&(s.splice(s.indexOf(a),1),i.includes(a)||i.push(a));this.status.set(t,{...r,staged:s,unstaged:i})}async commit(t,n){var c;const r=this.status.get(t),s=this.branches.get(t),i=this.commits.get(t);if(!r||!s||!i)return;if(r.staged.length===0)throw new Error("No changes to commit");const a=((c=s.find(d=>d.current))==null?void 0:c.name)||"main",l={hash:this.generateRandomHash(),shortHash:this.generateRandomHash().substring(0,7),message:n,author:"User <user@example.com>",date:new Date,branch:a};i.unshift(l),this.commits.set(t,i),this.status.set(t,{...r,staged:[]})}async getCommits(t){return this.commits.get(t)||[]}async getBranches(t){return this.branches.get(t)||[]}async createBranch(t,n){const r=this.branches.get(t);return!r||r.some(s=>s.name===n)?!1:(r.push({name:n,current:!1}),this.branches.set(t,r),!0)}async checkoutBranch(t,n){const r=this.branches.get(t);if(!r||!r.some(i=>i.name===n))return!1;const s=r.map(i=>({...i,current:i.name===n}));return this.branches.set(t,s),!0}async pull(t){return await new Promise(n=>setTimeout(n,500)),!0}async push(t){return await new Promise(n=>setTimeout(n,500)),!0}}const hn=new cC,dC="_container_c4q28_1",uC="_header_c4q28_9",hC="_branchSelector_c4q28_17",fC="_branchButton_c4q28_21",pC="_branchForm_c4q28_38",mC="_branchInput_c4q28_50",gC="_createBranchButton_c4q28_59",yC="_actions_c4q28_75",xC="_action_c4q28_75",vC="_error_c4q28_96",bC="_loading_c4q28_96",_C="_loadingIcon_c4q28_104",wC="_tabs_c4q28_113",kC="_tab_c4q28_113",SC="_activeTab_c4q28_128",jC="_content_c4q28_132",CC="_section_c4q28_138",EC="_sectionHeader_c4q28_142",NC="_actionButton_c4q28_151",TC="_fileList_c4q28_162",IC="_fileItem_c4q28_166",AC="_checkboxLabel_c4q28_172",PC="_checkbox_c4q28_172",RC="_fileName_c4q28_184",FC="_emptyMessage_c4q28_191",BC="_commitForm_c4q28_198",OC="_commitMessage_c4q28_205",LC="_commitButton_c4q28_217",zC="_commitList_c4q28_233",$C="_commitItem_c4q28_238",DC="_commitHeader_c4q28_249",MC="_commitInfo_c4q28_256",UC="_commitHash_c4q28_262",HC="_commitBranch_c4q28_270",WC="_commitDate_c4q28_276",qC="_commitAuthor_c4q28_289",VC="_branchList_c4q28_293",KC="_branchItem_c4q28_298",GC="_branchName_c4q28_308",JC="_currentBranch_c4q28_315",ZC="_checkoutButton_c4q28_319",YC="_emptyState_c4q28_329",QC="_modalOverlay_c4q28_339",xe={container:dC,header:uC,branchSelector:hC,branchButton:fC,branchForm:pC,branchInput:mC,createBranchButton:gC,actions:yC,action:xC,error:vC,loading:bC,loadingIcon:_C,tabs:wC,tab:kC,activeTab:SC,content:jC,section:CC,sectionHeader:EC,actionButton:NC,fileList:TC,fileItem:IC,checkboxLabel:AC,checkbox:PC,fileName:RC,emptyMessage:FC,commitForm:BC,commitMessage:OC,commitButton:LC,commitList:zC,commitItem:$C,commitHeader:DC,commitInfo:MC,commitHash:UC,commitBranch:HC,commitDate:WC,commitAuthor:qC,branchList:VC,branchItem:KC,branchName:GC,currentBranch:JC,checkoutButton:ZC,emptyState:YC,modalOverlay:QC},XC="_container_1q5o3_1",eE="_header_1q5o3_17",tE="_title_1q5o3_25",nE="_closeButton_1q5o3_37",rE="_content_1q5o3_52",sE="_commitSummary_1q5o3_58",oE="_commitMessage_1q5o3_62",iE="_commitMeta_1q5o3_68",aE="_commitHash_1q5o3_74",lE="_commitBranch_1q5o3_79",cE="_divider_1q5o3_85",dE="_detailsGrid_1q5o3_91",uE="_detailLabel_1q5o3_98",hE="_detailValue_1q5o3_103",fE="_detailIcon_1q5o3_111",pE="_email_1q5o3_115",mE="_changeSummary_1q5o3_119",gE="_sectionTitle_1q5o3_123",yE="_diffPlaceholder_1q5o3_129",xE="_footer_1q5o3_138",vE="_navButton_1q5o3_145",bE="_disabled_1q5o3_158",Le={container:XC,header:eE,title:tE,closeButton:nE,content:rE,commitSummary:sE,commitMessage:oE,commitMeta:iE,commitHash:aE,commitBranch:lE,divider:cE,detailsGrid:dE,detailLabel:uE,detailValue:hE,detailIcon:fE,email:pE,changeSummary:mE,sectionTitle:gE,diffPlaceholder:yE,footer:xE,navButton:vE,disabled:bE},_E=({commit:e,onClose:t,onPrevious:n,onNext:r,hasPrevious:s,hasNext:i})=>{const{colors:a}=ve(),l=h=>{const f={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return h.toLocaleDateString(void 0,f)},c=h=>{const f=h.match(/^(.+)\s+<([^>]+)>/);return f?{name:f[1],email:f[2]}:{name:h,email:""}},{name:d,email:u}=c(e.author);return o.jsxs("div",{className:Le.container,style:{backgroundColor:a.surface,borderColor:a.border},onClick:h=>h.stopPropagation(),children:[o.jsxs("div",{className:Le.header,style:{borderBottomColor:a.border},children:[o.jsxs("div",{className:Le.title,children:[o.jsx(ey,{size:18,color:a.primary}),o.jsx("h3",{style:{color:a.text},children:"Commit Details"})]}),o.jsx("button",{className:Le.closeButton,onClick:t,children:o.jsx(st,{size:18,color:a.textSecondary})})]}),o.jsxs("div",{className:Le.content,children:[o.jsxs("div",{className:Le.commitSummary,children:[o.jsx("div",{className:Le.commitMessage,style:{color:a.text},children:e.message}),o.jsxs("div",{className:Le.commitMeta,children:[o.jsx("div",{className:Le.commitHash,style:{color:a.textSecondary},children:e.shortHash}),e.branch&&o.jsx("div",{className:Le.commitBranch,style:{backgroundColor:`${a.primary}30`,color:a.primary},children:e.branch})]})]}),o.jsx("div",{className:Le.divider,style:{backgroundColor:a.border}}),o.jsxs("div",{className:Le.detailsGrid,children:[o.jsx("div",{className:Le.detailLabel,style:{color:a.textSecondary},children:"Author"}),o.jsxs("div",{className:Le.detailValue,style:{color:a.text},children:[d," ",u&&o.jsxs("span",{className:Le.email,children:["(",u,")"]})]}),o.jsx("div",{className:Le.detailLabel,style:{color:a.textSecondary},children:"Date"}),o.jsxs("div",{className:Le.detailValue,style:{color:a.text},children:[o.jsx(wi,{size:14,className:Le.detailIcon}),l(e.date)]}),o.jsx("div",{className:Le.detailLabel,style:{color:a.textSecondary},children:"Commit"}),o.jsx("div",{className:Le.detailValue,style:{color:a.text,fontFamily:"Fira Code, monospace"},children:e.hash})]}),o.jsxs("div",{className:Le.changeSummary,children:[o.jsx("div",{className:Le.sectionTitle,style:{color:a.text},children:"Changes"}),o.jsx("div",{className:Le.diffPlaceholder,style:{backgroundColor:a.background,borderColor:a.border},children:o.jsx("pre",{style:{color:a.textSecondary,margin:0},children:"Diff content would appear here For a real implementation, this would show: - Changed files - Line-by-line diffs with additions/deletions - Stats (# of files changed, lines added/removed)"})})]})]}),o.jsxs("div",{className:Le.footer,style:{borderTopColor:a.border},children:[o.jsxs("button",{className:`${Le.navButton} ${s?"":Le.disabled}`,onClick:n,disabled:!s,title:"Previous commit",style:{opacity:s?1:.5},children:[o.jsx(_i,{size:16,color:a.textSecondary}),o.jsx("span",{style:{color:a.text},children:"Previous"})]}),o.jsxs("button",{className:`${Le.navButton} ${i?"":Le.disabled}`,onClick:r,disabled:!i,title:"Next commit",style:{opacity:i?1:.5},children:[o.jsx("span",{style:{color:a.text},children:"Next"}),o.jsx(xt,{size:16,color:a.textSecondary})]})]})]})},wE=()=>{const{colors:e}=ve(),{currentProject:t}=Xe(),[n,r]=_.useState(!1),[s,i]=_.useState(null),[a,l]=_.useState(null),[c,d]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState(""),[v,y]=_.useState(""),[b,g]=_.useState("changes"),[m,x]=_.useState(new Set),[E,k]=_.useState(!1),[I,R]=_.useState(""),[T,B]=_.useState(null);_.useEffect(()=>{t&&P()},[t]);const P=async()=>{if(t){r(!0),i(null);try{await hn.initRepo(t.id),await K()}catch($){i($.message||"Failed to initialize Git")}finally{r(!1)}}},K=async()=>{if(t){r(!0);try{const $=await hn.getStatus(t.id);l($);const fe=await hn.getCommits(t.id);d(fe.sort((de,ce)=>ce.date.getTime()-de.date.getTime()));const me=await hn.getBranches(t.id);h(me);const te=me.find(de=>de.current);p((te==null?void 0:te.name)||"main"),i(null)}catch($){i($.message||"Failed to refresh Git data")}finally{r(!1)}}},F=async()=>{if(!(!t||m.size===0)){r(!0);try{await hn.stageFiles(t.id,Array.from(m)),x(new Set),await K()}catch($){i($.message||"Failed to stage files")}finally{r(!1)}}},L=async()=>{if(!(!t||m.size===0)){r(!0);try{await hn.unstageFiles(t.id,Array.from(m)),x(new Set),await K()}catch($){i($.message||"Failed to unstage files")}finally{r(!1)}}},C=async()=>{if(!(!t||!a||a.staged.length===0||!v.trim())){r(!0);try{await hn.commit(t.id,v),y(""),await K()}catch($){i($.message||"Failed to commit changes")}finally{r(!1)}}},Z=async()=>{if(t){r(!0);try{await hn.pull(t.id),await K()}catch($){i($.message||"Failed to pull from remote")}finally{r(!1)}}},W=async()=>{if(t){r(!0);try{await hn.push(t.id),await K()}catch($){i($.message||"Failed to push to remote")}finally{r(!1)}}},U=async()=>{if(!(!t||!I.trim())){r(!0);try{await hn.createBranch(t.id,I),R(""),k(!1),await K()}catch($){i($.message||"Failed to create branch")}finally{r(!1)}}},z=async $=>{if(t){r(!0);try{await hn.checkoutBranch(t.id,$),await K()}catch(fe){i(fe.message||"Failed to checkout branch")}finally{r(!1)}}},q=$=>{x(fe=>{const me=new Set(fe);return me.has($)?me.delete($):me.add($),me})},re=$=>new Date($).toLocaleString(),H=$=>{const me=Math.floor((new Date().getTime()-$.getTime())/1e3);if(me<60)return"just now";if(me<3600){const te=Math.floor(me/60);return`${te} minute${te>1?"s":""} ago`}else if(me<86400){const te=Math.floor(me/3600);return`${te} hour${te>1?"s":""} ago`}else if(me<604800){const te=Math.floor(me/86400);return`${te} day${te>1?"s":""} ago`}else return re($)},O=($,fe=40)=>{if($.length<=fe)return $;const me=$.split("/"),te=me.pop()||"";if(te.length>=fe-3)return"..."+te.substring(te.length-fe+3);let de=te,ce=te.length;for(let ye=me.length-1;ye>=0;ye--){const ge=me[ye];if(ce+ge.length+1+3>fe)return"..."+de;de=ge+"/"+de,ce+=ge.length+1}return de},ie=$=>{B($)},M=()=>{if(!T||c.length<=1)return;const $=c.findIndex(fe=>fe.hash===T.hash);$<c.length-1&&B(c[$+1])},Y=()=>{if(!T)return;const $=c.findIndex(fe=>fe.hash===T.hash);$>0&&B(c[$-1])};return t?o.jsxs("div",{className:xe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:xe.header,style:{backgroundColor:e.surface,borderBottomColor:e.border},children:[o.jsxs("div",{className:xe.branchSelector,children:[o.jsxs("button",{className:xe.branchButton,onClick:()=>k(!E),children:[o.jsx(pa,{size:16,color:e.textSecondary}),o.jsx("span",{style:{color:e.text},children:f}),o.jsx(Or,{size:14,color:e.textSecondary})]}),E&&o.jsxs("div",{className:xe.branchForm,style:{backgroundColor:e.surface,borderColor:e.border},children:[o.jsx("input",{type:"text",value:I,onChange:$=>R($.target.value),placeholder:"New branch name",className:xe.branchInput,style:{borderColor:e.border,backgroundColor:e.background,color:e.text}}),o.jsx("button",{className:xe.createBranchButton,onClick:U,disabled:!I.trim(),style:{backgroundColor:e.primary,opacity:I.trim()?1:.7},children:"Create"})]})]}),o.jsxs("div",{className:xe.actions,children:[o.jsx("button",{className:xe.action,onClick:Z,title:"Pull",children:o.jsx(io,{size:16,color:e.textSecondary})}),o.jsx("button",{className:xe.action,onClick:W,title:"Push",children:o.jsx(iy,{size:16,color:e.textSecondary})}),o.jsx("button",{className:xe.action,onClick:K,title:"Refresh",children:o.jsx(Zn,{size:16,color:e.textSecondary})})]})]}),s&&o.jsxs("div",{className:xe.error,style:{backgroundColor:`${e.error}20`,color:e.error},children:[o.jsx(Bn,{size:16}),o.jsx("span",{children:s})]}),n&&o.jsxs("div",{className:xe.loading,style:{color:e.textSecondary},children:[o.jsx(Zn,{size:16,className:xe.loadingIcon}),o.jsx("span",{children:"Loading..."})]}),o.jsxs("div",{className:xe.tabs,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:`${xe.tab} ${b==="changes"?xe.activeTab:""}`,onClick:()=>g("changes"),style:{color:b==="changes"?e.primary:e.textSecondary,borderBottomColor:b==="changes"?e.primary:"transparent"},children:"Changes"}),o.jsx("button",{className:`${xe.tab} ${b==="history"?xe.activeTab:""}`,onClick:()=>g("history"),style:{color:b==="history"?e.primary:e.textSecondary,borderBottomColor:b==="history"?e.primary:"transparent"},children:"History"}),o.jsx("button",{className:`${xe.tab} ${b==="branches"?xe.activeTab:""}`,onClick:()=>g("branches"),style:{color:b==="branches"?e.primary:e.textSecondary,borderBottomColor:b==="branches"?e.primary:"transparent"},children:"Branches"})]}),o.jsxs("div",{className:xe.content,children:[b==="changes"&&a&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:xe.section,children:[o.jsxs("div",{className:xe.sectionHeader,style:{color:e.text},children:["Staged Changes (",a.staged.length,")",a.staged.length>0&&o.jsx("button",{className:xe.actionButton,onClick:L,title:"Unstage selected",disabled:m.size===0,style:{opacity:m.size===0?.5:1},children:o.jsx(st,{size:14,color:e.textSecondary})})]}),a.staged.length>0?o.jsx("div",{className:xe.fileList,children:a.staged.map($=>o.jsx("div",{className:xe.fileItem,style:{backgroundColor:m.has($)?e.selectedItem:"transparent"},children:o.jsxs("label",{className:xe.checkboxLabel,children:[o.jsx("input",{type:"checkbox",checked:m.has($),onChange:()=>q($),className:xe.checkbox}),o.jsx("span",{className:xe.fileName,style:{color:e.text},children:O($)})]})},$))}):o.jsx("div",{className:xe.emptyMessage,style:{color:e.textSecondary},children:"No staged changes"})]}),o.jsxs("div",{className:xe.section,children:[o.jsxs("div",{className:xe.sectionHeader,style:{color:e.text},children:["Changes (",a.unstaged.length,")",a.unstaged.length>0&&o.jsx("button",{className:xe.actionButton,onClick:F,title:"Stage selected",disabled:m.size===0,style:{opacity:m.size===0?.5:1},children:o.jsx(Ir,{size:14,color:e.textSecondary})})]}),a.unstaged.length>0?o.jsx("div",{className:xe.fileList,children:a.unstaged.map($=>o.jsx("div",{className:xe.fileItem,style:{backgroundColor:m.has($)?e.selectedItem:"transparent"},children:o.jsxs("label",{className:xe.checkboxLabel,children:[o.jsx("input",{type:"checkbox",checked:m.has($),onChange:()=>q($),className:xe.checkbox}),o.jsx("span",{className:xe.fileName,style:{color:e.text},children:O($)})]})},$))}):o.jsx("div",{className:xe.emptyMessage,style:{color:e.textSecondary},children:"No unstaged changes"})]}),o.jsxs("div",{className:xe.section,children:[o.jsxs("div",{className:xe.sectionHeader,style:{color:e.text},children:["Untracked Files (",a.untracked.length,")",a.untracked.length>0&&o.jsx("button",{className:xe.actionButton,onClick:F,title:"Stage selected",disabled:m.size===0,style:{opacity:m.size===0?.5:1},children:o.jsx(Ir,{size:14,color:e.textSecondary})})]}),a.untracked.length>0?o.jsx("div",{className:xe.fileList,children:a.untracked.map($=>o.jsx("div",{className:xe.fileItem,style:{backgroundColor:m.has($)?e.selectedItem:"transparent"},children:o.jsxs("label",{className:xe.checkboxLabel,children:[o.jsx("input",{type:"checkbox",checked:m.has($),onChange:()=>q($),className:xe.checkbox}),o.jsx("span",{className:xe.fileName,style:{color:e.text},children:O($)})]})},$))}):o.jsx("div",{className:xe.emptyMessage,style:{color:e.textSecondary},children:"No untracked files"})]}),o.jsxs("div",{className:xe.commitForm,style:{backgroundColor:e.surface,borderTopColor:e.border},children:[o.jsx("textarea",{className:xe.commitMessage,value:v,onChange:$=>y($.target.value),placeholder:"Commit message",disabled:a.staged.length===0,style:{borderColor:e.border,backgroundColor:e.background,color:e.text,opacity:a.staged.length===0?.7:1}}),o.jsx("button",{className:xe.commitButton,onClick:C,disabled:a.staged.length===0||!v.trim(),style:{backgroundColor:e.primary,opacity:a.staged.length===0||!v.trim()?.7:1},children:"Commit"})]})]}),b==="history"&&o.jsx("div",{className:xe.commitList,children:c.length>0?c.map($=>o.jsxs("div",{className:xe.commitItem,style:{borderBottomColor:e.border},onClick:()=>ie($),children:[o.jsxs("div",{className:xe.commitHeader,children:[o.jsxs("div",{className:xe.commitInfo,children:[o.jsxs("div",{className:xe.commitHash,style:{color:e.textSecondary},children:[o.jsx(ey,{size:14,color:e.primary}),$.shortHash]}),$.branch&&o.jsx("div",{className:xe.commitBranch,style:{backgroundColor:`${e.primary}30`,color:e.primary},children:$.branch})]}),o.jsxs("div",{className:xe.commitDate,style:{color:e.textSecondary},children:[o.jsx(wi,{size:12}),o.jsx("span",{children:H($.date)})]})]}),o.jsx("div",{className:xe.commitMessage,style:{color:e.text},children:$.message}),o.jsx("div",{className:xe.commitAuthor,style:{color:e.textSecondary},children:$.author})]},$.hash)):o.jsx("div",{className:xe.emptyMessage,style:{color:e.textSecondary},children:"No commits yet"})}),b==="branches"&&o.jsx("div",{className:xe.branchList,children:u.length>0?u.map($=>o.jsxs("div",{className:`${xe.branchItem} ${$.current?xe.currentBranch:""}`,style:{backgroundColor:$.current?`${e.primary}15`:"transparent",borderLeftColor:$.current?e.primary:"transparent"},children:[o.jsxs("div",{className:xe.branchName,style:{color:e.text},children:[o.jsx(pa,{size:16,color:$.current?e.primary:e.textSecondary}),$.name]}),!$.current&&o.jsxs("button",{className:xe.checkoutButton,onClick:()=>z($.name),children:[o.jsx(kn,{size:14,color:e.textSecondary}),o.jsx("span",{style:{color:e.textSecondary},children:"Checkout"})]})]},$.name)):o.jsx("div",{className:xe.emptyMessage,style:{color:e.textSecondary},children:"No branches found"})})]}),T&&o.jsx("div",{className:xe.modalOverlay,onClick:()=>B(null),children:o.jsx(_E,{commit:T,onClose:()=>B(null),onPrevious:M,onNext:Y,hasPrevious:c.findIndex($=>$.hash===T.hash)<c.length-1,hasNext:c.findIndex($=>$.hash===T.hash)>0})})]}):o.jsxs("div",{className:xe.emptyState,style:{backgroundColor:e.background},children:[o.jsx(pa,{size:40,color:e.textSecondary}),o.jsx("p",{style:{color:e.textSecondary},children:"Open a project to use version control"})]})},kE="_container_13kal_1",SE="_header_13kal_9",jE="_headerTitle_13kal_18",CE="_headerControls_13kal_30",EE="_collapseButton_13kal_35",NE="_content_13kal_51",TE="_collapsed_13kal_57",zr={container:kE,header:SE,headerTitle:jE,headerControls:CE,collapseButton:EE,content:NE,collapsed:TE},IE=()=>{const{colors:e}=ve(),{currentProject:t}=Xe(),[n,r]=_.useState(!1);return t?o.jsxs("div",{className:`${zr.container} ${n?zr.collapsed:""}`,style:{backgroundColor:e.surface,borderTopColor:e.border},children:[o.jsxs("div",{className:zr.header,style:{borderBottomColor:n?"transparent":e.border},onClick:()=>r(!n),children:[o.jsxs("div",{className:zr.headerTitle,children:[o.jsx(pa,{size:16,color:e.primary}),o.jsx("h3",{style:{color:e.text},children:"Version Control"})]}),o.jsx("div",{className:zr.headerControls,children:o.jsx("button",{className:zr.collapseButton,onClick:s=>{s.stopPropagation(),r(!n)},"aria-label":n?"Expand":"Collapse",children:n?o.jsx(Lu,{size:16,color:e.textSecondary}):o.jsx(Or,{size:16,color:e.textSecondary})})})]}),!n&&o.jsx("div",{className:zr.content,children:o.jsx(wE,{})})]}):null},AE="_container_1jrvn_1",PE="_title_1jrvn_6",RE="_userList_1jrvn_15",FE="_userItem_1jrvn_21",BE="_userAvatar_1jrvn_31",OE="_statusDot_1jrvn_48",LE="_userInfo_1jrvn_58",zE="_username_1jrvn_64",$E="_activeFile_1jrvn_68",DE="_lastActive_1jrvn_72",En={container:AE,title:PE,userList:RE,userItem:FE,userAvatar:BE,statusDot:OE,userInfo:LE,username:zE,activeFile:$E,lastActive:DE},ME=()=>{const{colors:e}=ve(),{currentProject:t,currentFile:n,fileTree:r}=Xe(),{user:s}=ht(),[i,a]=_.useState([]),[l,c]=_.useState(!0);_.useEffect(()=>{if(!t||!s)return;const h=we.channel(`presence-${t.id}`);let f;const p=()=>{h.on("presence",{event:"sync"},()=>{const y=h.presenceState(),b=[];Object.keys(y).forEach(g=>{y[g].forEach(x=>{x.user_id&&x.username&&(b.find(k=>k.id===x.user_id)||b.push({id:x.user_id,username:x.username,avatar_url:x.avatar_url,current_file:x.current_file,last_active:new Date}))})}),a(b),c(!1)})};return(async()=>{await h.subscribe(async y=>{if(y==="SUBSCRIBED"){const b=()=>{var g,m,x;h.track({user_id:s.id,username:((g=s.user_metadata)==null?void 0:g.username)||((m=s.email)==null?void 0:m.split("@")[0]),avatar_url:((x=s.user_metadata)==null?void 0:x.avatar_url)||null,current_file:(n==null?void 0:n.id)||null,online_at:new Date().toISOString()}),f=setTimeout(b,3e4)};b(),p()}})})(),()=>{clearTimeout(f),h.untrack(),h.unsubscribe()}},[t,s]),_.useEffect(()=>{var f,p,v;if(!t||!s||!n)return;const h=we.channel(`presence-${t.id}`);return h.track({user_id:s.id,username:((f=s.user_metadata)==null?void 0:f.username)||((p=s.email)==null?void 0:p.split("@")[0]),avatar_url:((v=s.user_metadata)==null?void 0:v.avatar_url)||null,current_file:(n==null?void 0:n.id)||null,online_at:new Date().toISOString()}),()=>{h.untrack()}},[n]);const d=h=>{if(!h||!t)return"Not editing";const f=r.find(p=>p.id===h);return f?f.name:"Unknown file"},u=h=>{const p=new Date().getTime()-h.getTime(),v=Math.floor(p/1e3);return v<60?"just now":v<3600?`${Math.floor(v/60)}m ago`:v<86400?`${Math.floor(v/3600)}h ago`:`${Math.floor(v/86400)}d ago`};return l||i.length<=1?null:o.jsxs("div",{className:En.container,style:{backgroundColor:e.surface,borderBottomColor:e.border},children:[o.jsxs("div",{className:En.title,children:[o.jsx(Js,{size:14,color:e.primary}),o.jsxs("span",{style:{color:e.text},children:[i.length," ",i.length===1?"person":"people"," online"]})]}),o.jsx("div",{className:En.userList,children:i.map(h=>o.jsxs("div",{className:En.userItem,style:{color:h.id===(s==null?void 0:s.id)?e.primary:e.text},children:[o.jsxs("div",{className:En.userAvatar,children:[h.avatar_url?o.jsx("img",{src:h.avatar_url,alt:h.username||"User"}):o.jsx(Ut,{size:14,color:h.id===(s==null?void 0:s.id)?e.primary:e.textSecondary}),o.jsx("div",{className:En.statusDot,style:{backgroundColor:e.success}})]}),o.jsxs("div",{className:En.userInfo,children:[o.jsxs("span",{className:En.username,children:[h.username||"Anonymous",h.id===(s==null?void 0:s.id)?" (You)":""]}),h.current_file&&o.jsxs("span",{className:En.activeFile,style:{color:e.textSecondary},children:["Editing: ",d(h.current_file)]})]}),o.jsxs("div",{className:En.lastActive,title:h.last_active.toLocaleString(),children:[o.jsx(wi,{size:12,color:e.textSecondary}),o.jsx("span",{style:{color:e.textSecondary},children:u(h.last_active)})]})]},h.id))})]})},UE="_container_zw8q7_1",HE="_collapsed_zw8q7_10",WE="_header_zw8q7_14",qE="_headerTitle_zw8q7_23",VE="_unreadBadge_zw8q7_35",KE="_collapseButton_zw8q7_47",GE="_messageContainer_zw8q7_63",JE="_loading_zw8q7_69",ZE="_error_zw8q7_69",YE="_emptyState_zw8q7_69",QE="_messages_zw8q7_78",XE="_messageWrapper_zw8q7_84",eN="_currentUser_zw8q7_90",tN="_avatar_zw8q7_95",nN="_messageContent_zw8q7_112",rN="_messageHeader_zw8q7_117",sN="_username_zw8q7_124",oN="_timestamp_zw8q7_129",iN="_messageBubble_zw8q7_133",aN="_currentUserBubble_zw8q7_142",lN="_inputContainer_zw8q7_150",cN="_inputWrapper_zw8q7_158",dN="_messageInput_zw8q7_167",uN="_sendButton_zw8q7_180",Ze={container:UE,collapsed:HE,header:WE,headerTitle:qE,unreadBadge:VE,collapseButton:KE,messageContainer:GE,loading:JE,error:ZE,emptyState:YE,messages:QE,messageWrapper:XE,currentUser:eN,avatar:tN,messageContent:nN,messageHeader:rN,username:sN,timestamp:oN,messageBubble:iN,currentUserBubble:aN,inputContainer:lN,inputWrapper:cN,messageInput:dN,sendButton:uN},hN=()=>{const{colors:e}=ve(),{currentProject:t}=Xe(),{user:n,profile:r}=ht(),[s,i]=_.useState(!1),[a,l]=_.useState([]),[c,d]=_.useState(""),[u,h]=_.useState(!0),[f,p]=_.useState(null),[v,y]=_.useState(0),[b,g]=_.useState(null),m=_.useRef(null),x=_.useRef(null);_.useEffect(()=>{if(t&&n)return E(),k(),()=>{b&&we.removeChannel(b)}},[t,n]),_.useEffect(()=>{T()},[a]),_.useEffect(()=>{s||y(0)},[s]);const E=async()=>{if(t){h(!0),p(null);try{const{data:P,error:K}=await we.from("project_messages").select(`
          id,
          content,
          created_at,
          user_id,
          profiles:user_id (id, username, avatar_url)
        `).eq("project_id",t.id).order("created_at",{ascending:!0}).limit(100);if(K)throw K;const F=P.map(L=>{const C=L.profiles;return{id:L.id,content:L.content,user_id:L.user_id,username:C.username,avatar_url:C.avatar_url,created_at:L.created_at}});l(F)}catch(P){console.error("Error fetching messages:",P),p("Failed to load chat messages")}finally{h(!1)}}},k=()=>{if(!t)return;const P=we.channel("chat").on("postgres_changes",{event:"INSERT",schema:"public",table:"project_messages",filter:`project_id=eq.${t.id}`},async K=>{const{data:F,error:L}=await we.from("profiles").select("username, avatar_url").eq("id",K.new.user_id).single();if(L){console.error("Error fetching user data:",L);return}const C={id:K.new.id,content:K.new.content,user_id:K.new.user_id,username:F.username,avatar_url:F.avatar_url,created_at:K.new.created_at};l(Z=>[...Z,C]),s&&y(Z=>Z+1)}).subscribe();g(P)},I=async()=>{if(!(!t||!n||!c.trim()))try{const{error:P}=await we.from("project_messages").insert({project_id:t.id,user_id:n.id,content:c.trim()});if(P)throw P;d("")}catch(P){console.error("Error sending message:",P),p("Failed to send message")}},R=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),I())},T=()=>{m.current&&m.current.scrollIntoView({behavior:"smooth"})},B=P=>new Date(P).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return o.jsxs("div",{className:`${Ze.container} ${s?Ze.collapsed:""}`,style:{backgroundColor:e.surface,borderTopColor:e.border},children:[o.jsxs("div",{className:Ze.header,style:{borderBottomColor:s?"transparent":e.border},onClick:()=>i(!s),children:[o.jsxs("div",{className:Ze.headerTitle,children:[o.jsx(ry,{size:16,color:e.primary}),o.jsx("h3",{style:{color:e.text},children:"Project Chat"}),s&&v>0&&o.jsx("div",{className:Ze.unreadBadge,style:{backgroundColor:e.primary},children:v})]}),o.jsx("button",{className:Ze.collapseButton,onClick:P=>{P.stopPropagation(),i(!s)},"aria-label":s?"Expand chat":"Collapse chat",children:s?o.jsx(Lu,{size:16,color:e.textSecondary}):o.jsx(Or,{size:16,color:e.textSecondary})})]}),!s&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:Ze.messageContainer,ref:x,children:u?o.jsx("div",{className:Ze.loading,style:{color:e.textSecondary},children:"Loading messages..."}):f?o.jsx("div",{className:Ze.error,style:{color:e.error},children:f}):a.length===0?o.jsx("div",{className:Ze.emptyState,style:{color:e.textSecondary},children:"No messages yet. Start the conversation!"}):o.jsxs("div",{className:Ze.messages,children:[a.map((P,K)=>{const F=P.user_id===(n==null?void 0:n.id),L=K===0||a[K-1].user_id!==P.user_id;return o.jsxs("div",{className:`${Ze.messageWrapper} ${F?Ze.currentUser:""}`,children:[!F&&L&&o.jsx("div",{className:Ze.avatar,style:{backgroundColor:`${e.primary}30`},children:P.avatar_url?o.jsx("img",{src:P.avatar_url,alt:P.username||"User"}):o.jsx(Ut,{size:14,color:e.primary})}),o.jsxs("div",{className:Ze.messageContent,children:[L&&o.jsxs("div",{className:Ze.messageHeader,children:[o.jsx("span",{className:Ze.username,style:{color:F?e.primary:e.text},children:F?"You":P.username||"Unknown user"}),o.jsx("span",{className:Ze.timestamp,style:{color:e.textSecondary},children:B(P.created_at)})]}),o.jsx("div",{className:`${Ze.messageBubble} ${F?Ze.currentUserBubble:""}`,style:{backgroundColor:F?e.primary:e.background,color:F?"#FFFFFF":e.text},children:P.content})]})]},P.id)}),o.jsx("div",{ref:m})]})}),o.jsxs("div",{className:Ze.inputContainer,style:{borderTopColor:e.border},children:[o.jsx("div",{className:Ze.inputWrapper,style:{backgroundColor:e.background,borderColor:e.border},children:o.jsx("textarea",{value:c,onChange:P=>d(P.target.value),onKeyDown:R,placeholder:"Type a message...",className:Ze.messageInput,style:{color:e.text}})}),o.jsx("button",{className:Ze.sendButton,onClick:I,disabled:!c.trim(),style:{backgroundColor:e.primary,opacity:c.trim()?1:.5},children:o.jsx(Aw,{size:16,color:"#FFFFFF"})})]})]})]})},fN="_container_bmg13_1",pN="_editorContainer_bmg13_8",Hf={container:fN,editorContainer:pN},mN=()=>{const{colors:e}=ve(),{currentProject:t,openFiles:n,currentFile:r,saveFile:s,updateFileContent:i}=Xe(),{user:a,profile:l}=ht(),[c,d]=_.useState(""),[u,h]=_.useState(!0),[f,p]=_.useState(!1),[v,y]=_.useState(!0),[b,g]=_.useState(!0),[m,x]=_.useState(!1),[E,k]=_.useState([]),[I,R]=_.useState([]),[T,B]=_.useState(!0);_.useEffect(()=>{d(r?r.content:"")},[r]),_.useEffect(()=>{const U=navigator.deviceMemory&&navigator.deviceMemory<4,z=localStorage.getItem("codeCanvas_useMonacoEditor");h(z!==null?z==="true":!U)},[]),_.useEffect(()=>{if(t&&a)return(async()=>{var q;const z=await Un.isCollaborativeProject(t.id);x(z),z&&(await Un.joinProject(t.id,a.id,(l==null?void 0:l.username)||((q=a.email)==null?void 0:q.split("@")[0])||"Anonymous",(l==null?void 0:l.avatar_url)||null,k),r&&await Un.updateEditingFile(t.id,a.id,r.id))})(),()=>{m&&Un.leaveProject(t.id)}},[t,a]),_.useEffect(()=>{m&&t&&a&&r&&Un.updateEditingFile(t.id,a.id,r.id)},[r,m,t,a]);const P=U=>{var z;d(U),r&&(i(r.id,U),m&&t&&a&&l&&Un.broadcastFileChange(t.id,r.id,U,{userId:a.id,username:l.username||((z=a.email)==null?void 0:z.split("@")[0])||"Anonymous",avatarUrl:l.avatar_url}))},K=()=>{r&&s(r.id,c)},F=()=>{h(!u),localStorage.setItem("codeCanvas_useMonacoEditor",(!u).toString())},L=()=>{p(!f)},C=()=>{g(!b)},Z=()=>{B(!T)},W=async()=>{};return t?n.length===0?o.jsx(Za,{icon:"File",title:"No Files Open",message:"Open a file from the Explorer to start editing, or create a new file.",actionText:"Browse Files",actionPath:"/explorer"}):o.jsxs("div",{className:Hf.container,style:{backgroundColor:e.background},children:[m&&E.length>0&&o.jsx(ME,{}),o.jsx(rC,{}),o.jsx(G2,{onSave:K,onToggleEditor:F,onToggleDebugger:L,isDebuggerActive:f,onToggleChat:C,isChatActive:b&&m,isCollaborative:m,onFormat:W,onToggleAI:Z,isAIActive:T}),o.jsx("div",{className:Hf.editorContainer,children:r&&o.jsx(o.Fragment,{children:u?o.jsx(zy,{code:c,language:r.language,onChange:P,isCollaborative:m}):o.jsx(Ly,{code:c,language:r.language,onChange:P})})}),v&&o.jsx(IE,{}),m&&b&&o.jsx(hN,{})]}):o.jsx(Za,{icon:"FileCode",title:"No Project Open",message:"Open a project from your device or create a new one to start coding.",actionText:"Browse Projects",onAction:()=>{}})},gN="_container_kpe9c_1",yN="_header_kpe9c_8",xN="_title_kpe9c_15",vN="_inviteButton_kpe9c_27",bN="_section_kpe9c_39",_N="_sectionTitle_kpe9c_43",wN="_error_kpe9c_49",kN="_loading_kpe9c_60",SN="_inviteForm_kpe9c_67",jN="_formHeader_kpe9c_73",CN="_closeButton_kpe9c_86",EN="_inviteError_kpe9c_97",NN="_formGroup_kpe9c_102",TN="_inputWrapper_kpe9c_113",IN="_permissionOptions_kpe9c_132",AN="_radioLabel_kpe9c_137",PN="_formActions_kpe9c_145",RN="_cancelButton_kpe9c_152",FN="_submitButton_kpe9c_152",BN="_collaboratorList_kpe9c_169",ON="_inviteList_kpe9c_169",LN="_collaboratorItem_kpe9c_175",zN="_inviteItem_kpe9c_175",$N="_collaboratorInfo_kpe9c_184",DN="_inviteInfo_kpe9c_184",MN="_avatar_kpe9c_190",UN="_userInfo_kpe9c_206",HN="_username_kpe9c_211",WN="_permissionLabel_kpe9c_216",qN="_collaboratorActions_kpe9c_223",VN="_inviteActions_kpe9c_223",KN="_permissionDropdown_kpe9c_229",GN="_removeButton_kpe9c_237",JN="_cancelInviteButton_kpe9c_237",ZN="_emptyState_kpe9c_253",YN="_settingItem_kpe9c_260",QN="_settingInfo_kpe9c_269",XN="_settingLabel_kpe9c_273",eT="_settingDescription_kpe9c_279",tT="_slider_kpe9c_297",_e={container:gN,header:yN,title:xN,inviteButton:vN,section:bN,sectionTitle:_N,error:wN,loading:kN,inviteForm:SN,formHeader:jN,closeButton:CN,inviteError:EN,formGroup:NN,inputWrapper:TN,permissionOptions:IN,radioLabel:AN,formActions:PN,cancelButton:RN,submitButton:FN,collaboratorList:BN,inviteList:ON,collaboratorItem:LN,inviteItem:zN,collaboratorInfo:$N,inviteInfo:DN,avatar:MN,userInfo:UN,username:HN,permissionLabel:WN,collaboratorActions:qN,inviteActions:VN,permissionDropdown:KN,removeButton:GN,cancelInviteButton:JN,emptyState:ZN,settingItem:YN,settingInfo:QN,settingLabel:XN,settingDescription:eT,switch:"_switch_kpe9c_284",slider:tT},$y=()=>{const{colors:e}=ve(),{currentProject:t}=Xe(),{user:n,profile:r}=ht(),[s,i]=_.useState([]),[a,l]=_.useState([]),[c,d]=_.useState(!1),[u,h]=_.useState(!1),[f,p]=_.useState(!1),[v,y]=_.useState(!0),[b,g]=_.useState(null),m=_.useRef(null),[x,E]=_.useState(!1),[k,I]=_.useState(""),[R,T]=_.useState("read"),[B,P]=_.useState(!1),[K,F]=_.useState(null);_.useEffect(()=>{if(t&&n)return L(),C(),t.user_id===n.id&&d(!0),()=>{m.current&&m.current.unsubscribe()}},[t,n]);const L=async()=>{if(!(!t||!n)){y(!0);try{const{data:O,error:ie}=await we.from("project_collaborators").select(`
          id,
          permission,
          profiles:user_id (id, username, avatar_url)
        `).eq("project_id",t.id);if(ie)throw ie;const M=O.map(ce=>({id:ce.profiles.id,username:ce.profiles.username,avatar_url:ce.profiles.avatar_url,permission:ce.permission}));i(M);const Y=M.find(ce=>ce.id===n.id);h((Y==null?void 0:Y.permission)==="admin"||!1);const{data:$}=await we.from("projects").select("collaborators_can_invite").eq("id",t.id).single(),fe=($==null?void 0:$.collaborators_can_invite)||!1;p(c||(Y==null?void 0:Y.permission)==="admin"||fe&&(Y==null?void 0:Y.permission)==="write");const{data:me,error:te}=await we.from("collaboration_invites").select(`
          id,
          permission,
          status,
          created_at,
          invitee:invitee_id (id, username, avatar_url)
        `).eq("project_id",t.id).eq("status","pending");if(te)throw te;const de=me.map(ce=>({id:ce.id,invitee_id:ce.invitee.id,invitee_username:ce.invitee.username,invitee_avatar_url:ce.invitee.avatar_url,permission:ce.permission,status:ce.status,created_at:ce.created_at}));l(de)}catch(O){console.error("Error fetching collaborators:",O),g("Failed to load collaborators")}finally{y(!1)}}},C=()=>{if(!t)return;const O=we.channel("collaborators-changes").on("postgres_changes",{event:"*",schema:"public",table:"project_collaborators",filter:`project_id=eq.${t.id}`},()=>L()).on("postgres_changes",{event:"*",schema:"public",table:"collaboration_invites",filter:`project_id=eq.${t.id}`},()=>L()).subscribe();m.current=O},Z=async O=>{if(O.preventDefault(),!(!t||!n||!k.trim())){P(!0),F(null);try{const{data:ie,error:M}=await we.from("profiles").select("id").eq("email",k).single();if(M){F("User not found with that email");return}const{data:Y}=await we.from("project_collaborators").select("id").eq("project_id",t.id).eq("user_id",ie.id).single();if(Y){F("This user is already a collaborator on this project");return}const{data:$}=await we.from("collaboration_invites").select("id").eq("project_id",t.id).eq("invitee_id",ie.id).eq("status","pending").single();if($){F("An invitation has already been sent to this user");return}const{error:fe}=await we.from("collaboration_invites").insert({project_id:t.id,inviter_id:n.id,invitee_id:ie.id,permission:R});if(fe)throw fe;I(""),E(!1),L()}catch(ie){console.error("Error sending invitation:",ie),F(ie.message)}finally{P(!1)}}},W=async O=>{if(!(!t||!n))try{const{error:ie}=await we.from("collaboration_invites").delete().eq("id",O);if(ie)throw ie;L()}catch(ie){console.error("Error canceling invitation:",ie),g(ie.message||"An unexpected error occurred")}},U=async O=>{if(!(!t||!n||!f))try{const{error:ie}=await we.from("project_collaborators").delete().eq("project_id",t.id).eq("user_id",O);if(ie)throw ie;L()}catch(ie){console.error("Error removing collaborator:",ie),g(ie.message||"An unexpected error occurred")}},z=async(O,ie)=>{if(!(!t||!n||!f))try{const{error:M}=await we.from("project_collaborators").update({permission:ie}).eq("project_id",t.id).eq("user_id",O);if(M)throw M;L()}catch(M){console.error("Error changing permission:",M),g(M.message||"An unexpected error occurred")}},q=async()=>{if(!(!t||!c))try{const{data:O}=await we.from("projects").select("collaborators_can_invite").eq("id",t.id).single(),ie=(O==null?void 0:O.collaborators_can_invite)||!1,{error:M}=await we.from("projects").update({collaborators_can_invite:!ie}).eq("id",t.id);if(M)throw M;L()}catch(O){console.error("Error updating project settings:",O),g(O.message||"An unexpected error occurred")}},re=O=>{switch(O){case"admin":return o.jsx(Fw,{size:14,color:e.warning});case"write":return o.jsx(Il,{size:14,color:e.primary});case"read":default:return o.jsx(Cl,{size:14,color:e.textSecondary})}},H=O=>{switch(O){case"admin":return"Admin";case"write":return"Can edit";case"read":default:return"Can view"}};return!t||!n?null:o.jsxs("div",{className:_e.container,children:[o.jsxs("div",{className:_e.header,children:[o.jsxs("div",{className:_e.title,children:[o.jsx(Js,{size:16,color:e.primary}),o.jsx("h3",{style:{color:e.text},children:"Collaborators"})]}),f&&o.jsxs("button",{className:_e.inviteButton,onClick:()=>E(!0),style:{backgroundColor:e.primary,color:"white",display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"20px",border:"none",marginLeft:"auto"},children:[o.jsx(Uw,{size:14,color:"#FFFFFF"}),o.jsx("span",{children:"Invite"})]})]}),b&&o.jsxs("div",{className:_e.error,style:{color:e.error},children:[o.jsx(Bn,{size:14}),o.jsx("span",{children:b})]}),x&&o.jsxs("div",{className:_e.inviteForm,style:{backgroundColor:`${e.primary}10`},children:[o.jsxs("div",{className:_e.formHeader,children:[o.jsx("h4",{style:{color:e.text},children:"Invite Collaborator"}),o.jsx("button",{className:_e.closeButton,onClick:()=>E(!1),children:o.jsx(st,{size:14,color:e.textSecondary})})]}),K&&o.jsx("div",{className:_e.inviteError,style:{color:e.error},children:K}),o.jsxs("form",{onSubmit:Z,children:[o.jsxs("div",{className:_e.formGroup,children:[o.jsx("label",{style:{color:e.textSecondary},children:"Email"}),o.jsxs("div",{className:_e.inputWrapper,style:{backgroundColor:e.background,borderColor:e.border},children:[o.jsx(Nl,{size:14,color:e.textSecondary}),o.jsx("input",{type:"email",value:k,onChange:O=>I(O.target.value),placeholder:"Collaborator's email",required:!0,style:{color:e.text}})]})]}),o.jsxs("div",{className:_e.formGroup,children:[o.jsx("label",{style:{color:e.textSecondary},children:"Permission"}),o.jsxs("div",{className:_e.permissionOptions,children:[o.jsxs("label",{className:_e.radioLabel,children:[o.jsx("input",{type:"radio",name:"permission",value:"read",checked:R==="read",onChange:()=>T("read")}),o.jsx("span",{style:{color:e.text},children:"View"})]}),o.jsxs("label",{className:_e.radioLabel,children:[o.jsx("input",{type:"radio",name:"permission",value:"write",checked:R==="write",onChange:()=>T("write")}),o.jsx("span",{style:{color:e.text},children:"Edit"})]}),(c||u)&&o.jsxs("label",{className:_e.radioLabel,children:[o.jsx("input",{type:"radio",name:"permission",value:"admin",checked:R==="admin",onChange:()=>T("admin")}),o.jsx("span",{style:{color:e.text},children:"Admin"})]})]})]}),o.jsxs("div",{className:_e.formActions,children:[o.jsx("button",{type:"button",className:_e.cancelButton,onClick:()=>E(!1),style:{borderColor:e.border,color:e.text},children:"Cancel"}),o.jsx("button",{type:"submit",className:_e.submitButton,disabled:B||!k.trim(),style:{backgroundColor:e.primary,opacity:B||!k.trim()?.7:1},children:B?"Sending...":"Send Invite"})]})]})]}),v?o.jsx("div",{className:_e.loading,style:{color:e.textSecondary},children:"Loading collaborators..."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:_e.section,children:[o.jsx("h4",{className:_e.sectionTitle,style:{color:e.text},children:"People with access"}),o.jsxs("div",{className:_e.collaboratorList,children:[o.jsx("div",{className:_e.collaboratorItem,children:o.jsxs("div",{className:_e.collaboratorInfo,children:[o.jsx("div",{className:_e.avatar,style:{backgroundColor:`${e.primary}30`},children:t.user_id===n.id?r!=null&&r.avatar_url?o.jsx("img",{src:r.avatar_url,alt:r.username||"Owner"}):o.jsx(Ut,{size:16,color:e.primary}):o.jsx(Ut,{size:16,color:e.primary})}),o.jsxs("div",{className:_e.userInfo,children:[o.jsx("div",{className:_e.username,style:{color:e.text},children:t.user_id===n.id?(r==null?void 0:r.username)||"You":"Project Owner"}),o.jsxs("div",{className:_e.permissionLabel,children:[o.jsx(Bw,{size:12,color:e.success}),o.jsx("span",{style:{color:e.success},children:"Owner"})]})]})]})}),s.length>0?s.map(O=>o.jsxs("div",{className:_e.collaboratorItem,children:[o.jsxs("div",{className:_e.collaboratorInfo,children:[o.jsx("div",{className:_e.avatar,style:{backgroundColor:`${e.primary}30`},children:O.avatar_url?o.jsx("img",{src:O.avatar_url,alt:O.username||"User"}):o.jsx(Ut,{size:16,color:e.primary})}),o.jsxs("div",{className:_e.userInfo,children:[o.jsxs("div",{className:_e.username,style:{color:e.text},children:[O.username||"Unnamed User",O.id===n.id?" (You)":""]}),o.jsxs("div",{className:_e.permissionLabel,children:[re(O.permission),o.jsx("span",{style:{color:O.permission==="admin"?e.warning:O.permission==="write"?e.primary:e.textSecondary},children:H(O.permission)})]})]})]}),(c||u||O.id===n.id)&&o.jsxs("div",{className:_e.collaboratorActions,children:[(c||u)&&O.id!==n.id&&o.jsx("div",{className:_e.permissionDropdown,children:o.jsxs("select",{value:O.permission,onChange:ie=>z(O.id,ie.target.value),style:{borderColor:e.border,color:e.text,backgroundColor:e.background},children:[o.jsx("option",{value:"read",children:"View"}),o.jsx("option",{value:"write",children:"Edit"}),o.jsx("option",{value:"admin",children:"Admin"})]})}),(c||u||O.id===n.id)&&O.id!==n.id&&o.jsx("button",{className:_e.removeButton,onClick:()=>U(O.id),title:"Remove collaborator",children:o.jsx(co,{size:14,color:e.error})})]})]},O.id)):o.jsx("div",{className:_e.emptyState,style:{color:e.textSecondary},children:"No collaborators yet"})]})]}),a.length>0&&o.jsxs("div",{className:_e.section,children:[o.jsx("h4",{className:_e.sectionTitle,style:{color:e.text},children:"Pending Invitations"}),o.jsx("div",{className:_e.inviteList,children:a.map(O=>o.jsxs("div",{className:_e.inviteItem,children:[o.jsxs("div",{className:_e.inviteInfo,children:[o.jsx("div",{className:_e.avatar,style:{backgroundColor:`${e.primary}30`},children:O.invitee_avatar_url?o.jsx("img",{src:O.invitee_avatar_url,alt:O.invitee_username||"User"}):o.jsx(Ut,{size:16,color:e.primary})}),o.jsxs("div",{className:_e.userInfo,children:[o.jsx("div",{className:_e.username,style:{color:e.text},children:O.invitee_username||"Unnamed User"}),o.jsxs("div",{className:_e.permissionLabel,children:[re(O.permission),o.jsxs("span",{style:{color:O.permission==="admin"?e.warning:O.permission==="write"?e.primary:e.textSecondary},children:[H(O.permission)," (Pending)"]})]})]})]}),o.jsx("div",{className:_e.inviteActions,children:o.jsxs("button",{className:_e.cancelInviteButton,onClick:()=>W(O.id),title:"Cancel invitation",children:[o.jsx(st,{size:14,color:e.error}),o.jsx("span",{children:"Cancel"})]})})]},O.id))})]}),c&&o.jsxs("div",{className:_e.section,children:[o.jsx("h4",{className:_e.sectionTitle,style:{color:e.text},children:"Collaboration Settings"}),o.jsxs("div",{className:_e.settingItem,children:[o.jsxs("div",{className:_e.settingInfo,children:[o.jsx("div",{className:_e.settingLabel,style:{color:e.text},children:"Collaborators can invite others"}),o.jsx("div",{className:_e.settingDescription,style:{color:e.textSecondary},children:"Allow collaborators with edit access to invite others"})]}),o.jsx("div",{className:_e.settingControl,children:o.jsxs("label",{className:_e.switch,children:[o.jsx("input",{type:"checkbox",checked:f&&!c&&!u,onChange:q}),o.jsx("span",{className:_e.slider,style:{backgroundColor:f&&!c&&!u?e.primary:e.border}})]})})]})]})]})]})},nT="_container_qgafj_1",rT="_projectInfo_qgafj_14",sT="_folderIcon_qgafj_22",oT="_projectName_qgafj_27",iT="_publicBadge_qgafj_36",aT="_title_qgafj_47",lT="_browseButton_qgafj_54",cT="_menuButton_qgafj_66",dT="_menuDropdown_qgafj_78",uT="_menuItem_qgafj_91",hT="_menuItemIcon_qgafj_107",fT="_collaboratorsPanel_qgafj_112",pT="_collaboratorsHeader_qgafj_121",mT="_closeButton_qgafj_135",gT="_collaboratorsContent_qgafj_152",Ye={container:nT,projectInfo:rT,folderIcon:sT,projectName:oT,publicBadge:iT,title:aT,browseButton:lT,menuButton:cT,menuDropdown:dT,menuItem:uT,menuItemIcon:hT,collaboratorsPanel:fT,collaboratorsHeader:pT,closeButton:mT,collaboratorsContent:gT},yT=({openBrowser:e})=>{const{colors:t}=ve(),{currentProject:n,selectProject:r,exportProject:s,togglePublic:i,syncWithServer:a}=Xe(),[l,c]=_.useState(!1),[d,u]=_.useState(!1),h=()=>{n&&(r(""),c(!1))},f=async()=>{if(n)try{const b=await s();alert(`Project exported to ${b}`)}catch(b){console.error("Error exporting project:",b),alert("Failed to export project")}c(!1)},p=async()=>{if(n)try{await i()}catch(b){console.error("Error toggling project visibility:",b),alert("Failed to update project visibility")}c(!1)},v=()=>{c(!l)},y=()=>{u(!d),c(!1)};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:Ye.container,style:{backgroundColor:t.surface,borderBottomColor:t.border},children:n?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:Ye.projectInfo,children:[o.jsx(Tr,{size:16,color:t.primary,className:Ye.folderIcon}),o.jsx("span",{className:Ye.projectName,style:{color:t.text},children:n.name}),n.is_public&&o.jsxs("span",{className:Ye.publicBadge,style:{backgroundColor:`${t.primary}20`,color:t.primary},children:[o.jsx(Va,{size:10}),o.jsx("span",{children:"Public"})]})]}),o.jsx("button",{className:Ye.menuButton,onClick:v,"aria-label":"Project menu",children:o.jsx(Tl,{size:20,color:t.textSecondary})}),l&&o.jsxs("div",{className:Ye.menuDropdown,style:{backgroundColor:t.surface,borderColor:t.border},children:[o.jsxs("button",{className:Ye.menuItem,onClick:y,children:[o.jsx(Js,{size:16,color:t.text,className:Ye.menuItemIcon}),o.jsx("span",{style:{color:t.text},children:"Manage Collaborators"})]}),o.jsx("button",{className:Ye.menuItem,onClick:p,children:n.is_public?o.jsxs(o.Fragment,{children:[o.jsx(ss,{size:16,color:t.text,className:Ye.menuItemIcon}),o.jsx("span",{style:{color:t.text},children:"Make Private"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Va,{size:16,color:t.text,className:Ye.menuItemIcon}),o.jsx("span",{style:{color:t.text},children:"Make Public"})]})}),o.jsxs("button",{className:Ye.menuItem,onClick:h,children:[o.jsx(ny,{size:16,color:t.text,className:Ye.menuItemIcon}),o.jsx("span",{style:{color:t.text},children:"Close Project"})]}),o.jsxs("button",{className:Ye.menuItem,onClick:f,children:[o.jsx(lo,{size:16,color:t.text,className:Ye.menuItemIcon}),o.jsx("span",{style:{color:t.text},children:"Export Project"})]}),o.jsxs("button",{className:Ye.menuItem,children:[o.jsx(Rw,{size:16,color:t.text,className:Ye.menuItemIcon}),o.jsx("span",{style:{color:t.text},children:"Share Project"})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:Ye.title,style:{color:t.text},children:"Projects"}),e&&o.jsx("button",{className:Ye.browseButton,onClick:e,children:o.jsx(ao,{size:18,color:t.primary})})]})}),d&&o.jsxs("div",{className:Ye.collaboratorsPanel,style:{backgroundColor:t.surface,borderBottomColor:t.border},children:[o.jsxs("div",{className:Ye.collaboratorsHeader,children:[o.jsx("h3",{style:{color:t.text},children:"Collaborators"}),o.jsx("button",{className:Ye.closeButton,onClick:y,children:o.jsx(st,{size:16,color:t.textSecondary})})]}),o.jsx("div",{className:Ye.collaboratorsContent,children:o.jsx($y,{})})]})]})},xT="_container_1fi0p_1",vT="_dropTarget_1fi0p_11",bT="_fileTreeHeader_1fi0p_15",_T="_fileTreeTitle_1fi0p_27",wT="_fileTreeActions_1fi0p_33",kT="_fileTreeAction_1fi0p_33",ST="_fileItem_1fi0p_55",jT="_dragging_1fi0p_72",CT="_dragOver_1fi0p_76",ET="_fileIcon_1fi0p_80",NT="_fileTypeIcon_1fi0p_88",TT="_fileName_1fi0p_95",IT="_fileActions_1fi0p_104",AT="_actionButton_1fi0p_116",PT="_contextMenu_1fi0p_133",RT="_contextMenuItem_1fi0p_142",FT="_divider_1fi0p_158",BT="_contextMenuIcon_1fi0p_164",OT="_rootContextMenu_1fi0p_170",LT="_rootContextMenuItem_1fi0p_177",zT="_modalOverlay_1fi0p_194",$T="_modalContent_1fi0p_208",DT="_modalTitle_1fi0p_217",MT="_modalMessage_1fi0p_224",UT="_modalInput_1fi0p_228",HT="_modalButtons_1fi0p_238",WT="_cancelButton_1fi0p_244",qT="_confirmButton_1fi0p_244",Te={container:xT,dropTarget:vT,fileTreeHeader:bT,fileTreeTitle:_T,fileTreeActions:wT,fileTreeAction:kT,fileItem:ST,dragging:jT,dragOver:CT,fileIcon:ET,fileTypeIcon:NT,fileName:TT,fileActions:IT,actionButton:AT,contextMenu:PT,contextMenuItem:RT,divider:FT,contextMenuIcon:BT,rootContextMenu:OT,rootContextMenuItem:LT,modalOverlay:zT,modalContent:$T,modalTitle:DT,modalMessage:MT,modalInput:UT,modalButtons:HT,cancelButton:WT,confirmButton:qT},VT=({isOpen:e,title:t,message:n,confirmLabel:r,cancelLabel:s,onConfirm:i,onCancel:a})=>{const{colors:l}=ve();return e?o.jsx("div",{className:Te.modalOverlay,children:o.jsxs("div",{className:Te.modalContent,style:{backgroundColor:l.surface,borderColor:l.border},children:[o.jsx("h3",{className:Te.modalTitle,style:{color:l.text},children:t}),o.jsx("p",{className:Te.modalMessage,style:{color:l.textSecondary},children:n}),o.jsxs("div",{className:Te.modalButtons,children:[o.jsx("button",{className:Te.cancelButton,onClick:a,style:{borderColor:l.border,color:l.text},children:s}),o.jsx("button",{className:Te.confirmButton,onClick:i,style:{backgroundColor:l.error,color:"#FFF"},children:r})]})]})}):null},KT=({isOpen:e,fileId:t,currentName:n,onRename:r,onCancel:s})=>{const{colors:i}=ve(),[a,l]=_.useState(n),c=_.useRef(null);if(_.useEffect(()=>{if(e&&c.current){c.current.focus();const u=n.lastIndexOf(".");u>0?c.current.setSelectionRange(0,u):c.current.select()}},[e,n]),!e)return null;const d=u=>{u.preventDefault(),a&&a!==n?r(t,a):s()};return o.jsx("div",{className:Te.modalOverlay,children:o.jsxs("div",{className:Te.modalContent,style:{backgroundColor:i.surface,borderColor:i.border},children:[o.jsx("h3",{className:Te.modalTitle,style:{color:i.text},children:"Rename"}),o.jsxs("form",{onSubmit:d,children:[o.jsx("input",{ref:c,type:"text",className:Te.modalInput,value:a,onChange:u=>l(u.target.value),style:{backgroundColor:i.background,color:i.text,borderColor:i.border}}),o.jsxs("div",{className:Te.modalButtons,children:[o.jsx("button",{type:"button",className:Te.cancelButton,onClick:s,style:{borderColor:i.border,color:i.text},children:"Cancel"}),o.jsx("button",{type:"submit",className:Te.confirmButton,style:{backgroundColor:i.primary,color:"#FFF"},children:"Rename"})]})]})]})})},Dy=({file:e,level:t,selectedFileId:n,onSelect:r,onDragStart:s,onDragOver:i,onDrop:a})=>{var Q;const{colors:l}=ve(),{fileTree:c,openFile:d,createNewFile:u,createNewFolder:h,deleteFile:f,renameFile:p,copyFile:v,pasteFile:y,clipboard:b}=Xe(),[g,m]=_.useState(!0),[x,E]=_.useState(null),[k,I]=_.useState(!1),[R,T]=_.useState(!1),[B,P]=_.useState(!1),[K,F]=_.useState(!1),L=e.type==="directory",C=L&&e.children&&e.children.length>0,Z=n===e.id,W=()=>{m(!g)},U=N=>{L?W():d(e),r(e.id,N)},z=()=>{const N=setTimeout(()=>{r(e.id,{})},500);E(N)},q=()=>{x&&(clearTimeout(x),E(null))},re=()=>{T(!0)},H=async(N,j)=>{try{await p(N,j),T(!1),r("",{})}catch(w){console.error("Error renaming file:",w),alert(`Error renaming file: ${w}`)}},O=()=>{I(!0)},ie=async()=>{try{await f(e.id),I(!1),r("",{})}catch(N){console.error("Error deleting file:",N),alert(`Error deleting file: ${N}`)}},M=()=>{v(e.id),r("",{})},Y=async()=>{L&&(await y(e.id),r("",{}))},$=async()=>{if(L){const N=prompt("Enter new file name:");N&&(await u(N,e.id),m(!0)),r("",{})}},fe=async()=>{if(L){const N=prompt("Enter new folder name:");N&&(await h(N,e.id),m(!0)),r("",{})}},me=N=>{P(!0),N.stopPropagation(),s(e,N)},te=N=>{N.preventDefault(),N.stopPropagation(),L&&(F(!0),i(e,N))},de=N=>{N.preventDefault(),N.stopPropagation(),F(!1)},ce=N=>{N.preventDefault(),N.stopPropagation(),F(!1),L&&(a(e,N),m(!0))},ye=()=>{P(!1)},ge=()=>{const N=[{id:"rename",label:"Rename",icon:Il,action:re},{id:"copy",label:"Copy",icon:Nr,action:M}];return L&&b&&N.push({id:"paste",label:"Paste",icon:qa,action:Y}),L&&N.push({id:"divider1",label:"",icon:()=>null,action:()=>{},divider:!0},{id:"newFile",label:"New File",icon:Wr,action:$},{id:"newFolder",label:"New Folder",icon:Pn,action:fe}),N.push({id:"divider2",label:"",icon:()=>null,action:()=>{},divider:!0},{id:"delete",label:"Delete",icon:co,action:O}),N},S=t*12;return o.jsxs("div",{children:[o.jsxs("div",{className:`${Te.fileItem} ${K?Te.dragOver:""} ${B?Te.dragging:""}`,style:{paddingLeft:16+S,backgroundColor:Z?l.selectedItem:K?`${l.primary}15`:"transparent",borderColor:K?l.primary:"transparent"},onClick:U,onContextMenu:N=>{N.preventDefault(),r(e.id,N)},onTouchStart:z,onTouchEnd:q,draggable:!0,onDragStart:me,onDragOver:te,onDragLeave:de,onDrop:ce,onDragEnd:ye,"data-file-id":e.id,children:[o.jsx("div",{className:Te.fileIcon,children:L?C?g?o.jsx(Or,{size:14,color:l.textSecondary}):o.jsx(xt,{size:14,color:l.textSecondary}):o.jsx("div",{style:{width:14}}):o.jsx("div",{style:{width:14}})}),o.jsx("div",{className:Te.fileTypeIcon,children:L?g?o.jsx(ao,{size:16,color:"#FFCA28"}):o.jsx(Tr,{size:16,color:"#FFCA28"}):o.jsx(rs,{size:16,color:l.primary})}),o.jsx("span",{className:Te.fileName,style:{color:Z?l.textHighlight:l.text},children:e.name}),o.jsx("div",{className:Te.fileActions,children:o.jsx("button",{className:Te.actionButton,onClick:N=>{N.stopPropagation(),r(e.id,N)},children:o.jsx(Tl,{size:14,color:l.textSecondary})})})]}),Z&&o.jsx("div",{className:Te.contextMenu,style:{marginLeft:16+S,backgroundColor:l.surface,borderColor:l.border},onClick:N=>N.stopPropagation(),children:ge().map(N=>N.divider?o.jsx("div",{className:Te.divider,style:{backgroundColor:l.border}},N.id):o.jsxs("button",{className:Te.contextMenuItem,onClick:j=>{j.stopPropagation(),N.action()},children:[o.jsx(N.icon,{size:16,color:l.text,className:Te.contextMenuIcon}),o.jsx("span",{style:{color:l.text},children:N.label})]},N.id))}),L&&g&&C&&o.jsx("div",{children:(Q=e.children)==null?void 0:Q.map(N=>{const j=c.find(w=>w.id===N);return j?o.jsx(Dy,{file:j,level:t+1,selectedFileId:n,onSelect:r,onDragStart:s,onDragOver:i,onDrop:a},j.id):null})}),o.jsx(VT,{isOpen:k,title:"Confirm Delete",message:`Are you sure you want to delete "${e.name}"${L?" and all its contents":""}? This action cannot be undone.`,confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:ie,onCancel:()=>I(!1)}),o.jsx(KT,{isOpen:R,fileId:e.id,currentName:e.name,onRename:H,onCancel:()=>T(!1)})]})},GT=()=>{const{colors:e}=ve(),{fileTree:t,pasteFile:n,clipboard:r,createNewFile:s,createNewFolder:i}=Xe(),[a,l]=_.useState(null),[c,d]=_.useState(null),[u,h]=_.useState(!1),f=t.filter(T=>!t.some(B=>{var P;return B.type==="directory"&&((P=B.children)==null?void 0:P.includes(T.id))})),p=T=>{T.target.className===Te.container&&l(null)},v=async()=>{r&&(await n(),l(null))},y=(T,B)=>{(B.button===2||B.type==="contextmenu"||!a)&&l(T===a?null:T)},b=(T,B)=>{d(T),B.dataTransfer.effectAllowed="move",B.dataTransfer.setData("application/json",JSON.stringify({id:T.id,type:T.type,name:T.name}))},g=T=>{T.preventDefault(),T.dataTransfer.dropEffect="move",h(!0)},m=T=>{T.preventDefault(),h(!1)},x=async T=>{T.preventDefault(),h(!1),c&&console.log("Move file to root:",c.name),d(null)},E=(T,B)=>{B.preventDefault(),B.dataTransfer.dropEffect="move"},k=async(T,B)=>{B.preventDefault(),c&&T.id!==c.id&&T.type==="directory"&&console.log(`Move ${c.name} to ${T.name}`),d(null)},I=async()=>{const T=prompt("Enter new file name:");T&&await s(T)},R=async()=>{const T=prompt("Enter new folder name:");T&&await i(T)};return o.jsxs("div",{className:`${Te.container} ${u?Te.dropTarget:""}`,onClick:p,onDragOver:g,onDragLeave:m,onDrop:x,style:{borderColor:u?e.primary:"transparent"},children:[o.jsxs("div",{className:Te.fileTreeHeader,children:[o.jsx("h3",{className:Te.fileTreeTitle,style:{color:e.text},children:"Explorer"}),o.jsxs("div",{className:Te.fileTreeActions,children:[o.jsx("button",{className:Te.fileTreeAction,onClick:I,title:"New File",children:o.jsx(Wr,{size:16,color:e.textSecondary})}),o.jsx("button",{className:Te.fileTreeAction,onClick:R,title:"New Folder",children:o.jsx(Pn,{size:16,color:e.textSecondary})})]})]}),f.map(T=>o.jsx(Dy,{file:T,level:0,selectedFileId:a,onSelect:y,onDragStart:b,onDragOver:E,onDrop:k},T.id)),a===null&&r&&o.jsx("div",{className:Te.rootContextMenu,children:o.jsxs("button",{className:Te.rootContextMenuItem,onClick:v,style:{backgroundColor:e.surface,color:e.text,borderColor:e.border},children:[o.jsx(qa,{size:16,color:e.text,className:Te.contextMenuIcon}),o.jsx("span",{children:"Paste"})]})})]})},JT="_fileItem_105ba_1",ZT="_selected_105ba_17",YT="_dragOver_105ba_21",QT="_fileIcon_105ba_25",XT="_fileTypeIcon_105ba_33",eI="_fileName_105ba_40",tI="_moreButton_105ba_49",$r={fileItem:JT,selected:ZT,dragOver:YT,fileIcon:QT,fileTypeIcon:XT,fileName:eI,moreButton:tI},nI=({file:e,level:t,selected:n,expanded:r,onSelect:s,onToggleExpand:i,onOpen:a,onContextMenu:l,onDragStart:c,onDragOver:d,onDragEnd:u,onDrop:h})=>{const{colors:f}=ve(),[p,v]=_.useState(!1),y=_.useRef(null),b=t*12,g=e.type==="directory",m=g&&e.children&&e.children.length>0,x=T=>{g?i(e.id):a(e),s(e.id,T)},E=T=>{if(T.stopPropagation(),c(T,e),T.dataTransfer.setDragImage&&y.current){const B=y.current.getBoundingClientRect(),P=T.clientX-B.left;T.dataTransfer.setDragImage(y.current,P,10)}},k=T=>{T.preventDefault(),T.stopPropagation(),g&&(T.dataTransfer.dropEffect="move",v(!0),d(T,e))},I=()=>{v(!1)},R=T=>{T.preventDefault(),T.stopPropagation(),v(!1),g&&h(T,e)};return o.jsxs("div",{ref:y,className:`${$r.fileItem} ${n?$r.selected:""} ${p?$r.dragOver:""}`,style:{paddingLeft:16+b,backgroundColor:n?f.selectedItem:p?`${f.primary}15`:"transparent",borderColor:p?f.primary:"transparent"},onClick:x,onContextMenu:T=>l(e,T),draggable:!0,onDragStart:E,onDragOver:k,onDragLeave:I,onDragEnd:u,onDrop:R,"data-file-id":e.id,children:[o.jsx("div",{className:$r.fileIcon,children:g?m?r?o.jsx(Or,{size:14,color:f.textSecondary}):o.jsx(xt,{size:14,color:f.textSecondary}):o.jsx("div",{style:{width:14}}):o.jsx("div",{style:{width:14}})}),o.jsx("div",{className:$r.fileTypeIcon,children:g?r?o.jsx(ao,{size:16,color:"#FFCA28"}):o.jsx(Tr,{size:16,color:"#FFCA28"}):o.jsx(rs,{size:16,color:f.primary})}),o.jsx("span",{className:$r.fileName,style:{color:n?f.textHighlight:f.text},children:e.name}),o.jsx("button",{className:$r.moreButton,onClick:T=>{T.stopPropagation(),l(e,T)},children:o.jsx(Tl,{size:14,color:f.textSecondary})})]})},rI="_overlay_7wycf_1",sI="_dialog_7wycf_15",oI="_header_7wycf_25",iI="_title_7wycf_33",aI="_closeButton_7wycf_39",lI="_errorBox_7wycf_54",cI="_fileTypeIcon_7wycf_68",dI="_parentPath_7wycf_74",uI="_inputContainer_7wycf_81",hI="_input_7wycf_81",fI="_actions_7wycf_99",pI="_cancelButton_7wycf_105",mI="_createButton_7wycf_105",Gt={overlay:rI,dialog:sI,header:oI,title:iI,closeButton:aI,errorBox:lI,fileTypeIcon:cI,parentPath:dI,inputContainer:uI,input:hI,actions:fI,cancelButton:pI,createButton:mI},My=({isOpen:e,fileType:t,parentPath:n,onClose:r,onCreateFile:s})=>{const{colors:i}=ve(),[a,l]=_.useState(""),[c,d]=_.useState(!1),[u,h]=_.useState(null),f=_.useRef(null);_.useEffect(()=>{e&&f.current&&f.current.focus()},[e]),_.useEffect(()=>{e&&(l(""),h(null),d(!1))},[e]);const p=async v=>{if(v.preventDefault(),!a.trim()){h(`Please enter a ${t} name`);return}if(a.includes("/")||a.includes("\\")){h("Name cannot contain / or \\ characters");return}d(!0),h(null);try{await s(a,t,n),r()}catch(y){h(y.message||`Failed to create ${t}`)}finally{d(!1)}};return e?o.jsx("div",{className:Gt.overlay,children:o.jsxs("div",{className:Gt.dialog,style:{backgroundColor:i.surface,borderColor:i.border},children:[o.jsxs("div",{className:Gt.header,children:[o.jsxs("h3",{className:Gt.title,style:{color:i.text},children:["New ",t==="file"?"File":"Folder"]}),o.jsx("button",{className:Gt.closeButton,onClick:r,"aria-label":"Close dialog",children:o.jsx(st,{size:18,color:i.textSecondary})})]}),u&&o.jsx("div",{className:Gt.errorBox,style:{backgroundColor:`${i.error}15`,color:i.error},children:u}),o.jsxs("form",{onSubmit:p,children:[o.jsx("div",{className:Gt.fileTypeIcon,children:t==="file"?o.jsx(rs,{size:32,color:i.primary}):o.jsx(Tr,{size:32,color:"#FFCA28"})}),n&&o.jsxs("div",{className:Gt.parentPath,style:{color:i.textSecondary},children:["Location: ",n||"root"]}),o.jsx("div",{className:Gt.inputContainer,children:o.jsx("input",{ref:f,type:"text",className:Gt.input,placeholder:t==="file"?"Enter file name":"Enter folder name",value:a,onChange:v=>l(v.target.value),style:{borderColor:i.border,backgroundColor:i.background,color:i.text}})}),o.jsxs("div",{className:Gt.actions,children:[o.jsx("button",{type:"button",className:Gt.cancelButton,onClick:r,disabled:c,style:{borderColor:i.border,color:i.text},children:"Cancel"}),o.jsx("button",{type:"submit",className:Gt.createButton,disabled:c||!a.trim(),style:{backgroundColor:i.primary,opacity:c||!a.trim()?.7:1},children:c?"Creating...":"Create"})]})]})]})}):null},gI="_overlay_1njxk_1",yI="_dialog_1njxk_15",xI="_header_1njxk_31",vI="_icon_1njxk_38",bI="_title_1njxk_43",_I="_content_1njxk_49",wI="_message_1njxk_53",kI="_actions_1njxk_59",SI="_button_1njxk_67",jI="_cancelButton_1njxk_76",CI="_confirmButton_1njxk_81",nn={overlay:gI,dialog:yI,header:xI,icon:vI,title:bI,content:_I,message:wI,actions:kI,button:SI,cancelButton:jI,confirmButton:CI},EI=({isOpen:e,title:t,message:n,confirmLabel:r,cancelLabel:s,onConfirm:i,onCancel:a,isDangerous:l=!1})=>{const{colors:c}=ve();return e?o.jsx("div",{className:nn.overlay,children:o.jsxs("div",{className:nn.dialog,style:{backgroundColor:c.surface,borderColor:c.border},children:[o.jsxs("div",{className:nn.header,style:{borderBottomColor:c.border},children:[o.jsx(Bn,{size:20,color:l?c.error:c.warning,className:nn.icon}),o.jsx("h3",{className:nn.title,style:{color:c.text},children:t})]}),o.jsx("div",{className:nn.content,children:o.jsx("p",{className:nn.message,style:{color:c.textSecondary},children:n})}),o.jsxs("div",{className:nn.actions,style:{borderTopColor:c.border},children:[o.jsx("button",{className:`${nn.button} ${nn.cancelButton}`,onClick:a,style:{borderColor:c.border,color:c.text},children:s}),o.jsx("button",{className:`${nn.button} ${nn.confirmButton}`,onClick:i,style:{backgroundColor:l?c.error:c.primary},children:r})]})]})}):null},NI="_overlay_1pktx_1",TI="_dialog_1pktx_15",II="_header_1pktx_29",AI="_icon_1pktx_36",PI="_title_1pktx_40",RI="_errorBox_1pktx_46",FI="_inputContainer_1pktx_57",BI="_label_1pktx_61",OI="_input_1pktx_57",LI="_actions_1pktx_81",zI="_cancelButton_1pktx_87",$I="_renameButton_1pktx_87",rn={overlay:NI,dialog:TI,header:II,icon:AI,title:PI,errorBox:RI,inputContainer:FI,label:BI,input:OI,actions:LI,cancelButton:zI,renameButton:$I},DI=({isOpen:e,currentName:t,onRename:n,onCancel:r})=>{const{colors:s}=ve(),[i,a]=_.useState(t),[l,c]=_.useState(null),[d,u]=_.useState(!1),h=_.useRef(null);_.useEffect(()=>{e&&(a(t),c(null),u(!1),setTimeout(()=>{if(h.current){h.current.focus();const p=t.lastIndexOf(".");p>0?h.current.setSelectionRange(0,p):h.current.select()}},100))},[e,t]);const f=async p=>{if(p.preventDefault(),!i.trim()){c("Name cannot be empty");return}if(i===t){r();return}if(i.includes("/")||i.includes("\\")){c("Name cannot contain / or \\ characters");return}c(null),u(!0);try{await n(i)}catch(v){c(v.message||"Failed to rename"),u(!1)}};return e?o.jsx("div",{className:rn.overlay,children:o.jsxs("div",{className:rn.dialog,style:{backgroundColor:s.surface,borderColor:s.border},children:[o.jsxs("div",{className:rn.header,children:[o.jsx(Il,{size:18,color:s.primary,className:rn.icon}),o.jsx("h3",{className:rn.title,style:{color:s.text},children:"Rename"})]}),l&&o.jsx("div",{className:rn.errorBox,style:{backgroundColor:`${s.error}15`,color:s.error},children:l}),o.jsxs("form",{onSubmit:f,children:[o.jsxs("div",{className:rn.inputContainer,children:[o.jsx("label",{htmlFor:"rename-input",className:rn.label,style:{color:s.textSecondary},children:"New name:"}),o.jsx("input",{id:"rename-input",ref:h,type:"text",className:rn.input,value:i,onChange:p=>a(p.target.value),style:{borderColor:s.border,backgroundColor:s.background,color:s.text}})]}),o.jsxs("div",{className:rn.actions,children:[o.jsx("button",{type:"button",className:rn.cancelButton,onClick:r,disabled:d,style:{borderColor:s.border,color:s.text},children:"Cancel"}),o.jsx("button",{type:"submit",className:rn.renameButton,disabled:d||!i.trim()||i===t,style:{backgroundColor:s.primary,opacity:d||!i.trim()||i===t?.7:1},children:d?"Renaming...":"Rename"})]})]})]})}):null},MI="_menu_1a7f1_1",UI="_item_1a7f1_18",HI="_icon_1a7f1_34",WI="_label_1a7f1_44",qI="_divider_1a7f1_51",jo={menu:MI,item:UI,icon:HI,label:WI,divider:qI},VI=({visible:e,x:t,y:n,items:r,onClose:s})=>{const{colors:i}=ve(),a=_.useRef(null),[l,c]=_.useState({x:t,y:n});return _.useEffect(()=>{if(e&&a.current){const d=a.current.getBoundingClientRect(),u=window.innerWidth,h=window.innerHeight;let f=t,p=n;t+d.width>u&&(f=u-d.width-10),n+d.height>h&&(p=h-d.height-10),c({x:f,y:p})}},[e,t,n]),_.useEffect(()=>{const d=u=>{a.current&&!a.current.contains(u.target)&&s()};return e&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[e,s]),_.useEffect(()=>{const d=u=>{u.key==="Escape"&&s()};return e&&document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[e,s]),e?o.jsx("div",{ref:a,className:jo.menu,style:{top:l.y,left:l.x,backgroundColor:i.surface,borderColor:i.border},children:r.map(d=>d.divider?o.jsx("div",{className:jo.divider,style:{backgroundColor:i.border}},d.id):o.jsxs("button",{className:jo.item,onClick:()=>{d.action(),s()},children:[o.jsx("div",{className:jo.icon,children:d.icon}),o.jsx("span",{className:jo.label,style:{color:i.text},children:d.label})]},d.id))}):null},KI="_container_1xo9t_1",GI="_dropTarget_1xo9t_10",JI="_header_1xo9t_14",ZI="_title_1xo9t_22",YI="_actions_1xo9t_28",QI="_action_1xo9t_28",XI="_fileList_1xo9t_48",e4="_nestedFiles_1xo9t_54",t4="_emptyState_1xo9t_58",n4="_emptyActions_1xo9t_68",r4="_emptyAction_1xo9t_68",zt={container:KI,dropTarget:GI,header:JI,title:ZI,actions:YI,action:QI,fileList:XI,nestedFiles:e4,emptyState:t4,emptyActions:n4,emptyAction:r4},s4=()=>{var N;const{colors:e}=ve(),{fileTree:t,currentProject:n,openFile:r,createNewFile:s,createNewFolder:i,renameFile:a,deleteFile:l,copyFile:c,pasteFile:d,moveFile:u,clipboard:h,duplicateFile:f}=Xe(),[p,v]=_.useState(new Set),[y,b]=_.useState(null),[g,m]=_.useState(null),[x,E]=_.useState(!1),[k,I]=_.useState(!1),[R,T]=_.useState("file"),[B,P]=_.useState(void 0),[K,F]=_.useState(!1),[L,C]=_.useState(null),[Z,W]=_.useState(!1),[U,z]=_.useState(null),[q,re]=_.useState({visible:!1,x:0,y:0,file:null,items:[]});if(_.useEffect(()=>{const j=new Set;t.forEach(w=>{w.type==="directory"&&j.add(w.id)}),v(j)},[n]),_.useEffect(()=>{const j=()=>{q.visible&&re(w=>({...w,visible:!1}))};return document.addEventListener("click",j),()=>document.removeEventListener("click",j)},[q.visible]),!n||t.length===0)return o.jsxs("div",{className:zt.emptyState,children:[o.jsx("p",{style:{color:e.textSecondary},children:"No files in this project yet."}),o.jsxs("div",{className:zt.emptyActions,children:[o.jsxs("button",{className:zt.emptyAction,onClick:()=>{T("file"),P(void 0),I(!0)},style:{backgroundColor:e.primary},children:[o.jsx(Wr,{size:16,color:"white"}),o.jsx("span",{children:"Create File"})]}),o.jsxs("button",{className:zt.emptyAction,onClick:()=>{T("folder"),P(void 0),I(!0)},style:{backgroundColor:e.secondary},children:[o.jsx(Pn,{size:16,color:"white"}),o.jsx("span",{children:"Create Folder"})]})]})]});const H=t.filter(j=>!t.some(w=>{var A;return w.type==="directory"&&((A=w.children)==null?void 0:A.includes(j.id))})),O=j=>{v(w=>{const A=new Set(w);return A.has(j)?A.delete(j):A.add(j),A})},ie=(j,w)=>{w.button===2||w.type==="contextmenu"||b(j===y?null:j)},M=(j,w)=>{w.preventDefault();const A=[];j.type==="file"?A.push({id:"open",label:"Open",icon:o.jsx(Wr,{size:16,color:e.text}),action:()=>r(j)}):A.push({id:"toggleExpand",label:p.has(j.id)?"Collapse":"Expand",icon:o.jsx(Ir,{size:16,color:e.text}),action:()=>O(j.id)}),A.push({id:"rename",label:"Rename",icon:o.jsx(Il,{size:16,color:e.text}),action:()=>{z(j),W(!0)}},{id:"duplicate",label:"Duplicate",icon:o.jsx(Nr,{size:16,color:e.text}),action:()=>f(j.id)}),j.type==="directory"&&(A.push({id:"divider1",label:"",icon:o.jsx("div",{}),action:()=>{},divider:!0}),A.push({id:"newFile",label:"New File",icon:o.jsx(Wr,{size:16,color:e.text}),action:()=>{T("file"),P(j.id),I(!0)}},{id:"newFolder",label:"New Folder",icon:o.jsx(Pn,{size:16,color:e.text}),action:()=>{T("folder"),P(j.id),I(!0)}}),h&&A.push({id:"paste",label:"Paste",icon:o.jsx(qa,{size:16,color:e.text}),action:()=>d(j.id)})),A.push({id:"divider2",label:"",icon:o.jsx("div",{}),action:()=>{},divider:!0},{id:"copy",label:"Copy",icon:o.jsx(Nr,{size:16,color:e.text}),action:()=>c(j.id)},{id:"delete",label:"Delete",icon:o.jsx(co,{size:16,color:e.error}),action:()=>{C(j),F(!0)}}),re({visible:!0,x:w.clientX,y:w.clientY,file:j,items:A})},Y=async(j,w)=>{try{w==="file"?await s(j,B):await i(j,B),B&&v(A=>{const G=new Set(A);return G.add(B),G})}catch(A){throw console.error(`Error creating ${w}:`,A),A}},$=async j=>{if(U)try{await a(U.id,j),W(!1),z(null)}catch(w){throw console.error("Error renaming file:",w),w}},fe=async()=>{if(L)try{await l(L.id),F(!1),C(null),b(null)}catch(j){console.error("Error deleting file:",j)}},me=(j,w)=>{m(w),j.dataTransfer.setData("application/json",JSON.stringify({id:w.id,type:w.type,name:w.name}))},te=(j,w)=>{j.preventDefault(),w.type==="directory"?j.dataTransfer.dropEffect="move":j.dataTransfer.dropEffect="none"},de=async(j,w)=>{j.preventDefault(),!(!g||w.id===g.id||w.type!=="directory")&&(await u(g.id,w.id),m(null),v(A=>{const G=new Set(A);return G.add(w.id),G}))},ce=()=>{m(null)},ye=j=>{j.preventDefault(),g&&(j.dataTransfer.dropEffect="move",E(!0))},ge=()=>{E(!1)},S=async j=>{if(j.preventDefault(),E(!1),g){let w;t.forEach(A=>{var G;A.type==="directory"&&((G=A.children)!=null&&G.includes(g.id))&&(w=A.id)}),w&&await u(g.id,"root")}m(null)},Q=(j,w=null)=>j.map(A=>{const G=p.has(A.id),X=y===A.id,V=w===null,se=A.type==="directory"&&A.children?A.children.map(ne=>t.find(oe=>oe.id===ne)).filter(Boolean):[];return o.jsxs(Xa.Fragment,{children:[o.jsx(nI,{file:A,level:V?0:1,selected:X,expanded:G,onSelect:ie,onToggleExpand:O,onOpen:r,onContextMenu:M,onDragStart:me,onDragOver:te,onDragEnd:ce,onDrop:de}),A.type==="directory"&&G&&se.length>0&&o.jsx("div",{className:zt.nestedFiles,children:Q(se,A.id)})]},A.id)});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`${zt.container} ${x?zt.dropTarget:""}`,onDragOver:ye,onDragLeave:ge,onDrop:S,style:{borderColor:x?e.primary:"transparent"},children:[o.jsxs("div",{className:zt.header,children:[o.jsx("h3",{className:zt.title,style:{color:e.text},children:"Files"}),o.jsxs("div",{className:zt.actions,children:[o.jsx("button",{className:zt.action,onClick:()=>{T("file"),P(void 0),I(!0)},title:"New File",children:o.jsx(Wr,{size:16,color:e.textSecondary})}),o.jsx("button",{className:zt.action,onClick:()=>{T("folder"),P(void 0),I(!0)},title:"New Folder",children:o.jsx(Pn,{size:16,color:e.textSecondary})}),o.jsx("button",{className:zt.action,onClick:j=>{j.stopPropagation();const w=[{id:"newFile",label:"New File",icon:o.jsx(Wr,{size:16,color:e.text}),action:()=>{T("file"),P(void 0),I(!0)}},{id:"newFolder",label:"New Folder",icon:o.jsx(Pn,{size:16,color:e.text}),action:()=>{T("folder"),P(void 0),I(!0)}}];h&&w.push({id:"paste",label:"Paste",icon:o.jsx(qa,{size:16,color:e.text}),action:()=>d()}),re({visible:!0,x:j.clientX,y:j.clientY,file:null,items:w})},children:o.jsx(Ew,{size:16,color:e.textSecondary})})]})]}),o.jsx("div",{className:zt.fileList,children:Q(H)})]}),o.jsx(My,{isOpen:k,fileType:R,parentPath:B?(N=t.find(j=>j.id===B))==null?void 0:N.path:void 0,onClose:()=>I(!1),onCreateFile:Y}),o.jsx(EI,{isOpen:K,title:"Confirm Delete",message:`Are you sure you want to delete "${L==null?void 0:L.name}"${(L==null?void 0:L.type)==="directory"?" and all its contents":""}? This cannot be undone.`,confirmLabel:"Delete",cancelLabel:"Cancel",onConfirm:fe,onCancel:()=>F(!1),isDangerous:!0}),o.jsx(DI,{isOpen:Z,currentName:(U==null?void 0:U.name)||"",onRename:$,onCancel:()=>{W(!1),z(null)}}),o.jsx(VI,{visible:q.visible,x:q.x,y:q.y,items:q.items,onClose:()=>re(j=>({...j,visible:!1}))})]})},o4=()=>{const{colors:e}=ve(),{currentProject:t,createNewFile:n,createNewFolder:r}=Xe(),s=ot(),[i,a]=_.useState(!1),[l,c]=_.useState(null),[d,u]=_.useState(""),[h,f]=_.useState(!1),[p,v]=_.useState(!1),[y,b]=_.useState(null),g=()=>{a(!i)},m=()=>{c("file"),u(""),b(null),a(!1)},x=()=>{c("folder"),u(""),b(null),a(!1)},E=()=>{c(null),b(null)},k=async()=>{if(t){try{const R=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),T=URL.createObjectURL(R),B=document.createElement("a");B.href=T,B.download=`${t.name}.json`,document.body.appendChild(B),B.click(),document.body.removeChild(B),URL.revokeObjectURL(T)}catch(R){console.error("Error exporting project:",R),alert("Failed to export project")}a(!1)}},I=async()=>{if(!d.trim()){b("Name cannot be empty");return}v(!0),b(null);try{l==="file"?await n(d):l==="folder"&&await r(d),E(),l==="file"&&s("/editor")}catch(R){console.error(`Error creating ${l}:`,R),b(R.message||`Failed to create ${l}. Please try again.`)}finally{v(!1)}};return t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"container",style:{backgroundColor:e.surface},children:[o.jsx("button",{className:"mainButton",style:{backgroundColor:e.primary},onClick:p?void 0:g,"aria-label":"Create new file or folder",disabled:p,children:p?o.jsx("span",{className:"loading-spinner"}):o.jsx(Ir,{size:24,color:"#FFFFFF"})}),i&&o.jsxs("div",{className:"actionsMenu",style:{backgroundColor:e.surface,borderColor:e.border},children:[o.jsxs("button",{className:"actionItem",onClick:m,children:[o.jsx(rs,{size:18,color:e.text,className:"actionIcon"}),o.jsx("span",{className:"actionText",style:{color:e.text},children:"New File"})]}),o.jsxs("button",{className:"actionItem",onClick:x,children:[o.jsx(Tr,{size:18,color:e.text,className:"actionIcon"}),o.jsx("span",{className:"actionText",style:{color:e.text},children:"New Folder"})]}),o.jsxs("button",{className:"actionItem",onClick:()=>{a(!1),f(!0)},children:[o.jsx(ki,{size:18,color:e.text,className:"actionIcon"}),o.jsx("span",{className:"actionText",style:{color:e.text},children:"Share Project"})]}),o.jsxs("button",{className:"actionItem",onClick:k,children:[o.jsx(io,{size:18,color:e.text,className:"actionIcon"}),o.jsx("span",{className:"actionText",style:{color:e.text},children:"Export Project"})]})]})]}),l!==null&&o.jsx("div",{className:"modalOverlay",children:o.jsxs("div",{className:"modalContent",style:{backgroundColor:e.surface,borderColor:e.border},children:[o.jsxs("div",{className:"modalHeader",children:[o.jsx("h3",{className:"modalTitle",style:{color:e.text},children:l==="file"?"New File":"New Folder"}),o.jsx("button",{className:"closeButton",onClick:E,children:o.jsx(st,{size:20,color:e.textSecondary})})]}),y&&o.jsx("div",{style:{margin:"0 0 16px 0",padding:"12px",borderRadius:"8px",backgroundColor:`${e.error}15`,color:e.error},children:y}),o.jsx("input",{className:"input",style:{backgroundColor:e.background,color:e.text,borderColor:e.border},value:d,onChange:R=>u(R.target.value),placeholder:l==="file"?"Filename":"Folder name",autoFocus:!0,onKeyDown:R=>{R.key==="Enter"&&I()}}),o.jsxs("div",{className:"modalActions",children:[o.jsx("button",{className:"button cancelButton",style:{borderColor:e.border,color:e.text},onClick:E,disabled:p,children:"Cancel"}),o.jsx("button",{className:"button createButton",style:{backgroundColor:e.primary,color:"#FFFFFF",opacity:!d.trim()||p?.7:1},onClick:I,disabled:!d.trim()||p,children:p?"Creating...":"Create"})]})]})}),o.jsx(Ku,{isOpen:h,onClose:()=>f(!1),project:t}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .container {
          position: absolute;
          bottom: 16px;
          right: 16px;
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          z-index: 50;
        }
        
        .mainButton {
          width: 56px;
          height: 56px;
          border-radius: 28px;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
          border: none;
          cursor: pointer;
          transition: transform 0.2s ease;
        }
        
        .mainButton:hover {
          transform: scale(1.05);
        }
        
        .mainButton:active {
          transform: scale(0.98);
        }
        
        .loading-spinner {
          width: 24px;
          height: 24px;
          border: 3px solid rgba(255,255,255,0.3);
          border-radius: 50%;
          border-top-color: #fff;
          animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        .actionsMenu {
          position: absolute;
          bottom: 70px;
          right: 0;
          border-radius: 12px;
          border-width: 1px;
          border-style: solid;
          padding: 8px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
          animation: fadeIn 0.2s ease;
          min-width: 180px;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .actionItem {
          display: flex;
          flex-direction: row;
          align-items: center;
          padding: 12px;
          border: none;
          background: none;
          cursor: pointer;
          width: 100%;
          text-align: left;
          border-radius: 8px;
          transition: background-color 0.2s ease;
          min-height: 44px;
        }
        
        .actionItem:hover {
          background-color: rgba(0, 0, 0, 0.05);
        }
        
        .actionItem:active {
          background-color: rgba(0, 0, 0, 0.1);
        }
        
        .actionIcon {
          margin-right: 12px;
        }
        
        .actionText {
          font-family: 'Inter', sans-serif;
          font-size: 14px;
          white-space: nowrap;
        }
        
        .modalOverlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 16px;
        }
        
        .modalContent {
          width: 100%;
          max-width: 400px;
          border-radius: 16px;
          border: 1px solid;
          padding: 24px;
          animation: zoomIn 0.2s ease;
        }
        
        @keyframes zoomIn {
          from { opacity: 0; transform: scale(0.98); }
          to { opacity: 1; transform: scale(1); }
        }
        
        .modalHeader {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
        }
        
        .modalTitle {
          margin: 0;
          font-size: 20px;
          font-weight: 600;
        }
        
        .closeButton {
          background: none;
          border: none;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          width: 32px;
          height: 32px;
          border-radius: 16px;
          transition: background-color 0.2s;
        }
        
        .closeButton:hover {
          background-color: rgba(0, 0, 0, 0.05);
        }
        
        .input {
          width: 100%;
          height: 50px;
          border: 1px solid;
          border-radius: 12px;
          padding: 0 16px;
          margin-bottom: 24px;
          font-size: 16px;
          font-family: inherit;
        }
        
        .input:focus {
          outline: none;
          border-color: ${e.primary};
        }
        
        .modalActions {
          display: flex;
          justify-content: flex-end;
        }
        
        .button {
          padding: 12px 20px;
          border-radius: 12px;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          min-height: 44px;
          transition: opacity 0.2s ease;
          min-width: 100px;
          font-family: inherit;
        }
        
        .cancelButton {
          background: transparent;
          border: 1px solid;
        }
        
        .createButton {
          border: none;
        }
        
        .createButton:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        
        @media (max-width: 768px) {
          .button {
            min-height: 48px; /* Larger touch targets on mobile */
            padding: 10px 16px;
          }
          
          .modalContent {
            max-width: 340px;
          }
        }
        
        /* Fix for notched phones */
        @supports (padding: max(0px)) {
          .container {
            bottom: max(16px, env(safe-area-inset-bottom, 16px));
            right: max(16px, env(safe-area-inset-right, 16px));
          }
        }
      `}})]}):null},i4="_modalOverlay_em4yd_1",a4="_modalContent_em4yd_14",l4="_modalHeader_em4yd_25",c4="_modalTitle_em4yd_34",d4="_closeButton_em4yd_41",u4="_browserToolbar_em4yd_51",h4="_backButton_em4yd_59",f4="_currentPath_em4yd_72",p4="_fileList_em4yd_81",m4="_fileItem_em4yd_87",g4="_fileIcon_em4yd_100",y4="_fileDetails_em4yd_107",x4="_fileName_em4yd_111",v4="_fileType_em4yd_117",b4="_loadingMessage_em4yd_122",_4="_errorMessage_em4yd_123",w4="_emptyMessage_em4yd_124",k4="_actionButtons_em4yd_131",S4="_cancelButton_em4yd_139",j4="_selectButton_em4yd_140",dt={modalOverlay:i4,modalContent:a4,modalHeader:l4,modalTitle:c4,closeButton:d4,browserToolbar:u4,backButton:h4,currentPath:f4,fileList:p4,fileItem:m4,fileIcon:g4,fileDetails:y4,fileName:x4,fileType:v4,loadingMessage:b4,errorMessage:_4,emptyMessage:w4,actionButtons:k4,cancelButton:S4,selectButton:j4},C4={listDirectory:async()=>[{name:"Documents",path:"/Documents",type:"directory"},{name:"Projects",path:"/Projects",type:"directory"},{name:"Sample Project",path:"/Sample Project",type:"directory"},{name:"sample.txt",path:"/sample.txt",type:"file"}]},E4=({isOpen:e,onClose:t,onSelectFolder:n,onSelectFile:r,mode:s="folder",title:i="Select a Folder"})=>{const{colors:a}=ve(),[l,c]=_.useState(""),[d,u]=_.useState([]),[h,f]=_.useState(!1),[p,v]=_.useState(null),[y,b]=_.useState([]);_.useEffect(()=>{e&&g("")},[e]);const g=async k=>{f(!0),v(null);try{const I=await C4.listDirectory();u(I),c(k)}catch(I){console.error("Error loading directory:",I),v("Failed to load directory contents. Please check permissions."),u([])}finally{f(!1)}},m=async k=>{k.type==="directory"?(b(I=>[...I,l]),g(k.path)):s==="file"&&r&&(r(k.path),t())},x=()=>{if(y.length>0){const k=y[y.length-1];b(I=>I.slice(0,-1)),g(k)}},E=()=>{n(l),t()};return e?o.jsx("div",{className:dt.modalOverlay,children:o.jsxs("div",{className:dt.modalContent,style:{backgroundColor:a.surface,borderColor:a.border,color:a.text},children:[o.jsxs("div",{className:dt.modalHeader,children:[o.jsx("h3",{className:dt.modalTitle,children:i}),o.jsx("button",{className:dt.closeButton,onClick:t,children:o.jsx(st,{size:20,color:a.textSecondary})})]}),o.jsxs("div",{className:dt.browserToolbar,children:[o.jsx("button",{className:dt.backButton,onClick:x,disabled:y.length===0,style:{opacity:y.length===0?.5:1},children:o.jsx(_i,{size:18,color:a.textSecondary})}),o.jsx("div",{className:dt.currentPath,style:{color:a.textSecondary},children:l||"Documents"})]}),o.jsx("div",{className:dt.fileList,children:h?o.jsx("div",{className:dt.loadingMessage,children:"Loading..."}):p?o.jsx("div",{className:dt.errorMessage,children:p}):d.length===0?o.jsx("div",{className:dt.emptyMessage,children:"No files or folders found"}):d.map((k,I)=>o.jsxs("div",{className:dt.fileItem,onClick:()=>m(k),style:{borderBottomColor:a.border,backgroundColor:a.surface},children:[o.jsx("div",{className:dt.fileIcon,children:k.type==="directory"?o.jsx(ao,{size:20,color:"#FFCA28"}):o.jsx(Gs,{size:20,color:a.primary})}),o.jsxs("div",{className:dt.fileDetails,children:[o.jsx("div",{className:dt.fileName,style:{color:a.text},children:k.name}),o.jsx("div",{className:dt.fileType,style:{color:a.textSecondary},children:k.type==="directory"?"Folder":"File"})]})]},I))}),s==="folder"&&o.jsxs("div",{className:dt.actionButtons,children:[o.jsx("button",{className:dt.cancelButton,onClick:t,style:{borderColor:a.border,color:a.text},children:"Cancel"}),o.jsx("button",{className:dt.selectButton,onClick:E,disabled:h,style:{backgroundColor:a.primary},children:"Select This Folder"})]})]})}):null};let Qi;const N4=new Uint8Array(16);function T4(){if(!Qi&&(Qi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qi(N4)}const bt=[];for(let e=0;e<256;++e)bt.push((e+256).toString(16).slice(1));function I4(e,t=0){return bt[e[t+0]]+bt[e[t+1]]+bt[e[t+2]]+bt[e[t+3]]+"-"+bt[e[t+4]]+bt[e[t+5]]+"-"+bt[e[t+6]]+bt[e[t+7]]+"-"+bt[e[t+8]]+bt[e[t+9]]+"-"+bt[e[t+10]]+bt[e[t+11]]+bt[e[t+12]]+bt[e[t+13]]+bt[e[t+14]]+bt[e[t+15]]}const A4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wf={randomUUID:A4};function he(e,t,n){if(Wf.randomUUID&&!e)return Wf.randomUUID();e=e||{};const r=e.random||(e.rng||T4)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,I4(r)}class P4{constructor(){Se(this,"templates",[{id:"react-app",name:"React Application",description:"A modern React application with hooks and TypeScript",framework:"React",tags:["react","typescript","frontend"],icon:"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg"},{id:"next-app",name:"Next.js Project",description:"Full-stack React framework with server-side rendering",framework:"Next.js",tags:["react","next.js","fullstack"],icon:"https://raw.githubusercontent.com/vercel/next.js/canary/docs/public/images/next.svg"},{id:"vue-app",name:"Vue.js Application",description:"Progressive JavaScript framework for building UIs",framework:"Vue",tags:["vue","javascript","frontend"],icon:"https://vuejs.org/images/logo.png"},{id:"node-express",name:"Node.js Express API",description:"RESTful API built with Express.js",framework:"Node.js",tags:["node","express","api","backend"],icon:"https://nodejs.org/static/images/logo.svg"},{id:"html-starter",name:"HTML/CSS/JS Starter",description:"Simple starter with HTML, CSS and vanilla JavaScript",framework:"Vanilla JS",tags:["html","css","javascript","frontend"],icon:"https://www.w3.org/html/logo/downloads/HTML5_Logo_512.png"},{id:"tailwind-starter",name:"Tailwind CSS Starter",description:"HTML starter with Tailwind CSS configured",framework:"Tailwind CSS",tags:["html","tailwind","css","frontend"],icon:"https://tailwindcss.com/favicons/apple-touch-icon.png"}])}getAllTemplates(){return this.templates}getTemplateById(t){return this.templates.find(n=>n.id===t)}getTemplatesByFramework(t){return this.templates.filter(n=>n.framework===t)}searchTemplates(t){const n=t.toLowerCase();return this.templates.filter(r=>r.name.toLowerCase().includes(n)||r.description.toLowerCase().includes(n)||r.framework.toLowerCase().includes(n)||r.tags.some(s=>s.toLowerCase().includes(n)))}createFilesFromTemplate(t){if(!this.getTemplateById(t))return this.createDefaultFiles();switch(t){case"react-app":return this.createReactTemplate();case"next-app":return this.createNextTemplate();case"vue-app":return this.createVueTemplate();case"node-express":return this.createNodeExpressTemplate();case"tailwind-starter":return this.createTailwindTemplate();case"html-starter":default:return this.createHtmlTemplate()}}createDefaultFiles(){return[{id:he(),name:"index.js",type:"file",path:"/index.js",content:`// Welcome to Code Canvas!
console.log("Hello, world!");`},{id:he(),name:"style.css",type:"file",path:"/style.css",content:`/* Styles for your project */
body {
  font-family: sans-serif;
  margin: 0;
  padding: 20px;
}`},{id:he(),name:"index.html",type:"file",path:"/index.html",content:`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Project</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Hello World</h1>
  <script src="index.js"><\/script>
</body>
</html>`}]}createReactTemplate(){const t=he(),n=he();return[{id:he(),name:"package.json",type:"file",path:"/package.json",content:`{
  "name": "react-app",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0"
  },
  "scripts": {
    "start": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "devDependencies": {
    "@types/react": "^18.2.15",
    "@types/react-dom": "^18.2.7",
    "@vitejs/plugin-react": "^4.0.3",
    "typescript": "^5.0.2",
    "vite": "^4.4.5"
  }
}`},{id:he(),name:"index.html",type:"file",path:"/index.html",content:`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>React App</title>
</head>
<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"><\/script>
</body>
</html>`},{id:he(),name:"tsconfig.json",type:"file",path:"/tsconfig.json",content:`{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}`},{id:he(),name:"tsconfig.node.json",type:"file",path:"/tsconfig.node.json",content:`{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}`},{id:he(),name:"vite.config.ts",type:"file",path:"/vite.config.ts",content:`import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
})`},{id:t,name:"src",type:"directory",path:"/src",children:[he(),he(),n]},{id:he(),name:"main.tsx",type:"file",path:"/src/main.tsx",content:`import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)`},{id:he(),name:"index.css",type:"file",path:"/src/index.css",content:`body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}`},{id:he(),name:"App.tsx",type:"file",path:"/src/App.tsx",content:`import { useState } from 'react'
import { Counter } from './components/Counter'
import './App.css'

function App() {
  const [count, setCount] = useState(0)

  return (
    <div className="App">
      <header className="App-header">
        <h1>React Application</h1>
        <p>Edit <code>src/App.tsx</code> and save to reload.</p>
        <Counter />
      </header>
    </div>
  )
}

export default App`},{id:he(),name:"App.css",type:"file",path:"/src/App.css",content:`.App {
  text-align: center;
}

.App-header {
  background-color: #282c34;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  font-size: calc(10px + 2vmin);
  color: white;
}

.App-link {
  color: #61dafb;
}`},{id:n,name:"components",type:"directory",path:"/src/components",children:[he()]},{id:he(),name:"Counter.tsx",type:"file",path:"/src/components/Counter.tsx",content:`import React, { useState } from 'react';

export function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <div style={{ marginTop: 20 }}>
      <h2>Counter: {count}</h2>
      <button 
        onClick={() => setCount(count + 1)}
        style={{
          backgroundColor: '#61dafb',
          border: 'none',
          borderRadius: 8,
          padding: '10px 20px',
          fontSize: 16,
          cursor: 'pointer'
        }}
      >
        Increment
      </button>
    </div>
  );
}`}]}createNextTemplate(){const t=he(),n=he(),r=he();return[{id:he(),name:"package.json",type:"file",path:"/package.json",content:`{
  "name": "nextjs-app",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "next": "13.4.12",
    "react": "18.2.0",
    "react-dom": "18.2.0"
  },
  "devDependencies": {
    "@types/node": "20.4.4",
    "@types/react": "18.2.15",
    "@types/react-dom": "18.2.7",
    "typescript": "5.1.6",
    "eslint": "8.45.0",
    "eslint-config-next": "13.4.12"
  }
}`},{id:he(),name:"next.config.js",type:"file",path:"/next.config.js",content:`/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
}

module.exports = nextConfig`},{id:he(),name:"tsconfig.json",type:"file",path:"/tsconfig.json",content:`{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx"],
  "exclude": ["node_modules"]
}`},{id:t,name:"pages",type:"directory",path:"/pages",children:[he(),he(),he()]},{id:he(),name:"index.tsx",type:"file",path:"/pages/index.tsx",content:`import Head from 'next/head';
import { Inter } from 'next/font/google';
import styles from '../styles/Home.module.css';
import { Counter } from '../components/Counter';

const inter = Inter({ subsets: ['latin'] });

export default function Home() {
  return (
    <>
      <Head>
        <title>Next.js App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={\`\${styles.main} \${inter.className}\`}>
        <div className={styles.description}>
          <h1>Welcome to Next.js!</h1>
          <p>Get started by editing <code>pages/index.tsx</code></p>
          <Counter />
        </div>
      </main>
    </>
  )
}`},{id:he(),name:"_app.tsx",type:"file",path:"/pages/_app.tsx",content:`import '../styles/globals.css';
import type { AppProps } from 'next/app';

export default function App({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />
}`},{id:he(),name:"api",type:"directory",path:"/pages/api",children:[he()]},{id:he(),name:"hello.ts",type:"file",path:"/pages/api/hello.ts",content:`import type { NextApiRequest, NextApiResponse } from 'next';

type Data = {
  name: string
}

export default function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data>
) {
  res.status(200).json({ name: 'John Doe' })
}`},{id:n,name:"components",type:"directory",path:"/components",children:[he()]},{id:he(),name:"Counter.tsx",type:"file",path:"/components/Counter.tsx",content:`import { useState } from 'react';

export function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <div className="counter">
      <h2>Counter: {count}</h2>
      <button onClick={() => setCount(count + 1)}>Increment</button>
      
      <style jsx>{\`
        .counter {
          margin: 2rem 0;
          padding: 1rem;
          border: 1px solid #eaeaea;
          border-radius: 10px;
          text-align: center;
        }
        button {
          background-color: #0070f3;
          color: white;
          border: none;
          border-radius: 8px;
          padding: 0.5rem 1rem;
          font-size: 1rem;
          cursor: pointer;
          transition: background 0.3s ease;
        }
        button:hover {
          background-color: #0051a2;
        }
      \`}</style>
    </div>
  );
}`},{id:r,name:"styles",type:"directory",path:"/styles",children:[he(),he()]},{id:he(),name:"globals.css",type:"file",path:"/styles/globals.css",content:`:root {
  --max-width: 1100px;
  --border-radius: 12px;
  --font-mono: ui-monospace, Menlo, Monaco, 'Cascadia Mono', 'Segoe UI Mono', 'Roboto Mono', 'Oxygen Mono', 'Ubuntu Monospace', 'Source Code Pro', 'Fira Mono', 'Droid Sans Mono', 'Courier New', monospace;
  --foreground-rgb: 0, 0, 0;
  --background-rgb: 255, 255, 255;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
}

a {
  color: inherit;
  text-decoration: none;
}`},{id:he(),name:"Home.module.css",type:"file",path:"/styles/Home.module.css",content:`.main {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 6rem;
  min-height: 100vh;
}

.description {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 0.85rem;
  max-width: var(--max-width);
  width: 100%;
  z-index: 2;
  font-family: var(--font-mono);
}

.description h1 {
  margin-bottom: 2rem;
}

.description p {
  margin-bottom: 2rem;
}

.description code {
  font-weight: 700;
  font-family: var(--font-mono);
  background-color: rgba(0, 0, 0, 0.1);
  padding: 0.2rem 0.5rem;
  border-radius: 0.5rem;
}`}]}createVueTemplate(){const t=he(),n=he();return[{id:he(),name:"package.json",type:"file",path:"/package.json",content:`{
  "name": "vue-app",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "vue": "^3.3.4"
  },
  "devDependencies": {
    "@vitejs/plugin-vue": "^4.2.3",
    "vite": "^4.4.6"
  }
}`},{id:he(),name:"index.html",type:"file",path:"/index.html",content:`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue App</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"><\/script>
  </body>
</html>`},{id:he(),name:"vite.config.js",type:"file",path:"/vite.config.js",content:`import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [vue()],
})`},{id:t,name:"src",type:"directory",path:"/src",children:[he(),he(),n]},{id:he(),name:"main.js",type:"file",path:"/src/main.js",content:`import { createApp } from 'vue'
import App from './App.vue'
import './assets/main.css'

createApp(App).mount('#app')`},{id:he(),name:"App.vue",type:"file",path:"/src/App.vue",content:`<script setup>
import HelloWorld from './components/HelloWorld.vue'
<\/script>

<template>
  <header>
    <div class="wrapper">
      <h1>Vue.js Application</h1>
      <HelloWorld msg="You did it!" />
    </div>
  </header>
</template>

<style scoped>
header {
  line-height: 1.5;
}

.wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

h1 {
  font-weight: 500;
  font-size: 2.6rem;
  margin-bottom: 2rem;
  text-align: center;
}
</style>`},{id:he(),name:"assets",type:"directory",path:"/src/assets",children:[he()]},{id:he(),name:"main.css",type:"file",path:"/src/assets/main.css",content:`*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
}

body {
  min-height: 100vh;
  color: #333;
  background: #f8f8f8;
  transition: color 0.5s, background-color 0.5s;
  line-height: 1.6;
  font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu,
    Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  font-size: 16px;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}`},{id:n,name:"components",type:"directory",path:"/src/components",children:[he()]},{id:he(),name:"HelloWorld.vue",type:"file",path:"/src/components/HelloWorld.vue",content:`<script setup>
import { ref } from 'vue'

defineProps({
  msg: String
})

const count = ref(0)
<\/script>

<template>
  <div class="greetings">
    <h3>{{ msg }}</h3>
    <h4>You've successfully created a project with Vue 3</h4>
    
    <div class="counter">
      <h2>Counter: {{ count }}</h2>
      <button @click="count++">Increment</button>
    </div>
  </div>
</template>

<style scoped>
h3 {
  font-size: 1.5rem;
  margin-bottom: 0.5rem;
}

h4 {
  font-size: 1.1rem;
  margin-bottom: 2rem;
  color: #666;
}

.counter {
  margin-top: 2rem;
  padding: 1rem;
  border: 1px solid #eaeaea;
  border-radius: 10px;
  text-align: center;
}

button {
  background-color: #42b883;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 0.5rem 1rem;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s ease;
}

button:hover {
  background-color: #33a06f;
}
</style>`}]}createNodeExpressTemplate(){const t=he(),n=he(),r=he();return[{id:he(),name:"package.json",type:"file",path:"/package.json",content:`{
  "name": "express-api",
  "version": "1.0.0",
  "description": "Express API",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js"
  },
  "dependencies": {
    "express": "^4.18.2",
    "cors": "^2.8.5",
    "dotenv": "^16.3.1",
    "morgan": "^1.10.0"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}`},{id:he(),name:"index.js",type:"file",path:"/index.js",content:`const express = require('express');
const cors = require('cors');
const morgan = require('morgan');
require('dotenv').config();

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors());
app.use(express.json());
app.use(morgan('dev'));

// Routes
app.use('/api', require('./routes'));

// Default route
app.get('/', (req, res) => {
  res.json({ message: 'Welcome to Express API' });
});

// Start server
app.listen(PORT, () => {
  console.log(\`Server running on port \${PORT}\`);
});
`},{id:he(),name:".env",type:"file",path:"/.env",content:`PORT=3000
NODE_ENV=development`},{id:he(),name:".gitignore",type:"file",path:"/.gitignore",content:`node_modules
.env
.DS_Store`},{id:t,name:"routes",type:"directory",path:"/routes",children:[he(),he()]},{id:he(),name:"index.js",type:"file",path:"/routes/index.js",content:`const express = require('express');
const router = express.Router();

// Import routes
const usersRoutes = require('./users');

// Use routes
router.use('/users', usersRoutes);

module.exports = router;`},{id:he(),name:"users.js",type:"file",path:"/routes/users.js",content:`const express = require('express');
const router = express.Router();
const usersController = require('../controllers/users');

// Routes
router.get('/', usersController.getAllUsers);
router.get('/:id', usersController.getUserById);
router.post('/', usersController.createUser);
router.put('/:id', usersController.updateUser);
router.delete('/:id', usersController.deleteUser);

module.exports = router;`},{id:n,name:"controllers",type:"directory",path:"/controllers",children:[he()]},{id:he(),name:"users.js",type:"file",path:"/controllers/users.js",content:`// Mock database
const users = [
  { id: 1, name: 'John Doe', email: 'john@example.com' },
  { id: 2, name: 'Jane Smith', email: 'jane@example.com' }
];

// Controllers
exports.getAllUsers = (req, res) => {
  res.json(users);
};

exports.getUserById = (req, res) => {
  const user = users.find(u => u.id === parseInt(req.params.id));
  if (!user) return res.status(404).json({ message: 'User not found' });
  res.json(user);
};

exports.createUser = (req, res) => {
  const { name, email } = req.body;
  if (!name || !email) {
    return res.status(400).json({ message: 'Name and email are required' });
  }
  
  const newUser = {
    id: users.length + 1,
    name,
    email
  };
  
  users.push(newUser);
  res.status(201).json(newUser);
};

exports.updateUser = (req, res) => {
  const user = users.find(u => u.id === parseInt(req.params.id));
  if (!user) return res.status(404).json({ message: 'User not found' });
  
  const { name, email } = req.body;
  if (name) user.name = name;
  if (email) user.email = email;
  
  res.json(user);
};

exports.deleteUser = (req, res) => {
  const index = users.findIndex(u => u.id === parseInt(req.params.id));
  if (index === -1) return res.status(404).json({ message: 'User not found' });
  
  const deletedUser = users.splice(index, 1);
  res.json(deletedUser[0]);
};`},{id:r,name:"models",type:"directory",path:"/models",children:[he()]},{id:he(),name:"User.js",type:"file",path:"/models/User.js",content:`// This is a placeholder for a real database model
// In a real app, you might use Mongoose, Sequelize, etc.

class User {
  constructor(id, name, email) {
    this.id = id;
    this.name = name;
    this.email = email;
  }
  
  // Static methods to interact with the "database"
  static getAll() {
    // In a real app, this would query a database
    return [];
  }
  
  static getById(id) {
    // In a real app, this would query a database
    return null;
  }
  
  static create(data) {
    // In a real app, this would insert into a database
    return new User(1, data.name, data.email);
  }
}

module.exports = User;`}]}createHtmlTemplate(){const t=he(),n=he(),r=he();return[{id:he(),name:"index.html",type:"file",path:"/index.html",content:`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HTML Starter</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </nav>
  </header>
  
  <main>
    <section class="hero">
      <h1>Welcome to HTML Starter</h1>
      <p>A simple starter template with HTML, CSS, and vanilla JavaScript</p>
      <button id="counter-btn">Click me: <span id="counter">0</span></button>
    </section>
    
    <section class="features">
      <div class="feature">
        <h2>HTML5</h2>
        <p>Modern semantic markup</p>
      </div>
      <div class="feature">
        <h2>CSS3</h2>
        <p>Beautiful styling capabilities</p>
      </div>
      <div class="feature">
        <h2>JavaScript</h2>
        <p>Interactive functionality</p>
      </div>
    </section>
  </main>
  
  <footer>
    <p>&copy; 2025 HTML Starter. All rights reserved.</p>
  </footer>
  
  <script src="js/main.js"><\/script>
</body>
</html>`},{id:t,name:"css",type:"directory",path:"/css",children:[he()]},{id:he(),name:"style.css",type:"file",path:"/css/style.css",content:`* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: Arial, sans-serif;
  line-height: 1.6;
  color: #333;
}

header {
  background-color: #333;
  padding: 1rem 0;
}

nav ul {
  display: flex;
  list-style: none;
  justify-content: center;
}

nav ul li {
  margin: 0 1rem;
}

nav a {
  color: white;
  text-decoration: none;
}

nav a:hover {
  text-decoration: underline;
}

.hero {
  background-color: #f4f4f4;
  padding: 4rem 2rem;
  text-align: center;
}

.hero h1 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
}

.hero p {
  font-size: 1.2rem;
  margin-bottom: 2rem;
  color: #666;
}

.features {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  padding: 3rem 2rem;
}

.feature {
  flex: 1;
  min-width: 300px;
  text-align: center;
  padding: 2rem;
  margin: 1rem;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

footer {
  text-align: center;
  padding: 2rem;
  background-color: #333;
  color: white;
}

button {
  background-color: #4CAF50;
  border: none;
  color: white;
  padding: 12px 24px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.3s ease;
}

button:hover {
  background-color: #45a049;
}`},{id:n,name:"js",type:"directory",path:"/js",children:[he()]},{id:he(),name:"main.js",type:"file",path:"/js/main.js",content:`// Counter functionality
document.addEventListener('DOMContentLoaded', () => {
  const counterBtn = document.getElementById('counter-btn');
  const counterElement = document.getElementById('counter');
  let count = 0;
  
  if (counterBtn && counterElement) {
    counterBtn.addEventListener('click', () => {
      count++;
      counterElement.textContent = count;
      
      // Change button color after 10 clicks
      if (count === 10) {
        counterBtn.style.backgroundColor = '#FF5722';
        counterBtn.innerText = \`You clicked \${count} times!\`;
        setTimeout(() => {
          counterBtn.style.backgroundColor = '#4CAF50';
          counterBtn.innerHTML = \`Click me: <span id="counter">\${count}</span>\`;
          counterElement = document.getElementById('counter');
        }, 2000);
      }
    });
  }
  
  // Add smooth scrolling to all links
  const links = document.querySelectorAll('a[href^="#"]');
  
  for (const link of links) {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        window.scrollTo({
          top: target.offsetTop,
          behavior: 'smooth'
        });
      }
    });
  }
});`},{id:r,name:"img",type:"directory",path:"/img",children:[]}]}createTailwindTemplate(){const t=he();return[{id:he(),name:"package.json",type:"file",path:"/package.json",content:`{
  "name": "tailwind-starter",
  "version": "1.0.0",
  "description": "Tailwind CSS starter",
  "scripts": {
    "start": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "devDependencies": {
    "autoprefixer": "^10.4.14",
    "postcss": "^8.4.26",
    "tailwindcss": "^3.3.3",
    "vite": "^4.4.6"
  }
}`},{id:he(),name:"index.html",type:"file",path:"/index.html",content:`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tailwind CSS Starter</title>
  <link rel="stylesheet" href="/src/style.css">
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">
  <header class="bg-white shadow-md">
    <nav class="container mx-auto px-6 py-4">
      <div class="flex justify-between items-center">
        <div>
          <a class="text-xl font-bold text-gray-800" href="#">Tailwind Starter</a>
        </div>
        <div class="space-x-6">
          <a class="hover:text-blue-500" href="#">Home</a>
          <a class="hover:text-blue-500" href="#">About</a>
          <a class="hover:text-blue-500" href="#">Contact</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <section class="py-20 bg-gradient-to-r from-blue-500 to-indigo-600 text-white">
      <div class="container mx-auto px-6 text-center">
        <h1 class="text-4xl font-bold mb-6">Welcome to Tailwind CSS Starter</h1>
        <p class="text-xl mb-12">A utility-first CSS framework for rapidly building custom designs.</p>
        <button id="counter-btn" class="bg-white text-blue-500 px-6 py-3 rounded-lg shadow-md hover:shadow-lg transition-all duration-200">Clicked <span id="counter">0</span> times</button>
      </div>
    </section>

    <section class="container mx-auto px-6 py-16">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="bg-white rounded-lg p-8 shadow-md">
          <h2 class="text-2xl font-bold mb-4 text-gray-800">Responsive</h2>
          <p class="text-gray-600">Tailwind is fully responsive, allowing you to build layouts for any screen size.</p>
        </div>
        <div class="bg-white rounded-lg p-8 shadow-md">
          <h2 class="text-2xl font-bold mb-4 text-gray-800">Customizable</h2>
          <p class="text-gray-600">Easily customize your design by modifying the configuration file.</p>
        </div>
        <div class="bg-white rounded-lg p-8 shadow-md">
          <h2 class="text-2xl font-bold mb-4 text-gray-800">Utility-First</h2>
          <p class="text-gray-600">Compose complex designs by combining utility classes.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-gray-800 text-white py-8">
    <div class="container mx-auto px-6 text-center">
      <p>&copy; 2025 Tailwind Starter. All rights reserved.</p>
    </div>
  </footer>

  <script src="/src/main.js"><\/script>
</body>
</html>`},{id:he(),name:"tailwind.config.js",type:"file",path:"/tailwind.config.js",content:`/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {},
  },
  plugins: [],
}`},{id:he(),name:"postcss.config.js",type:"file",path:"/postcss.config.js",content:`module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}`},{id:he(),name:"vite.config.js",type:"file",path:"/vite.config.js",content:`export default {
  build: {
    outDir: 'dist',
  },
  server: {
    port: 3000,
    open: true,
  },
}`},{id:t,name:"src",type:"directory",path:"/src",children:[he(),he()]},{id:he(),name:"style.css",type:"file",path:"/src/style.css",content:`@tailwind base;
@tailwind components;
@tailwind utilities;
`},{id:he(),name:"main.js",type:"file",path:"/src/main.js",content:`// Counter functionality
document.addEventListener('DOMContentLoaded', () => {
  const counterBtn = document.getElementById('counter-btn');
  const counterElement = document.getElementById('counter');
  let count = 0;
  
  if (counterBtn && counterElement) {
    counterBtn.addEventListener('click', () => {
      count++;
      counterElement.textContent = count;
      
      // Add more dynamic effects with Tailwind classes
      if (count % 5 === 0) {
        // Toggle classes every 5 clicks
        counterBtn.classList.toggle('bg-white');
        counterBtn.classList.toggle('text-blue-500');
        counterBtn.classList.toggle('bg-yellow-400');
        counterBtn.classList.toggle('text-gray-900');
      }
    });
  }
});`}]}}const Uy=new P4,R4=({onSelectTemplate:e,onCancel:t})=>{const{colors:n}=ve(),[r,s]=_.useState([]),[i,a]=_.useState(""),[l,c]=_.useState(null),[d,u]=_.useState([]);_.useEffect(()=>{const f=Uy.getAllTemplates();s(f);const p=[...new Set(f.map(v=>v.framework))];u(p)},[]);const h=r.filter(f=>{const p=i===""||f.name.toLowerCase().includes(i.toLowerCase())||f.description.toLowerCase().includes(i.toLowerCase())||f.tags.some(y=>y.toLowerCase().includes(i.toLowerCase())),v=l===null||f.framework===l;return p&&v});return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",style:{backgroundColor:n.surface},onClick:f=>f.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:n.border},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pn,{size:20,color:n.primary}),o.jsx("h2",{className:"text-xl font-semibold",style:{color:n.text},children:"Create from Template"})]}),o.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",onClick:t,"aria-label":"Close",children:o.jsx(st,{size:20,color:n.textSecondary})})]}),o.jsxs("div",{className:"p-4 border-b",style:{borderColor:n.border},children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Ln,{size:16,color:n.textSecondary})}),o.jsx("input",{type:"text",placeholder:"Search templates...",value:i,onChange:f=>a(f.target.value),className:"pl-10 pr-4 py-2 w-full rounded-md border",style:{backgroundColor:n.background,color:n.text,borderColor:n.border}}),i&&o.jsx("button",{onClick:()=>a(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Clear search",children:o.jsx(st,{size:16,color:n.textSecondary})})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>c(null),className:"px-3 py-1 text-sm rounded-full",style:{backgroundColor:l===null?n.primary:n.background,color:l===null?"white":n.text,border:`1px solid ${l===null?n.primary:n.border}`},children:"All"}),d.map(f=>o.jsx("button",{onClick:()=>c(f===l?null:f),className:"px-3 py-1 text-sm rounded-full",style:{backgroundColor:f===l?n.primary:n.background,color:f===l?"white":n.text,border:`1px solid ${f===l?n.primary:n.border}`},children:f},f))]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:h.length===0?o.jsx("div",{className:"text-center py-8",style:{color:n.textSecondary},children:"No templates found matching your criteria."}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(f=>o.jsxs("div",{className:"border rounded-lg overflow-hidden cursor-pointer transition-transform hover:scale-105",style:{backgroundColor:n.surface,borderColor:n.border},onClick:()=>e(f.id),children:[o.jsx("div",{className:"h-36 flex items-center justify-center",style:{backgroundColor:`${n.primary}10`},children:f.icon?o.jsx("img",{src:f.icon,alt:f.name,className:"h-20 object-contain",onError:p=>{p.currentTarget.src="https://via.placeholder.com/150?text=Template"}}):o.jsx(Pn,{size:40,color:n.primary})}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-semibold text-lg mb-1",style:{color:n.text},children:f.name}),o.jsx("p",{className:"text-sm mb-3",style:{color:n.textSecondary},children:f.description}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[f.tags.slice(0,3).map(p=>o.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:`${n.primary}20`,color:n.primary},children:p},p)),f.tags.length>3&&o.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:n.background,color:n.textSecondary},children:["+",f.tags.length-3," more"]})]})]})]},f.id))})}),o.jsxs("div",{className:"p-4 border-t flex justify-end",style:{borderColor:n.border},children:[o.jsx("button",{className:"px-4 py-2 rounded-md border mr-2",style:{backgroundColor:n.background,color:n.text,borderColor:n.border},onClick:t,children:"Cancel"}),o.jsx("button",{className:"px-4 py-2 rounded-md",style:{backgroundColor:n.primary,color:"white"},onClick:()=>{h.length>0&&e(h[0].id)},disabled:h.length===0,children:"Create Custom Project"})]})]})})},F4=({isOpen:e,onClose:t,onCreateProject:n})=>{const{colors:r}=ve(),[s,i]=_.useState(""),[a,l]=_.useState(!1),[c,d]=_.useState(null),[u,h]=_.useState(!1),[f,p]=_.useState(void 0),[v,y]=_.useState("");if(!e)return null;const b=async()=>{if(!s.trim()){d("Project name is required");return}d(null),l(!0);try{await n(s,f),i(""),p(void 0),y(""),t()}catch(m){console.error("Error creating project:",m),d("Failed to create project. Please try again.")}finally{l(!1)}},g=m=>{const x=Uy.getTemplateById(m);p(m),y((x==null?void 0:x.name)||""),h(!1)};return u?o.jsx(R4,{onSelectTemplate:g,onCancel:()=>h(!1)}):o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",style:{backgroundColor:r.surface},onClick:m=>m.stopPropagation(),children:[o.jsxs("div",{className:"flex justify-between items-center p-4 border-b",style:{borderColor:r.border},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pn,{size:20,color:r.primary}),o.jsx("h2",{className:"text-xl font-semibold",style:{color:r.text},children:"Create New Project"})]}),o.jsx("button",{className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",onClick:t,"aria-label":"Close",children:o.jsx(st,{size:20,color:r.textSecondary})})]}),c&&o.jsx("div",{className:"p-3 mx-4 mt-4 rounded-md",style:{backgroundColor:`${r.error}15`,color:r.error},children:c}),o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:r.text},children:"Project Name"}),o.jsx("input",{type:"text",value:s,onChange:m=>i(m.target.value),placeholder:"My Awesome Project",className:"w-full p-2 border rounded-md",style:{backgroundColor:r.background,color:r.text,borderColor:r.border},autoFocus:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2 text-sm font-medium",style:{color:r.text},children:"Template"}),f?o.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-md",style:{backgroundColor:`${r.primary}10`,borderColor:r.primary},children:[o.jsx("span",{style:{color:r.text},children:v}),o.jsx("button",{className:"text-sm text-blue-500 hover:text-blue-700",onClick:()=>p(void 0),style:{color:r.primary},children:"Change"})]}):o.jsxs("button",{className:"w-full p-2 border border-dashed rounded-md flex items-center justify-center gap-2",style:{borderColor:r.border,color:r.textSecondary},onClick:()=>h(!0),children:[o.jsx(Ir,{size:16}),"Choose a template"]})]})]}),o.jsxs("div",{className:"flex justify-end gap-2 p-4 border-t",style:{borderColor:r.border},children:[o.jsx("button",{className:"px-4 py-2 border rounded-md",style:{borderColor:r.border,color:r.text,backgroundColor:"transparent"},onClick:t,children:"Cancel"}),o.jsx("button",{className:"px-4 py-2 rounded-md",style:{backgroundColor:r.primary,color:"white",opacity:a||!s.trim()?.7:1},onClick:b,disabled:a||!s.trim(),children:a?"Creating...":"Create Project"})]})]})})},B4="_container_3conv_1",O4="_fileTreeContainer_3conv_8",L4="_fileActionsBar_3conv_15",z4="_fileActionsTitle_3conv_23",$4="_fileActions_3conv_15",D4="_fileAction_3conv_15",M4="_projectList_3conv_48",U4="_listHeader_3conv_55",H4="_projectItem_3conv_62",W4="_projectName_3conv_74",q4="_projectPath_3conv_81",V4="_projectActions_3conv_86",K4="_browseButton_3conv_93",G4="_createButton_3conv_94",Et={container:B4,fileTreeContainer:O4,fileActionsBar:L4,fileActionsTitle:z4,fileActions:$4,fileAction:D4,projectList:M4,listHeader:U4,projectItem:H4,projectName:W4,projectPath:q4,projectActions:V4,browseButton:K4,createButton:G4},J4=()=>{const{colors:e}=ve(),t=ot(),{projects:n,currentProject:r,selectProject:s,createNewProject:i,createNewFile:a,createNewFolder:l,openProject:c}=Xe(),[d,u]=_.useState(!1),[h,f]=_.useState(!1),[p,v]=_.useState("file"),[y,b]=_.useState(void 0),[g,m]=_.useState(!1),[x,E]=_.useState(!0);_.useEffect(()=>{Fe.setScope("explorer");const F=Fe.registerHandler("explorer.newFile",I),L=Fe.registerHandler("explorer.newFolder",R);return()=>{F(),L()}},[]);const k=async F=>{try{const L=F.split("/").pop()||"New Project";await i(L)}catch(L){console.error("Error opening project:",L),alert("Failed to open project. Creating a new one instead."),await i()}},I=()=>{v("file"),f(!0)},R=()=>{v("folder"),f(!0)},T=async(F,L)=>{try{L==="file"?await a(F):await l(F)}catch(C){throw console.error(`Error creating ${L}:`,C),C}},B=async(F,L)=>{try{await i(F,L)}catch(C){throw console.error("Error creating project:",C),new Error(`Failed to create project: ${C}`)}},P=async()=>{try{const F=r?"newfile.js":"index.js";r||await i("My Project"),await a(F),t("/editor")}catch(F){console.error("Error creating file:",F),alert("Failed to create file. Please try again.")}},K=[...n];return!r&&K.length===0?o.jsx("div",{className:"welcome-screen",style:{backgroundColor:e.background,height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px"},children:o.jsxs("div",{style:{backgroundColor:e.surface,borderRadius:"12px",padding:"32px",maxWidth:"500px",width:"100%",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[o.jsx("h1",{style:{color:e.text,marginBottom:"16px",fontSize:"24px"},children:"Welcome to Code Canvas!"}),o.jsx("p",{style:{color:e.textSecondary,marginBottom:"32px",fontSize:"16px"},children:"Start coding right away or create a new project to organize your work"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("button",{onClick:P,style:{backgroundColor:e.primary,color:"white",border:"none",borderRadius:"8px",padding:"16px",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",cursor:"pointer",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",transition:"transform 0.2s, background-color 0.2s"},children:[o.jsx(Ir,{size:20}),"Start Coding Now"]}),o.jsxs("button",{onClick:()=>m(!0),style:{backgroundColor:e.surface,color:e.text,border:`1px solid ${e.border}`,borderRadius:"8px",padding:"16px",fontSize:"16px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",cursor:"pointer"},children:[o.jsx(Tr,{size:20}),"Create New Project"]})]}),o.jsx("p",{style:{color:e.textSecondary,marginTop:"32px",fontSize:"14px"},children:"Your work automatically saves as you type"})]})}):o.jsxs("div",{className:Et.container,style:{backgroundColor:e.background},children:[o.jsx(yT,{openBrowser:()=>u(!0)}),r?o.jsxs("div",{className:Et.fileTreeContainer,children:[o.jsxs("div",{className:Et.fileActionsBar,children:[o.jsx("div",{className:Et.fileActionsTitle,style:{color:e.text},children:"Files"}),o.jsxs("div",{className:Et.fileActions,children:[o.jsx("button",{className:Et.fileAction,onClick:I,title:"New File (Alt+N)",children:o.jsx(rs,{size:16,color:e.textSecondary})}),o.jsx("button",{className:Et.fileAction,onClick:R,title:"New Folder (Alt+Shift+N)",children:o.jsx(Tr,{size:16,color:e.textSecondary})}),o.jsx("button",{className:Et.fileAction,onClick:()=>E(!x),title:x?"Switch to simple view":"Switch to enhanced view",style:{backgroundColor:x?`${e.primary}20`:"transparent"},children:o.jsx("span",{style:{fontSize:"10px",fontWeight:"bold",color:x?e.primary:e.textSecondary},children:x?"Enhanced":"Simple"})})]})]}),x?o.jsx(s4,{}):o.jsx(GT,{})]}):o.jsxs("div",{className:Et.projectList,children:[o.jsx("h3",{className:Et.listHeader,style:{color:e.textSecondary},children:"Recent Projects"}),K.map(F=>o.jsxs("div",{className:Et.projectItem,style:{borderBottomColor:e.border},onClick:()=>s(F.id),children:[o.jsx("h4",{className:Et.projectName,style:{color:e.text},children:F.name}),o.jsx("p",{className:Et.projectPath,style:{color:e.textSecondary},children:F.path})]},F.id)),o.jsxs("div",{className:Et.projectActions,children:[o.jsx("button",{className:Et.browseButton,style:{backgroundColor:e.primary},onClick:()=>u(!0),children:"Browse Projects"}),o.jsx("button",{className:Et.createButton,style:{backgroundColor:"transparent",borderColor:e.border,color:e.text},onClick:()=>m(!0),children:"Create New Project"})]})]}),o.jsx(o4,{}),o.jsx(E4,{isOpen:d,onClose:()=>u(!1),onSelectFolder:k,mode:"folder",title:"Select Project Folder"}),o.jsx(My,{isOpen:h,fileType:p,parentPath:y,onClose:()=>f(!1),onCreateFile:T}),o.jsx(F4,{isOpen:g,onClose:()=>m(!1),onCreateProject:B})]})};class Z4{constructor(){Se(this,"commands",new Map);this.registerCommands()}registerCommands(){this.registerCommand({name:"help",description:"Display available commands",usage:"help [command]",handler:async(t,n)=>{if(t.length>0){const s=this.commands.get(t[0]);return s?{content:`
                <div class="help-command">
                  <div class="help-name">${s.name}</div>
                  <div class="help-desc">${s.description}</div>
                  <div class="help-usage">Usage: ${s.usage}</div>
                </div>
              `,isHtml:!0}:{content:`Command not found: ${t[0]}`,isError:!0}}let r='<div class="help-list">';return this.commands.forEach(s=>{r+=`<div class="help-item"><span class="help-cmd">${s.name}</span> - ${s.description}</div>`}),r+="</div>",{content:r,isHtml:!0}}}),this.registerCommand({name:"clear",description:"Clear the terminal",usage:"clear",handler:async()=>({content:"$$CLEAR$$"})}),this.registerCommand({name:"ls",description:"List directory contents",usage:"ls [path]",handler:async(t,n)=>{if(!n.currentProject)return{content:"No project opened",isError:!0};const r=t.length>0?t[0]:n.currentDirectory,s=this.normalizePath(r,n.currentDirectory),i=n.currentProject.files.filter(d=>{const u=d.path.substring(0,d.path.lastIndexOf("/"));return u===s||s==="/"&&u===""});if(i.length===0)return{content:"Directory is empty"};let a='<div class="file-list">';const l=i.filter(d=>d.type==="directory"),c=i.filter(d=>d.type==="file");return l.sort((d,u)=>d.name.localeCompare(u.name)),c.sort((d,u)=>d.name.localeCompare(u.name)),l.forEach(d=>{a+=`<div class="file-item directory">${d.name}/</div>`}),c.forEach(d=>{a+=`<div class="file-item file">${d.name}</div>`}),a+="</div>",{content:a,isHtml:!0}}}),this.registerCommand({name:"pwd",description:"Print working directory",usage:"pwd",handler:async(t,n)=>n.currentProject?{content:n.currentDirectory}:{content:"No project opened",isError:!0}}),this.registerCommand({name:"cd",description:"Change directory",usage:"cd <path>",handler:async(t,n)=>{if(!n.currentProject)return{content:"No project opened",isError:!0};if(t.length===0)return{content:n.currentDirectory};const r=t[0];if(r===".."){if(n.currentDirectory==="/")return{content:"/"};const a=n.currentDirectory.split("/").filter(Boolean);return a.pop(),{content:`$$CD$$${a.length>0?"/"+a.join("/"):"/"}`}}const s=this.normalizePath(r,n.currentDirectory);return n.currentProject.files.find(a=>a.path===s&&a.type==="directory")?{content:`$$CD$$${s}`}:{content:`Directory not found: ${s}`,isError:!0}}}),this.registerCommand({name:"cat",description:"Display file contents",usage:"cat <file>",handler:async(t,n)=>{if(!n.currentProject)return{content:"No project opened",isError:!0};if(t.length===0)return{content:"Usage: cat <file>",isError:!0};const r=t[0],s=this.normalizePath(r,n.currentDirectory),i=n.findFile(s);return!i||i.type!=="file"?{content:`File not found: ${s}`,isError:!0}:{content:i.content||"(empty file)"}}})}registerCommand(t){this.commands.set(t.name,t)}async executeCommand(t,n){const r=this.parseCommandLine(t);if(r.length===0)return{content:""};const s=r[0],i=this.commands.get(s);if(!i)return{content:`Command not found: ${s}`,isError:!0};try{return await i.handler(r.slice(1),n)}catch(a){return{content:`Error executing command: ${a instanceof Error?a.message:String(a)}`,isError:!0}}}parseCommandLine(t){const n=[];let r="",s=!1,i=!1;for(let a=0;a<t.length;a++){const l=t[a];if(i){r+=l,i=!1;continue}if(l==="\\"){i=!0;continue}if(l==='"'||l==="'"){s=!s;continue}if(l===" "&&!s){r&&(n.push(r),r="");continue}r+=l}return r&&n.push(r),n}normalizePath(t,n){return t.startsWith("/")?t:n==="/"?`/${t}`:`${n}/${t}`}}const Y4=new Z4,Q4="_container_asqxg_1",X4="_toolbar_asqxg_10",e3="_title_asqxg_19",t3="_actions_asqxg_24",n3="_actionButton_asqxg_29",r3="_messagesContainer_asqxg_44",s3="_emptyState_asqxg_52",o3="_message_asqxg_44",i3="_timestamp_asqxg_71",a3="_content_asqxg_78",l3="_scrollToBottomButton_asqxg_86",fn={container:Q4,toolbar:X4,title:e3,actions:t3,actionButton:n3,messagesContainer:r3,emptyState:s3,message:o3,timestamp:i3,content:a3,scrollToBottomButton:l3},c3=({messages:e,onClear:t,height:n=200,className:r=""})=>{const{colors:s}=ve(),i=_.useRef(null),[a,l]=_.useState(!0),[c,d]=_.useState(!1),u=v=>new Date(v).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),h=v=>{switch(v){case"error":return{color:s.error};case"warn":return{color:s.warning};case"info":return{color:s.primary};case"system":return{color:s.textSecondary,fontStyle:"italic"};default:return{color:s.text}}};_.useEffect(()=>{i.current&&a&&(i.current.scrollTop=i.current.scrollHeight)},[e,a]);const f=()=>{if(!i.current)return;const{scrollTop:v,scrollHeight:y,clientHeight:b}=i.current,g=y-v-b<10;l(g),d(!g&&e.length>0)},p=()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight,l(!0),d(!1))};return o.jsxs("div",{className:`${fn.container} ${r}`,style:{backgroundColor:s.surface,borderColor:s.border,height:n},children:[o.jsxs("div",{className:fn.toolbar,children:[o.jsx("span",{className:fn.title,style:{color:s.textSecondary},children:"Console Output"}),o.jsx("div",{className:fn.actions,children:o.jsx("button",{className:fn.actionButton,onClick:t,title:"Clear console",children:o.jsx(co,{size:14,color:s.textSecondary})})})]}),o.jsx("div",{className:fn.messagesContainer,ref:i,onScroll:f,children:e.length===0?o.jsx("div",{className:fn.emptyState,style:{color:s.textSecondary},children:"Console output will appear here"}):e.map(v=>o.jsxs("div",{className:fn.message,children:[o.jsx("span",{className:fn.timestamp,style:{color:s.textSecondary},children:u(v.timestamp)}),o.jsx("pre",{className:fn.content,style:h(v.type),children:v.content})]},v.id))}),c&&o.jsxs("button",{className:fn.scrollToBottomButton,style:{backgroundColor:s.primary,color:"#FFFFFF"},onClick:p,children:[o.jsx(lw,{size:14,color:"#FFFFFF"}),o.jsx("span",{children:"New messages"})]})]})},d3="_container_aaezq_1",u3="_headerBar_aaezq_8",h3="_headerTitle_aaezq_18",f3="_headerActions_aaezq_26",p3="_actionButton_aaezq_31",m3="_actionButtonActive_aaezq_43",g3="_contentContainer_aaezq_52",y3="_terminalOutput_aaezq_60",x3="_terminalWithConsole_aaezq_68",v3="_consoleOutput_aaezq_72",b3="_terminalLineContainer_aaezq_78",_3="_terminalLine_aaezq_78",w3="_terminalHtml_aaezq_91",k3="_suggestionsContainer_aaezq_97",S3="_suggestionItem_aaezq_109",j3="_inputContainer_aaezq_123",C3="_prompt_aaezq_132",E3="_input_aaezq_123",N3="_historyNavigation_aaezq_151",T3="_navButton_aaezq_157",I3="_sendButton_aaezq_172",ze={container:d3,headerBar:u3,headerTitle:h3,headerActions:f3,actionButton:p3,actionButtonActive:m3,contentContainer:g3,terminalOutput:y3,terminalWithConsole:x3,consoleOutput:v3,terminalLineContainer:b3,terminalLine:_3,terminalHtml:w3,suggestionsContainer:k3,suggestionItem:S3,inputContainer:j3,prompt:C3,input:E3,historyNavigation:N3,navButton:T3,sendButton:I3},A3=()=>{const{colors:e}=ve(),{currentProject:t,createNewFile:n,createNewFolder:r,deleteFile:s,saveFile:i,findFileById:a,currentFile:l}=Xe(),[c,d]=_.useState(""),[u,h]=_.useState([{id:"1",content:"Code Canvas Terminal v1.0.0",isCommand:!1},{id:"2",content:"Node.js v18.16.1 is available! Try running `node -v`",isCommand:!1},{id:"3",content:'Type "help" for available commands',isCommand:!1}]),[f,p]=_.useState([{id:"1",type:"info",content:"Console ready. Run your code to see output here.",timestamp:Date.now()}]),[v,y]=_.useState([]),[b,g]=_.useState(-1),[m,x]=_.useState("/"),[E,k]=_.useState([]),[I,R]=_.useState(!1),[T,B]=_.useState(!1),P=_.useRef(null),K=_.useRef(null),F=_.useRef(250);_.useEffect(()=>{Fe.setScope("terminal");const te=Fe.registerHandler("terminal.clear",O),de=Fe.registerHandler("terminal.run",Y);return()=>{te(),de()}},[]),_.useEffect(()=>{P.current&&(P.current.scrollTop=P.current.scrollHeight)},[u]),_.useEffect(()=>{K.current&&K.current.focus()},[]),_.useEffect(()=>{const te=()=>{const de=window.innerHeight;de<600?F.current=180:de<800?F.current=220:F.current=250};return te(),window.addEventListener("resize",te),()=>{window.removeEventListener("resize",te)}},[]);const L=te=>{if(!t)return null;const de=te.startsWith("/")?te:`/${te}`;return t.files.find(ce=>ce.path===de)||null},C=async te=>{if(!t)return"No project opened";const de=a(te);if(!de||de.type!=="file")return"File not found";if(!de.content)return"";try{const ce=(Q,N)=>{const j={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:Q,content:N,timestamp:Date.now()};p(w=>[...w,j])},ye={log:console.log,error:console.error,warn:console.warn,info:console.info};console.log=(...Q)=>{const N=Q.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" ");ce("log",N),ye.log(...Q)},console.error=(...Q)=>{const N=Q.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" ");ce("error",N),ye.error(...Q)},console.warn=(...Q)=>{const N=Q.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" ");ce("warn",N),ye.warn(...Q)},console.info=(...Q)=>{const N=Q.map(j=>typeof j=="object"?JSON.stringify(j,null,2):String(j)).join(" ");ce("info",N),ye.info(...Q)};const ge=new Function(de.content);B(!0);const S={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Executing ${de.name}...`,timestamp:Date.now()};p(Q=>[...Q,S]);try{ge();const Q={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Execution of ${de.name} completed`,timestamp:Date.now()};p(N=>[...N,Q])}catch(Q){return ce("error",`Runtime error: ${Q.message}`),`Error: ${Q.message}`}finally{console.log=ye.log,console.error=ye.error,console.warn=ye.warn,console.info=ye.info}return""}catch(ce){return`Error: ${ce.message}`}},Z=te=>{if(!te)return[];const de=["help","clear","ls","pwd","cd","cat","touch","mkdir","rm","echo","run","node","npm","yarn","pnpm","npx","debug"],ce=["npm install","npm init","npm run","npm list","npm uninstall"],ye=["node -v","node --version","node -e"],ge=["debug run","debug pause","debug step","debug stop"],S=[];return t&&t.files.filter(N=>{const j=N.path.substring(0,N.path.lastIndexOf("/"));return j===m||m==="/"&&j===""}).forEach(N=>{N.type==="file"&&N.name.endsWith(".js")&&(S.push(`node ${N.name}`),S.push(`run ${N.name}`),S.push(`debug ${N.name}`))}),[...de,...ce,...ye,...S,...ge].filter(N=>N.startsWith(te)).slice(0,5)},W=te=>{d(te);const de=Z(te);k(de),R(de.length>0)},U=te=>{d(te),R(!1),K.current&&K.current.focus()},z=async()=>{if(!c.trim())return;const te={id:Date.now().toString(),content:c,isCommand:!0};if(h(ge=>[...ge,te]),y(ge=>[c,...ge.slice(0,49)]),g(-1),R(!1),c.startsWith("debug")){q(c.substring(5).trim()),d("");return}const de={currentProject:t,currentDirectory:m,findFile:L,executeFile:C,createFile:async(ge,S)=>{const Q=L(S);if(!Q)throw new Error("Parent directory not found");await n(ge,Q.id)},createDirectory:async(ge,S)=>{const Q=L(S);if(!Q)throw new Error("Parent directory not found");await r(ge,Q.id)},deleteFile:async ge=>{const S=L(ge);if(!S)throw new Error("File not found");await s(S.id)},saveFile:async(ge,S)=>{const Q=L(ge);if(!Q)throw new Error("File not found");await i(Q.id,S)}},ce=await Y4.executeCommand(c,de);if(ce.content==="$$CLEAR$$"){h([]),d("");return}if(ce.content&&ce.content.startsWith("$$CD$$")){const ge=ce.content.substring(6);x(ge),d("");return}const ye={id:(Date.now()+1).toString(),content:ce.content,isCommand:!1,isError:ce.isError,isHtml:ce.isHtml};h(ge=>[...ge,ye]),d("")},q=te=>{const ce=te.trim().split(/\s+/)[0];if(ce&&t){const ye=t.files.find(ge=>ge.type==="file"&&ge.name===ce&&ge.path.startsWith(m));if(ye&&ye.type==="file"){const ge={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Starting debug session for ${ye.name}...`,timestamp:Date.now()};p(S=>[...S,ge]),B(!0);return}switch(ce){case"run":if(l&&l.language==="javascript"){const j={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Starting debug session for ${l.name}...`,timestamp:Date.now()};p(w=>[...w,j]),B(!0)}else{const j={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"error",content:"No JavaScript file is currently open for debugging",timestamp:Date.now()};p(w=>[...w,j])}break;case"stop":const ge={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:"Debugging session stopped",timestamp:Date.now()};p(j=>[...j,ge]);break;case"step":const S={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:"Stepped to next line",timestamp:Date.now()};p(j=>[...j,S]);break;case"pause":const Q={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:"Execution paused",timestamp:Date.now()};p(j=>[...j,Q]);break;default:const N={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"error",content:`Unknown debug command: ${ce}`,timestamp:Date.now()};p(j=>[...j,N]);break}}else{const ye={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"error",content:"Please specify a file to debug or a debug command",timestamp:Date.now()};p(ge=>[...ge,ye])}},re=te=>{if(te.key==="ArrowUp"&&(te.preventDefault(),v.length>0)){const de=b<v.length-1?b+1:b;g(de),d(v[de])}if(te.key==="ArrowDown")if(te.preventDefault(),b>0){const de=b-1;g(de),d(v[de])}else b===0&&(g(-1),d(""));te.key==="Tab"&&(te.preventDefault(),E.length>0&&U(E[0])),te.key==="Enter"&&z()},H=te=>te.isHtml?o.jsx("div",{className:ze.terminalHtml,dangerouslySetInnerHTML:{__html:te.content}}):o.jsxs("pre",{className:ze.terminalLine,style:{color:te.isCommand?e.primary:te.isError?e.error:e.text,fontFamily:"Fira Code, monospace",fontWeight:te.isCommand?500:400},children:[te.isCommand?`${m}> `:"",te.content]}),O=()=>{h([])},ie=()=>{p([{id:Date.now().toString(),type:"info",content:"Console cleared",timestamp:Date.now()}])},M=()=>{const te=u.map(de=>de.isCommand?`${m}> ${de.content}`:de.content).join(`
`);navigator.clipboard.writeText(te).then(()=>{h(de=>[...de,{id:Date.now().toString(),content:"Terminal content copied to clipboard",isCommand:!1}])}).catch(de=>{console.error("Failed to copy terminal content:",de)})},Y=()=>{let te=l;if(!te||!te.name.endsWith(".js")){const de=t==null?void 0:t.files.find(ce=>ce.type==="file"&&ce.name==="index.js"&&(ce.path==="/index.js"||ce.path===`${m}/index.js`));if(de)te={id:de.id,name:de.name,path:de.path,language:"javascript",content:de.content||""};else{const ce=t==null?void 0:t.files.find(ye=>ye.type==="file"&&ye.name.endsWith(".js")&&(ye.path.startsWith(m)||ye.path.startsWith("/")));ce&&(te={id:ce.id,name:ce.name,path:ce.path,language:"javascript",content:ce.content||""})}}if(te){const de={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Running ${te.name}...`,timestamp:Date.now()};p(ye=>[...ye,de]);const ce={log:console.log,error:console.error,warn:console.warn,info:console.info};console.log=(...ye)=>{const ge=ye.map(S=>typeof S=="object"?JSON.stringify(S,null,2):String(S)).join(" ");me("log",ge),ce.log(...ye)},console.error=(...ye)=>{const ge=ye.map(S=>typeof S=="object"?JSON.stringify(S,null,2):String(S)).join(" ");me("error",ge),ce.error(...ye)},console.warn=(...ye)=>{const ge=ye.map(S=>typeof S=="object"?JSON.stringify(S,null,2):String(S)).join(" ");me("warn",ge),ce.warn(...ye)},console.info=(...ye)=>{const ge=ye.map(S=>typeof S=="object"?JSON.stringify(S,null,2):String(S)).join(" ");me("info",ge),ce.info(...ye)};try{B(!0),new Function(te.content)();const ge={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Execution of ${te.name} completed successfully`,timestamp:Date.now()};p(S=>[...S,ge])}catch(ye){me("error",`Runtime error: ${ye.message}`),h(ge=>[...ge,{id:Date.now().toString(),content:`Error executing ${te==null?void 0:te.name}: ${ye.message}`,isCommand:!1,isError:!0}])}finally{console.log=ce.log,console.error=ce.error,console.warn=ce.warn,console.info=ce.info}}else h(de=>[...de,{id:Date.now().toString(),content:'No JavaScript files found to run. Create one with the "touch" command first.',isCommand:!1,isError:!0}])},$=te=>{d(te),z()},fe=()=>{if(l&&l.language==="javascript"){const te={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"info",content:`Starting debug session for ${l.name}...`,timestamp:Date.now()};p(de=>[...de,te]),B(!0)}else{const te={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:"error",content:"No JavaScript file is currently open for debugging",timestamp:Date.now()};p(de=>[...de,te]),B(!0)}},me=(te,de)=>{const ce={id:Date.now().toString()+Math.random().toString(36).slice(2,9),type:te,content:de,timestamp:Date.now()};p(ye=>[...ye,ce])};return t?o.jsxs("div",{className:ze.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:ze.headerBar,style:{backgroundColor:e.surface,borderBottomColor:e.border},children:[o.jsxs("div",{className:ze.headerTitle,children:[o.jsx(Al,{size:16,color:e.primary,style:{marginRight:8}}),o.jsxs("span",{style:{color:e.text},children:["Terminal: ",t==null?void 0:t.name]})]}),o.jsxs("div",{className:ze.headerActions,children:[o.jsx("button",{className:ze.actionButton,title:"Run JavaScript file (Alt+Shift+R)",onClick:Y,children:o.jsx(ui,{size:16,color:e.textSecondary})}),o.jsx("button",{className:ze.actionButton,title:"Debug JavaScript file",onClick:fe,children:o.jsx(Ou,{size:16,color:e.textSecondary})}),o.jsx("button",{className:ze.actionButton,title:"npm install",onClick:()=>$("npm install"),children:o.jsx(Nw,{size:16,color:e.textSecondary})}),o.jsx("button",{className:ze.actionButton,title:"Copy terminal content",onClick:M,children:o.jsx(dw,{size:16,color:e.textSecondary})}),o.jsx("button",{className:ze.actionButton,title:"Clear terminal (Ctrl+L)",onClick:O,children:o.jsx(st,{size:16,color:e.textSecondary})}),o.jsx("button",{className:`${ze.actionButton} ${T?ze.actionButtonActive:""}`,title:"Toggle console",onClick:()=>B(!T),style:{backgroundColor:T?`${e.primary}20`:"transparent",borderColor:T?e.primary:"transparent",borderWidth:"1px",borderStyle:"solid"},children:o.jsx(xt,{size:16,color:T?e.primary:e.textSecondary,style:{transform:T?"rotate(90deg)":"none"}})})]})]}),o.jsxs("div",{className:ze.contentContainer,children:[o.jsx("div",{ref:P,className:`${ze.terminalOutput} ${T?ze.terminalWithConsole:""}`,children:u.map(te=>o.jsx("div",{className:ze.terminalLineContainer,children:H(te)},te.id))}),T&&o.jsx(c3,{messages:f,onClear:ie,height:F.current,className:ze.consoleOutput})]}),o.jsx("div",{className:ze.suggestionsContainer,style:{display:I?"block":"none",backgroundColor:e.surface,borderColor:e.border},children:E.map((te,de)=>o.jsx("div",{className:ze.suggestionItem,style:{borderBottomColor:e.border,color:e.text},onClick:()=>U(te),children:te},de))}),o.jsxs("div",{className:ze.inputContainer,style:{backgroundColor:e.surface,borderTopColor:e.border},children:[o.jsx("span",{className:ze.prompt,style:{color:e.primary},children:m+">"}),o.jsx("input",{ref:K,className:ze.input,style:{color:e.text},value:c,onChange:te=>W(te.target.value),onKeyDown:re,placeholder:"Enter command...",spellCheck:"false"}),o.jsxs("div",{className:ze.historyNavigation,children:[o.jsx("button",{className:ze.navButton,onClick:()=>{if(v.length>0){const te=b<v.length-1?b+1:b;g(te),d(v[te])}},disabled:v.length===0||b===v.length-1,style:{opacity:v.length===0||b===v.length-1?.5:1},children:o.jsx(Cd,{size:16,color:e.textSecondary})}),o.jsx("button",{className:ze.navButton,onClick:()=>{if(b>0){const te=b-1;g(te),d(v[te])}else b===0&&(g(-1),d(""))},disabled:b<=0,style:{opacity:b<=0?.5:1},children:o.jsx(Jg,{size:16,color:e.textSecondary})})]}),o.jsx("button",{className:ze.sendButton,style:{backgroundColor:c.trim()?e.primary:`${e.primary}80`,opacity:c.trim()?1:.7},onClick:z,disabled:!c.trim(),children:o.jsx(Cd,{size:16,color:"#FFFFFF",style:{transform:"rotate(90deg)"}})})]})]}):o.jsx(Za,{icon:"Terminal",title:"Terminal",message:"Open a project first to use the terminal.",actionText:"Open Project",actionPath:"/explorer"})},P3="_container_16tvx_1",R3="_pickerButton_16tvx_5",F3="_dropdown_16tvx_17",B3="_themeList_16tvx_26",O3="_themeItem_16tvx_31",L3="_themeInfo_16tvx_52",z3="_themeName_16tvx_56",$3="_themeDescription_16tvx_62",rr={container:P3,pickerButton:R3,dropdown:F3,themeList:B3,themeItem:O3,themeInfo:L3,themeName:z3,themeDescription:$3},Hy=({value:e,onChange:t,isDark:n})=>{const{colors:r}=ve(),[s,i]=_.useState(!1),a=_.useRef(null),l=_.useRef(null),c=[{id:"default",name:n?"Dark+":"Light+",description:"The default Code Canvas theme"},{id:"github",name:n?"GitHub Dark":"GitHub Light",description:"Based on GitHub's coding theme"},{id:"monokai",name:"Monokai",description:"Classic dark theme with vibrant colors"},{id:"solarized",name:n?"Solarized Dark":"Solarized Light",description:"Eye-friendly color scheme"}],d=c.find(p=>p.id===e)||c[0],[u,h]=_.useState({});_.useEffect(()=>{if(s&&a.current){const p=a.current.getBoundingClientRect();h({top:p.bottom+5,left:Math.max(0,p.left-120)})}},[s]),_.useEffect(()=>{if(!s)return;const p=y=>{l.current&&!l.current.contains(y.target)&&a.current&&!a.current.contains(y.target)&&i(!1)},v=y=>{y.key==="Escape"&&i(!1)};return document.addEventListener("mousedown",p),document.addEventListener("keydown",v),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",v)}},[s]);const f=p=>{t(p),i(!1)};return o.jsxs("div",{className:rr.container,ref:a,children:[o.jsxs("button",{className:rr.pickerButton,style:{backgroundColor:r.background,borderColor:r.border},onClick:()=>i(!s),children:[o.jsx("span",{style:{color:r.text},children:d.name}),o.jsx(kn,{size:16,color:r.textSecondary})]}),s&&o.jsx("div",{className:rr.dropdown,style:{...u,backgroundColor:r.surface,borderColor:r.border},ref:l,children:o.jsx("div",{className:rr.themeList,children:c.map(p=>o.jsxs("button",{className:rr.themeItem,style:{borderBottomColor:r.border},onClick:()=>f(p.id),children:[o.jsxs("div",{className:rr.themeInfo,children:[o.jsx("span",{className:rr.themeName,style:{color:p.id===e?r.primary:r.text},children:p.name}),o.jsx("span",{className:rr.themeDescription,style:{color:r.textSecondary},children:p.description})]}),p.id===e&&o.jsx(kn,{size:16,color:r.primary})]},p.id))})})]})},D3="_container_1rjk7_1",M3="_header_1rjk7_5",U3="_settings_1rjk7_20",H3="_settingItem_1rjk7_26",W3="_settingInfo_1rjk7_32",q3="_settingLabel_1rjk7_37",V3="_settingDescription_1rjk7_43",K3="_settingControl_1rjk7_47",G3="_slider_1rjk7_65",J3="_syncStatus_1rjk7_92",Z3="_syncStatusItem_1rjk7_101",Y3="_syncStatusLabel_1rjk7_107",Q3="_syncStatusValue_1rjk7_114",X3="_storageBar_1rjk7_118",eA="_storageBarFill_1rjk7_126",tA="_syncButton_1rjk7_132",nA="_spinningIcon_1rjk7_150",rA="_infoBox_1rjk7_159",qe={container:D3,header:M3,settings:U3,settingItem:H3,settingInfo:W3,settingLabel:q3,settingDescription:V3,settingControl:K3,switch:"_switch_1rjk7_52",slider:G3,syncStatus:J3,syncStatusItem:Z3,syncStatusLabel:Y3,syncStatusValue:Q3,storageBar:X3,storageBarFill:eA,syncButton:tA,spinningIcon:nA,infoBox:rA},sA=()=>{const{colors:e}=ve(),{isOffline:t,toggleOfflineMode:n,syncOfflineChanges:r}=Xe(),[s,i]=_.useState(0),[a,l]=_.useState(0),[c,d]=_.useState(0),[u,h]=_.useState(0),[f,p]=_.useState(!1);_.useEffect(()=>{const m=()=>{const k=Is.getLastSync();i(k);const I=Is.getStorageUsed();l(I);const R=Is.getStorageCapacity();d(R);const T=Is.loadPendingChanges();h(T.filter(B=>!B.synced).length)};m();const x=setInterval(m,1e4),E=k=>{p(k),k||m()};return cr.onSyncStatusChange(E),()=>{clearInterval(x),cr.removeSyncListener(E)}},[]);const v=m=>{if(m===0)return"0 Bytes";const x=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(m)/Math.log(1024));return parseFloat((m/Math.pow(1024,E)).toFixed(2))+" "+x[E]},y=m=>m?new Date(m).toLocaleString():"Never",b=()=>{n()},g=async()=>{try{await r()}catch(m){console.error("Error syncing changes:",m),alert("Failed to sync changes: "+(m instanceof Error?m.message:"Unknown error"))}};return o.jsxs("div",{className:qe.container,children:[o.jsxs("div",{className:qe.header,style:{borderBottomColor:e.border},children:[o.jsx(Uu,{size:18,color:t?e.warning:e.textSecondary}),o.jsx("h3",{style:{color:e.text},children:"Offline Mode"})]}),o.jsxs("div",{className:qe.settings,children:[o.jsxs("div",{className:qe.settingItem,children:[o.jsxs("div",{className:qe.settingInfo,children:[o.jsx("div",{className:qe.settingLabel,style:{color:e.text},children:"Offline Mode"}),o.jsx("div",{className:qe.settingDescription,style:{color:e.textSecondary},children:t?"Currently working offline. Changes will be synced when you go online.":"Currently working online. Changes are synced automatically."})]}),o.jsx("div",{className:qe.settingControl,children:o.jsxs("label",{className:qe.switch,children:[o.jsx("input",{type:"checkbox",checked:t,onChange:b}),o.jsx("span",{className:qe.slider,style:{backgroundColor:t?e.warning:e.border}})]})})]}),o.jsxs("div",{className:qe.syncStatus,style:{backgroundColor:e.background,borderColor:e.border},children:[o.jsxs("div",{className:qe.syncStatusItem,children:[o.jsxs("div",{className:qe.syncStatusLabel,children:[o.jsx(wi,{size:14,color:e.textSecondary}),o.jsx("span",{style:{color:e.text},children:"Last Synced"})]}),o.jsx("div",{className:qe.syncStatusValue,style:{color:e.textSecondary},children:y(s)})]}),o.jsxs("div",{className:qe.syncStatusItem,children:[o.jsxs("div",{className:qe.syncStatusLabel,children:[o.jsx(pw,{size:14,color:e.textSecondary}),o.jsx("span",{style:{color:e.text},children:"Pending Changes"})]}),o.jsxs("div",{className:qe.syncStatusValue,style:{color:e.textSecondary},children:[u," ",u===1?"change":"changes"]})]}),o.jsxs("div",{className:qe.syncStatusItem,children:[o.jsxs("div",{className:qe.syncStatusLabel,children:[o.jsx(gw,{size:14,color:e.textSecondary}),o.jsx("span",{style:{color:e.text},children:"Local Storage"})]}),o.jsxs("div",{className:qe.syncStatusValue,style:{color:e.textSecondary},children:[v(a)," / ",v(c)]})]}),o.jsx("div",{className:qe.storageBar,children:o.jsx("div",{className:qe.storageBarFill,style:{width:`${Math.min(100,a/c*100)}%`,backgroundColor:a>.8*c?e.error:a>.6*c?e.warning:e.primary}})})]}),!t&&u>0&&o.jsxs("button",{className:qe.syncButton,onClick:g,disabled:f,style:{backgroundColor:e.primary,opacity:f?.7:1},children:[o.jsx(Zn,{size:16,color:"#FFFFFF",className:f?qe.spinningIcon:""}),o.jsx("span",{children:f?"Syncing...":`Sync Now (${u})`})]}),o.jsxs("div",{className:qe.infoBox,style:{backgroundColor:`${e.primary}10`,color:e.text},children:[o.jsx($u,{size:16,color:e.primary}),o.jsxs("div",{children:[o.jsx("p",{children:"Offline mode allows you to work on your projects even without an internet connection."}),o.jsx("p",{children:"Changes are automatically synced when you go back online."})]})]})]})]})},oA="_container_1n3ie_1",iA="_pickerButton_1n3ie_5",aA="_dropdown_1n3ie_17",lA="_presetSizes_1n3ie_27",cA="_sizeOption_1n3ie_34",dA="_customSizeSection_1n3ie_43",uA="_customSizeLabel_1n3ie_48",hA="_customSizeInput_1n3ie_53",fA="_applyButton_1n3ie_68",pA="_error_1n3ie_84",Nn={container:oA,pickerButton:iA,dropdown:aA,presetSizes:lA,sizeOption:cA,customSizeSection:dA,customSizeLabel:uA,customSizeInput:hA,applyButton:fA,error:pA},mA=({value:e,onChange:t,min:n=10,max:r=24})=>{const{colors:s}=ve(),[i,a]=_.useState(!1),[l,c]=_.useState(e.toString()),[d,u]=_.useState(null),h=_.useRef(null),f=_.useRef(null),p=[10,12,14,16,18,20,24],[v,y]=_.useState({});_.useEffect(()=>{if(i&&h.current){const x=h.current.getBoundingClientRect();y({top:x.bottom+5,left:x.left})}},[i]),_.useEffect(()=>{if(!i)return;const x=E=>{f.current&&!f.current.contains(E.target)&&h.current&&!h.current.contains(E.target)&&a(!1)};return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[i]);const b=x=>{const E=x.target.value;c(E);const k=parseInt(E,10);isNaN(k)?u("Please enter a valid number"):k<n?u(`Minimum size is ${n}`):k>r?u(`Maximum size is ${r}`):u(null)},g=()=>{const x=parseInt(l,10);!isNaN(x)&&x>=n&&x<=r&&(t(x),a(!1))},m=x=>{x.key==="Enter"?g():x.key==="Escape"&&a(!1)};return o.jsxs("div",{className:Nn.container,ref:h,children:[o.jsxs("button",{className:Nn.pickerButton,style:{backgroundColor:s.background,borderColor:s.border},onClick:()=>a(!i),children:[o.jsxs("span",{style:{color:s.text},children:[e,"px"]}),o.jsx(Or,{size:16,color:s.textSecondary})]}),i&&o.jsxs("div",{className:Nn.dropdown,style:{...v,backgroundColor:s.surface,borderColor:s.border},ref:f,children:[o.jsx("div",{className:Nn.presetSizes,children:p.map(x=>o.jsxs("button",{className:Nn.sizeOption,style:{backgroundColor:x===e?s.primary:"transparent",color:x===e?"#FFFFFF":s.text},onClick:()=>{t(x),a(!1)},children:[x,"px"]},x))}),o.jsxs("div",{className:Nn.customSizeSection,children:[o.jsx("div",{className:Nn.customSizeLabel,style:{color:s.textSecondary},children:"Custom size:"}),o.jsxs("div",{className:Nn.customSizeInput,children:[o.jsx("input",{type:"number",min:n,max:r,value:l,onChange:b,onKeyDown:m,style:{borderColor:s.border,backgroundColor:s.background,color:s.text,minHeight:"32px"}}),o.jsx("button",{className:Nn.applyButton,style:{backgroundColor:s.primary},onClick:g,disabled:!!d,children:"Apply"})]}),d&&o.jsx("div",{className:Nn.error,style:{color:s.error},children:d})]})]})]})},gA="_container_15wif_1",yA="_pickerButton_15wif_5",xA="_dropdown_15wif_17",vA="_sizeList_15wif_26",bA="_sizeItem_15wif_30",Co={container:gA,pickerButton:yA,dropdown:xA,sizeList:vA,sizeItem:bA},_A=({value:e,onChange:t})=>{const{colors:n}=ve(),[r,s]=_.useState(!1),i=_.useRef(null),a=_.useRef(null),l=[2,4,8],[c,d]=_.useState({});return _.useEffect(()=>{if(r&&i.current){const u=i.current.getBoundingClientRect();d({top:u.bottom+5,left:u.left})}},[r]),_.useEffect(()=>{if(!r)return;const u=h=>{a.current&&!a.current.contains(h.target)&&i.current&&!i.current.contains(h.target)&&s(!1)};return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[r]),o.jsxs("div",{className:Co.container,ref:i,children:[o.jsxs("button",{className:Co.pickerButton,style:{backgroundColor:n.background,borderColor:n.border},onClick:()=>s(!r),children:[o.jsxs("span",{style:{color:n.text},children:[e," spaces"]}),o.jsx(Or,{size:16,color:n.textSecondary})]}),r&&o.jsx("div",{className:Co.dropdown,style:{...c,backgroundColor:n.surface,borderColor:n.border},ref:a,children:o.jsx("div",{className:Co.sizeList,children:l.map(u=>o.jsxs("button",{className:Co.sizeItem,style:{borderBottomColor:n.border},onClick:()=>{t(u),s(!1)},children:[o.jsxs("span",{style:{color:n.text},children:[u," spaces"]}),e===u&&o.jsx(kn,{size:16,color:n.primary})]},u))})})]})},wA=()=>{const{colors:e,isDark:t}=ve(),{editorSettings:n,updateFontSize:r,updateTabSize:s,updateUseTabs:i,updateWordWrap:a,updateAutoSave:l,updateMinimapEnabled:c,colorTheme:d,updateColorTheme:u}=xl();return o.jsx("div",{style:{padding:"16px"},children:o.jsxs("div",{style:{marginBottom:"24px",backgroundColor:e.surface,borderRadius:"8px",overflow:"hidden"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(Ef,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Word Wrap"})]}),o.jsxs("label",{style:{position:"relative",display:"inline-block",width:"36px",height:"20px"},children:[o.jsx("input",{type:"checkbox",checked:n.wordWrap,onChange:h=>a(h.target.checked),style:{opacity:0,width:0,height:0}}),o.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:n.wordWrap?e.primary:e.border,borderRadius:"10px",transition:".4s"},children:o.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:".4s",transform:n.wordWrap?"translateX(16px)":"translateX(0)"}})})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(Zs,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Auto Save"})]}),o.jsxs("label",{style:{position:"relative",display:"inline-block",width:"36px",height:"20px"},children:[o.jsx("input",{type:"checkbox",checked:n.autoSave,onChange:h=>l(h.target.checked),style:{opacity:0,width:0,height:0}}),o.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:n.autoSave?e.primary:e.border,borderRadius:"10px",transition:".4s"},children:o.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:".4s",transform:n.autoSave?"translateX(16px)":"translateX(0)"}})})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(kw,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Show Minimap"})]}),o.jsxs("label",{style:{position:"relative",display:"inline-block",width:"36px",height:"20px"},children:[o.jsx("input",{type:"checkbox",checked:n.minimapEnabled,onChange:h=>c(h.target.checked),style:{opacity:0,width:0,height:0}}),o.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:n.minimapEnabled?e.primary:e.border,borderRadius:"10px",transition:".4s"},children:o.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:".4s",transform:n.minimapEnabled?"translateX(16px)":"translateX(0)"}})})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(di,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Insert Spaces"})]}),o.jsxs("label",{style:{position:"relative",display:"inline-block",width:"36px",height:"20px"},children:[o.jsx("input",{type:"checkbox",checked:!n.useTabs,onChange:h=>i(!h.target.checked),style:{opacity:0,width:0,height:0}}),o.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:n.useTabs?e.border:e.primary,borderRadius:"10px",transition:".4s"},children:o.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:".4s",transform:n.useTabs?"translateX(0)":"translateX(16px)"}})})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(Ef,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Font Size"})]}),o.jsx(mA,{value:n.fontSize,onChange:r,min:10,max:24})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(vw,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Tab Size"})]}),o.jsx(_A,{value:n.tabSize,onChange:s})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(di,{size:20,color:e.primary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text,fontSize:"16px"},children:"Editor Theme"})]}),o.jsx(Hy,{value:d,onChange:u,isDark:t})]})]})})},kA=()=>{const{colors:e}=ve(),[t,n]=_.useState([]),[r,s]=_.useState(""),[i,a]=_.useState(null),[l,c]=_.useState(!1),[d,u]=_.useState(null),h=_.useRef(null);_.useEffect(()=>{const k=Fe.getAllBindings();n(k)},[]);const p=t.filter(k=>{if(!r)return!0;const I=r.toLowerCase();return k.action.toLowerCase().includes(I)||k.category.toLowerCase().includes(I)||k.description.toLowerCase().includes(I)||Fe.formatKeyCombo(k.currentKeyCombo).toLowerCase().includes(I)}).reduce((k,I)=>(k[I.category]||(k[I.category]=[]),k[I.category].push(I),k),{}),v=Object.keys(p).sort(),y=k=>{a(k),c(!0),u(null),h.current&&h.current.focus()},b=k=>{if(!l||(k.preventDefault(),["Control","Alt","Shift","Meta"].includes(k.key)))return;const I={key:k.key,ctrl:k.ctrlKey,alt:k.altKey,shift:k.shiftKey,meta:k.metaKey};u(I)},g=()=>{!i||!d||(Fe.updateBinding(i,d),n(Fe.getAllBindings()),a(null),c(!1),u(null))},m=()=>{a(null),c(!1),u(null)},x=k=>{Fe.resetBinding(k),n(Fe.getAllBindings())},E=()=>{window.confirm("Are you sure you want to reset all keyboard shortcuts to their default values?")&&(Fe.resetAllBindings(),n(Fe.getAllBindings()))};return o.jsxs("div",{ref:h,tabIndex:-1,onKeyDown:b,style:{outline:"none",padding:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[o.jsx(El,{size:22,color:e.primary}),o.jsx("h2",{style:{margin:0,color:e.text,fontSize:"20px"},children:"Keyboard Shortcuts"})]}),o.jsxs("button",{onClick:E,style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"transparent",color:e.error,border:`1px solid ${e.error}`,borderRadius:"4px",cursor:"pointer",minHeight:"36px"},children:[o.jsx(Pf,{size:14}),"Reset All"]})]}),o.jsxs("div",{style:{position:"relative",marginBottom:"24px"},children:[o.jsx(Ln,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:e.textSecondary}}),o.jsx("input",{type:"text",placeholder:"Search shortcuts...",value:r,onChange:k=>s(k.target.value),style:{width:"100%",padding:"10px 36px 10px 36px",fontSize:"14px",borderRadius:"4px",border:`1px solid ${e.border}`,backgroundColor:e.surface,color:e.text,minHeight:"36px"}}),r&&o.jsx(st,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",color:e.textSecondary,cursor:"pointer"},onClick:()=>s("")})]}),v.length===0?o.jsx("div",{style:{padding:"48px 0",textAlign:"center",color:e.textSecondary},children:r?"No shortcuts match your search":"No shortcuts found"}):v.map(k=>o.jsxs("div",{style:{marginBottom:"32px"},children:[o.jsx("h3",{style:{color:e.primary,fontSize:"16px",marginBottom:"12px",paddingBottom:"4px",borderBottom:`1px solid ${e.border}`},children:k}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:p[k].map(I=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 14px",backgroundColor:e.surface,borderRadius:"6px",border:`1px solid ${e.border}`},children:[o.jsxs("div",{children:[o.jsx("div",{style:{color:e.text,fontWeight:500,marginBottom:"2px"},children:I.action}),o.jsx("div",{style:{color:e.textSecondary,fontSize:"13px"},children:I.description})]}),i===I.id?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("div",{style:{padding:"6px 12px",backgroundColor:l?`${e.primary}20`:e.background,border:`1px solid ${l?e.primary:e.border}`,borderRadius:"4px",color:e.text,fontFamily:"monospace",minWidth:"120px",textAlign:"center",minHeight:"36px",display:"flex",alignItems:"center",justifyContent:"center"},children:d?Fe.formatKeyCombo(d):"Type shortcut..."}),d&&o.jsx("button",{onClick:g,style:{padding:"6px",backgroundColor:e.success,color:"white",border:"none",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"36px",minWidth:"36px"},children:o.jsx(kn,{size:16})}),o.jsx("button",{onClick:m,style:{padding:"6px 12px",backgroundColor:"transparent",color:e.error,border:`1px solid ${e.error}`,borderRadius:"4px",cursor:"pointer",fontSize:"13px",minHeight:"36px"},children:"Cancel"})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("div",{style:{padding:"6px 12px",backgroundColor:e.background,border:`1px solid ${e.border}`,borderRadius:"4px",color:e.text,fontFamily:"monospace",fontSize:"13px",minHeight:"36px",display:"flex",alignItems:"center"},children:Fe.formatKeyCombo(I.currentKeyCombo)}),o.jsx("button",{onClick:()=>y(I.id),style:{padding:"6px 10px",backgroundColor:e.primary,color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"13px",minHeight:"36px"},children:"Edit"}),o.jsx("button",{onClick:()=>x(I.id),style:{padding:"6px",backgroundColor:"transparent",color:e.textSecondary,border:`1px solid ${e.border}`,borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"36px",minWidth:"36px"},children:o.jsx(Pf,{size:14})})]})]},I.id))})]},k))]})},SA=()=>{const{colors:e}=ve(),{user:t}=ht(),[n,r]=_.useState(!1),[s,i]=_.useState("idle"),[a,l]=_.useState(null),[c,d]=_.useState(null),[u,h]=_.useState(!0),[f,p]=_.useState(!1),[v,y]=_.useState(null);_.useEffect(()=>{(async()=>{if(!t){h(!1);return}try{const B=await gn.isSyncEnabled();r(B);const P=gn.getLastSyncTime();l(P)}catch(B){console.error("Error loading sync state:",B),d("Failed to load sync settings")}finally{h(!1)}})();const T=B=>{i(B),B==="error"?d("Sync operation failed. Please try again."):B==="success"&&d(null)};return gn.onSyncStatusChange(T),()=>{gn.offSyncStatusChange(T)}},[t]);const b=R=>{if(!R)return"Never";const T=new Date(R),P=new Date().getTime()-T.getTime(),K=Math.floor(P/(1e3*60*60*24)),F=Math.floor(P/(1e3*60*60)),L=Math.floor(P/(1e3*60));return K>0?`${K} day${K===1?"":"s"} ago`:F>0?`${F} hour${F===1?"":"s"} ago`:L>0?`${L} minute${L===1?"":"s"} ago`:"Just now"},g=async()=>{if(t)try{const R=!n;await gn.setSyncEnabled(R),r(R),R&&await m()}catch(R){console.error("Error toggling sync enabled:",R),d("Failed to update sync settings")}},m=async()=>{if(t)try{p(!1),d(null);const R={syncEnabled:!0,lastSyncTime:Date.now()},T=await gn.saveAllSettings(R);T.success?(l(T.timestamp||Date.now()),d(null)):d(T.error||"Failed to upload settings")}catch(R){console.error("Error uploading settings:",R),d("Failed to upload settings to server")}},x=async()=>{if(t)try{p(!1),d(null);const R=await gn.loadAllSettings();if(!R){d("No settings found on server");return}l(R.lastSyncTime||Date.now()),d(null)}catch(R){console.error("Error downloading settings:",R),d("Failed to download settings from server")}},E=async()=>{if(t)try{p(!1),d(null),await gn.deleteAllSettings()?(l(null),r(!1),d(null)):d("Failed to delete settings")}catch(R){console.error("Error deleting settings:",R),d("Failed to delete settings from server")}},k=R=>{y(R),p(!0)},I=()=>{v==="upload"?m():v==="download"?x():v==="delete"&&E()};return t?u?o.jsxs("div",{style:{padding:"24px",textAlign:"center",color:e.textSecondary,display:"flex",flexDirection:"column",alignItems:"center",gap:"16px"},children:[o.jsx(Zn,{size:24,color:e.primary,style:{animation:"spin 1s linear infinite"}}),o.jsx("div",{children:"Loading sync settings..."}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}})]}):o.jsxs("div",{style:{padding:"24px"},children:[o.jsxs("div",{style:{marginBottom:"24px",backgroundColor:e.surface,borderRadius:"8px",overflow:"hidden"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[n?o.jsx(zu,{size:20,color:e.primary,style:{marginRight:"12px"}}):o.jsx(Yg,{size:20,color:e.textSecondary,style:{marginRight:"12px"}}),o.jsxs("div",{children:[o.jsx("span",{style:{color:e.text,fontSize:"16px",display:"block",marginBottom:"4px"},children:"Settings Sync"}),o.jsx("span",{style:{color:e.textSecondary,fontSize:"13px"},children:n?"Your settings are synced across devices":"Enable to sync settings across devices"})]})]}),o.jsxs("label",{style:{position:"relative",display:"inline-block",width:"36px",height:"20px"},children:[o.jsx("input",{type:"checkbox",checked:n,onChange:g,disabled:s==="syncing",style:{opacity:0,width:0,height:0}}),o.jsx("span",{style:{position:"absolute",cursor:s==="syncing"?"not-allowed":"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:n?e.primary:e.border,opacity:s==="syncing"?.6:1,borderRadius:"10px",transition:".4s"},children:o.jsx("span",{style:{position:"absolute",content:'""',height:"16px",width:"16px",left:"2px",bottom:"2px",backgroundColor:"white",borderRadius:"50%",transition:".4s",transform:n?"translateX(16px)":"translateX(0)"}})})]})]}),n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderBottom:`1px solid ${e.border}`},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[o.jsx(wi,{size:18,color:e.textSecondary,style:{marginRight:"12px"}}),o.jsx("span",{style:{color:e.text},children:"Last synced"})]}),o.jsx("span",{style:{color:e.textSecondary},children:b(a)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"16px",gap:"12px"},children:[o.jsxs("button",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px",backgroundColor:e.surface,border:`1px solid ${e.border}`,borderRadius:"4px",color:e.text,cursor:s==="syncing"?"not-allowed":"pointer",opacity:s==="syncing"?.6:1},onClick:()=>k("download"),disabled:s==="syncing",children:[o.jsx(io,{size:16,color:e.text}),o.jsx("span",{children:"Download"})]}),o.jsxs("button",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"10px",backgroundColor:e.primary,border:"none",borderRadius:"4px",color:"white",cursor:s==="syncing"?"not-allowed":"pointer",opacity:s==="syncing"?.6:1},onClick:()=>k("upload"),disabled:s==="syncing",children:[s==="syncing"?o.jsx(Zn,{size:16,color:"white",style:{animation:"spin 1s linear infinite"}}):o.jsx(iy,{size:16,color:"white"}),o.jsx("span",{children:s==="syncing"?"Syncing...":"Upload"})]})]}),o.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"0 16px 16px"},children:o.jsxs("button",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"8px 16px",backgroundColor:"transparent",border:`1px solid ${e.error}`,borderRadius:"4px",color:e.error,cursor:s==="syncing"?"not-allowed":"pointer",opacity:s==="syncing"?.6:1},onClick:()=>k("delete"),disabled:s==="syncing",children:[o.jsx(co,{size:14}),o.jsx("span",{children:"Delete Remote Settings"})]})})]}),c&&o.jsxs("div",{style:{backgroundColor:`${e.error}15`,padding:"12px 16px",display:"flex",alignItems:"flex-start",gap:"12px",color:e.error,marginTop:n?0:"16px",marginLeft:"16px",marginRight:"16px",marginBottom:"16px",borderRadius:"4px"},children:[o.jsx(Bn,{size:16,style:{marginTop:"2px"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:500,marginBottom:"4px"},children:"Sync Error"}),o.jsx("div",{style:{fontSize:"13px"},children:c})]})]}),s==="success"&&!c&&o.jsxs("div",{style:{backgroundColor:`${e.success}15`,padding:"12px 16px",display:"flex",alignItems:"flex-start",gap:"12px",color:e.success,marginTop:n?0:"16px",marginLeft:"16px",marginRight:"16px",marginBottom:"16px",borderRadius:"4px"},children:[o.jsx(kn,{size:16,style:{marginTop:"2px"}}),o.jsx("div",{children:o.jsx("div",{style:{fontWeight:500},children:"Settings synced successfully"})})]})]}),o.jsxs("div",{style:{backgroundColor:`${e.primary}10`,padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[o.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"8px",alignItems:"flex-start"},children:[o.jsx(xw,{size:18,color:e.primary,style:{flexShrink:0,marginTop:"2px"}}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:e.text,fontSize:"16px",margin:"0 0 4px 0"},children:"About Settings Sync"}),o.jsx("p",{style:{color:e.textSecondary,fontSize:"14px",margin:0,lineHeight:1.5},children:"Settings Sync allows you to keep your editor preferences consistent across all devices where you use Code Canvas."})]})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",marginTop:"16px",paddingTop:"16px",borderTop:`1px solid ${e.border}`},children:[o.jsx("div",{style:{fontSize:"14px",color:e.text},children:"The following settings are synced:"}),o.jsxs("ul",{style:{margin:0,paddingLeft:"18px",color:e.textSecondary,fontSize:"13px"},children:[o.jsx("li",{children:"Editor preferences (font size, tab size, word wrap, etc.)"}),o.jsx("li",{children:"Theme selection and dark/light mode"}),o.jsx("li",{children:"Custom keyboard shortcuts"})]})]})]}),f&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"16px"},children:o.jsxs("div",{style:{backgroundColor:e.surface,borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",padding:"24px",width:"90%",maxWidth:"400px"},children:[o.jsx("h3",{style:{color:e.text,margin:"0 0 16px 0",fontSize:"18px"},children:v==="delete"?"Delete Remote Settings":v==="download"?"Download Settings":"Upload Settings"}),o.jsx("p",{style:{color:e.textSecondary,margin:"0 0 24px 0",fontSize:"14px",lineHeight:1.5},children:v==="delete"?"This will permanently delete all your synced settings from the server. Your local settings will remain unchanged.":v==="download"?"This will overwrite your local settings with the settings from the server. Any unsaved local changes will be lost.":"This will overwrite your remote settings with your current local settings."}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[o.jsx("button",{style:{padding:"8px 16px",backgroundColor:"transparent",border:`1px solid ${e.border}`,borderRadius:"4px",color:e.text,cursor:"pointer",minHeight:"36px"},onClick:()=>p(!1),children:"Cancel"}),o.jsx("button",{style:{padding:"8px 16px",backgroundColor:v==="delete"?e.error:e.primary,border:"none",borderRadius:"4px",color:"white",cursor:"pointer",minHeight:"36px"},onClick:I,children:v==="delete"?"Delete":v==="download"?"Download":"Upload"})]})]})})]}):o.jsx("div",{style:{padding:"24px",textAlign:"center",color:e.textSecondary},children:"Please sign in to use settings sync"})},jA="_container_1txbc_1",CA="_header_1txbc_7",EA="_backButton_1txbc_14",NA="_headerTitle_1txbc_26",TA="_content_1txbc_34",IA="_section_1txbc_39",AA="_sectionTitle_1txbc_43",PA="_sectionContent_1txbc_51",RA="_settingItem_1txbc_57",FA="_settingIcon_1txbc_68",BA="_settingContent_1txbc_76",OA="_settingTitle_1txbc_85",LA="_footer_1txbc_148",zA="_footerText_1txbc_156",pe={container:jA,header:CA,backButton:EA,headerTitle:NA,content:TA,section:IA,sectionTitle:AA,sectionContent:PA,settingItem:RA,settingIcon:FA,settingContent:BA,settingTitle:OA,footer:LA,footerText:zA},Wy=()=>{const{colors:e}=ve(),{user:t,profile:n,loading:r,updateProfile:s,error:i}=ht(),a=ot(),[l,c]=_.useState(""),[d,u]=_.useState(null),[h,f]=_.useState(!1),[p,v]=_.useState(null),[y,b]=_.useState(null),[g,m]=_.useState(!1);_.useEffect(()=>{n&&(c(n.username||""),u(n.avatar_url))},[n]),_.useEffect(()=>{if(g){const I=setTimeout(()=>{a("/editor",{replace:!0})},1500);return()=>clearTimeout(I)}},[g,a]);const x=async I=>{if(I.preventDefault(),!l.trim()){v("Username is required");return}try{v(null),await s({username:l,avatar_url:d}),m(!0)}catch(R){console.error("Profile update failed:",R),v("Failed to update profile")}},E=async()=>{const I=document.createElement("input");I.type="file",I.accept="image/*",I.onchange=async R=>{const T=R.target;if(!T.files||T.files.length===0)return;const B=T.files[0];await k(B)},I.click()},k=async I=>{if(t)try{f(!0),b(null);try{const{data:K,error:F}=await It.storage.listBuckets();if(F)throw console.error("Storage API error:",F),new Error(`Storage API error: ${F.message}`);if(!(K==null?void 0:K.find(C=>C.name==="avatars")))throw new Error("Avatars storage bucket not found - please create it in the Supabase dashboard");console.log("Storage buckets available:",K)}catch(K){console.error("Error checking storage:",K),b("Storage access unavailable. The avatars bucket needs to be created by an admin in the Supabase dashboard."),f(!1);return}const R=`${t.id}-${Date.now()}.${I.name.split(".").pop()}`,{error:T,data:B}=await It.storage.from("avatars").upload(R,I,{upsert:!0,cacheControl:"3600"});if(T){console.error("Error uploading avatar:",T),b(`Upload failed: ${T.message}`);return}const{data:{publicUrl:P}}=It.storage.from("avatars").getPublicUrl(R);console.log("Avatar uploaded successfully, URL:",P),u(P),P&&await s({username:l,avatar_url:P})}catch(R){console.error("Error uploading avatar:",R),b(`Upload error: ${R.message}`)}finally{f(!1)}};return o.jsxs("div",{className:"profile-form",children:[o.jsx("h2",{className:"title",style:{color:e.text},children:"Your Profile"}),(i||p)&&o.jsx("div",{className:"error-container",style:{backgroundColor:`${e.error}20`,color:e.error},children:o.jsx("p",{className:"error-text",children:p||i})}),y&&o.jsx("div",{className:"error-container",style:{backgroundColor:`${e.error}20`,color:e.error},children:o.jsx("p",{className:"error-text",children:y})}),g&&o.jsx("div",{className:"success-container",style:{backgroundColor:`${e.success}20`,color:e.success},children:o.jsxs("p",{className:"success-text",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[o.jsx(kn,{size:18})," Profile updated successfully!"]})}),o.jsxs("div",{className:"avatar-container",children:[d?o.jsx("img",{src:d,alt:"Profile avatar",className:"avatar",onError:I=>{console.log("Error loading avatar image"),I.currentTarget.onerror=null,I.currentTarget.src="https://placehold.co/100x100/3794FF/FFFFFF?text=User"}}):o.jsx("div",{className:"avatar-placeholder",style:{backgroundColor:e.border},children:o.jsx(Ut,{size:40,color:e.textSecondary})}),o.jsx("button",{className:"change-avatar-button",onClick:E,disabled:h,style:{backgroundColor:e.primary},type:"button",children:h?o.jsx("span",{children:"Uploading..."}):o.jsxs(o.Fragment,{children:[o.jsx(iw,{size:16,color:"white",className:"button-icon"}),o.jsx("span",{children:"Change"})]})})]}),o.jsxs("form",{onSubmit:x,children:[o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"username",style:{color:e.textSecondary},children:"Username"}),o.jsxs("div",{className:"input-container",style:{borderColor:e.border,backgroundColor:e.background},children:[o.jsx(Ut,{size:20,color:e.textSecondary,className:"input-icon"}),o.jsx("input",{id:"username",type:"text",placeholder:"Enter username",value:l,onChange:I=>c(I.target.value),style:{color:e.text},autoFocus:!0})]})]}),o.jsxs("div",{className:"input-group",children:[o.jsx("label",{htmlFor:"email",style:{color:e.textSecondary},children:"Email"}),o.jsxs("div",{className:"input-container",style:{borderColor:e.border,backgroundColor:e.background},children:[o.jsx(Nl,{size:20,color:e.textSecondary,className:"input-icon"}),o.jsx("input",{id:"email",type:"email",value:(t==null?void 0:t.email)||"",disabled:!0,className:"disabled",style:{color:e.textSecondary}})]}),o.jsx("p",{className:"helper-text",style:{color:e.textSecondary},children:"Email cannot be changed"})]}),o.jsx("button",{type:"submit",className:"save-button",disabled:r||h||g,style:{backgroundColor:e.primary,opacity:r||h||g?.7:1},children:r?"Saving...":g?"Saved!":"Save Changes"})]}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .profile-form {
          width: 100%;
          max-width: 480px;
          margin: 0 auto;
          padding: 20px;
        }
        
        .title {
          font-size: 24px;
          font-weight: bold;
          margin-bottom: 24px;
          text-align: center;
        }
        
        .error-container, .success-container {
          padding: 12px;
          border-radius: 8px;
          margin-bottom: 16px;
        }
        
        .error-text, .success-text {
          font-size: 14px;
        }
        
        .avatar-container {
          position: relative;
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-bottom: 24px;
        }
        
        .avatar {
          width: 100px;
          height: 100px;
          border-radius: 50%;
          object-fit: cover;
          border: 3px solid ${e.primary}40;
        }
        
        .avatar-placeholder {
          width: 100px;
          height: 100px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .change-avatar-button {
          position: absolute;
          bottom: -10px;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 6px 12px;
          color: white;
          border-radius: 16px;
          font-size: 12px;
          font-weight: 500;
          border: none;
          cursor: pointer;
          min-height: 32px;
        }
        
        .change-avatar-button:disabled {
          opacity: 0.7;
        }
        
        .button-icon {
          margin-right: 4px;
        }
        
        .input-group {
          margin-bottom: 16px;
        }
        
        label {
          display: block;
          font-size: 14px;
          margin-bottom: 6px;
        }
        
        .input-container {
          position: relative;
          display: flex;
          align-items: center;
          border-width: 1px;
          border-style: solid;
          border-radius: 8px;
          height: 48px;
          overflow: hidden;
        }
        
        .input-icon {
          position: absolute;
          left: 12px;
        }
        
        input {
          width: 100%;
          height: 100%;
          background: transparent;
          border: none;
          padding: 0 12px 0 40px;
          font-size: 16px;
          outline: none;
        }
        
        input.disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        
        .helper-text {
          font-size: 12px;
          margin-top: 4px;
          margin-left: 2px;
        }
        
        .save-button {
          width: 100%;
          height: 48px;
          border: none;
          border-radius: 8px;
          color: white;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          margin-top: 16px;
          min-height: 48px;
        }
        
        .save-button:disabled {
          cursor: not-allowed;
        }
        
        @media (max-width: 480px) {
          .profile-form {
            padding: 16px;
          }
          
          .avatar {
            width: 80px;
            height: 80px;
          }
          
          .avatar-placeholder {
            width: 80px;
            height: 80px;
          }
        }
      `}})]})},$A=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>t("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"Profile"})]}),o.jsx("div",{className:pe.content,children:o.jsx(Wy,{})})]})},DA=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>t("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"Offline Mode"})]}),o.jsx("div",{className:pe.content,children:o.jsx(sA,{})})]})},MA=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>t("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"Editor Settings"})]}),o.jsx("div",{className:pe.content,children:o.jsx(wA,{})})]})},UA=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>t("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"Keyboard Shortcuts"})]}),o.jsx("div",{className:pe.content,children:o.jsx(kA,{})})]})},HA=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>t("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"Settings Sync"})]}),o.jsx("div",{className:pe.content,children:o.jsx(SA,{})})]})},WA=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>t("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"About"})]}),o.jsx("div",{className:pe.content,style:{padding:"20px"},children:o.jsxs("div",{style:{backgroundColor:e.surface,padding:"24px",borderRadius:"12px",maxWidth:"600px",margin:"0 auto"},children:[o.jsx("h2",{style:{color:e.primary,marginBottom:"16px",fontSize:"24px",textAlign:"center"},children:"Code Canvas"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("h3",{style:{color:e.text,fontSize:"18px",marginBottom:"8px"},children:"Version"}),o.jsx("p",{style:{color:e.textSecondary},children:"1.2.0 (2025)"})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:e.text,fontSize:"18px",marginBottom:"8px"},children:"About"}),o.jsx("p",{style:{color:e.textSecondary,lineHeight:1.6},children:"Code Canvas is a versatile coding environment designed for both beginners and professionals. It provides an integrated experience for writing, testing, and sharing code across multiple platforms."})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:e.text,fontSize:"18px",marginBottom:"8px"},children:"Features"}),o.jsxs("ul",{style:{color:e.textSecondary,paddingLeft:"20px"},children:[o.jsx("li",{children:"Advanced code editor with syntax highlighting"}),o.jsx("li",{children:"Integrated terminal"}),o.jsx("li",{children:"File explorer and project management"}),o.jsx("li",{children:"Real-time collaboration"}),o.jsx("li",{children:"Cloud sync across devices"}),o.jsx("li",{children:"Offline support"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{color:e.text,fontSize:"18px",marginBottom:"8px"},children:"Support"}),o.jsx("p",{style:{color:e.textSecondary},children:"For help and support, contact us at support@codecanvas.dev"})]})]})]})})]})},qA=()=>{const{colors:e,isDark:t,themeName:n,setTheme:r,availableThemes:s}=ve(),{colorTheme:i,updateColorTheme:a}=xl(),l=ot();return o.jsxs("div",{className:pe.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:pe.header,style:{borderBottomColor:e.border},children:[o.jsx("button",{className:pe.backButton,onClick:()=>l("/settings"),"aria-label":"Back to settings",children:o.jsx(xt,{size:20,color:e.primary,style:{transform:"rotate(180deg)"}})}),o.jsx("h2",{className:pe.headerTitle,style:{color:e.text},children:"Appearance"})]}),o.jsx("div",{className:pe.content,children:o.jsx("div",{style:{padding:"16px"},children:o.jsxs("div",{style:{marginBottom:"24px",backgroundColor:e.surface,borderRadius:"8px",overflow:"hidden"},children:[o.jsxs("div",{style:{marginBottom:"16px",padding:"16px"},children:[o.jsx("h3",{style:{color:e.text,fontSize:"16px",marginBottom:"12px",fontWeight:"500"},children:"Theme Mode"}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"10px"},children:s.map(c=>o.jsxs("button",{onClick:()=>r(c.id),style:{padding:"12px",borderRadius:"8px",border:`2px solid ${c.id===n?e.primary:e.border}`,backgroundColor:c.id===n?`${e.primary}10`:e.background,color:c.id===n?e.primary:e.text,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:"8px",minHeight:"80px",touchAction:"manipulation",outline:"none"},children:[o.jsxs("div",{style:{width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"4px"},children:[c.id==="light"&&o.jsx(oy,{size:24}),c.id==="dark"&&o.jsx(sy,{size:24}),c.id==="highContrastDark"&&o.jsx(Cl,{size:24}),c.id==="sepia"&&o.jsx(Tw,{size:24}),c.id==="midnightBlue"&&o.jsx(Cw,{size:24}),c.id==="materialDark"&&o.jsx(bw,{size:24})]}),o.jsx("span",{children:c.name})]},c.id))})]}),o.jsxs("div",{style:{padding:"16px",borderTop:`1px solid ${e.border}`},children:[o.jsx("h3",{style:{color:e.text,fontSize:"16px",marginBottom:"12px",fontWeight:"500"},children:"Preview"}),o.jsxs("div",{style:{padding:"16px",borderRadius:"8px",backgroundColor:e.background,border:`1px solid ${e.border}`,marginBottom:"16px"},children:[o.jsxs("div",{style:{marginBottom:"12px"},children:[o.jsx("h4",{style:{color:e.primary,marginBottom:"8px"},children:"Primary Color"}),o.jsx("p",{style:{color:e.text},children:"This is regular text"}),o.jsx("p",{style:{color:e.textSecondary},children:"This is secondary text"})]}),o.jsxs("div",{style:{backgroundColor:e.surface,padding:"12px",borderRadius:"4px",marginBottom:"12px"},children:[o.jsx("p",{style:{color:e.text,marginBottom:"8px"},children:"Surface Background"}),o.jsx("button",{style:{backgroundColor:e.primary,color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",minHeight:"44px",cursor:"pointer"},children:"Button"})]}),o.jsxs("div",{style:{backgroundColor:e.codeBackground,padding:"12px",borderRadius:"4px",fontFamily:"monospace"},children:[o.jsx("p",{style:{color:e.codeSyntax.keyword},children:"function"}),o.jsxs("p",{style:{color:e.codeSyntax.function},children:["example() ","{"]}),o.jsx("p",{style:{color:e.codeSyntax.comment,marginLeft:"20px"},children:"// This is a comment"}),o.jsxs("p",{style:{marginLeft:"20px"},children:[o.jsx("span",{style:{color:e.codeSyntax.keyword},children:"const"}),o.jsx("span",{style:{color:e.codeSyntax.variable},children:" greeting"}),o.jsx("span",{style:{color:e.text},children:" = "}),o.jsx("span",{style:{color:e.codeSyntax.string},children:'"Hello World"'}),o.jsx("span",{style:{color:e.text},children:";"})]}),o.jsx("p",{style:{color:e.text},children:"}"})]})]})]}),o.jsxs("div",{style:{padding:"16px",borderTop:`1px solid ${e.border}`},children:[o.jsx("h3",{style:{color:e.text,fontSize:"16px",marginBottom:"12px",fontWeight:"500"},children:"Editor Theme"}),o.jsx("div",{style:{marginBottom:"16px"},children:o.jsx(Hy,{value:i,onChange:a,isDark:t})}),o.jsx("p",{style:{color:e.textSecondary,fontSize:"13px"},children:"This setting affects the syntax highlighting theme used in the code editor."})]})]})})})]})},VA=()=>{const{colors:e,isDark:t,toggleTheme:n}=ve(),{signOut:r,user:s}=ht(),i=ot(),a=async()=>{try{await r(),i("/auth")}catch(l){console.error("Error signing out:",l),alert("Failed to sign out. Please try again.")}};return o.jsx("div",{className:pe.container,style:{backgroundColor:e.background},children:o.jsxs("div",{className:pe.content,children:[o.jsxs("div",{className:pe.section,children:[o.jsx("h3",{className:pe.sectionTitle,style:{color:e.textSecondary},children:"Account"}),o.jsxs("div",{className:pe.sectionContent,style:{backgroundColor:e.surface},children:[o.jsxs("div",{className:pe.settingItem,style:{borderBottomColor:e.border},onClick:()=>i("/settings/profile"),children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx(Ut,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"Profile"}),o.jsx(xt,{size:16,color:e.textSecondary})]})]}),o.jsxs("div",{className:pe.settingItem,style:{borderBottomColor:e.border},onClick:()=>i("/settings/sync"),children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx(zu,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"Settings Sync"}),o.jsx(xt,{size:16,color:e.textSecondary})]})]}),o.jsxs("div",{className:pe.settingItem,style:{borderBottomColor:e.border},onClick:()=>i("/settings/offline"),children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx(Uu,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"Offline Mode"}),o.jsx(xt,{size:16,color:e.textSecondary})]})]}),o.jsxs("div",{className:pe.settingItem,onClick:a,children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx(ny,{size:20,color:e.error})}),o.jsx("div",{className:pe.settingContent,children:o.jsx("span",{className:pe.settingTitle,style:{color:e.error},children:"Sign Out"})})]})]})]}),o.jsxs("div",{className:pe.section,children:[o.jsx("h3",{className:pe.sectionTitle,style:{color:e.textSecondary},children:"Editor"}),o.jsxs("div",{className:pe.sectionContent,style:{backgroundColor:e.surface},children:[o.jsxs("div",{className:pe.settingItem,onClick:()=>i("/settings/editor"),style:{borderBottomColor:e.border},children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx(di,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"Editor Settings"}),o.jsx(xt,{size:16,color:e.textSecondary})]})]}),o.jsxs("div",{className:pe.settingItem,onClick:()=>i("/settings/keyboard"),children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx(El,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"Keyboard Shortcuts"}),o.jsx(xt,{size:16,color:e.textSecondary})]})]})]})]}),o.jsxs("div",{className:pe.section,children:[o.jsx("h3",{className:pe.sectionTitle,style:{color:e.textSecondary},children:"Appearance"}),o.jsx("div",{className:pe.sectionContent,style:{backgroundColor:e.surface},children:o.jsxs("div",{className:pe.settingItem,onClick:()=>i("/settings/appearance"),children:[o.jsx("div",{className:pe.settingIcon,children:t?o.jsx(sy,{size:20,color:e.primary}):o.jsx(oy,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"Theme & Appearance"}),o.jsx(xt,{size:16,color:e.textSecondary})]})]})})]}),o.jsxs("div",{className:pe.section,children:[o.jsx("h3",{className:pe.sectionTitle,style:{color:e.textSecondary},children:"About"}),o.jsx("div",{className:pe.sectionContent,style:{backgroundColor:e.surface},children:o.jsxs("div",{className:pe.settingItem,onClick:()=>i("/settings/about"),children:[o.jsx("div",{className:pe.settingIcon,children:o.jsx($u,{size:20,color:e.primary})}),o.jsxs("div",{className:pe.settingContent,children:[o.jsx("span",{className:pe.settingTitle,style:{color:e.text},children:"About Code Canvas"}),o.jsx("span",{style:{color:e.textSecondary,fontSize:"14px"},children:"v1.2.0"})]})]})})]}),o.jsx("div",{className:pe.footer,children:o.jsx("span",{className:pe.footerText,style:{color:e.textSecondary},children:"Code Canvas © 2025"})})]})})},KA=()=>o.jsxs(mg,{children:[o.jsx(Ke,{path:"/",element:o.jsx(VA,{})}),o.jsx(Ke,{path:"/profile",element:o.jsx($A,{})}),o.jsx(Ke,{path:"/offline",element:o.jsx(DA,{})}),o.jsx(Ke,{path:"/editor",element:o.jsx(MA,{})}),o.jsx(Ke,{path:"/keyboard",element:o.jsx(UA,{})}),o.jsx(Ke,{path:"/sync",element:o.jsx(HA,{})}),o.jsx(Ke,{path:"/appearance",element:o.jsx(qA,{})}),o.jsx(Ke,{path:"/about",element:o.jsx(WA,{})})]}),GA=()=>{const e=ot(),{openFiles:t,setCurrentFile:n}=Xe(),r=()=>{e("/explorer")},s=(i,a)=>{t.find(c=>c.id===i)&&n(i),e("/editor")};return o.jsx(cy,{onClose:r,onFileSelect:s})},JA="_container_w6mkf_2",ZA="_reelsContainer_w6mkf_11",YA="_reelItem_w6mkf_26",QA="_videoContainer_w6mkf_38",XA="_video_w6mkf_38",e6="_videoThumbnail_w6mkf_53",t6="_loadingOverlay_w6mkf_65",n6="_loader_w6mkf_79",r6="_errorOverlay_w6mkf_94",s6="_retryButton_w6mkf_118",o6="_playPauseOverlay_w6mkf_137",i6="_videoControls_w6mkf_157",a6="_muteButton_w6mkf_164",l6="_userInfo_w6mkf_183",c6="_userHeader_w6mkf_192",d6="_userAvatar_w6mkf_198",u6="_username_w6mkf_209",h6="_description_w6mkf_217",f6="_tags_w6mkf_229",p6="_tag_w6mkf_229",m6="_actionButtons_w6mkf_245",g6="_actionButton_w6mkf_245",y6="_sideButtons_w6mkf_266",x6="_iconButton_w6mkf_276",v6="_iconCount_w6mkf_287",b6="_indicators_w6mkf_295",_6="_indicator_w6mkf_295",w6="_indicatorActive_w6mkf_315",k6="_verticalNav_w6mkf_322",S6="_navButton_w6mkf_335",j6="_navButtonDisabled_w6mkf_353",Ne={container:JA,reelsContainer:ZA,reelItem:YA,videoContainer:QA,video:XA,videoThumbnail:e6,loadingOverlay:t6,loader:n6,errorOverlay:r6,retryButton:s6,playPauseOverlay:o6,videoControls:i6,muteButton:a6,userInfo:l6,userHeader:c6,userAvatar:d6,username:u6,description:h6,tags:f6,tag:p6,actionButtons:m6,actionButton:g6,sideButtons:y6,iconButton:x6,iconCount:v6,indicators:b6,indicator:_6,indicatorActive:w6,verticalNav:k6,navButton:S6,navButtonDisabled:j6},pn=[{id:"1",username:"reactninja",description:"Building a modern React component with TypeScript and hooks #react #typescript #webdev",likes:1245,comments:87,videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",thumbnail:"https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",tags:["react","typescript","frontend"],demoUrl:"https://example.com/demo1"},{id:"2",username:"cssmagician",description:"CSS-only animation tricks that will blow your mind! #css #webdesign #frontend",likes:3422,comments:156,videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",thumbnail:"https://images.pexels.com/photos/270348/pexels-photo-270348.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",tags:["css","animation","webdesign"],demoUrl:"https://example.com/demo2"},{id:"3",username:"nodehero",description:"Optimizing your Node.js API for maximum performance #nodejs #backend #api",likes:872,comments:43,videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4",thumbnail:"https://images.pexels.com/photos/574071/pexels-photo-574071.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",tags:["nodejs","api","performance"],demoUrl:"https://example.com/demo3"},{id:"4",username:"jsmaster",description:"JavaScript tips and tricks that will make you a better developer #javascript #webdev #tips",likes:2156,comments:102,videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",thumbnail:"https://images.pexels.com/photos/2004161/pexels-photo-2004161.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",tags:["javascript","tips","webdev"],demoUrl:"https://example.com/demo4"},{id:"5",username:"pythonista",description:"Data analysis with Python in under 60 seconds #python #datascience #coding",likes:1732,comments:65,videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4",thumbnail:"https://images.pexels.com/photos/1181298/pexels-photo-1181298.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",tags:["python","datascience","tutorial"],demoUrl:"https://example.com/demo5"}],C6=()=>{const{colors:e}=ve(),t=ot(),[n,r]=_.useState(0),[s,i]=_.useState({}),[a,l]=_.useState({}),[c,d]=_.useState(!0),[u,h]=_.useState({}),[f,p]=_.useState({}),[v,y]=_.useState(window.innerWidth),[b,g]=_.useState(window.innerHeight),m=_.useRef({}),x=_.useRef(null),E=_.useRef({}),k=_.useRef(null),I=_.useRef(!0);_.useEffect(()=>{const M=()=>{y(window.innerWidth),g(window.innerHeight)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),_.useEffect(()=>()=>{I.current=!1},[]);const R=(M,Y)=>!M||!I.current?Promise.reject(new Error("Video element not available")):(M.muted=!0,M.play().then(()=>(I.current&&(i($=>({...$,[Y]:!0})),M.muted=c),!0)).catch($=>(console.error("Error playing video:",$),I.current&&p(fe=>({...fe,[Y]:!0})),!1)));_.useEffect(()=>(x.current=new IntersectionObserver(M=>{I.current&&M.forEach(Y=>{if(Y.isIntersecting){const $=Y.target.getAttribute("data-video-id");if($){Object.keys(s).forEach(te=>{if(te!==$&&s[te]){const de=m.current[te];de&&(de.pause(),I.current&&i(ce=>({...ce,[te]:!1})))}});const fe=m.current[$];fe&&!s[$]&&!f[$]&&R(fe,$);const me=pn.findIndex(te=>te.id===$);me!==-1&&I.current&&r(me)}}})},{threshold:.7,root:null}),()=>{x.current&&x.current.disconnect()}),[s,f,c]),_.useEffect(()=>(x.current&&Object.keys(E.current).forEach(M=>{var $;const Y=E.current[M];Y&&(($=x.current)==null||$.observe(Y))}),()=>{x.current&&x.current.disconnect()}),[E.current]),_.useEffect(()=>{const M=Y=>{if(I.current)if(Y.key==="ArrowUp")n>0&&T(n-1);else if(Y.key==="ArrowDown")n<pn.length-1&&T(n+1);else if(Y.key===" "||Y.key==="k"){const $=pn[n];$&&K($.id),Y.preventDefault()}else Y.key==="m"&&(F(),Y.preventDefault())};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[n,s,c]),_.useEffect(()=>{const M=()=>{I.current&&n>=0&&n<pn.length&&setTimeout(()=>{T(n)},300)};return window.addEventListener("orientationchange",M),()=>window.removeEventListener("orientationchange",M)},[n]);const T=M=>{if(!I.current)return;const Y=pn[M].id,$=E.current[Y];$&&k.current&&$.scrollIntoView({behavior:"smooth"})},B=(M,Y)=>{M&&I.current&&(E.current[Y]=M,x.current&&x.current.observe(M))},P=(M,Y)=>{M&&I.current&&(m.current[Y]=M,M.muted=c,M.addEventListener("play",()=>{I.current&&i($=>({...$,[Y]:!0}))}),M.addEventListener("pause",()=>{I.current&&i($=>({...$,[Y]:!1}))}),M.addEventListener("ended",()=>{M&&I.current&&(M.currentTime=0,R(M,Y))}))},K=M=>{if(!I.current)return;if(f[M]){const $=m.current[M];if($){$.load(),p(fe=>({...fe,[M]:!1})),h(fe=>({...fe,[M]:!0}));return}}const Y=m.current[M];Y&&(s[M]?Y.pause():(Object.keys(m.current).forEach($=>{if($!==M){const fe=m.current[$];fe&&(fe.pause(),I.current&&i(me=>({...me,[$]:!1})))}}),R(Y,M)))},F=()=>{if(!I.current)return;const M=!c;d(M),Object.values(m.current).forEach(Y=>{Y&&(Y.muted=M)})},L=M=>{I.current&&(h(Y=>({...Y,[M]:!0})),p(Y=>({...Y,[M]:!1})))},C=M=>{if(!I.current)return;if(h($=>({...$,[M]:!1})),pn.findIndex($=>$.id===M)===n){const $=m.current[M];$&&!f[M]&&R($,M)}},Z=(M,Y)=>{I.current&&(console.error(`Video error for ${M}:`,Y),h($=>({...$,[M]:!1})),p($=>({...$,[M]:!0})),i($=>({...$,[M]:!1})))},W=()=>{t("/terminal")},U=M=>{I.current&&l(Y=>({...Y,[M]:!Y[M]}))},z=(M,Y)=>{if(!I.current)return;Y.stopPropagation();const $=m.current[M];$&&(h(fe=>({...fe,[M]:!0})),p(fe=>({...fe,[M]:!1})),$.load(),setTimeout(()=>{$&&!f[M]&&I.current&&R($,M)},500))},q=()=>{I.current&&n>0&&T(n-1)},re=()=>{I.current&&n<pn.length-1&&T(n+1)},H=v<=360,O=v<=320,ie=v>b;return o.jsxs("div",{className:Ne.container,style:{backgroundColor:"black"},children:[o.jsx("div",{className:Ne.reelsContainer,ref:k,children:pn.map((M,Y)=>o.jsx("div",{className:Ne.reelItem,ref:$=>B($,M.id),"data-video-id":M.id,children:o.jsxs("div",{className:Ne.videoContainer,children:[o.jsx("img",{src:M.thumbnail,alt:`${M.username}'s video thumbnail`,className:Ne.videoThumbnail,style:{opacity:s[M.id]?0:1}}),o.jsxs("video",{ref:$=>P($,M.id),className:Ne.video,poster:M.thumbnail,playsInline:!0,muted:!0,loop:!0,onLoadStart:()=>L(M.id),onLoadedData:()=>C(M.id),onError:$=>Z(M.id,$),onClick:()=>K(M.id),children:[o.jsx("source",{src:M.videoUrl,type:"video/mp4"}),"Your browser does not support the video tag."]}),u[M.id]&&o.jsx("div",{className:Ne.loadingOverlay,children:o.jsx("div",{className:Ne.loader})}),f[M.id]&&o.jsxs("div",{className:Ne.errorOverlay,children:[o.jsx(Wa,{size:O?30:40,color:"#FFFFFF"}),o.jsx("p",{children:"Failed to load video"}),o.jsxs("button",{className:Ne.retryButton,onClick:$=>z(M.id,$),children:[o.jsx(Zn,{size:16,color:"#FFFFFF",style:{marginRight:"8px"}}),"Try Again"]})]}),o.jsx("div",{className:Ne.playPauseOverlay,style:{opacity:s[M.id]?0:.7},onClick:()=>K(M.id),children:s[M.id]?o.jsx(Du,{size:O?40:50,color:"#FFFFFF"}):o.jsx(ui,{size:O?40:50,color:"#FFFFFF"})}),o.jsx("div",{className:Ne.videoControls,children:o.jsx("button",{className:Ne.muteButton,onClick:$=>{$.stopPropagation(),F()},"aria-label":c?"Unmute":"Mute",children:c?o.jsx(Ww,{size:H?20:24,color:"#FFFFFF"}):o.jsx(Hw,{size:H?20:24,color:"#FFFFFF"})})}),o.jsxs("div",{className:Ne.userInfo,children:[o.jsxs("div",{className:Ne.userHeader,children:[o.jsx("div",{className:Ne.userAvatar,children:o.jsx(Ut,{size:H?16:20,color:"#FFFFFF"})}),o.jsxs("h3",{className:Ne.username,children:["@",M.username]})]}),o.jsx("p",{className:Ne.description,children:M.description}),o.jsx("div",{className:Ne.tags,children:M.tags.slice(0,H?2:ie?4:3).map(($,fe)=>o.jsxs("span",{className:Ne.tag,style:{backgroundColor:e.primary},children:["#",$]},fe))}),o.jsxs("div",{className:Ne.actionButtons,children:[o.jsxs("button",{className:Ne.actionButton,style:{backgroundColor:e.primary},onClick:$=>{$.stopPropagation(),W()},children:[o.jsx(Al,{size:H?16:20,color:"#FFFFFF"}),o.jsx("span",{children:"Open Terminal"})]}),o.jsxs("button",{className:Ne.actionButton,style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},onClick:$=>{$.stopPropagation(),window.open(M.demoUrl,"_blank")},children:[o.jsx(Qg,{size:H?14:16,color:"#FFFFFF"}),o.jsx("span",{children:"View Demo"})]})]})]}),o.jsxs("div",{className:Ne.sideButtons,children:[o.jsxs("button",{className:Ne.iconButton,onClick:$=>{$.stopPropagation(),U(M.id)},"aria-label":a[M.id]?"Unlike":"Like",children:[o.jsx(yw,{size:H?24:28,fill:a[M.id]?"#ff2b55":"none",color:a[M.id]?"#ff2b55":"#FFFFFF"}),o.jsx("span",{className:Ne.iconCount,children:a[M.id]?M.likes+1:M.likes})]}),o.jsxs("button",{className:Ne.iconButton,onClick:$=>$.stopPropagation(),"aria-label":"Comments",children:[o.jsx(jw,{size:H?24:28,color:"#FFFFFF"}),o.jsx("span",{className:Ne.iconCount,children:M.comments})]}),o.jsx("button",{className:Ne.iconButton,onClick:$=>$.stopPropagation(),"aria-label":"Save",children:o.jsx(ow,{size:H?24:28,color:"#FFFFFF"})}),o.jsx("button",{className:Ne.iconButton,onClick:$=>$.stopPropagation(),"aria-label":"Share",children:o.jsx(ki,{size:H?24:28,color:"#FFFFFF"})})]})]})},M.id))}),o.jsx("div",{className:Ne.indicators,children:pn.map((M,Y)=>o.jsx("div",{className:`${Ne.indicator} ${Y===n?Ne.indicatorActive:""}`,onClick:()=>T(Y)},Y))}),o.jsxs("div",{className:Ne.verticalNav,children:[o.jsx("button",{className:`${Ne.navButton} ${n<=0?Ne.navButtonDisabled:""}`,onClick:q,disabled:n<=0,"aria-label":"Previous video",children:o.jsx(Lu,{size:H?20:24,color:"#FFFFFF"})}),o.jsx("button",{className:`${Ne.navButton} ${n>=pn.length-1?Ne.navButtonDisabled:""}`,onClick:re,disabled:n>=pn.length-1,"aria-label":"Next video",children:o.jsx(Or,{size:H?20:24,color:"#FFFFFF"})})]})]})},E6="_container_1q3ye_1",N6="_title_1q3ye_10",T6="_message_1q3ye_16",I6="_link_1q3ye_21",Xi={container:E6,title:N6,message:T6,link:I6},A6=()=>{const{colors:e}=ve();return o.jsxs("div",{className:Xi.container,style:{backgroundColor:e.background},children:[o.jsx("h1",{className:Xi.title,style:{color:e.text},children:"Oops!"}),o.jsx("p",{className:Xi.message,style:{color:e.textSecondary},children:"This screen doesn't exist."}),o.jsx(Tu,{to:"/",className:Xi.link,style:{color:e.primary},children:"Go to home screen!"})]})},P6=({onSwitch:e})=>{const{colors:t}=ve(),{signIn:n,signInWithGithub:r,signInWithGoogle:s,loading:i,error:a}=ht(),[l,c]=_.useState(""),[d,u]=_.useState(""),[h,f]=_.useState(null),p=async v=>{if(v.preventDefault(),!l.trim()){f("Please enter your email");return}if(!d){f("Please enter your password");return}f(null),console.log("Attempting sign in with:",l),await n(l,d)};return o.jsxs("div",{className:"signin-container",children:[o.jsx("h2",{className:"title",style:{color:t.text},children:"Welcome Back"}),o.jsx("p",{className:"subtitle",style:{color:t.textSecondary},children:"Sign in to your account"}),(a||h)&&o.jsx("div",{className:"error-container",style:{backgroundColor:`${t.error}20`},children:o.jsx("p",{className:"error-text",style:{color:t.error},children:h||a})}),o.jsxs("form",{onSubmit:p,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",style:{color:t.textSecondary},children:"Email"}),o.jsxs("div",{className:"input-container",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(Nl,{size:20,color:t.textSecondary}),o.jsx("input",{id:"email",type:"email",placeholder:"your.email@example.com",value:l,onChange:v=>c(v.target.value),style:{color:t.text}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",style:{color:t.textSecondary},children:"Password"}),o.jsxs("div",{className:"input-container",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(ss,{size:20,color:t.textSecondary}),o.jsx("input",{id:"password",type:"password",placeholder:"••••••••",value:d,onChange:v=>u(v.target.value),style:{color:t.text}})]})]}),o.jsx("div",{className:"forgot-password-container",children:o.jsx("button",{type:"button",className:"forgot-button",style:{color:t.primary},children:"Forgot Password?"})}),o.jsx("button",{type:"submit",className:"signin-button",disabled:i,style:{backgroundColor:t.primary},children:i?"Signing in...":"Sign In"})]}),o.jsxs("div",{className:"divider",children:[o.jsx("div",{className:"divider-line",style:{backgroundColor:t.border}}),o.jsx("span",{className:"divider-text",style:{color:t.textSecondary,backgroundColor:t.surface},children:"or continue with"}),o.jsx("div",{className:"divider-line",style:{backgroundColor:t.border}})]}),o.jsxs("div",{className:"social-buttons",children:[o.jsxs("button",{className:"social-button",onClick:()=>r(),type:"button",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(ty,{size:20,color:t.text}),o.jsx("span",{style:{color:t.text},children:"GitHub"})]}),o.jsxs("button",{className:"social-button",onClick:()=>s(),type:"button",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(Mu,{size:20,color:t.text}),o.jsx("span",{style:{color:t.text},children:"Google"})]})]}),o.jsxs("div",{className:"switch-container",children:[o.jsx("p",{className:"switch-text",style:{color:t.textSecondary},children:"Don't have an account?"}),o.jsx("button",{onClick:e,className:"switch-button",type:"button",style:{color:t.primary},children:"Sign Up"})]}),o.jsx("style",{children:`
        .signin-container {
          width: 100%;
        }
        
        .title {
          font-size: 28px;
          font-weight: bold;
          margin-bottom: 8px;
          text-align: center;
        }
        
        .subtitle {
          font-size: 16px;
          margin-bottom: 24px;
          text-align: center;
        }
        
        .error-container {
          padding: 16px;
          border-radius: 12px;
          margin-bottom: 24px;
        }
        
        .error-text {
          font-size: 14px;
          margin: 0;
        }
        
        .form-group {
          margin-bottom: 20px;
        }
        
        label {
          display: block;
          font-size: 14px;
          font-weight: 500;
          margin-bottom: 8px;
        }
        
        .input-container {
          position: relative;
          display: flex;
          align-items: center;
          border-width: 1px;
          border-style: solid;
          border-radius: 12px;
          height: 56px;
          padding: 0 16px;
          overflow: hidden;
        }
        
        .input-container svg {
          margin-right: 12px;
        }
        
        input {
          width: 100%;
          height: 100%;
          background: transparent;
          border: none;
          padding: 0;
          font-size: 16px;
          outline: none;
          font-family: inherit;
        }
        
        .forgot-password-container {
          display: flex;
          justify-content: flex-end;
          margin-bottom: 24px;
        }
        
        .forgot-button {
          background: none;
          border: none;
          font-size: 14px;
          font-weight: 500;
          cursor: pointer;
          font-family: inherit;
          padding: 4px;
        }
        
        .signin-button {
          width: 100%;
          height: 56px;
          border: none;
          border-radius: 12px;
          color: white;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: transform 0.2s, opacity 0.2s;
          font-family: inherit;
        }
        
        .signin-button:disabled {
          opacity: 0.7;
        }
        
        .signin-button:active {
          transform: scale(0.98);
        }
        
        .divider {
          display: flex;
          align-items: center;
          margin: 32px 0;
          position: relative;
        }
        
        .divider-line {
          flex: 1;
          height: 1px;
        }
        
        .divider-text {
          margin: 0 16px;
          font-size: 14px;
          padding: 0 8px;
        }
        
        .social-buttons {
          display: flex;
          justify-content: space-between;
          gap: 16px;
          margin-bottom: 32px;
        }
        
        .social-button {
          flex: 1;
          height: 56px;
          border-radius: 12px;
          border-width: 1px;
          border-style: solid;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
          transition: transform 0.2s, opacity 0.2s;
          font-family: inherit;
        }
        
        .social-button:active {
          transform: scale(0.98);
          opacity: 0.9;
        }
        
        .switch-container {
          display: flex;
          justify-content: center;
          align-items: center;
        }
        
        .switch-text {
          font-size: 14px;
          margin-right: 4px;
          margin-bottom: 0;
        }
        
        .switch-button {
          font-size: 14px;
          font-weight: 600;
          background: none;
          border: none;
          cursor: pointer;
          font-family: inherit;
          padding: 4px;
        }
        
        @media (max-width: 480px) {
          .title {
            font-size: 24px;
          }
          
          .subtitle {
            font-size: 14px;
          }
          
          .input-container {
            height: 50px;
          }
          
          .signin-button, .social-button {
            height: 50px;
          }
        }
      `})]})},R6=({onSwitch:e})=>{const{colors:t}=ve(),{signUp:n,signInWithGithub:r,signInWithGoogle:s,loading:i,error:a}=ht(),[l,c]=_.useState(""),[d,u]=_.useState(""),[h,f]=_.useState(""),[p,v]=_.useState(""),[y,b]=_.useState(null),g=async m=>{if(m.preventDefault(),!l.trim()){b("Please enter a username");return}if(!d.trim()){b("Please enter your email");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){b("Please enter a valid email address");return}if(h.length<6){b("Password must be at least 6 characters");return}if(h!==p){b("Passwords do not match");return}b(null),await n(d,h,l)};return o.jsxs("div",{className:"signup-container",children:[o.jsx("h2",{className:"title",style:{color:t.text},children:"Create Account"}),o.jsx("p",{className:"subtitle",style:{color:t.textSecondary},children:"Join Code Canvas today"}),(a||y)&&o.jsx("div",{className:"error-container",style:{backgroundColor:`${t.error}20`},children:o.jsx("p",{className:"error-text",style:{color:t.error},children:y||a})}),o.jsxs("form",{onSubmit:g,children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"username",style:{color:t.textSecondary},children:"Username"}),o.jsxs("div",{className:"input-container",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(Ut,{size:20,color:t.textSecondary}),o.jsx("input",{id:"username",type:"text",placeholder:"Enter username",value:l,onChange:m=>c(m.target.value),style:{color:t.text}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",style:{color:t.textSecondary},children:"Email"}),o.jsxs("div",{className:"input-container",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(Nl,{size:20,color:t.textSecondary}),o.jsx("input",{id:"email",type:"email",placeholder:"your.email@example.com",value:d,onChange:m=>u(m.target.value),style:{color:t.text}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",style:{color:t.textSecondary},children:"Password"}),o.jsxs("div",{className:"input-container",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(ss,{size:20,color:t.textSecondary}),o.jsx("input",{id:"password",type:"password",placeholder:"••••••••",value:h,onChange:m=>f(m.target.value),style:{color:t.text}})]})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"confirmPassword",style:{color:t.textSecondary},children:"Confirm Password"}),o.jsxs("div",{className:"input-container",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(ss,{size:20,color:t.textSecondary}),o.jsx("input",{id:"confirmPassword",type:"password",placeholder:"••••••••",value:p,onChange:m=>v(m.target.value),style:{color:t.text}})]}),o.jsx("p",{className:"helper-text",style:{color:t.textSecondary},children:"Password must be at least 6 characters"})]}),o.jsx("button",{type:"submit",className:"signup-button",disabled:i,style:{backgroundColor:t.primary},children:i?"Creating Account...":"Create Account"})]}),o.jsxs("div",{className:"divider",children:[o.jsx("div",{className:"divider-line",style:{backgroundColor:t.border}}),o.jsx("span",{className:"divider-text",style:{color:t.textSecondary,backgroundColor:t.surface},children:"or continue with"}),o.jsx("div",{className:"divider-line",style:{backgroundColor:t.border}})]}),o.jsxs("div",{className:"social-buttons",children:[o.jsxs("button",{className:"social-button",onClick:()=>r(),type:"button",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(ty,{size:20,color:t.text}),o.jsx("span",{style:{color:t.text},children:"GitHub"})]}),o.jsxs("button",{className:"social-button",onClick:()=>s(),type:"button",style:{borderColor:t.border,backgroundColor:t.background},children:[o.jsx(Mu,{size:20,color:t.text}),o.jsx("span",{style:{color:t.text},children:"Google"})]})]}),o.jsxs("div",{className:"switch-container",children:[o.jsx("p",{className:"switch-text",style:{color:t.textSecondary},children:"Already have an account?"}),o.jsx("button",{onClick:e,className:"switch-button",type:"button",style:{color:t.primary},children:"Sign In"})]}),o.jsx("style",{children:`
        .signup-container {
          width: 100%;
        }
        
        .title {
          font-size: 28px;
          font-weight: bold;
          margin-bottom: 8px;
          text-align: center;
        }
        
        .subtitle {
          font-size: 16px;
          margin-bottom: 24px;
          text-align: center;
        }
        
        .error-container {
          padding: 16px;
          border-radius: 12px;
          margin-bottom: 24px;
        }
        
        .error-text {
          font-size: 14px;
          margin: 0;
        }
        
        .form-group {
          margin-bottom: 20px;
        }
        
        label {
          display: block;
          font-size: 14px;
          font-weight: 500;
          margin-bottom: 8px;
        }
        
        .input-container {
          position: relative;
          display: flex;
          align-items: center;
          border-width: 1px;
          border-style: solid;
          border-radius: 12px;
          height: 56px;
          padding: 0 16px;
          overflow: hidden;
        }
        
        .input-container svg {
          margin-right: 12px;
        }
        
        input {
          width: 100%;
          height: 100%;
          background: transparent;
          border: none;
          padding: 0;
          font-size: 16px;
          outline: none;
          font-family: inherit;
        }
        
        .helper-text {
          font-size: 12px;
          margin-top: 6px;
          margin-left: 2px;
        }
        
        .signup-button {
          width: 100%;
          height: 56px;
          border: none;
          border-radius: 12px;
          color: white;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: transform 0.2s, opacity 0.2s;
          margin-top: 8px;
          font-family: inherit;
        }
        
        .signup-button:disabled {
          opacity: 0.7;
        }
        
        .signup-button:active {
          transform: scale(0.98);
        }
        
        .divider {
          display: flex;
          align-items: center;
          margin: 32px 0;
          position: relative;
        }
        
        .divider-line {
          flex: 1;
          height: 1px;
        }
        
        .divider-text {
          margin: 0 16px;
          font-size: 14px;
          padding: 0 8px;
        }
        
        .social-buttons {
          display: flex;
          justify-content: space-between;
          gap: 16px;
          margin-bottom: 32px;
        }
        
        .social-button {
          flex: 1;
          height: 56px;
          border-radius: 12px;
          border-width: 1px;
          border-style: solid;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
          transition: transform 0.2s, opacity 0.2s;
          font-family: inherit;
        }
        
        .social-button:active {
          transform: scale(0.98);
          opacity: 0.9;
        }
        
        .switch-container {
          display: flex;
          justify-content: center;
          align-items: center;
        }
        
        .switch-text {
          font-size: 14px;
          margin-right: 4px;
          margin-bottom: 0;
        }
        
        .switch-button {
          font-size: 14px;
          font-weight: 600;
          background: none;
          border: none;
          cursor: pointer;
          font-family: inherit;
          padding: 4px;
        }
        
        @media (max-width: 480px) {
          .title {
            font-size: 24px;
          }
          
          .subtitle {
            font-size: 14px;
          }
          
          .input-container {
            height: 50px;
          }
          
          .signup-button, .social-button {
            height: 50px;
          }
        }
      `})]})},F6=()=>{const{colors:e}=ve(),{user:t,loading:n}=ht(),[r,s]=_.useState("welcome"),i=ot(),a=Fr(),[l,c]=_.useState(!0);return _.useEffect(()=>{console.log("AuthScreen - Current path:",a.pathname),console.log("AuthScreen - Auth state:",{user:t?"exists":"null",loading:n});const d=setTimeout(()=>{c(!1)},3e3);return()=>clearTimeout(d)},[a.pathname,t,n]),_.useEffect(()=>{n||c(!1)},[n]),_.useEffect(()=>{a.pathname==="/auth/callback"&&!n&&(console.log("Processing OAuth callback, user:",t?"exists":"null"),t&&(localStorage.setItem("hasSeenWelcome","false"),i("/explorer",{replace:!0})))},[t,n,a.pathname,i]),_.useEffect(()=>{var d;t&&!n&&a.pathname==="/auth"&&!((d=a.state)!=null&&d.updateProfile)&&(localStorage.getItem("hasSeenWelcome")==="false"?(localStorage.setItem("hasSeenWelcome","true"),i("/explorer",{replace:!0})):i("/editor",{replace:!0}))},[t,n,i,a]),n&&l?o.jsxs("div",{className:"auth-screen",style:{backgroundColor:e.background},children:[o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{className:"loading-text",children:"Loading..."})]}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .auth-screen {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
          }
          .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
          }
          .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid ${e.primary};
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
          }
          .loading-text {
            margin-top: 16px;
            color: ${e.text};
          }
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}})]}):o.jsxs("div",{className:"auth-screen",style:{backgroundColor:e.background},children:[o.jsxs("div",{className:"auth-container",style:{backgroundColor:e.surface},children:[o.jsx("div",{className:"logo-container",children:o.jsx("img",{src:"/images/logo.png",alt:"Code Canvas",className:"logo",onError:d=>{d.currentTarget.onerror=null,d.currentTarget.src="https://placehold.co/80x80/3794FF/FFFFFF?text=CC"}})}),t?o.jsx(Wy,{}):r==="welcome"?o.jsxs("div",{className:"welcome-container",children:[o.jsx("h1",{className:"welcome-title",style:{color:e.text},children:"Welcome to Code Canvas"}),o.jsx("p",{className:"welcome-subtitle",style:{color:e.textSecondary},children:"Your all-in-one coding environment"}),o.jsxs("div",{className:"auth-buttons",children:[o.jsx("button",{className:"signin-button",onClick:()=>s("signin"),style:{backgroundColor:e.primary},children:"Sign In"}),o.jsx("button",{className:"signup-button",onClick:()=>s("signup"),style:{borderColor:e.primary,color:e.primary},children:"Create Account"})]}),o.jsxs("div",{className:"features",children:[o.jsxs("div",{className:"feature",style:{backgroundColor:e.background},children:[o.jsx("div",{className:"feature-icon",style:{backgroundColor:`${e.primary}20`,color:e.primary},children:"✓"}),o.jsx("span",{children:"Real-time collaboration"})]}),o.jsxs("div",{className:"feature",style:{backgroundColor:e.background},children:[o.jsx("div",{className:"feature-icon",style:{backgroundColor:`${e.primary}20`,color:e.primary},children:"✓"}),o.jsx("span",{children:"Cloud sync across devices"})]}),o.jsxs("div",{className:"feature",style:{backgroundColor:e.background},children:[o.jsx("div",{className:"feature-icon",style:{backgroundColor:`${e.primary}20`,color:e.primary},children:"✓"}),o.jsx("span",{children:"Integrated terminal"})]})]})]}):o.jsx(o.Fragment,{children:r==="signin"?o.jsx(P6,{onSwitch:()=>s("signup")}):o.jsx(R6,{onSwitch:()=>s("signin")})})]}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .auth-screen {
          min-height: 100vh;
          min-height: calc(var(--vh, 1vh) * 100);
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 20px;
        }
        
        .auth-container {
          width: 100%;
          max-width: 440px;
          border-radius: 16px;
          padding: 40px;
          box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        
        .logo-container {
          display: flex;
          justify-content: center;
          margin-bottom: 32px;
        }
        
        .logo {
          width: 80px;
          height: 80px;
          border-radius: 16px;
          object-fit: contain;
        }
        
        .welcome-container {
          text-align: center;
        }
        
        .welcome-title {
          font-size: 28px;
          font-weight: bold;
          margin-bottom: 12px;
        }
        
        .welcome-subtitle {
          font-size: 16px;
          margin-bottom: 32px;
        }
        
        .auth-buttons {
          display: flex;
          flex-direction: column;
          gap: 16px;
          margin-bottom: 32px;
        }
        
        .signin-button, .signup-button {
          width: 100%;
          height: 50px;
          border-radius: 12px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: transform 0.2s, opacity 0.2s;
        }
        
        .signin-button {
          border: none;
          color: white;
        }
        
        .signup-button {
          background-color: transparent;
          border: 2px solid;
        }
        
        .signin-button:hover, .signup-button:hover {
          opacity: 0.9;
        }
        
        .signin-button:active, .signup-button:active {
          transform: scale(0.98);
        }
        
        .features {
          display: flex;
          flex-direction: column;
          gap: 12px;
          text-align: left;
        }
        
        .feature {
          display: flex;
          align-items: center;
          padding: 12px 16px;
          border-radius: 12px;
          font-size: 14px;
          color: ${e.text};
        }
        
        .feature-icon {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 24px;
          height: 24px;
          border-radius: 50%;
          margin-right: 12px;
          font-weight: bold;
        }
        
        @media (max-width: 480px) {
          .auth-container {
            padding: 24px;
            margin: 0 16px;
            max-width: 100%;
            border-radius: 12px;
          }
          
          .welcome-title {
            font-size: 24px;
          }
          
          .logo {
            width: 64px;
            height: 64px;
          }
          
          .signin-button, .signup-button {
            height: 48px;
          }
        }
      `}})]})},B6=()=>{const e=ot(),{user:t,loading:n}=ht();Xa.useEffect(()=>{t&&!n&&e("/editor")},[t,n,e]);const r=()=>{e("/onboarding")};return o.jsxs("div",{className:"landing-page",children:[o.jsxs("div",{className:"hero",children:[o.jsx("h1",{children:"Code Canvas"}),o.jsx("p",{children:"Your all-in-one coding environment"}),o.jsx("button",{className:"get-started-btn",onClick:r,children:"Get Started"})]}),o.jsxs("div",{className:"features",children:[o.jsxs("div",{className:"feature",children:[o.jsx("h2",{children:"Code Editor"}),o.jsx("p",{children:"Powerful editor with syntax highlighting and code completion"})]}),o.jsxs("div",{className:"feature",children:[o.jsx("h2",{children:"File Explorer"}),o.jsx("p",{children:"Manage your projects and files with ease"})]}),o.jsxs("div",{className:"feature",children:[o.jsx("h2",{children:"Terminal"}),o.jsx("p",{children:"Built-in terminal for running commands"})]}),o.jsxs("div",{className:"feature",children:[o.jsx("h2",{children:"DevReels"}),o.jsx("p",{children:"Learn from short coding videos"})]})]}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-page {
          height: 100vh;
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 20px;
          background-color: #1E1E1E;
          color: white;
        }
        
        .hero {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          text-align: center;
          height: 60vh;
        }
        
        h1 {
          font-size: 3rem;
          margin-bottom: 1rem;
        }
        
        p {
          font-size: 1.2rem;
          margin-bottom: 2rem;
        }
        
        .get-started-btn {
          background-color: #3794FF;
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 4px;
          font-size: 1.1rem;
          cursor: pointer;
          transition: background-color 0.3s;
        }
        
        .get-started-btn:hover {
          background-color: #2d7ad3;
        }
        
        .features {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 2rem;
          width: 100%;
          max-width: 1200px;
          margin-top: 2rem;
        }
        
        .feature {
          background-color: #252526;
          padding: 1.5rem;
          border-radius: 8px;
        }
        
        .feature h2 {
          font-size: 1.5rem;
          margin-bottom: 0.75rem;
        }
      `}})]})},ea=[{id:"1",title:"Welcome to Code Canvas",description:"Your all-in-one coding environment. Build, learn, and share code anywhere.",icon:di},{id:"2",title:"File Explorer",description:"Browse and manage your projects with ease. Create, edit, and organize files and folders.",icon:Xg},{id:"3",title:"Integrated Terminal",description:"Run commands, execute code, and install packages directly from the app.",icon:Al},{id:"4",title:"Learn with DevReels",description:"Watch short-form coding tutorials and tips from experienced developers.",icon:ay}],O6=()=>{const e=ot(),[t,n]=_.useState(0),r=()=>{t<ea.length-1?n(t+1):s()},s=()=>{localStorage.setItem("hasCompletedOnboarding","true"),e("/auth")},i=()=>{localStorage.setItem("hasCompletedOnboarding","true"),e("/auth")},a=ea[t],l=a.icon;return o.jsxs("div",{className:"onboarding-screen",children:[o.jsx("button",{className:"skip-button",onClick:i,children:"Skip"}),o.jsxs("div",{className:"slide",children:[o.jsx("div",{className:"icon-container",children:o.jsx(l,{size:40,color:"#3794FF"})}),o.jsx("h1",{className:"title",children:a.title}),o.jsx("p",{className:"description",children:a.description})]}),o.jsxs("div",{className:"footer",children:[o.jsx("div",{className:"pagination",children:ea.map((c,d)=>o.jsx("span",{className:`dot ${d===t?"active":""}`},d))}),o.jsx("button",{className:"next-button",onClick:r,children:t<ea.length-1?o.jsx(xt,{size:24,color:"#FFFFFF"}):o.jsx(kn,{size:24,color:"#FFFFFF"})})]}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .onboarding-screen {
          height: 100vh;
          display: flex;
          flex-direction: column;
          background-color: #1E1E1E;
          color: white;
          position: relative;
        }
        
        .skip-button {
          position: absolute;
          top: 20px;
          right: 20px;
          background: none;
          border: none;
          color: #9D9D9D;
          font-size: 16px;
          cursor: pointer;
        }
        
        .slide {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
          text-align: center;
        }
        
        .icon-container {
          width: 80px;
          height: 80px;
          border-radius: 40px;
          background-color: rgba(55, 148, 255, 0.1);
          display: flex;
          align-items: center;
          justify-content: center;
          margin-bottom: 24px;
        }
        
        .title {
          font-size: 28px;
          font-weight: bold;
          margin-bottom: 16px;
        }
        
        .description {
          font-size: 16px;
          max-width: 400px;
          line-height: 1.6;
          margin-bottom: 40px;
          color: #9D9D9D;
        }
        
        .footer {
          padding: 40px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .pagination {
          display: flex;
        }
        
        .dot {
          width: 8px;
          height: 8px;
          border-radius: 4px;
          background-color: #3E3E42;
          margin-right: 8px;
        }
        
        .dot.active {
          width: 24px;
          background-color: #3794FF;
        }
        
        .next-button {
          width: 56px;
          height: 56px;
          border-radius: 28px;
          background-color: #3794FF;
          display: flex;
          align-items: center;
          justify-content: center;
          border: none;
          cursor: pointer;
        }
      `}})]})},L6="_container_1mtc9_1",z6="_header_1mtc9_7",$6="_titleSection_1mtc9_13",D6="_backButton_1mtc9_19",M6="_shareButton_1mtc9_35",U6="_tabs_1mtc9_44",H6="_tab_1mtc9_44",W6="_activeTab_1mtc9_62",q6="_badge_1mtc9_66",V6="_content_1mtc9_80",K6="_loading_1mtc9_86",G6="_emptyState_1mtc9_95",J6="_emptyStateSubtext_1mtc9_110",Z6="_invitationList_1mtc9_117",Y6="_sharedProjectsList_1mtc9_117",Q6="_invitationCard_1mtc9_123",X6="_sharedProjectCard_1mtc9_123",e5="_invitationHeader_1mtc9_139",t5="_projectHeader_1mtc9_139",n5="_invitationDate_1mtc9_156",r5="_projectDate_1mtc9_156",s5="_invitationBody_1mtc9_160",o5="_invitationInfo_1mtc9_167",i5="_inviterAvatar_1mtc9_178",a5="_permissionBadge_1mtc9_187",l5="_invitationActions_1mtc9_196",c5="_rejectButton_1mtc9_204",d5="_acceptButton_1mtc9_204",u5="_projectInfo_1mtc9_225",h5="_ownerInfo_1mtc9_232",f5="_createProjectButton_1mtc9_239",p5="_currentProjectCollaborators_1mtc9_258",Ee={container:L6,header:z6,titleSection:$6,backButton:D6,shareButton:M6,tabs:U6,tab:H6,activeTab:W6,badge:q6,content:V6,loading:K6,emptyState:G6,emptyStateSubtext:J6,invitationList:Z6,sharedProjectsList:Y6,invitationCard:Q6,sharedProjectCard:X6,invitationHeader:e5,projectHeader:t5,invitationDate:n5,projectDate:r5,invitationBody:s5,invitationInfo:o5,inviterAvatar:i5,permissionBadge:a5,invitationActions:l5,rejectButton:c5,acceptButton:d5,projectInfo:u5,ownerInfo:h5,createProjectButton:f5,currentProjectCollaborators:p5},m5=()=>{const{colors:e}=ve(),{user:t}=ht(),{currentProject:n,projects:r,selectProject:s}=Xe(),i=ot(),[a,l]=_.useState("invitations"),[c,d]=_.useState([]),[u,h]=_.useState([]),[f,p]=_.useState(!0),[v,y]=_.useState(null),[b,g]=_.useState(!1);_.useEffect(()=>{t&&(m(),x())},[t]);const m=async()=>{if(t){p(!0);try{const{data:P,error:K}=await we.from("collaboration_invites").select(`
          id,
          project_id,
          permission,
          created_at,
          projects:project_id (name),
          profiles:inviter_id (id, username, avatar_url)
        `).eq("invitee_id",t.id).eq("status","pending");if(K)throw K;const F=P.map(L=>({id:L.id,projectId:L.project_id,projectName:L.projects.name,inviterId:L.profiles.id,inviterName:L.profiles.username,permission:L.permission,createdAt:L.created_at}));d(F)}catch(P){console.error("Error fetching invitations:",P),y("Failed to load invitations")}finally{p(!1)}}},x=async()=>{if(t)try{const{data:P,error:K}=await we.from("project_collaborators").select(`
          permission,
          project:project_id (
            id,
            name,
            is_public,
            created_at,
            profiles:user_id (id, username)
          )
        `).eq("user_id",t.id);if(K)throw K;const F=P.map(L=>({id:L.project.id,name:L.project.name,isPublic:L.project.is_public,createdAt:L.project.created_at,permission:L.permission,ownerId:L.project.profiles.id,ownerName:L.project.profiles.username}));h(F)}catch(P){console.error("Error fetching shared projects:",P),y("Failed to load shared projects")}},E=async P=>{if(t)try{const{error:K}=await we.from("collaboration_invites").update({status:"accepted"}).eq("id",P);if(K)throw K;m(),x()}catch(K){console.error("Error accepting invitation:",K),alert("Failed to accept invitation")}},k=async P=>{if(t)try{const{error:K}=await we.from("collaboration_invites").update({status:"rejected"}).eq("id",P);if(K)throw K;m()}catch(K){console.error("Error rejecting invitation:",K),alert("Failed to reject invitation")}},I=P=>{r.find(F=>F.id===P)?(s(P),i("/editor")):alert("Loading project...")},R=P=>new Date(P).toLocaleDateString(),T=P=>{switch(P){case"admin":return e.warning;case"write":return e.primary;case"read":default:return e.textSecondary}},B=P=>{switch(P){case"admin":return"Admin";case"write":return"Editor";case"read":default:return"Viewer"}};return t?o.jsxs("div",{className:Ee.container,style:{backgroundColor:e.background},children:[o.jsxs("div",{className:Ee.header,style:{backgroundColor:e.surface,borderBottomColor:e.border},children:[o.jsxs("div",{className:Ee.titleSection,children:[o.jsx("button",{className:Ee.backButton,onClick:()=>i(-1),children:o.jsx(_i,{size:20,color:e.primary})}),o.jsx("h1",{style:{color:e.text},children:"Collaboration"}),n&&o.jsxs("button",{className:Ee.shareButton,onClick:()=>g(!0),style:{backgroundColor:e.primary,color:"white",display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"20px",border:"none",marginLeft:"auto"},children:[o.jsx(ki,{size:18,color:"white"}),o.jsx("span",{children:"Share Project"})]})]}),o.jsxs("div",{className:Ee.tabs,children:[o.jsxs("button",{className:`${Ee.tab} ${a==="invitations"?Ee.activeTab:""}`,onClick:()=>l("invitations"),style:{color:a==="invitations"?e.primary:e.textSecondary,borderBottomColor:a==="invitations"?e.primary:"transparent"},children:[o.jsx(If,{size:16}),o.jsx("span",{children:"Invitations"}),c.length>0&&o.jsx("div",{className:Ee.badge,style:{backgroundColor:e.primary},children:c.length})]}),o.jsxs("button",{className:`${Ee.tab} ${a==="collaborators"?Ee.activeTab:""}`,onClick:()=>l("collaborators"),style:{color:a==="collaborators"?e.primary:e.textSecondary,borderBottomColor:a==="collaborators"?e.primary:"transparent"},children:[o.jsx(Js,{size:16}),o.jsx("span",{children:"Shared Projects"})]})]})]}),o.jsxs("div",{className:Ee.content,children:[a==="invitations"&&o.jsx("div",{className:Ee.invitationsTab,children:f?o.jsx("div",{className:Ee.loading,children:"Loading invitations..."}):c.length===0?o.jsxs("div",{className:Ee.emptyState,children:[o.jsx(If,{size:40,color:e.textSecondary}),o.jsx("p",{children:"No pending invitations"}),o.jsx("p",{className:Ee.emptyStateSubtext,children:"When someone invites you to collaborate, you'll see it here"})]}):o.jsx("div",{className:Ee.invitationList,children:c.map(P=>o.jsxs("div",{className:Ee.invitationCard,style:{backgroundColor:e.surface,borderColor:e.border},children:[o.jsxs("div",{className:Ee.invitationHeader,children:[o.jsx("h3",{style:{color:e.text},children:P.projectName}),o.jsx("div",{className:Ee.invitationDate,style:{color:e.textSecondary},children:R(P.createdAt)})]}),o.jsxs("div",{className:Ee.invitationBody,children:[o.jsxs("div",{className:Ee.invitationInfo,children:[o.jsx("div",{className:Ee.inviterAvatar,style:{backgroundColor:`${e.primary}20`},children:o.jsx(Ut,{size:16,color:e.primary})}),o.jsxs("p",{style:{color:e.text},children:[o.jsx("strong",{children:P.inviterName||"A user"})," invited you to collaborate"]})]}),o.jsx("div",{className:Ee.permissionBadge,style:{backgroundColor:`${T(P.permission)}20`,color:T(P.permission)},children:B(P.permission)})]}),o.jsxs("div",{className:Ee.invitationActions,children:[o.jsxs("button",{className:Ee.rejectButton,onClick:()=>k(P.id),style:{borderColor:e.error,color:e.error},children:[o.jsx(st,{size:16}),o.jsx("span",{children:"Decline"})]}),o.jsxs("button",{className:Ee.acceptButton,onClick:()=>E(P.id),style:{backgroundColor:e.primary},children:[o.jsx(kn,{size:16,color:"#FFFFFF"}),o.jsx("span",{children:"Accept"})]})]})]},P.id))})}),a==="collaborators"&&o.jsxs("div",{className:Ee.collaboratorsTab,children:[f?o.jsx("div",{className:Ee.loading,children:"Loading shared projects..."}):u.length===0?o.jsxs("div",{className:Ee.emptyState,children:[o.jsx(Js,{size:40,color:e.textSecondary}),o.jsx("p",{children:"No shared projects"}),o.jsx("p",{className:Ee.emptyStateSubtext,children:"You aren't collaborating on any projects yet"})]}):o.jsx("div",{className:Ee.sharedProjectsList,children:u.map(P=>o.jsxs("div",{className:Ee.sharedProjectCard,style:{backgroundColor:e.surface,borderColor:e.border},onClick:()=>I(P.id),children:[o.jsxs("div",{className:Ee.projectHeader,children:[o.jsx("h3",{style:{color:e.text},children:P.name}),o.jsx("div",{className:Ee.permissionBadge,style:{backgroundColor:`${T(P.permission)}20`,color:T(P.permission)},children:B(P.permission)})]}),o.jsxs("div",{className:Ee.projectInfo,children:[o.jsxs("div",{className:Ee.ownerInfo,style:{color:e.textSecondary},children:[o.jsx(Ut,{size:14}),o.jsxs("span",{children:["Owner: ",P.ownerName||"Unknown"]})]}),o.jsxs("div",{className:Ee.projectDate,style:{color:e.textSecondary},children:["Created: ",R(P.createdAt)]})]})]},P.id))}),o.jsx("div",{className:Ee.createProjectButton,children:o.jsxs("button",{onClick:()=>i("/explorer"),style:{backgroundColor:e.primary},children:[o.jsx(Ir,{size:16,color:"#FFFFFF"}),o.jsx("span",{children:"Create New Shared Project"})]})})]}),n&&a==="collaborators"&&o.jsxs("div",{className:Ee.currentProjectCollaborators,children:[o.jsx("h2",{style:{color:e.text},children:"Current Project Collaborators"}),o.jsx($y,{})]})]}),o.jsx(Ku,{isOpen:b,onClose:()=>g(!1),project:n||void 0})]}):o.jsx(Za,{icon:"FileCode",title:"Sign In Required",message:"Please sign in to view your collaboration invitations and shared projects.",actionText:"Sign In",actionPath:"/auth"})},g5=()=>{const{colors:e}=ve(),{user:t}=ht(),[n,r]=_.useState([]),[s,i]=_.useState(!1),[a,l]=_.useState(null),[c,d]=_.useState(""),[u,h]=_.useState({});_.useEffect(()=>{t?f():r([])},[t]);const f=async()=>{if(t){i(!0),l(null);try{const m=[{id:"1",entityId:"file-1",entityType:"file",userId:t.id,shareType:"public",allowDownload:!0,allowCopy:!0,accessCount:5,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),url:"https://example.com/share/file/1"}];r(m)}catch(m){console.error("Error loading shared items:",m),l("Failed to load your shared items")}finally{i(!1)}}},p=async m=>{if(window.confirm("Are you sure you want to delete this shared item?"))try{r(x=>x.filter(E=>E.id!==m))}catch(x){console.error("Error deleting shared item:",x),l(x.message||"An unexpected error occurred")}},v=async(m,x)=>{try{await navigator.clipboard.writeText(m),h(E=>({...E,[x]:!0})),setTimeout(()=>{h(E=>({...E,[x]:!1}))},2e3)}catch(E){console.error("Failed to copy URL:",E),l("Failed to copy URL to clipboard")}},y=m=>m?new Date(m).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Never",b=m=>{switch(m){case"public":return o.jsx(Va,{size:16,color:e.primary});case"private":return o.jsx(ss,{size:16,color:e.warning});case"link":default:return o.jsx(_w,{size:16,color:e.primary})}},g=c?n.filter(m=>m.entityId.toLowerCase().includes(c.toLowerCase())||m.shareType.toLowerCase().includes(c.toLowerCase())):n;return t?o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",style:{color:e.text},children:"My Shared Items"}),o.jsxs("button",{className:"flex items-center gap-1 p-2 rounded",style:{backgroundColor:e.primary,color:"white"},onClick:f,disabled:s,children:[o.jsx(Zn,{size:16,className:s?"animate-spin":""}),o.jsx("span",{children:"Refresh"})]})]}),o.jsxs("div",{className:"mb-4 relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Ln,{size:16,color:e.textSecondary})}),o.jsx("input",{type:"text",placeholder:"Search shared items...",value:c,onChange:m=>d(m.target.value),className:"pl-10 pr-4 py-2 w-full rounded-md border",style:{backgroundColor:e.background,color:e.text,borderColor:e.border}}),c&&o.jsx("button",{onClick:()=>d(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:o.jsx(st,{size:16,color:e.textSecondary})})]}),a&&o.jsx("div",{className:"mb-4 p-3 rounded-md",style:{backgroundColor:`${e.error}15`,color:e.error},children:a}),s?o.jsxs("div",{className:"p-8 text-center",style:{color:e.textSecondary},children:[o.jsx(Zn,{className:"inline-block mb-2 animate-spin",size:24,color:e.primary}),o.jsx("p",{children:"Loading shared items..."})]}):g.length===0?o.jsx("div",{className:"p-8 text-center border rounded-lg",style:{color:e.textSecondary,borderColor:e.border},children:c?o.jsx("p",{children:"No shared items match your search"}):o.jsx("p",{children:"You haven't shared any items yet"})}):o.jsx("div",{className:"space-y-4",children:g.map(m=>o.jsxs("div",{className:"border rounded-lg overflow-hidden",style:{borderColor:e.border},children:[o.jsxs("div",{className:"p-4 flex justify-between items-start",style:{backgroundColor:e.surface},children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${e.primary}15`},children:m.entityType==="file"?o.jsx(Gs,{size:20,color:e.primary}):o.jsx(Tr,{size:20,color:e.primary})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",style:{color:e.text},children:m.entityId}),o.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[o.jsxs("div",{className:"flex items-center gap-1",style:{color:e.textSecondary},children:[b(m.shareType),o.jsx("span",{className:"text-sm capitalize",children:m.shareType})]}),m.expiresAt&&o.jsxs("div",{className:"flex items-center gap-1 text-sm",style:{color:e.textSecondary},children:[o.jsx(Zg,{size:14}),o.jsxs("span",{children:["Expires: ",y(m.expiresAt)]})]}),o.jsxs("div",{className:"flex items-center gap-1 text-sm",style:{color:e.textSecondary},children:[o.jsx(Cl,{size:14}),o.jsxs("span",{children:[m.accessCount," views"]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"p-2 rounded-md",onClick:()=>v(m.url,m.id),style:{backgroundColor:u[m.id]?e.success:e.background,color:u[m.id]?"white":e.text},children:u[m.id]?o.jsx(Nr,{size:18}):o.jsx(Nr,{size:18})}),o.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-md",style:{backgroundColor:e.background,color:e.text},children:o.jsx(Qg,{size:18})}),o.jsx("button",{className:"p-2 rounded-md",onClick:()=>p(m.id),style:{backgroundColor:e.background,color:e.error},children:o.jsx($w,{size:18})})]})]}),o.jsx("div",{className:"px-4 py-2 text-sm border-t",style:{backgroundColor:e.background,borderColor:e.border,color:e.textSecondary},children:o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Created: ",y(m.createdAt)]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsxs("span",{children:["Copy: ",m.allowCopy?"Allowed":"Disabled"]}),o.jsx("span",{className:"mx-2",children:"•"}),o.jsxs("span",{children:["Download: ",m.allowDownload?"Allowed":"Disabled"]})]})]})})]},m.id))})]}):o.jsx("div",{className:"p-8 text-center",style:{color:e.textSecondary},children:"Sign in to view your shared items"})},y5=()=>{const{colors:e}=ve(),t=ot();return o.jsxs("div",{className:"h-full flex flex-col",style:{backgroundColor:e.background},children:[o.jsxs("div",{className:"flex items-center p-4 border-b",style:{borderColor:e.border},children:[o.jsx("button",{className:"p-2 mr-2 rounded-full",onClick:()=>t(-1),style:{color:e.primary},"aria-label":"Go back",children:o.jsx(_i,{size:20})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ki,{size:20,color:e.primary}),o.jsx("h1",{className:"text-xl font-semibold",style:{color:e.text},children:"Shared Items"})]})]}),o.jsx("div",{className:"flex-1 overflow-auto",children:o.jsx(g5,{})})]})};function ta(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var x5={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,s,i){function a(d,u){if(!s[d]){if(!r[d]){var h=typeof ta=="function"&&ta;if(!u&&h)return h(d,!0);if(l)return l(d,!0);var f=new Error("Cannot find module '"+d+"'");throw f.code="MODULE_NOT_FOUND",f}var p=s[d]={exports:{}};r[d][0].call(p.exports,function(v){var y=r[d][1][v];return a(y||v)},p,p.exports,n,r,s,i)}return s[d].exports}for(var l=typeof ta=="function"&&ta,c=0;c<i.length;c++)a(i[c]);return a}({1:[function(n,r,s){var i=n("./utils"),a=n("./support"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(c){for(var d,u,h,f,p,v,y,b=[],g=0,m=c.length,x=m,E=i.getTypeOf(c)!=="string";g<c.length;)x=m-g,h=E?(d=c[g++],u=g<m?c[g++]:0,g<m?c[g++]:0):(d=c.charCodeAt(g++),u=g<m?c.charCodeAt(g++):0,g<m?c.charCodeAt(g++):0),f=d>>2,p=(3&d)<<4|u>>4,v=1<x?(15&u)<<2|h>>6:64,y=2<x?63&h:64,b.push(l.charAt(f)+l.charAt(p)+l.charAt(v)+l.charAt(y));return b.join("")},s.decode=function(c){var d,u,h,f,p,v,y=0,b=0,g="data:";if(c.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");var m,x=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===l.charAt(64)&&x--,c.charAt(c.length-2)===l.charAt(64)&&x--,x%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=a.uint8array?new Uint8Array(0|x):new Array(0|x);y<c.length;)d=l.indexOf(c.charAt(y++))<<2|(f=l.indexOf(c.charAt(y++)))>>4,u=(15&f)<<4|(p=l.indexOf(c.charAt(y++)))>>2,h=(3&p)<<6|(v=l.indexOf(c.charAt(y++))),m[b++]=d,p!==64&&(m[b++]=u),v!==64&&(m[b++]=h);return m}},{"./support":30,"./utils":32}],2:[function(n,r,s){var i=n("./external"),a=n("./stream/DataWorker"),l=n("./stream/Crc32Probe"),c=n("./stream/DataLengthProbe");function d(u,h,f,p,v){this.compressedSize=u,this.uncompressedSize=h,this.crc32=f,this.compression=p,this.compressedContent=v}d.prototype={getContentWorker:function(){var u=new a(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),h=this;return u.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(u,h,f){return u.pipe(new l).pipe(new c("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new c("compressedSize")).withStreamInfo("compression",h)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,s){var i=n("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},s.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,s){var i=n("./utils"),a=function(){for(var l,c=[],d=0;d<256;d++){l=d;for(var u=0;u<8;u++)l=1&l?3988292384^l>>>1:l>>>1;c[d]=l}return c}();r.exports=function(l,c){return l!==void 0&&l.length?i.getTypeOf(l)!=="string"?function(d,u,h,f){var p=a,v=f+h;d^=-1;for(var y=f;y<v;y++)d=d>>>8^p[255&(d^u[y])];return-1^d}(0|c,l,l.length,0):function(d,u,h,f){var p=a,v=f+h;d^=-1;for(var y=f;y<v;y++)d=d>>>8^p[255&(d^u.charCodeAt(y))];return-1^d}(0|c,l,l.length,0):0}},{"./utils":32}],5:[function(n,r,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(n,r,s){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=n("pako"),l=n("./utils"),c=n("./stream/GenericWorker"),d=i?"uint8array":"array";function u(h,f){c.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}s.magic="\b\0",l.inherits(u,c),u.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(l.transformTo(d,h.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},s.compressWorker=function(h){return new u("Deflate",h)},s.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,s){function i(p,v){var y,b="";for(y=0;y<v;y++)b+=String.fromCharCode(255&p),p>>>=8;return b}function a(p,v,y,b,g,m){var x,E,k=p.file,I=p.compression,R=m!==d.utf8encode,T=l.transformTo("string",m(k.name)),B=l.transformTo("string",d.utf8encode(k.name)),P=k.comment,K=l.transformTo("string",m(P)),F=l.transformTo("string",d.utf8encode(P)),L=B.length!==k.name.length,C=F.length!==P.length,Z="",W="",U="",z=k.dir,q=k.date,re={crc32:0,compressedSize:0,uncompressedSize:0};v&&!y||(re.crc32=p.crc32,re.compressedSize=p.compressedSize,re.uncompressedSize=p.uncompressedSize);var H=0;v&&(H|=8),R||!L&&!C||(H|=2048);var O=0,ie=0;z&&(O|=16),g==="UNIX"?(ie=798,O|=function(Y,$){var fe=Y;return Y||(fe=$?16893:33204),(65535&fe)<<16}(k.unixPermissions,z)):(ie=20,O|=function(Y){return 63&(Y||0)}(k.dosPermissions)),x=q.getUTCHours(),x<<=6,x|=q.getUTCMinutes(),x<<=5,x|=q.getUTCSeconds()/2,E=q.getUTCFullYear()-1980,E<<=4,E|=q.getUTCMonth()+1,E<<=5,E|=q.getUTCDate(),L&&(W=i(1,1)+i(u(T),4)+B,Z+="up"+i(W.length,2)+W),C&&(U=i(1,1)+i(u(K),4)+F,Z+="uc"+i(U.length,2)+U);var M="";return M+=`
\0`,M+=i(H,2),M+=I.magic,M+=i(x,2),M+=i(E,2),M+=i(re.crc32,4),M+=i(re.compressedSize,4),M+=i(re.uncompressedSize,4),M+=i(T.length,2),M+=i(Z.length,2),{fileRecord:h.LOCAL_FILE_HEADER+M+T+Z,dirRecord:h.CENTRAL_FILE_HEADER+i(ie,2)+M+i(K.length,2)+"\0\0\0\0"+i(O,4)+i(b,4)+T+Z+K}}var l=n("../utils"),c=n("../stream/GenericWorker"),d=n("../utf8"),u=n("../crc32"),h=n("../signature");function f(p,v,y,b){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=y,this.encodeFileName=b,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}l.inherits(f,c),f.prototype.push=function(p){var v=p.meta.percent||0,y=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,c.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:y?(v+100*(y-b-1))/y:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var v=this.streamFiles&&!p.file.dir;if(v){var y=a(p,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var v=this.streamFiles&&!p.file.dir,y=a(p,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),v)this.push({data:function(b){return h.DATA_DESCRIPTOR+i(b.crc32,4)+i(b.compressedSize,4)+i(b.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var y=this.bytesWritten-p,b=function(g,m,x,E,k){var I=l.transformTo("string",k(E));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(g,2)+i(g,2)+i(m,4)+i(x,4)+i(I.length,2)+I}(this.dirRecords.length,y,p,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var v=this;return p.on("data",function(y){v.processChunk(y)}),p.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),p.on("error",function(y){v.error(y)}),this},f.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var v=this._sources;if(!c.prototype.error.call(this,p))return!1;for(var y=0;y<v.length;y++)try{v[y].error(p)}catch{}return!0},f.prototype.lock=function(){c.prototype.lock.call(this);for(var p=this._sources,v=0;v<p.length;v++)p[v].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,s){var i=n("../compressions"),a=n("./ZipFileWorker");s.generateWorker=function(l,c,d){var u=new a(c.streamFiles,d,c.platform,c.encodeFileName),h=0;try{l.forEach(function(f,p){h++;var v=function(m,x){var E=m||x,k=i[E];if(!k)throw new Error(E+" is not a valid compression method !");return k}(p.options.compression,c.compression),y=p.options.compressionOptions||c.compressionOptions||{},b=p.dir,g=p.date;p._compressWorker(v,y).withStreamInfo("file",{name:f,dir:b,date:g,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(u)}),u.entriesCount=h}catch(f){u.error(f)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,s){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new i;for(var l in this)typeof this[l]!="function"&&(a[l]=this[l]);return a}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(a,l){return new i().loadAsync(a,l)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,s){var i=n("./utils"),a=n("./external"),l=n("./utf8"),c=n("./zipEntries"),d=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function h(f){return new a.Promise(function(p,v){var y=f.decompressed.getContentWorker().pipe(new d);y.on("error",function(b){v(b)}).on("end",function(){y.streamInfo.crc32!==f.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}r.exports=function(f,p){var v=this;return p=i.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:l.utf8decode}),u.isNode&&u.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(y){var b=new c(p);return b.load(y),b}).then(function(y){var b=[a.Promise.resolve(y)],g=y.files;if(p.checkCRC32)for(var m=0;m<g.length;m++)b.push(h(g[m]));return a.Promise.all(b)}).then(function(y){for(var b=y.shift(),g=b.files,m=0;m<g.length;m++){var x=g[m],E=x.fileNameStr,k=i.resolve(x.fileNameStr);v.file(k,x.decompressed,{binary:!0,optimizedBinaryString:!0,date:x.date,dir:x.dir,comment:x.fileCommentStr.length?x.fileCommentStr:null,unixPermissions:x.unixPermissions,dosPermissions:x.dosPermissions,createFolders:p.createFolders}),x.dir||(v.file(k).unsafeOriginalName=E)}return b.zipComment.length&&(v.comment=b.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,s){var i=n("../utils"),a=n("../stream/GenericWorker");function l(c,d){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(l,a),l.prototype._bindStream=function(c){var d=this;(this._stream=c).pause(),c.on("data",function(u){d.push({data:u,meta:{percent:0}})}).on("error",function(u){d.isPaused?this.generatedError=u:d.error(u)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},l.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,s){var i=n("readable-stream").Readable;function a(l,c,d){i.call(this,c),this._helper=l;var u=this;l.on("data",function(h,f){u.push(h)||u._helper.pause(),d&&d(f)}).on("error",function(h){u.emit("error",h)}).on("end",function(){u.push(null)})}n("../utils").inherits(a,i),a.prototype._read=function(){this._helper.resume()},r.exports=a},{"../utils":32,"readable-stream":16}],14:[function(n,r,s){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,a);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,a)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var a=new Buffer(i);return a.fill(0),a},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,s){function i(k,I,R){var T,B=l.getTypeOf(I),P=l.extend(R||{},u);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(k=g(k)),P.createFolders&&(T=b(k))&&m.call(this,T,!0);var K=B==="string"&&P.binary===!1&&P.base64===!1;R&&R.binary!==void 0||(P.binary=!K),(I instanceof h&&I.uncompressedSize===0||P.dir||!I||I.length===0)&&(P.base64=!1,P.binary=!0,I="",P.compression="STORE",B="string");var F=null;F=I instanceof h||I instanceof c?I:v.isNode&&v.isStream(I)?new y(k,I):l.prepareContent(k,I,P.binary,P.optimizedBinaryString,P.base64);var L=new f(k,F,P);this.files[k]=L}var a=n("./utf8"),l=n("./utils"),c=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),u=n("./defaults"),h=n("./compressedObject"),f=n("./zipObject"),p=n("./generate"),v=n("./nodejsUtils"),y=n("./nodejs/NodejsStreamInputAdapter"),b=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var I=k.lastIndexOf("/");return 0<I?k.substring(0,I):""},g=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},m=function(k,I){return I=I!==void 0?I:u.createFolders,k=g(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:I}),this.files[k]};function x(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var I,R,T;for(I in this.files)T=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&k(R,T)},filter:function(k){var I=[];return this.forEach(function(R,T){k(R,T)&&I.push(T)}),I},file:function(k,I,R){if(arguments.length!==1)return k=this.root+k,i.call(this,k,I,R),this;if(x(k)){var T=k;return this.filter(function(P,K){return!K.dir&&T.test(P)})}var B=this.files[this.root+k];return B&&!B.dir?B:null},folder:function(k){if(!k)return this;if(x(k))return this.filter(function(B,P){return P.dir&&k.test(B)});var I=this.root+k,R=m.call(this,I),T=this.clone();return T.root=R.name,T},remove:function(k){k=this.root+k;var I=this.files[k];if(I||(k.slice(-1)!=="/"&&(k+="/"),I=this.files[k]),I&&!I.dir)delete this.files[k];else for(var R=this.filter(function(B,P){return P.name.slice(0,k.length)===k}),T=0;T<R.length;T++)delete this.files[R[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var I,R={};try{if((R=l.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");l.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var T=R.comment||this.comment||"";I=p.generateWorker(this,R,T)}catch(B){(I=new c("error")).error(B)}return new d(I,R.type||"string",R.mimeType)},generateAsync:function(k,I){return this.generateInternalStream(k).accumulate(I)},generateNodeStream:function(k,I){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(I)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,s){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,s){var i=n("./DataReader");function a(l){i.call(this,l);for(var c=0;c<this.data.length;c++)l[c]=255&l[c]}n("../utils").inherits(a,i),a.prototype.byteAt=function(l){return this.data[this.zero+l]},a.prototype.lastIndexOfSignature=function(l){for(var c=l.charCodeAt(0),d=l.charCodeAt(1),u=l.charCodeAt(2),h=l.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===c&&this.data[f+1]===d&&this.data[f+2]===u&&this.data[f+3]===h)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(l){var c=l.charCodeAt(0),d=l.charCodeAt(1),u=l.charCodeAt(2),h=l.charCodeAt(3),f=this.readData(4);return c===f[0]&&d===f[1]&&u===f[2]&&h===f[3]},a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./DataReader":18}],18:[function(n,r,s){var i=n("../utils");function a(l){this.data=l,this.length=l.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(l){this.checkIndex(this.index+l)},checkIndex:function(l){if(this.length<this.zero+l||l<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+l+"). Corrupted zip ?")},setIndex:function(l){this.checkIndex(l),this.index=l},skip:function(l){this.setIndex(this.index+l)},byteAt:function(){},readInt:function(l){var c,d=0;for(this.checkOffset(l),c=this.index+l-1;c>=this.index;c--)d=(d<<8)+this.byteAt(c);return this.index+=l,d},readString:function(l){return i.transformTo("string",this.readData(l))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var l=this.readInt(4);return new Date(Date.UTC(1980+(l>>25&127),(l>>21&15)-1,l>>16&31,l>>11&31,l>>5&63,(31&l)<<1))}},r.exports=a},{"../utils":32}],19:[function(n,r,s){var i=n("./Uint8ArrayReader");function a(l){i.call(this,l)}n("../utils").inherits(a,i),a.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,s){var i=n("./DataReader");function a(l){i.call(this,l)}n("../utils").inherits(a,i),a.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},a.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},a.prototype.readAndCheckSignature=function(l){return l===this.readData(4)},a.prototype.readData=function(l){this.checkOffset(l);var c=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./DataReader":18}],21:[function(n,r,s){var i=n("./ArrayReader");function a(l){i.call(this,l)}n("../utils").inherits(a,i),a.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,c},r.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,s){var i=n("../utils"),a=n("../support"),l=n("./ArrayReader"),c=n("./StringReader"),d=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(h){var f=i.getTypeOf(h);return i.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new d(h):a.uint8array?new u(i.transformTo("uint8array",h)):new l(i.transformTo("array",h)):new c(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,s){var i=n("./GenericWorker"),a=n("../utils");function l(c){i.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(l,i),l.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},r.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,s){var i=n("./GenericWorker"),a=n("../crc32");function l(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(l,i),l.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},r.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function l(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}i.inherits(l,a),l.prototype.processChunk=function(c){if(c){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+c.data.length}a.prototype.processChunk.call(this,c)},r.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,s){var i=n("../utils"),a=n("./GenericWorker");function l(c){a.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){d.dataIsReady=!0,d.data=u,d.max=u&&u.length||0,d.type=i.getTypeOf(u),d.isPaused||d._tickAndRepeat()},function(u){d.error(u)})}i.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,d);break;case"uint8array":c=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":c=this.data.slice(this.index,d)}return this.index=d,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,s){function i(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,l){return this._listeners[a].push(l),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,l){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,l)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var l=this;return a.on("data",function(c){l.processChunk(c)}),a.on("end",function(){l.end()}),a.on("error",function(c){l.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,l){return this.extraStreamInfo[a]=l,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},r.exports=i},{}],29:[function(n,r,s){var i=n("../utils"),a=n("./ConvertWorker"),l=n("./GenericWorker"),c=n("../base64"),d=n("../support"),u=n("../external"),h=null;if(d.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(v,y){return new u.Promise(function(b,g){var m=[],x=v._internalType,E=v._outputType,k=v._mimeType;v.on("data",function(I,R){m.push(I),y&&y(R)}).on("error",function(I){m=[],g(I)}).on("end",function(){try{var I=function(R,T,B){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",T),B);case"base64":return c.encode(T);default:return i.transformTo(R,T)}}(E,function(R,T){var B,P=0,K=null,F=0;for(B=0;B<T.length;B++)F+=T[B].length;switch(R){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(K=new Uint8Array(F),B=0;B<T.length;B++)K.set(T[B],P),P+=T[B].length;return K;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+R+"'")}}(x,m),k);b(I)}catch(R){g(R)}m=[]}).resume()})}function p(v,y,b){var g=y;switch(y){case"blob":case"arraybuffer":g="uint8array";break;case"base64":g="string"}try{this._internalType=g,this._outputType=y,this._mimeType=b,i.checkSupport(g),this._worker=v.pipe(new a(g)),v.lock()}catch(m){this._worker=new l("error"),this._worker.error(m)}}p.prototype={accumulate:function(v){return f(this,v)},on:function(v,y){var b=this;return v==="data"?this._worker.on(v,function(g){y.call(b,g.data,g.meta)}):this._worker.on(v,function(){i.delay(y,arguments,b)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var i=new ArrayBuffer(0);try{s.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(i),s.blob=a.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!n("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,s){for(var i=n("./utils"),a=n("./support"),l=n("./nodejsUtils"),c=n("./stream/GenericWorker"),d=new Array(256),u=0;u<256;u++)d[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;d[254]=d[254]=1;function h(){c.call(this,"utf-8 decode"),this.leftOver=null}function f(){c.call(this,"utf-8 encode")}s.utf8encode=function(p){return a.nodebuffer?l.newBufferFrom(p,"utf-8"):function(v){var y,b,g,m,x,E=v.length,k=0;for(m=0;m<E;m++)(64512&(b=v.charCodeAt(m)))==55296&&m+1<E&&(64512&(g=v.charCodeAt(m+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),m++),k+=b<128?1:b<2048?2:b<65536?3:4;for(y=a.uint8array?new Uint8Array(k):new Array(k),m=x=0;x<k;m++)(64512&(b=v.charCodeAt(m)))==55296&&m+1<E&&(64512&(g=v.charCodeAt(m+1)))==56320&&(b=65536+(b-55296<<10)+(g-56320),m++),b<128?y[x++]=b:(b<2048?y[x++]=192|b>>>6:(b<65536?y[x++]=224|b>>>12:(y[x++]=240|b>>>18,y[x++]=128|b>>>12&63),y[x++]=128|b>>>6&63),y[x++]=128|63&b);return y}(p)},s.utf8decode=function(p){return a.nodebuffer?i.transformTo("nodebuffer",p).toString("utf-8"):function(v){var y,b,g,m,x=v.length,E=new Array(2*x);for(y=b=0;y<x;)if((g=v[y++])<128)E[b++]=g;else if(4<(m=d[g]))E[b++]=65533,y+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&y<x;)g=g<<6|63&v[y++],m--;1<m?E[b++]=65533:g<65536?E[b++]=g:(g-=65536,E[b++]=55296|g>>10&1023,E[b++]=56320|1023&g)}return E.length!==b&&(E.subarray?E=E.subarray(0,b):E.length=b),i.applyFromCharCode(E)}(p=i.transformTo(a.uint8array?"uint8array":"array",p))},i.inherits(h,c),h.prototype.processChunk=function(p){var v=i.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var y=v;(v=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),v.set(y,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var b=function(m,x){var E;for((x=x||m.length)>m.length&&(x=m.length),E=x-1;0<=E&&(192&m[E])==128;)E--;return E<0||E===0?x:E+d[m[E]]>x?E:x}(v),g=v;b!==v.length&&(a.uint8array?(g=v.subarray(0,b),this.leftOver=v.subarray(b,v.length)):(g=v.slice(0,b),this.leftOver=v.slice(b,v.length))),this.push({data:s.utf8decode(g),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=h,i.inherits(f,c),f.prototype.processChunk=function(p){this.push({data:s.utf8encode(p.data),meta:p.meta})},s.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,s){var i=n("./support"),a=n("./base64"),l=n("./nodejsUtils"),c=n("./external");function d(y){return y}function u(y,b){for(var g=0;g<y.length;++g)b[g]=255&y.charCodeAt(g);return b}n("setimmediate"),s.newBlob=function(y,b){s.checkSupport("blob");try{return new Blob([y],{type:b})}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return g.append(y),g.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(y,b,g){var m=[],x=0,E=y.length;if(E<=g)return String.fromCharCode.apply(null,y);for(;x<E;)b==="array"||b==="nodebuffer"?m.push(String.fromCharCode.apply(null,y.slice(x,Math.min(x+g,E)))):m.push(String.fromCharCode.apply(null,y.subarray(x,Math.min(x+g,E)))),x+=g;return m.join("")},stringifyByChar:function(y){for(var b="",g=0;g<y.length;g++)b+=String.fromCharCode(y[g]);return b},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,l.allocBuffer(1)).length===1}catch{return!1}}()}};function f(y){var b=65536,g=s.getTypeOf(y),m=!0;if(g==="uint8array"?m=h.applyCanBeUsed.uint8array:g==="nodebuffer"&&(m=h.applyCanBeUsed.nodebuffer),m)for(;1<b;)try{return h.stringifyByChunk(y,g,b)}catch{b=Math.floor(b/2)}return h.stringifyByChar(y)}function p(y,b){for(var g=0;g<y.length;g++)b[g]=y[g];return b}s.applyFromCharCode=f;var v={};v.string={string:d,array:function(y){return u(y,new Array(y.length))},arraybuffer:function(y){return v.string.uint8array(y).buffer},uint8array:function(y){return u(y,new Uint8Array(y.length))},nodebuffer:function(y){return u(y,l.allocBuffer(y.length))}},v.array={string:f,array:d,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(y)}},v.arraybuffer={string:function(y){return f(new Uint8Array(y))},array:function(y){return p(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:d,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return l.newBufferFrom(new Uint8Array(y))}},v.uint8array={string:f,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:d,nodebuffer:function(y){return l.newBufferFrom(y)}},v.nodebuffer={string:f,array:function(y){return p(y,new Array(y.length))},arraybuffer:function(y){return v.nodebuffer.uint8array(y).buffer},uint8array:function(y){return p(y,new Uint8Array(y.length))},nodebuffer:d},s.transformTo=function(y,b){if(b=b||"",!y)return b;s.checkSupport(y);var g=s.getTypeOf(b);return v[g][y](b)},s.resolve=function(y){for(var b=y.split("/"),g=[],m=0;m<b.length;m++){var x=b[m];x==="."||x===""&&m!==0&&m!==b.length-1||(x===".."?g.pop():g.push(x))}return g.join("/")},s.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":i.nodebuffer&&l.isBuffer(y)?"nodebuffer":i.uint8array&&y instanceof Uint8Array?"uint8array":i.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(y){if(!i[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(y){var b,g,m="";for(g=0;g<(y||"").length;g++)m+="\\x"+((b=y.charCodeAt(g))<16?"0":"")+b.toString(16).toUpperCase();return m},s.delay=function(y,b,g){setImmediate(function(){y.apply(g||null,b||[])})},s.inherits=function(y,b){function g(){}g.prototype=b.prototype,y.prototype=new g},s.extend=function(){var y,b,g={};for(y=0;y<arguments.length;y++)for(b in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],b)&&g[b]===void 0&&(g[b]=arguments[y][b]);return g},s.prepareContent=function(y,b,g,m,x){return c.Promise.resolve(b).then(function(E){return i.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new c.Promise(function(k,I){var R=new FileReader;R.onload=function(T){k(T.target.result)},R.onerror=function(T){I(T.target.error)},R.readAsArrayBuffer(E)}):E}).then(function(E){var k=s.getTypeOf(E);return k?(k==="arraybuffer"?E=s.transformTo("uint8array",E):k==="string"&&(x?E=a.decode(E):g&&m!==!0&&(E=function(I){return u(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(E))),E):c.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),l=n("./signature"),c=n("./zipEntry"),d=n("./support");function u(h){this.files=[],this.loadOptions=h}u.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(h)+")")}},isSignature:function(h,f){var p=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===f;return this.reader.setIndex(p),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=d.uint8array?"uint8array":"array",p=a.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,f,p,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[h]={id:h,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(l.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(l.CENTRAL_FILE_HEADER);)(h=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(l.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,l.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var f=h;if(this.checkSignature(l.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,l.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(l.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var v=f-p;if(0<v)this.isSignature(f,l.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,s){var i=n("./reader/readerFor"),a=n("./utils"),l=n("./compressedObject"),c=n("./crc32"),d=n("./utf8"),u=n("./compressions"),h=n("./support");function f(p,v){this.options=p,this.loadOptions=v}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var v,y;if(p.skip(22),this.fileNameLength=p.readInt(2),y=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(b){for(var g in u)if(Object.prototype.hasOwnProperty.call(u,g)&&u[g].magic===b)return u[g];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new l(this.compressedSize,this.uncompressedSize,this.crc32,v,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var v=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(v),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var v,y,b,g=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<g;)v=p.readInt(2),y=p.readInt(2),b=p.readData(y),this.extraFields[v]={id:v,length:y,value:b};p.setIndex(g)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var y=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var g=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(g)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var v=i(p.value);return v.readInt(1)!==1||c(this.fileName)!==v.readInt(4)?null:d.utf8decode(v.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var v=i(p.value);return v.readInt(1)!==1||c(this.fileComment)!==v.readInt(4)?null:d.utf8decode(v.readData(p.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,s){function i(v,y,b){this.name=v,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=y,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=n("./stream/StreamHelper"),l=n("./stream/DataWorker"),c=n("./utf8"),d=n("./compressedObject"),u=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var y=null,b="string";try{if(!v)throw new Error("No output type specified.");var g=(b=v.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),y=this._decompressWorker();var m=!this._dataBinary;m&&!g&&(y=y.pipe(new c.Utf8EncodeWorker)),!m&&g&&(y=y.pipe(new c.Utf8DecodeWorker))}catch(x){(y=new u("error")).error(x)}return new a(y,b,"")},async:function(v,y){return this.internalStream(v).accumulate(y)},nodeStream:function(v,y){return this.internalStream(v||"nodebuffer").toNodejsStream(y)},_compressWorker:function(v,y){if(this._data instanceof d&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new c.Utf8EncodeWorker)),d.createWorkerFrom(b,v,y)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof u?this._data:new l(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)i.prototype[h[p]]=f;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,s){(function(i){var a,l,c=i.MutationObserver||i.WebKitMutationObserver;if(c){var d=0,u=new c(v),h=i.document.createTextNode("");u.observe(h,{characterData:!0}),a=function(){h.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)a="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var y=i.document.createElement("script");y.onreadystatechange=function(){v(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},i.document.documentElement.appendChild(y)}:function(){setTimeout(v,0)};else{var f=new i.MessageChannel;f.port1.onmessage=v,a=function(){f.port2.postMessage(0)}}var p=[];function v(){var y,b;l=!0;for(var g=p.length;g;){for(b=p,p=[],y=-1;++y<g;)b[y]();g=p.length}l=!1}r.exports=function(y){p.push(y)!==1||l||a()}}).call(this,typeof lt<"u"?lt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,s){var i=n("immediate");function a(){}var l={},c=["REJECTED"],d=["FULFILLED"],u=["PENDING"];function h(g){if(typeof g!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,g!==a&&y(this,g)}function f(g,m,x){this.promise=g,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}function p(g,m,x){i(function(){var E;try{E=m(x)}catch(k){return l.reject(g,k)}E===g?l.reject(g,new TypeError("Cannot resolve promise with itself")):l.resolve(g,E)})}function v(g){var m=g&&g.then;if(g&&(typeof g=="object"||typeof g=="function")&&typeof m=="function")return function(){m.apply(g,arguments)}}function y(g,m){var x=!1;function E(R){x||(x=!0,l.reject(g,R))}function k(R){x||(x=!0,l.resolve(g,R))}var I=b(function(){m(k,E)});I.status==="error"&&E(I.value)}function b(g,m){var x={};try{x.value=g(m),x.status="success"}catch(E){x.status="error",x.value=E}return x}(r.exports=h).prototype.finally=function(g){if(typeof g!="function")return this;var m=this.constructor;return this.then(function(x){return m.resolve(g()).then(function(){return x})},function(x){return m.resolve(g()).then(function(){throw x})})},h.prototype.catch=function(g){return this.then(null,g)},h.prototype.then=function(g,m){if(typeof g!="function"&&this.state===d||typeof m!="function"&&this.state===c)return this;var x=new this.constructor(a);return this.state!==u?p(x,this.state===d?g:m,this.outcome):this.queue.push(new f(x,g,m)),x},f.prototype.callFulfilled=function(g){l.resolve(this.promise,g)},f.prototype.otherCallFulfilled=function(g){p(this.promise,this.onFulfilled,g)},f.prototype.callRejected=function(g){l.reject(this.promise,g)},f.prototype.otherCallRejected=function(g){p(this.promise,this.onRejected,g)},l.resolve=function(g,m){var x=b(v,m);if(x.status==="error")return l.reject(g,x.value);var E=x.value;if(E)y(g,E);else{g.state=d,g.outcome=m;for(var k=-1,I=g.queue.length;++k<I;)g.queue[k].callFulfilled(m)}return g},l.reject=function(g,m){g.state=c,g.outcome=m;for(var x=-1,E=g.queue.length;++x<E;)g.queue[x].callRejected(m);return g},h.resolve=function(g){return g instanceof this?g:l.resolve(new this(a),g)},h.reject=function(g){var m=new this(a);return l.reject(m,g)},h.all=function(g){var m=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=g.length,E=!1;if(!x)return this.resolve([]);for(var k=new Array(x),I=0,R=-1,T=new this(a);++R<x;)B(g[R],R);return T;function B(P,K){m.resolve(P).then(function(F){k[K]=F,++I!==x||E||(E=!0,l.resolve(T,k))},function(F){E||(E=!0,l.reject(T,F))})}},h.race=function(g){var m=this;if(Object.prototype.toString.call(g)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=g.length,E=!1;if(!x)return this.resolve([]);for(var k=-1,I=new this(a);++k<x;)R=g[k],m.resolve(R).then(function(T){E||(E=!0,l.resolve(I,T))},function(T){E||(E=!0,l.reject(I,T))});var R;return I}},{immediate:36}],38:[function(n,r,s){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,s){var i=n("./zlib/deflate"),a=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/messages"),d=n("./zlib/zstream"),u=Object.prototype.toString,h=0,f=-1,p=0,v=8;function y(g){if(!(this instanceof y))return new y(g);this.options=a.assign({level:f,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},g||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(x!==h)throw new Error(c[x]);if(m.header&&i.deflateSetHeader(this.strm,m.header),m.dictionary){var E;if(E=typeof m.dictionary=="string"?l.string2buf(m.dictionary):u.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(x=i.deflateSetDictionary(this.strm,E))!==h)throw new Error(c[x]);this._dict_set=!0}}function b(g,m){var x=new y(m);if(x.push(g,!0),x.err)throw x.msg||c[x.err];return x.result}y.prototype.push=function(g,m){var x,E,k=this.strm,I=this.options.chunkSize;if(this.ended)return!1;E=m===~~m?m:m===!0?4:0,typeof g=="string"?k.input=l.string2buf(g):u.call(g)==="[object ArrayBuffer]"?k.input=new Uint8Array(g):k.input=g,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(I),k.next_out=0,k.avail_out=I),(x=i.deflate(k,E))!==1&&x!==h)return this.onEnd(x),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(l.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&x!==1);return E===4?(x=i.deflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===h):E!==2||(this.onEnd(h),!(k.avail_out=0))},y.prototype.onData=function(g){this.chunks.push(g)},y.prototype.onEnd=function(g){g===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},s.Deflate=y,s.deflate=b,s.deflateRaw=function(g,m){return(m=m||{}).raw=!0,b(g,m)},s.gzip=function(g,m){return(m=m||{}).gzip=!0,b(g,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,s){var i=n("./zlib/inflate"),a=n("./utils/common"),l=n("./utils/strings"),c=n("./zlib/constants"),d=n("./zlib/messages"),u=n("./zlib/zstream"),h=n("./zlib/gzheader"),f=Object.prototype.toString;function p(y){if(!(this instanceof p))return new p(y);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},y||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||y&&y.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var g=i.inflateInit2(this.strm,b.windowBits);if(g!==c.Z_OK)throw new Error(d[g]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(y,b){var g=new p(b);if(g.push(y,!0),g.err)throw g.msg||d[g.err];return g.result}p.prototype.push=function(y,b){var g,m,x,E,k,I,R=this.strm,T=this.options.chunkSize,B=this.options.dictionary,P=!1;if(this.ended)return!1;m=b===~~b?b:b===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof y=="string"?R.input=l.binstring2buf(y):f.call(y)==="[object ArrayBuffer]"?R.input=new Uint8Array(y):R.input=y,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(T),R.next_out=0,R.avail_out=T),(g=i.inflate(R,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&B&&(I=typeof B=="string"?l.string2buf(B):f.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,g=i.inflateSetDictionary(this.strm,I)),g===c.Z_BUF_ERROR&&P===!0&&(g=c.Z_OK,P=!1),g!==c.Z_STREAM_END&&g!==c.Z_OK)return this.onEnd(g),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&g!==c.Z_STREAM_END&&(R.avail_in!==0||m!==c.Z_FINISH&&m!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(x=l.utf8border(R.output,R.next_out),E=R.next_out-x,k=l.buf2string(R.output,x),R.next_out=E,R.avail_out=T-E,E&&a.arraySet(R.output,R.output,x,E,0),this.onData(k)):this.onData(a.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&(P=!0)}while((0<R.avail_in||R.avail_out===0)&&g!==c.Z_STREAM_END);return g===c.Z_STREAM_END&&(m=c.Z_FINISH),m===c.Z_FINISH?(g=i.inflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===c.Z_OK):m!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(R.avail_out=0))},p.prototype.onData=function(y){this.chunks.push(y)},p.prototype.onEnd=function(y){y===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},s.Inflate=p,s.inflate=v,s.inflateRaw=function(y,b){return(b=b||{}).raw=!0,v(y,b)},s.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,s){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(c){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var u=d.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var h in u)u.hasOwnProperty(h)&&(c[h]=u[h])}}return c},s.shrinkBuf=function(c,d){return c.length===d?c:c.subarray?c.subarray(0,d):(c.length=d,c)};var a={arraySet:function(c,d,u,h,f){if(d.subarray&&c.subarray)c.set(d.subarray(u,u+h),f);else for(var p=0;p<h;p++)c[f+p]=d[u+p]},flattenChunks:function(c){var d,u,h,f,p,v;for(d=h=0,u=c.length;d<u;d++)h+=c[d].length;for(v=new Uint8Array(h),d=f=0,u=c.length;d<u;d++)p=c[d],v.set(p,f),f+=p.length;return v}},l={arraySet:function(c,d,u,h,f){for(var p=0;p<h;p++)c[f+p]=d[u+p]},flattenChunks:function(c){return[].concat.apply([],c)}};s.setTyped=function(c){c?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,a)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,l))},s.setTyped(i)},{}],42:[function(n,r,s){var i=n("./common"),a=!0,l=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{l=!1}for(var c=new i.Buf8(256),d=0;d<256;d++)c[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function u(h,f){if(f<65537&&(h.subarray&&l||!h.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(h,f));for(var p="",v=0;v<f;v++)p+=String.fromCharCode(h[v]);return p}c[254]=c[254]=1,s.string2buf=function(h){var f,p,v,y,b,g=h.length,m=0;for(y=0;y<g;y++)(64512&(p=h.charCodeAt(y)))==55296&&y+1<g&&(64512&(v=h.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),y++),m+=p<128?1:p<2048?2:p<65536?3:4;for(f=new i.Buf8(m),y=b=0;b<m;y++)(64512&(p=h.charCodeAt(y)))==55296&&y+1<g&&(64512&(v=h.charCodeAt(y+1)))==56320&&(p=65536+(p-55296<<10)+(v-56320),y++),p<128?f[b++]=p:(p<2048?f[b++]=192|p>>>6:(p<65536?f[b++]=224|p>>>12:(f[b++]=240|p>>>18,f[b++]=128|p>>>12&63),f[b++]=128|p>>>6&63),f[b++]=128|63&p);return f},s.buf2binstring=function(h){return u(h,h.length)},s.binstring2buf=function(h){for(var f=new i.Buf8(h.length),p=0,v=f.length;p<v;p++)f[p]=h.charCodeAt(p);return f},s.buf2string=function(h,f){var p,v,y,b,g=f||h.length,m=new Array(2*g);for(p=v=0;p<g;)if((y=h[p++])<128)m[v++]=y;else if(4<(b=c[y]))m[v++]=65533,p+=b-1;else{for(y&=b===2?31:b===3?15:7;1<b&&p<g;)y=y<<6|63&h[p++],b--;1<b?m[v++]=65533:y<65536?m[v++]=y:(y-=65536,m[v++]=55296|y>>10&1023,m[v++]=56320|1023&y)}return u(m,v)},s.utf8border=function(h,f){var p;for((f=f||h.length)>h.length&&(f=h.length),p=f-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?f:p+c[h[p]]>f?p:f}},{"./common":41}],43:[function(n,r,s){r.exports=function(i,a,l,c){for(var d=65535&i|0,u=i>>>16&65535|0,h=0;l!==0;){for(l-=h=2e3<l?2e3:l;u=u+(d=d+a[c++]|0)|0,--h;);d%=65521,u%=65521}return d|u<<16|0}},{}],44:[function(n,r,s){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,s){var i=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l,c,d){var u=i,h=d+c;a^=-1;for(var f=d;f<h;f++)a=a>>>8^u[255&(a^l[f])];return-1^a}},{}],46:[function(n,r,s){var i,a=n("../utils/common"),l=n("./trees"),c=n("./adler32"),d=n("./crc32"),u=n("./messages"),h=0,f=4,p=0,v=-2,y=-1,b=4,g=2,m=8,x=9,E=286,k=30,I=19,R=2*E+1,T=15,B=3,P=258,K=P+B+1,F=42,L=113,C=1,Z=2,W=3,U=4;function z(S,Q){return S.msg=u[Q],Q}function q(S){return(S<<1)-(4<S?9:0)}function re(S){for(var Q=S.length;0<=--Q;)S[Q]=0}function H(S){var Q=S.state,N=Q.pending;N>S.avail_out&&(N=S.avail_out),N!==0&&(a.arraySet(S.output,Q.pending_buf,Q.pending_out,N,S.next_out),S.next_out+=N,Q.pending_out+=N,S.total_out+=N,S.avail_out-=N,Q.pending-=N,Q.pending===0&&(Q.pending_out=0))}function O(S,Q){l._tr_flush_block(S,0<=S.block_start?S.block_start:-1,S.strstart-S.block_start,Q),S.block_start=S.strstart,H(S.strm)}function ie(S,Q){S.pending_buf[S.pending++]=Q}function M(S,Q){S.pending_buf[S.pending++]=Q>>>8&255,S.pending_buf[S.pending++]=255&Q}function Y(S,Q){var N,j,w=S.max_chain_length,A=S.strstart,G=S.prev_length,X=S.nice_match,V=S.strstart>S.w_size-K?S.strstart-(S.w_size-K):0,se=S.window,ne=S.w_mask,oe=S.prev,D=S.strstart+P,J=se[A+G-1],ee=se[A+G];S.prev_length>=S.good_match&&(w>>=2),X>S.lookahead&&(X=S.lookahead);do if(se[(N=Q)+G]===ee&&se[N+G-1]===J&&se[N]===se[A]&&se[++N]===se[A+1]){A+=2,N++;do;while(se[++A]===se[++N]&&se[++A]===se[++N]&&se[++A]===se[++N]&&se[++A]===se[++N]&&se[++A]===se[++N]&&se[++A]===se[++N]&&se[++A]===se[++N]&&se[++A]===se[++N]&&A<D);if(j=P-(D-A),A=D-P,G<j){if(S.match_start=Q,X<=(G=j))break;J=se[A+G-1],ee=se[A+G]}}while((Q=oe[Q&ne])>V&&--w!=0);return G<=S.lookahead?G:S.lookahead}function $(S){var Q,N,j,w,A,G,X,V,se,ne,oe=S.w_size;do{if(w=S.window_size-S.lookahead-S.strstart,S.strstart>=oe+(oe-K)){for(a.arraySet(S.window,S.window,oe,oe,0),S.match_start-=oe,S.strstart-=oe,S.block_start-=oe,Q=N=S.hash_size;j=S.head[--Q],S.head[Q]=oe<=j?j-oe:0,--N;);for(Q=N=oe;j=S.prev[--Q],S.prev[Q]=oe<=j?j-oe:0,--N;);w+=oe}if(S.strm.avail_in===0)break;if(G=S.strm,X=S.window,V=S.strstart+S.lookahead,se=w,ne=void 0,ne=G.avail_in,se<ne&&(ne=se),N=ne===0?0:(G.avail_in-=ne,a.arraySet(X,G.input,G.next_in,ne,V),G.state.wrap===1?G.adler=c(G.adler,X,ne,V):G.state.wrap===2&&(G.adler=d(G.adler,X,ne,V)),G.next_in+=ne,G.total_in+=ne,ne),S.lookahead+=N,S.lookahead+S.insert>=B)for(A=S.strstart-S.insert,S.ins_h=S.window[A],S.ins_h=(S.ins_h<<S.hash_shift^S.window[A+1])&S.hash_mask;S.insert&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[A+B-1])&S.hash_mask,S.prev[A&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=A,A++,S.insert--,!(S.lookahead+S.insert<B)););}while(S.lookahead<K&&S.strm.avail_in!==0)}function fe(S,Q){for(var N,j;;){if(S.lookahead<K){if($(S),S.lookahead<K&&Q===h)return C;if(S.lookahead===0)break}if(N=0,S.lookahead>=B&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+B-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),N!==0&&S.strstart-N<=S.w_size-K&&(S.match_length=Y(S,N)),S.match_length>=B)if(j=l._tr_tally(S,S.strstart-S.match_start,S.match_length-B),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=B){for(S.match_length--;S.strstart++,S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+B-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart,--S.match_length!=0;);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+1])&S.hash_mask;else j=l._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(j&&(O(S,!1),S.strm.avail_out===0))return C}return S.insert=S.strstart<B-1?S.strstart:B-1,Q===f?(O(S,!0),S.strm.avail_out===0?W:U):S.last_lit&&(O(S,!1),S.strm.avail_out===0)?C:Z}function me(S,Q){for(var N,j,w;;){if(S.lookahead<K){if($(S),S.lookahead<K&&Q===h)return C;if(S.lookahead===0)break}if(N=0,S.lookahead>=B&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+B-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=B-1,N!==0&&S.prev_length<S.max_lazy_match&&S.strstart-N<=S.w_size-K&&(S.match_length=Y(S,N),S.match_length<=5&&(S.strategy===1||S.match_length===B&&4096<S.strstart-S.match_start)&&(S.match_length=B-1)),S.prev_length>=B&&S.match_length<=S.prev_length){for(w=S.strstart+S.lookahead-B,j=l._tr_tally(S,S.strstart-1-S.prev_match,S.prev_length-B),S.lookahead-=S.prev_length-1,S.prev_length-=2;++S.strstart<=w&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+B-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),--S.prev_length!=0;);if(S.match_available=0,S.match_length=B-1,S.strstart++,j&&(O(S,!1),S.strm.avail_out===0))return C}else if(S.match_available){if((j=l._tr_tally(S,0,S.window[S.strstart-1]))&&O(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return C}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(j=l._tr_tally(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<B-1?S.strstart:B-1,Q===f?(O(S,!0),S.strm.avail_out===0?W:U):S.last_lit&&(O(S,!1),S.strm.avail_out===0)?C:Z}function te(S,Q,N,j,w){this.good_length=S,this.max_lazy=Q,this.nice_length=N,this.max_chain=j,this.func=w}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*R),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*I+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(T+1),this.heap=new a.Buf16(2*E+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*E+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ce(S){var Q;return S&&S.state?(S.total_in=S.total_out=0,S.data_type=g,(Q=S.state).pending=0,Q.pending_out=0,Q.wrap<0&&(Q.wrap=-Q.wrap),Q.status=Q.wrap?F:L,S.adler=Q.wrap===2?0:1,Q.last_flush=h,l._tr_init(Q),p):z(S,v)}function ye(S){var Q=ce(S);return Q===p&&function(N){N.window_size=2*N.w_size,re(N.head),N.max_lazy_match=i[N.level].max_lazy,N.good_match=i[N.level].good_length,N.nice_match=i[N.level].nice_length,N.max_chain_length=i[N.level].max_chain,N.strstart=0,N.block_start=0,N.lookahead=0,N.insert=0,N.match_length=N.prev_length=B-1,N.match_available=0,N.ins_h=0}(S.state),Q}function ge(S,Q,N,j,w,A){if(!S)return v;var G=1;if(Q===y&&(Q=6),j<0?(G=0,j=-j):15<j&&(G=2,j-=16),w<1||x<w||N!==m||j<8||15<j||Q<0||9<Q||A<0||b<A)return z(S,v);j===8&&(j=9);var X=new de;return(S.state=X).strm=S,X.wrap=G,X.gzhead=null,X.w_bits=j,X.w_size=1<<X.w_bits,X.w_mask=X.w_size-1,X.hash_bits=w+7,X.hash_size=1<<X.hash_bits,X.hash_mask=X.hash_size-1,X.hash_shift=~~((X.hash_bits+B-1)/B),X.window=new a.Buf8(2*X.w_size),X.head=new a.Buf16(X.hash_size),X.prev=new a.Buf16(X.w_size),X.lit_bufsize=1<<w+6,X.pending_buf_size=4*X.lit_bufsize,X.pending_buf=new a.Buf8(X.pending_buf_size),X.d_buf=1*X.lit_bufsize,X.l_buf=3*X.lit_bufsize,X.level=Q,X.strategy=A,X.method=N,ye(S)}i=[new te(0,0,0,0,function(S,Q){var N=65535;for(N>S.pending_buf_size-5&&(N=S.pending_buf_size-5);;){if(S.lookahead<=1){if($(S),S.lookahead===0&&Q===h)return C;if(S.lookahead===0)break}S.strstart+=S.lookahead,S.lookahead=0;var j=S.block_start+N;if((S.strstart===0||S.strstart>=j)&&(S.lookahead=S.strstart-j,S.strstart=j,O(S,!1),S.strm.avail_out===0)||S.strstart-S.block_start>=S.w_size-K&&(O(S,!1),S.strm.avail_out===0))return C}return S.insert=0,Q===f?(O(S,!0),S.strm.avail_out===0?W:U):(S.strstart>S.block_start&&(O(S,!1),S.strm.avail_out),C)}),new te(4,4,8,4,fe),new te(4,5,16,8,fe),new te(4,6,32,32,fe),new te(4,4,16,16,me),new te(8,16,32,32,me),new te(8,16,128,128,me),new te(8,32,128,256,me),new te(32,128,258,1024,me),new te(32,258,258,4096,me)],s.deflateInit=function(S,Q){return ge(S,Q,m,15,8,0)},s.deflateInit2=ge,s.deflateReset=ye,s.deflateResetKeep=ce,s.deflateSetHeader=function(S,Q){return S&&S.state?S.state.wrap!==2?v:(S.state.gzhead=Q,p):v},s.deflate=function(S,Q){var N,j,w,A;if(!S||!S.state||5<Q||Q<0)return S?z(S,v):v;if(j=S.state,!S.output||!S.input&&S.avail_in!==0||j.status===666&&Q!==f)return z(S,S.avail_out===0?-5:v);if(j.strm=S,N=j.last_flush,j.last_flush=Q,j.status===F)if(j.wrap===2)S.adler=0,ie(j,31),ie(j,139),ie(j,8),j.gzhead?(ie(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),ie(j,255&j.gzhead.time),ie(j,j.gzhead.time>>8&255),ie(j,j.gzhead.time>>16&255),ie(j,j.gzhead.time>>24&255),ie(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),ie(j,255&j.gzhead.os),j.gzhead.extra&&j.gzhead.extra.length&&(ie(j,255&j.gzhead.extra.length),ie(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(S.adler=d(S.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=69):(ie(j,0),ie(j,0),ie(j,0),ie(j,0),ie(j,0),ie(j,j.level===9?2:2<=j.strategy||j.level<2?4:0),ie(j,3),j.status=L);else{var G=m+(j.w_bits-8<<4)<<8;G|=(2<=j.strategy||j.level<2?0:j.level<6?1:j.level===6?2:3)<<6,j.strstart!==0&&(G|=32),G+=31-G%31,j.status=L,M(j,G),j.strstart!==0&&(M(j,S.adler>>>16),M(j,65535&S.adler)),S.adler=1}if(j.status===69)if(j.gzhead.extra){for(w=j.pending;j.gzindex<(65535&j.gzhead.extra.length)&&(j.pending!==j.pending_buf_size||(j.gzhead.hcrc&&j.pending>w&&(S.adler=d(S.adler,j.pending_buf,j.pending-w,w)),H(S),w=j.pending,j.pending!==j.pending_buf_size));)ie(j,255&j.gzhead.extra[j.gzindex]),j.gzindex++;j.gzhead.hcrc&&j.pending>w&&(S.adler=d(S.adler,j.pending_buf,j.pending-w,w)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=73)}else j.status=73;if(j.status===73)if(j.gzhead.name){w=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>w&&(S.adler=d(S.adler,j.pending_buf,j.pending-w,w)),H(S),w=j.pending,j.pending===j.pending_buf_size)){A=1;break}A=j.gzindex<j.gzhead.name.length?255&j.gzhead.name.charCodeAt(j.gzindex++):0,ie(j,A)}while(A!==0);j.gzhead.hcrc&&j.pending>w&&(S.adler=d(S.adler,j.pending_buf,j.pending-w,w)),A===0&&(j.gzindex=0,j.status=91)}else j.status=91;if(j.status===91)if(j.gzhead.comment){w=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>w&&(S.adler=d(S.adler,j.pending_buf,j.pending-w,w)),H(S),w=j.pending,j.pending===j.pending_buf_size)){A=1;break}A=j.gzindex<j.gzhead.comment.length?255&j.gzhead.comment.charCodeAt(j.gzindex++):0,ie(j,A)}while(A!==0);j.gzhead.hcrc&&j.pending>w&&(S.adler=d(S.adler,j.pending_buf,j.pending-w,w)),A===0&&(j.status=103)}else j.status=103;if(j.status===103&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&H(S),j.pending+2<=j.pending_buf_size&&(ie(j,255&S.adler),ie(j,S.adler>>8&255),S.adler=0,j.status=L)):j.status=L),j.pending!==0){if(H(S),S.avail_out===0)return j.last_flush=-1,p}else if(S.avail_in===0&&q(Q)<=q(N)&&Q!==f)return z(S,-5);if(j.status===666&&S.avail_in!==0)return z(S,-5);if(S.avail_in!==0||j.lookahead!==0||Q!==h&&j.status!==666){var X=j.strategy===2?function(V,se){for(var ne;;){if(V.lookahead===0&&($(V),V.lookahead===0)){if(se===h)return C;break}if(V.match_length=0,ne=l._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,ne&&(O(V,!1),V.strm.avail_out===0))return C}return V.insert=0,se===f?(O(V,!0),V.strm.avail_out===0?W:U):V.last_lit&&(O(V,!1),V.strm.avail_out===0)?C:Z}(j,Q):j.strategy===3?function(V,se){for(var ne,oe,D,J,ee=V.window;;){if(V.lookahead<=P){if($(V),V.lookahead<=P&&se===h)return C;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=B&&0<V.strstart&&(oe=ee[D=V.strstart-1])===ee[++D]&&oe===ee[++D]&&oe===ee[++D]){J=V.strstart+P;do;while(oe===ee[++D]&&oe===ee[++D]&&oe===ee[++D]&&oe===ee[++D]&&oe===ee[++D]&&oe===ee[++D]&&oe===ee[++D]&&oe===ee[++D]&&D<J);V.match_length=P-(J-D),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=B?(ne=l._tr_tally(V,1,V.match_length-B),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(ne=l._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),ne&&(O(V,!1),V.strm.avail_out===0))return C}return V.insert=0,se===f?(O(V,!0),V.strm.avail_out===0?W:U):V.last_lit&&(O(V,!1),V.strm.avail_out===0)?C:Z}(j,Q):i[j.level].func(j,Q);if(X!==W&&X!==U||(j.status=666),X===C||X===W)return S.avail_out===0&&(j.last_flush=-1),p;if(X===Z&&(Q===1?l._tr_align(j):Q!==5&&(l._tr_stored_block(j,0,0,!1),Q===3&&(re(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),H(S),S.avail_out===0))return j.last_flush=-1,p}return Q!==f?p:j.wrap<=0?1:(j.wrap===2?(ie(j,255&S.adler),ie(j,S.adler>>8&255),ie(j,S.adler>>16&255),ie(j,S.adler>>24&255),ie(j,255&S.total_in),ie(j,S.total_in>>8&255),ie(j,S.total_in>>16&255),ie(j,S.total_in>>24&255)):(M(j,S.adler>>>16),M(j,65535&S.adler)),H(S),0<j.wrap&&(j.wrap=-j.wrap),j.pending!==0?p:1)},s.deflateEnd=function(S){var Q;return S&&S.state?(Q=S.state.status)!==F&&Q!==69&&Q!==73&&Q!==91&&Q!==103&&Q!==L&&Q!==666?z(S,v):(S.state=null,Q===L?z(S,-3):p):v},s.deflateSetDictionary=function(S,Q){var N,j,w,A,G,X,V,se,ne=Q.length;if(!S||!S.state||(A=(N=S.state).wrap)===2||A===1&&N.status!==F||N.lookahead)return v;for(A===1&&(S.adler=c(S.adler,Q,ne,0)),N.wrap=0,ne>=N.w_size&&(A===0&&(re(N.head),N.strstart=0,N.block_start=0,N.insert=0),se=new a.Buf8(N.w_size),a.arraySet(se,Q,ne-N.w_size,N.w_size,0),Q=se,ne=N.w_size),G=S.avail_in,X=S.next_in,V=S.input,S.avail_in=ne,S.next_in=0,S.input=Q,$(N);N.lookahead>=B;){for(j=N.strstart,w=N.lookahead-(B-1);N.ins_h=(N.ins_h<<N.hash_shift^N.window[j+B-1])&N.hash_mask,N.prev[j&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=j,j++,--w;);N.strstart=j,N.lookahead=B-1,$(N)}return N.strstart+=N.lookahead,N.block_start=N.strstart,N.insert=N.lookahead,N.lookahead=0,N.match_length=N.prev_length=B-1,N.match_available=0,S.next_in=X,S.input=V,S.avail_in=G,N.wrap=A,p},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,s){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,s){r.exports=function(i,a){var l,c,d,u,h,f,p,v,y,b,g,m,x,E,k,I,R,T,B,P,K,F,L,C,Z;l=i.state,c=i.next_in,C=i.input,d=c+(i.avail_in-5),u=i.next_out,Z=i.output,h=u-(a-i.avail_out),f=u+(i.avail_out-257),p=l.dmax,v=l.wsize,y=l.whave,b=l.wnext,g=l.window,m=l.hold,x=l.bits,E=l.lencode,k=l.distcode,I=(1<<l.lenbits)-1,R=(1<<l.distbits)-1;e:do{x<15&&(m+=C[c++]<<x,x+=8,m+=C[c++]<<x,x+=8),T=E[m&I];t:for(;;){if(m>>>=B=T>>>24,x-=B,(B=T>>>16&255)===0)Z[u++]=65535&T;else{if(!(16&B)){if(!(64&B)){T=E[(65535&T)+(m&(1<<B)-1)];continue t}if(32&B){l.mode=12;break e}i.msg="invalid literal/length code",l.mode=30;break e}P=65535&T,(B&=15)&&(x<B&&(m+=C[c++]<<x,x+=8),P+=m&(1<<B)-1,m>>>=B,x-=B),x<15&&(m+=C[c++]<<x,x+=8,m+=C[c++]<<x,x+=8),T=k[m&R];n:for(;;){if(m>>>=B=T>>>24,x-=B,!(16&(B=T>>>16&255))){if(!(64&B)){T=k[(65535&T)+(m&(1<<B)-1)];continue n}i.msg="invalid distance code",l.mode=30;break e}if(K=65535&T,x<(B&=15)&&(m+=C[c++]<<x,(x+=8)<B&&(m+=C[c++]<<x,x+=8)),p<(K+=m&(1<<B)-1)){i.msg="invalid distance too far back",l.mode=30;break e}if(m>>>=B,x-=B,(B=u-h)<K){if(y<(B=K-B)&&l.sane){i.msg="invalid distance too far back",l.mode=30;break e}if(L=g,(F=0)===b){if(F+=v-B,B<P){for(P-=B;Z[u++]=g[F++],--B;);F=u-K,L=Z}}else if(b<B){if(F+=v+b-B,(B-=b)<P){for(P-=B;Z[u++]=g[F++],--B;);if(F=0,b<P){for(P-=B=b;Z[u++]=g[F++],--B;);F=u-K,L=Z}}}else if(F+=b-B,B<P){for(P-=B;Z[u++]=g[F++],--B;);F=u-K,L=Z}for(;2<P;)Z[u++]=L[F++],Z[u++]=L[F++],Z[u++]=L[F++],P-=3;P&&(Z[u++]=L[F++],1<P&&(Z[u++]=L[F++]))}else{for(F=u-K;Z[u++]=Z[F++],Z[u++]=Z[F++],Z[u++]=Z[F++],2<(P-=3););P&&(Z[u++]=Z[F++],1<P&&(Z[u++]=Z[F++]))}break}}break}}while(c<d&&u<f);c-=P=x>>3,m&=(1<<(x-=P<<3))-1,i.next_in=c,i.next_out=u,i.avail_in=c<d?d-c+5:5-(c-d),i.avail_out=u<f?f-u+257:257-(u-f),l.hold=m,l.bits=x}},{}],49:[function(n,r,s){var i=n("../utils/common"),a=n("./adler32"),l=n("./crc32"),c=n("./inffast"),d=n("./inftrees"),u=1,h=2,f=0,p=-2,v=1,y=852,b=592;function g(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function x(F){var L;return F&&F.state?(L=F.state,F.total_in=F.total_out=L.total=0,F.msg="",L.wrap&&(F.adler=1&L.wrap),L.mode=v,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new i.Buf32(y),L.distcode=L.distdyn=new i.Buf32(b),L.sane=1,L.back=-1,f):p}function E(F){var L;return F&&F.state?((L=F.state).wsize=0,L.whave=0,L.wnext=0,x(F)):p}function k(F,L){var C,Z;return F&&F.state?(Z=F.state,L<0?(C=0,L=-L):(C=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?p:(Z.window!==null&&Z.wbits!==L&&(Z.window=null),Z.wrap=C,Z.wbits=L,E(F))):p}function I(F,L){var C,Z;return F?(Z=new m,(F.state=Z).window=null,(C=k(F,L))!==f&&(F.state=null),C):p}var R,T,B=!0;function P(F){if(B){var L;for(R=new i.Buf32(512),T=new i.Buf32(32),L=0;L<144;)F.lens[L++]=8;for(;L<256;)F.lens[L++]=9;for(;L<280;)F.lens[L++]=7;for(;L<288;)F.lens[L++]=8;for(d(u,F.lens,0,288,R,0,F.work,{bits:9}),L=0;L<32;)F.lens[L++]=5;d(h,F.lens,0,32,T,0,F.work,{bits:5}),B=!1}F.lencode=R,F.lenbits=9,F.distcode=T,F.distbits=5}function K(F,L,C,Z){var W,U=F.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new i.Buf8(U.wsize)),Z>=U.wsize?(i.arraySet(U.window,L,C-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(Z<(W=U.wsize-U.wnext)&&(W=Z),i.arraySet(U.window,L,C-Z,W,U.wnext),(Z-=W)?(i.arraySet(U.window,L,C-Z,Z,0),U.wnext=Z,U.whave=U.wsize):(U.wnext+=W,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=W))),0}s.inflateReset=E,s.inflateReset2=k,s.inflateResetKeep=x,s.inflateInit=function(F){return I(F,15)},s.inflateInit2=I,s.inflate=function(F,L){var C,Z,W,U,z,q,re,H,O,ie,M,Y,$,fe,me,te,de,ce,ye,ge,S,Q,N,j,w=0,A=new i.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return p;(C=F.state).mode===12&&(C.mode=13),z=F.next_out,W=F.output,re=F.avail_out,U=F.next_in,Z=F.input,q=F.avail_in,H=C.hold,O=C.bits,ie=q,M=re,Q=f;e:for(;;)switch(C.mode){case v:if(C.wrap===0){C.mode=13;break}for(;O<16;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(2&C.wrap&&H===35615){A[C.check=0]=255&H,A[1]=H>>>8&255,C.check=l(C.check,A,2,0),O=H=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&H)<<8)+(H>>8))%31){F.msg="incorrect header check",C.mode=30;break}if((15&H)!=8){F.msg="unknown compression method",C.mode=30;break}if(O-=4,S=8+(15&(H>>>=4)),C.wbits===0)C.wbits=S;else if(S>C.wbits){F.msg="invalid window size",C.mode=30;break}C.dmax=1<<S,F.adler=C.check=1,C.mode=512&H?10:12,O=H=0;break;case 2:for(;O<16;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(C.flags=H,(255&C.flags)!=8){F.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){F.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=H>>8&1),512&C.flags&&(A[0]=255&H,A[1]=H>>>8&255,C.check=l(C.check,A,2,0)),O=H=0,C.mode=3;case 3:for(;O<32;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}C.head&&(C.head.time=H),512&C.flags&&(A[0]=255&H,A[1]=H>>>8&255,A[2]=H>>>16&255,A[3]=H>>>24&255,C.check=l(C.check,A,4,0)),O=H=0,C.mode=4;case 4:for(;O<16;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}C.head&&(C.head.xflags=255&H,C.head.os=H>>8),512&C.flags&&(A[0]=255&H,A[1]=H>>>8&255,C.check=l(C.check,A,2,0)),O=H=0,C.mode=5;case 5:if(1024&C.flags){for(;O<16;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}C.length=H,C.head&&(C.head.extra_len=H),512&C.flags&&(A[0]=255&H,A[1]=H>>>8&255,C.check=l(C.check,A,2,0)),O=H=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(q<(Y=C.length)&&(Y=q),Y&&(C.head&&(S=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),i.arraySet(C.head.extra,Z,U,Y,S)),512&C.flags&&(C.check=l(C.check,Z,Y,U)),q-=Y,U+=Y,C.length-=Y),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(q===0)break e;for(Y=0;S=Z[U+Y++],C.head&&S&&C.length<65536&&(C.head.name+=String.fromCharCode(S)),S&&Y<q;);if(512&C.flags&&(C.check=l(C.check,Z,Y,U)),q-=Y,U+=Y,S)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(q===0)break e;for(Y=0;S=Z[U+Y++],C.head&&S&&C.length<65536&&(C.head.comment+=String.fromCharCode(S)),S&&Y<q;);if(512&C.flags&&(C.check=l(C.check,Z,Y,U)),q-=Y,U+=Y,S)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;O<16;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(H!==(65535&C.check)){F.msg="header crc mismatch",C.mode=30;break}O=H=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),F.adler=C.check=0,C.mode=12;break;case 10:for(;O<32;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}F.adler=C.check=g(H),O=H=0,C.mode=11;case 11:if(C.havedict===0)return F.next_out=z,F.avail_out=re,F.next_in=U,F.avail_in=q,C.hold=H,C.bits=O,2;F.adler=C.check=1,C.mode=12;case 12:if(L===5||L===6)break e;case 13:if(C.last){H>>>=7&O,O-=7&O,C.mode=27;break}for(;O<3;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}switch(C.last=1&H,O-=1,3&(H>>>=1)){case 0:C.mode=14;break;case 1:if(P(C),C.mode=20,L!==6)break;H>>>=2,O-=2;break e;case 2:C.mode=17;break;case 3:F.msg="invalid block type",C.mode=30}H>>>=2,O-=2;break;case 14:for(H>>>=7&O,O-=7&O;O<32;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if((65535&H)!=(H>>>16^65535)){F.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&H,O=H=0,C.mode=15,L===6)break e;case 15:C.mode=16;case 16:if(Y=C.length){if(q<Y&&(Y=q),re<Y&&(Y=re),Y===0)break e;i.arraySet(W,Z,U,Y,z),q-=Y,U+=Y,re-=Y,z+=Y,C.length-=Y;break}C.mode=12;break;case 17:for(;O<14;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(C.nlen=257+(31&H),H>>>=5,O-=5,C.ndist=1+(31&H),H>>>=5,O-=5,C.ncode=4+(15&H),H>>>=4,O-=4,286<C.nlen||30<C.ndist){F.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;O<3;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}C.lens[G[C.have++]]=7&H,H>>>=3,O-=3}for(;C.have<19;)C.lens[G[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,N={bits:C.lenbits},Q=d(0,C.lens,0,19,C.lencode,0,C.work,N),C.lenbits=N.bits,Q){F.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;te=(w=C.lencode[H&(1<<C.lenbits)-1])>>>16&255,de=65535&w,!((me=w>>>24)<=O);){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(de<16)H>>>=me,O-=me,C.lens[C.have++]=de;else{if(de===16){for(j=me+2;O<j;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(H>>>=me,O-=me,C.have===0){F.msg="invalid bit length repeat",C.mode=30;break}S=C.lens[C.have-1],Y=3+(3&H),H>>>=2,O-=2}else if(de===17){for(j=me+3;O<j;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}O-=me,S=0,Y=3+(7&(H>>>=me)),H>>>=3,O-=3}else{for(j=me+7;O<j;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}O-=me,S=0,Y=11+(127&(H>>>=me)),H>>>=7,O-=7}if(C.have+Y>C.nlen+C.ndist){F.msg="invalid bit length repeat",C.mode=30;break}for(;Y--;)C.lens[C.have++]=S}}if(C.mode===30)break;if(C.lens[256]===0){F.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,N={bits:C.lenbits},Q=d(u,C.lens,0,C.nlen,C.lencode,0,C.work,N),C.lenbits=N.bits,Q){F.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,N={bits:C.distbits},Q=d(h,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,N),C.distbits=N.bits,Q){F.msg="invalid distances set",C.mode=30;break}if(C.mode=20,L===6)break e;case 20:C.mode=21;case 21:if(6<=q&&258<=re){F.next_out=z,F.avail_out=re,F.next_in=U,F.avail_in=q,C.hold=H,C.bits=O,c(F,M),z=F.next_out,W=F.output,re=F.avail_out,U=F.next_in,Z=F.input,q=F.avail_in,H=C.hold,O=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;te=(w=C.lencode[H&(1<<C.lenbits)-1])>>>16&255,de=65535&w,!((me=w>>>24)<=O);){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(te&&!(240&te)){for(ce=me,ye=te,ge=de;te=(w=C.lencode[ge+((H&(1<<ce+ye)-1)>>ce)])>>>16&255,de=65535&w,!(ce+(me=w>>>24)<=O);){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}H>>>=ce,O-=ce,C.back+=ce}if(H>>>=me,O-=me,C.back+=me,C.length=de,te===0){C.mode=26;break}if(32&te){C.back=-1,C.mode=12;break}if(64&te){F.msg="invalid literal/length code",C.mode=30;break}C.extra=15&te,C.mode=22;case 22:if(C.extra){for(j=C.extra;O<j;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}C.length+=H&(1<<C.extra)-1,H>>>=C.extra,O-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;te=(w=C.distcode[H&(1<<C.distbits)-1])>>>16&255,de=65535&w,!((me=w>>>24)<=O);){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(!(240&te)){for(ce=me,ye=te,ge=de;te=(w=C.distcode[ge+((H&(1<<ce+ye)-1)>>ce)])>>>16&255,de=65535&w,!(ce+(me=w>>>24)<=O);){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}H>>>=ce,O-=ce,C.back+=ce}if(H>>>=me,O-=me,C.back+=me,64&te){F.msg="invalid distance code",C.mode=30;break}C.offset=de,C.extra=15&te,C.mode=24;case 24:if(C.extra){for(j=C.extra;O<j;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}C.offset+=H&(1<<C.extra)-1,H>>>=C.extra,O-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){F.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(re===0)break e;if(Y=M-re,C.offset>Y){if((Y=C.offset-Y)>C.whave&&C.sane){F.msg="invalid distance too far back",C.mode=30;break}$=Y>C.wnext?(Y-=C.wnext,C.wsize-Y):C.wnext-Y,Y>C.length&&(Y=C.length),fe=C.window}else fe=W,$=z-C.offset,Y=C.length;for(re<Y&&(Y=re),re-=Y,C.length-=Y;W[z++]=fe[$++],--Y;);C.length===0&&(C.mode=21);break;case 26:if(re===0)break e;W[z++]=C.length,re--,C.mode=21;break;case 27:if(C.wrap){for(;O<32;){if(q===0)break e;q--,H|=Z[U++]<<O,O+=8}if(M-=re,F.total_out+=M,C.total+=M,M&&(F.adler=C.check=C.flags?l(C.check,W,M,z-M):a(C.check,W,M,z-M)),M=re,(C.flags?H:g(H))!==C.check){F.msg="incorrect data check",C.mode=30;break}O=H=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;O<32;){if(q===0)break e;q--,H+=Z[U++]<<O,O+=8}if(H!==(4294967295&C.total)){F.msg="incorrect length check",C.mode=30;break}O=H=0}C.mode=29;case 29:Q=1;break e;case 30:Q=-3;break e;case 31:return-4;case 32:default:return p}return F.next_out=z,F.avail_out=re,F.next_in=U,F.avail_in=q,C.hold=H,C.bits=O,(C.wsize||M!==F.avail_out&&C.mode<30&&(C.mode<27||L!==4))&&K(F,F.output,F.next_out,M-F.avail_out)?(C.mode=31,-4):(ie-=F.avail_in,M-=F.avail_out,F.total_in+=ie,F.total_out+=M,C.total+=M,C.wrap&&M&&(F.adler=C.check=C.flags?l(C.check,W,M,F.next_out-M):a(C.check,W,M,F.next_out-M)),F.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(ie==0&&M===0||L===4)&&Q===f&&(Q=-5),Q)},s.inflateEnd=function(F){if(!F||!F.state)return p;var L=F.state;return L.window&&(L.window=null),F.state=null,f},s.inflateGetHeader=function(F,L){var C;return F&&F.state&&2&(C=F.state).wrap?((C.head=L).done=!1,f):p},s.inflateSetDictionary=function(F,L){var C,Z=L.length;return F&&F.state?(C=F.state).wrap!==0&&C.mode!==11?p:C.mode===11&&a(1,L,Z,0)!==C.check?-3:K(F,L,Z,Z)?(C.mode=31,-4):(C.havedict=1,f):p},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,s){var i=n("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,h,f,p,v,y,b,g){var m,x,E,k,I,R,T,B,P,K=g.bits,F=0,L=0,C=0,Z=0,W=0,U=0,z=0,q=0,re=0,H=0,O=null,ie=0,M=new i.Buf16(16),Y=new i.Buf16(16),$=null,fe=0;for(F=0;F<=15;F++)M[F]=0;for(L=0;L<p;L++)M[h[f+L]]++;for(W=K,Z=15;1<=Z&&M[Z]===0;Z--);if(Z<W&&(W=Z),Z===0)return v[y++]=20971520,v[y++]=20971520,g.bits=1,0;for(C=1;C<Z&&M[C]===0;C++);for(W<C&&(W=C),F=q=1;F<=15;F++)if(q<<=1,(q-=M[F])<0)return-1;if(0<q&&(u===0||Z!==1))return-1;for(Y[1]=0,F=1;F<15;F++)Y[F+1]=Y[F]+M[F];for(L=0;L<p;L++)h[f+L]!==0&&(b[Y[h[f+L]]++]=L);if(R=u===0?(O=$=b,19):u===1?(O=a,ie-=257,$=l,fe-=257,256):(O=c,$=d,-1),F=C,I=y,z=L=H=0,E=-1,k=(re=1<<(U=W))-1,u===1&&852<re||u===2&&592<re)return 1;for(;;){for(T=F-z,P=b[L]<R?(B=0,b[L]):b[L]>R?(B=$[fe+b[L]],O[ie+b[L]]):(B=96,0),m=1<<F-z,C=x=1<<U;v[I+(H>>z)+(x-=m)]=T<<24|B<<16|P|0,x!==0;);for(m=1<<F-1;H&m;)m>>=1;if(m!==0?(H&=m-1,H+=m):H=0,L++,--M[F]==0){if(F===Z)break;F=h[f+b[L]]}if(W<F&&(H&k)!==E){for(z===0&&(z=W),I+=C,q=1<<(U=F-z);U+z<Z&&!((q-=M[U+z])<=0);)U++,q<<=1;if(re+=1<<U,u===1&&852<re||u===2&&592<re)return 1;v[E=H&k]=W<<24|U<<16|I-y|0}}return H!==0&&(v[I+H]=F-z<<24|64<<16|0),g.bits=W,0}},{"../utils/common":41}],51:[function(n,r,s){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,s){var i=n("../utils/common"),a=0,l=1;function c(w){for(var A=w.length;0<=--A;)w[A]=0}var d=0,u=29,h=256,f=h+1+u,p=30,v=19,y=2*f+1,b=15,g=16,m=7,x=256,E=16,k=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(f+2));c(K);var F=new Array(2*p);c(F);var L=new Array(512);c(L);var C=new Array(256);c(C);var Z=new Array(u);c(Z);var W,U,z,q=new Array(p);function re(w,A,G,X,V){this.static_tree=w,this.extra_bits=A,this.extra_base=G,this.elems=X,this.max_length=V,this.has_stree=w&&w.length}function H(w,A){this.dyn_tree=w,this.max_code=0,this.stat_desc=A}function O(w){return w<256?L[w]:L[256+(w>>>7)]}function ie(w,A){w.pending_buf[w.pending++]=255&A,w.pending_buf[w.pending++]=A>>>8&255}function M(w,A,G){w.bi_valid>g-G?(w.bi_buf|=A<<w.bi_valid&65535,ie(w,w.bi_buf),w.bi_buf=A>>g-w.bi_valid,w.bi_valid+=G-g):(w.bi_buf|=A<<w.bi_valid&65535,w.bi_valid+=G)}function Y(w,A,G){M(w,G[2*A],G[2*A+1])}function $(w,A){for(var G=0;G|=1&w,w>>>=1,G<<=1,0<--A;);return G>>>1}function fe(w,A,G){var X,V,se=new Array(b+1),ne=0;for(X=1;X<=b;X++)se[X]=ne=ne+G[X-1]<<1;for(V=0;V<=A;V++){var oe=w[2*V+1];oe!==0&&(w[2*V]=$(se[oe]++,oe))}}function me(w){var A;for(A=0;A<f;A++)w.dyn_ltree[2*A]=0;for(A=0;A<p;A++)w.dyn_dtree[2*A]=0;for(A=0;A<v;A++)w.bl_tree[2*A]=0;w.dyn_ltree[2*x]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function te(w){8<w.bi_valid?ie(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function de(w,A,G,X){var V=2*A,se=2*G;return w[V]<w[se]||w[V]===w[se]&&X[A]<=X[G]}function ce(w,A,G){for(var X=w.heap[G],V=G<<1;V<=w.heap_len&&(V<w.heap_len&&de(A,w.heap[V+1],w.heap[V],w.depth)&&V++,!de(A,X,w.heap[V],w.depth));)w.heap[G]=w.heap[V],G=V,V<<=1;w.heap[G]=X}function ye(w,A,G){var X,V,se,ne,oe=0;if(w.last_lit!==0)for(;X=w.pending_buf[w.d_buf+2*oe]<<8|w.pending_buf[w.d_buf+2*oe+1],V=w.pending_buf[w.l_buf+oe],oe++,X===0?Y(w,V,A):(Y(w,(se=C[V])+h+1,A),(ne=R[se])!==0&&M(w,V-=Z[se],ne),Y(w,se=O(--X),G),(ne=T[se])!==0&&M(w,X-=q[se],ne)),oe<w.last_lit;);Y(w,x,A)}function ge(w,A){var G,X,V,se=A.dyn_tree,ne=A.stat_desc.static_tree,oe=A.stat_desc.has_stree,D=A.stat_desc.elems,J=-1;for(w.heap_len=0,w.heap_max=y,G=0;G<D;G++)se[2*G]!==0?(w.heap[++w.heap_len]=J=G,w.depth[G]=0):se[2*G+1]=0;for(;w.heap_len<2;)se[2*(V=w.heap[++w.heap_len]=J<2?++J:0)]=1,w.depth[V]=0,w.opt_len--,oe&&(w.static_len-=ne[2*V+1]);for(A.max_code=J,G=w.heap_len>>1;1<=G;G--)ce(w,se,G);for(V=D;G=w.heap[1],w.heap[1]=w.heap[w.heap_len--],ce(w,se,1),X=w.heap[1],w.heap[--w.heap_max]=G,w.heap[--w.heap_max]=X,se[2*V]=se[2*G]+se[2*X],w.depth[V]=(w.depth[G]>=w.depth[X]?w.depth[G]:w.depth[X])+1,se[2*G+1]=se[2*X+1]=V,w.heap[1]=V++,ce(w,se,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(ee,ae){var ke,je,We,Pe,zn,ho,Vt=ae.dyn_tree,Fl=ae.max_code,Si=ae.stat_desc.static_tree,ji=ae.stat_desc.has_stree,qy=ae.stat_desc.extra_bits,Gu=ae.stat_desc.extra_base,fo=ae.stat_desc.max_length,Ci=0;for(Pe=0;Pe<=b;Pe++)ee.bl_count[Pe]=0;for(Vt[2*ee.heap[ee.heap_max]+1]=0,ke=ee.heap_max+1;ke<y;ke++)fo<(Pe=Vt[2*Vt[2*(je=ee.heap[ke])+1]+1]+1)&&(Pe=fo,Ci++),Vt[2*je+1]=Pe,Fl<je||(ee.bl_count[Pe]++,zn=0,Gu<=je&&(zn=qy[je-Gu]),ho=Vt[2*je],ee.opt_len+=ho*(Pe+zn),ji&&(ee.static_len+=ho*(Si[2*je+1]+zn)));if(Ci!==0){do{for(Pe=fo-1;ee.bl_count[Pe]===0;)Pe--;ee.bl_count[Pe]--,ee.bl_count[Pe+1]+=2,ee.bl_count[fo]--,Ci-=2}while(0<Ci);for(Pe=fo;Pe!==0;Pe--)for(je=ee.bl_count[Pe];je!==0;)Fl<(We=ee.heap[--ke])||(Vt[2*We+1]!==Pe&&(ee.opt_len+=(Pe-Vt[2*We+1])*Vt[2*We],Vt[2*We+1]=Pe),je--)}}(w,A),fe(se,J,w.bl_count)}function S(w,A,G){var X,V,se=-1,ne=A[1],oe=0,D=7,J=4;for(ne===0&&(D=138,J=3),A[2*(G+1)+1]=65535,X=0;X<=G;X++)V=ne,ne=A[2*(X+1)+1],++oe<D&&V===ne||(oe<J?w.bl_tree[2*V]+=oe:V!==0?(V!==se&&w.bl_tree[2*V]++,w.bl_tree[2*E]++):oe<=10?w.bl_tree[2*k]++:w.bl_tree[2*I]++,se=V,J=(oe=0)===ne?(D=138,3):V===ne?(D=6,3):(D=7,4))}function Q(w,A,G){var X,V,se=-1,ne=A[1],oe=0,D=7,J=4;for(ne===0&&(D=138,J=3),X=0;X<=G;X++)if(V=ne,ne=A[2*(X+1)+1],!(++oe<D&&V===ne)){if(oe<J)for(;Y(w,V,w.bl_tree),--oe!=0;);else V!==0?(V!==se&&(Y(w,V,w.bl_tree),oe--),Y(w,E,w.bl_tree),M(w,oe-3,2)):oe<=10?(Y(w,k,w.bl_tree),M(w,oe-3,3)):(Y(w,I,w.bl_tree),M(w,oe-11,7));se=V,J=(oe=0)===ne?(D=138,3):V===ne?(D=6,3):(D=7,4)}}c(q);var N=!1;function j(w,A,G,X){M(w,(d<<1)+(X?1:0),3),function(V,se,ne,oe){te(V),ie(V,ne),ie(V,~ne),i.arraySet(V.pending_buf,V.window,se,ne,V.pending),V.pending+=ne}(w,A,G)}s._tr_init=function(w){N||(function(){var A,G,X,V,se,ne=new Array(b+1);for(V=X=0;V<u-1;V++)for(Z[V]=X,A=0;A<1<<R[V];A++)C[X++]=V;for(C[X-1]=V,V=se=0;V<16;V++)for(q[V]=se,A=0;A<1<<T[V];A++)L[se++]=V;for(se>>=7;V<p;V++)for(q[V]=se<<7,A=0;A<1<<T[V]-7;A++)L[256+se++]=V;for(G=0;G<=b;G++)ne[G]=0;for(A=0;A<=143;)K[2*A+1]=8,A++,ne[8]++;for(;A<=255;)K[2*A+1]=9,A++,ne[9]++;for(;A<=279;)K[2*A+1]=7,A++,ne[7]++;for(;A<=287;)K[2*A+1]=8,A++,ne[8]++;for(fe(K,f+1,ne),A=0;A<p;A++)F[2*A+1]=5,F[2*A]=$(A,5);W=new re(K,R,h+1,f,b),U=new re(F,T,0,p,b),z=new re(new Array(0),B,0,v,m)}(),N=!0),w.l_desc=new H(w.dyn_ltree,W),w.d_desc=new H(w.dyn_dtree,U),w.bl_desc=new H(w.bl_tree,z),w.bi_buf=0,w.bi_valid=0,me(w)},s._tr_stored_block=j,s._tr_flush_block=function(w,A,G,X){var V,se,ne=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=function(oe){var D,J=4093624447;for(D=0;D<=31;D++,J>>>=1)if(1&J&&oe.dyn_ltree[2*D]!==0)return a;if(oe.dyn_ltree[18]!==0||oe.dyn_ltree[20]!==0||oe.dyn_ltree[26]!==0)return l;for(D=32;D<h;D++)if(oe.dyn_ltree[2*D]!==0)return l;return a}(w)),ge(w,w.l_desc),ge(w,w.d_desc),ne=function(oe){var D;for(S(oe,oe.dyn_ltree,oe.l_desc.max_code),S(oe,oe.dyn_dtree,oe.d_desc.max_code),ge(oe,oe.bl_desc),D=v-1;3<=D&&oe.bl_tree[2*P[D]+1]===0;D--);return oe.opt_len+=3*(D+1)+5+5+4,D}(w),V=w.opt_len+3+7>>>3,(se=w.static_len+3+7>>>3)<=V&&(V=se)):V=se=G+5,G+4<=V&&A!==-1?j(w,A,G,X):w.strategy===4||se===V?(M(w,2+(X?1:0),3),ye(w,K,F)):(M(w,4+(X?1:0),3),function(oe,D,J,ee){var ae;for(M(oe,D-257,5),M(oe,J-1,5),M(oe,ee-4,4),ae=0;ae<ee;ae++)M(oe,oe.bl_tree[2*P[ae]+1],3);Q(oe,oe.dyn_ltree,D-1),Q(oe,oe.dyn_dtree,J-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,ne+1),ye(w,w.dyn_ltree,w.dyn_dtree)),me(w),X&&te(w)},s._tr_tally=function(w,A,G){return w.pending_buf[w.d_buf+2*w.last_lit]=A>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&A,w.pending_buf[w.l_buf+w.last_lit]=255&G,w.last_lit++,A===0?w.dyn_ltree[2*G]++:(w.matches++,A--,w.dyn_ltree[2*(C[G]+h+1)]++,w.dyn_dtree[2*O(A)]++),w.last_lit===w.lit_bufsize-1},s._tr_align=function(w){M(w,2,3),Y(w,x,K),function(A){A.bi_valid===16?(ie(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)}(w)}},{"../utils/common":41}],53:[function(n,r,s){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,s){(function(i){(function(a,l){if(!a.setImmediate){var c,d,u,h,f=1,p={},v=!1,y=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,c={}.toString.call(a.process)==="[object process]"?function(E){process.nextTick(function(){m(E)})}:function(){if(a.postMessage&&!a.importScripts){var E=!0,k=a.onmessage;return a.onmessage=function(){E=!1},a.postMessage("","*"),a.onmessage=k,E}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",x,!1):a.attachEvent("onmessage",x),function(E){a.postMessage(h+E,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(E){m(E.data)},function(E){u.port2.postMessage(E)}):y&&"onreadystatechange"in y.createElement("script")?(d=y.documentElement,function(E){var k=y.createElement("script");k.onreadystatechange=function(){m(E),k.onreadystatechange=null,d.removeChild(k),k=null},d.appendChild(k)}):function(E){setTimeout(m,0,E)},b.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var R={callback:E,args:k};return p[f]=R,c(f),f++},b.clearImmediate=g}function g(E){delete p[E]}function m(E){if(v)setTimeout(m,0,E);else{var k=p[E];if(k){v=!0;try{(function(I){var R=I.callback,T=I.args;switch(T.length){case 0:R();break;case 1:R(T[0]);break;case 2:R(T[0],T[1]);break;case 3:R(T[0],T[1],T[2]);break;default:R.apply(l,T)}})(k)}finally{g(E),v=!1}}}}function x(E){E.source===a&&typeof E.data=="string"&&E.data.indexOf(h)===0&&m(+E.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof lt<"u"?lt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(x5);var v5={exports:{}};(function(e,t){(function(n,r){r()})(lt,function(){function n(d,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,u,h){var f=new XMLHttpRequest;f.open("GET",d),f.responseType="blob",f.onload=function(){c(f.response,u,h)},f.onerror=function(){console.error("could not download file")},f.send()}function s(d){var u=new XMLHttpRequest;u.open("HEAD",d,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function i(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof lt=="object"&&lt.global===lt?lt:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,u,h){var f=a.URL||a.webkitURL,p=document.createElement("a");u=u||d.name||"download",p.download=u,p.rel="noopener",typeof d=="string"?(p.href=d,p.origin===location.origin?i(p):s(p.href)?r(d,u,h):i(p,p.target="_blank")):(p.href=f.createObjectURL(d),setTimeout(function(){f.revokeObjectURL(p.href)},4e4),setTimeout(function(){i(p)},0))}:"msSaveOrOpenBlob"in navigator?function(d,u,h){if(u=u||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,h),u);else if(s(d))r(d,u,h);else{var f=document.createElement("a");f.href=d,f.target="_blank",setTimeout(function(){i(f)})}}:function(d,u,h,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof d=="string")return r(d,u,h);var p=d.type==="application/octet-stream",v=/constructor/i.test(a.HTMLElement)||a.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||p&&v||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var x=b.result;x=y?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=x:location=x,f=null},b.readAsDataURL(d)}else{var g=a.URL||a.webkitURL,m=g.createObjectURL(d);f?f.location=m:location.href=m,f=null,setTimeout(function(){g.revokeObjectURL(m)},4e4)}});a.saveAs=c.saveAs=c,e.exports=c})})(v5);const b5=async(e,t)=>{try{const{data:n,error:r}=await we.from("shared_entities").select("*").eq("id",e).single();if(r)throw r;if(n.share_type==="private"&&n.password!==t)throw new Error("Invalid password");return await we.from("shared_entities").update({access_count:n.access_count+1}).eq("id",e),!0}catch(n){throw console.error("Error accessing shared entity:",n),n}},_5=()=>{const{colors:e}=ve(),{id:t}=s1(),n=ot(),{projects:r,openProject:s}=Xe(),[i,a]=_.useState(null),[l,c]=_.useState(""),[d,u]=_.useState(!0),[h,f]=_.useState(null),[p,v]=_.useState(""),[y,b]=_.useState(!1),[g,m]=_.useState("Shared Item"),[x,E]=_.useState("plaintext"),[k,I]=_.useState(!1);_.useEffect(()=>{t&&R()},[t]);const R=async L=>{if(t){u(!0),f(null);try{if(!await b5(t,L)){f("Access denied. Invalid password or expired link."),b(!0),u(!1);return}const Z={id:t,entityId:"mock-entity-id",entityType:"file",userId:"user-1",shareType:"public",allowDownload:!0,allowCopy:!0,accessCount:5,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(a(Z),Z.password&&!L){b(!0),u(!1);return}Z.entityType==="file"?await T(Z.entityId):Z.entityType==="project"&&await B(Z.entityId)}catch(C){console.error("Error loading shared entity:",C),f(C.message||"Failed to load shared content")}finally{u(!1)}}},T=async L=>{let C="",Z="Shared File";for(const W of r){const U=W.files.find(z=>z.id===L);if(U&&U.type==="file"){C=U.content||"",Z=U.name,E(vg(U.name));break}}c(C),m(Z)},B=async L=>{const C=r.find(Z=>Z.id===L);C?(m(C.name),s(C),n("/editor")):f("Project not found")},P=L=>{L.preventDefault(),R(p)},K=async()=>{if(l)try{await navigator.clipboard.writeText(l),I(!0),setTimeout(()=>I(!1),2e3)}catch(L){console.error("Failed to copy content:",L),f("Failed to copy content to clipboard")}},F=()=>{if(!l||!i)return;const L=new Blob([l],{type:"text/plain"}),C=URL.createObjectURL(L),Z=document.createElement("a");Z.href=C,Z.download=g,document.body.appendChild(Z),Z.click(),document.body.removeChild(Z),URL.revokeObjectURL(C)};return y?o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",style:{backgroundColor:e.background},children:o.jsxs("div",{className:"w-full max-w-md p-6 rounded-lg shadow-lg",style:{backgroundColor:e.surface},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(ss,{size:24,color:e.warning}),o.jsx("h1",{className:"text-xl font-semibold",style:{color:e.text},children:"Password Protected"})]}),o.jsx("p",{className:"mb-4",style:{color:e.textSecondary},children:"This shared content is password protected. Please enter the password to access it."}),o.jsxs("form",{onSubmit:P,children:[o.jsx("input",{type:"password",value:p,onChange:L=>v(L.target.value),placeholder:"Enter password",className:"w-full p-2 mb-4 border rounded-md",style:{backgroundColor:e.background,color:e.text,borderColor:e.border},required:!0}),h&&o.jsx("div",{className:"p-2 mb-4 rounded-md",style:{backgroundColor:`${e.error}15`,color:e.error},children:h}),o.jsx("button",{type:"submit",className:"w-full p-2 rounded-md",style:{backgroundColor:e.primary,color:"white"},disabled:d,children:d?"Checking...":"Submit"})]})]})}):d?o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center",style:{backgroundColor:e.background},children:[o.jsx("div",{className:"animate-spin mb-4",children:o.jsxs("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",style:{color:e.border}}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",style:{color:e.primary}})]})}),o.jsx("p",{style:{color:e.textSecondary},children:"Loading shared content..."})]}):h?o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",style:{backgroundColor:e.background},children:o.jsxs("div",{className:"w-full max-w-md p-6 rounded-lg shadow-lg text-center",style:{backgroundColor:e.surface},children:[o.jsx(Bn,{size:48,color:e.error,className:"mx-auto mb-4"}),o.jsx("h1",{className:"text-xl font-semibold mb-2",style:{color:e.text},children:"Error"}),o.jsx("p",{className:"mb-6",style:{color:e.textSecondary},children:h}),o.jsx("button",{onClick:()=>n("/"),className:"px-4 py-2 rounded-md",style:{backgroundColor:e.primary,color:"white"},children:"Go Home"})]})}):i?o.jsxs("div",{className:"min-h-screen flex flex-col",style:{backgroundColor:e.background},children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b",style:{backgroundColor:e.surface,borderColor:e.border},children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("button",{className:"mr-4",onClick:()=>n(-1),"aria-label":"Go back",children:o.jsx(_i,{size:20,color:e.primary})}),o.jsxs("div",{className:"flex items-center gap-2",children:[i.entityType==="file"?o.jsx(Gs,{size:20,color:e.primary}):o.jsx(ao,{size:20,color:e.primary}),o.jsx("h1",{className:"text-lg font-semibold",style:{color:e.text},children:g})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-1 text-sm",style:{color:e.textSecondary},children:[o.jsx(Cl,{size:16}),o.jsxs("span",{children:[i.accessCount," views"]})]}),i.allowCopy&&o.jsx("button",{className:"p-2 rounded-md",onClick:K,disabled:!l,title:"Copy content",style:{backgroundColor:k?e.success:e.surface,color:k?"white":e.text,border:`1px solid ${k?e.success:e.border}`},children:o.jsx(Nr,{size:18})}),i.allowDownload&&o.jsx("button",{className:"p-2 rounded-md",onClick:F,disabled:!l,title:"Download",style:{backgroundColor:e.surface,color:e.text,border:`1px solid ${e.border}`},children:o.jsx(io,{size:18})})]})]}),o.jsxs("div",{className:"flex flex-wrap gap-4 p-2 text-sm border-b",style:{backgroundColor:e.surface,borderColor:e.border,color:e.textSecondary},children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Ut,{size:14}),o.jsxs("span",{children:["Shared by: ",i.userId]})]}),i.expiresAt&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Zg,{size:14}),o.jsxs("span",{children:["Expires: ",new Date(i.expiresAt).toLocaleDateString()]})]})]}),o.jsx("div",{className:"flex-1",children:l&&i.entityType==="file"&&o.jsx("div",{className:"h-full",children:w5?o.jsx(zy,{code:l,language:x,onChange:()=>{},readOnly:!0}):o.jsx(Ly,{code:l,language:x,onChange:()=>{},readOnly:!0})})})]}):o.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",style:{backgroundColor:e.background},children:o.jsxs("div",{className:"w-full max-w-md p-6 rounded-lg shadow-lg text-center",style:{backgroundColor:e.surface},children:[o.jsx(Bn,{size:48,color:e.warning,className:"mx-auto mb-4"}),o.jsx("h1",{className:"text-xl font-semibold mb-2",style:{color:e.text},children:"Not Found"}),o.jsx("p",{className:"mb-6",style:{color:e.textSecondary},children:"The shared content you're looking for doesn't exist or has expired."}),o.jsx("button",{onClick:()=>n("/"),className:"px-4 py-2 rounded-md",style:{backgroundColor:e.primary,color:"white"},children:"Go Home"})]})})},w5=window.innerWidth>768,k5=({children:e})=>{const{user:t,loading:n,refreshSession:r}=ht(),s=Fr(),[i,a]=_.useState(!0);return _.useEffect(()=>{console.log("ProtectedRoute - Auth state:",{user:t==null?void 0:t.id,loading:n,path:s.pathname})},[t,n,s]),_.useEffect(()=>{(async()=>{!t&&!n&&(console.log("Attempting to refresh session"),await r())})()},[]),_.useEffect(()=>{const l=setTimeout(()=>{i&&(console.log("Force ending loading state after timeout"),a(!1))},3e3);return()=>clearTimeout(l)},[i]),_.useEffect(()=>{if(!n){const l=setTimeout(()=>{a(!1)},300);return()=>clearTimeout(l)}},[n]),n&&i?o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"loading-spinner"}),o.jsx("p",{className:"loading-text",children:"Loading application..."}),o.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .loading-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            background-color: #1E1E1E;
          }
          
          .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid #3794FF;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
          }
          
          .loading-text {
            margin-top: 16px;
            color: #CCCCCC;
          }
          
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}})]}):t?o.jsx(o.Fragment,{children:e}):(console.log("Not authenticated, redirecting to /auth"),o.jsx(Nu,{to:"/auth",state:{from:s},replace:!0}))};function S5(){const{user:e,loading:t,refreshSession:n}=ht(),[r,s]=_.useState(!0);return _.useEffect(()=>{(async()=>{console.log("Auth callback component - Initial state:",{user:e?"exists":"null",loading:t});try{!e&&!t&&(console.log("Attempting to refresh session in callback"),await n())}catch(a){console.error("Error processing callback:",a)}finally{setTimeout(()=>{s(!1)},500)}})()},[]),t||r?o.jsxs("div",{style:{padding:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1E1E1E",color:"#FFFFFF"},children:[o.jsx("div",{style:{border:"4px solid rgba(255, 255, 255, 0.1)",borderRadius:"50%",borderTop:"4px solid #3794FF",width:"40px",height:"40px",animation:"spin 1s linear infinite"}}),o.jsx("p",{style:{marginTop:"20px"},children:"Processing login..."}),o.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]}):(console.log("Auth callback complete, redirecting to:",e?"/editor":"/auth"),o.jsx(Nu,{to:e?"/editor":"/auth",replace:!0}))}function j5(){const[e,t]=_.useState(null);return _.useEffect(()=>{const n=r=>{console.error("Global error:",r),t(r.message)};return window.addEventListener("error",n),()=>window.removeEventListener("error",n)},[]),e?o.jsxs("div",{style:{padding:"20px",backgroundColor:"#1E1E1E",color:"#FFFFFF",height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[o.jsx("h2",{children:"Something went wrong"}),o.jsx("p",{children:e}),o.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"20px",padding:"8px 16px",backgroundColor:"#3794FF",border:"none",borderRadius:"4px",color:"white",cursor:"pointer"},children:"Reload App"})]}):o.jsxs(mg,{children:[o.jsx(Ke,{path:"/",element:o.jsx(B6,{})}),o.jsx(Ke,{path:"/onboarding",element:o.jsx(O6,{})}),o.jsx(Ke,{path:"/auth",element:o.jsx(F6,{})}),o.jsx(Ke,{path:"/auth/callback",element:o.jsx(S5,{})}),o.jsx(Ke,{path:"/share/:type/:id",element:o.jsx(_5,{})}),o.jsxs(Ke,{path:"/",element:o.jsx(k5,{children:o.jsx(vS,{})}),children:[o.jsx(Ke,{index:!0,element:o.jsx(Nu,{to:"/editor\\",replace:!0})}),o.jsx(Ke,{path:"editor",element:o.jsx(mN,{})}),o.jsx(Ke,{path:"explorer",element:o.jsx(J4,{})}),o.jsx(Ke,{path:"terminal",element:o.jsx(A3,{})}),o.jsx(Ke,{path:"videos",element:o.jsx(C6,{})}),o.jsx(Ke,{path:"collaboration",element:o.jsx(m5,{})}),o.jsx(Ke,{path:"shared",element:o.jsx(y5,{})}),o.jsx(Ke,{path:"settings/*",element:o.jsx(KA,{})}),o.jsx(Ke,{path:"search",element:o.jsx(GA,{})}),o.jsx(Ke,{path:"*",element:o.jsx(A6,{})})]})]})}function C5(){return o.jsx(z1,{children:o.jsx($1,{children:o.jsx(ew,{children:o.jsx(tw,{children:o.jsx(N1,{children:o.jsx(j5,{})})})})})})}const E5=Vf("SplashScreen",{web:()=>Yr(()=>import("./web-CjdkHHF5.js"),[]).then(e=>new e.SplashScreenWeb)});var Id;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Id||(Id={}));var qf;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(qf||(qf={}));const N5=Vf("StatusBar");ex.isNativePlatform()&&(E5.hide({fadeOutDuration:500}),N5.setStyle({style:Id.Dark}));vc.createRoot(document.getElementById("root")).render(o.jsx(Xa.StrictMode,{children:o.jsx(C5,{})}));
